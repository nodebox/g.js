(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.g = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
(function (process,global,setImmediate){
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.async=n.async||{})}(this,function(n){"use strict";function t(n,t){t|=0;for(var r=Math.max(n.length-t,0),e=Array(r),u=0;u<r;u++)e[u]=n[t+u];return e}var r=function(n){var r=t(arguments,1);return function(){var e=t(arguments);return n.apply(null,r.concat(e))}},e=function(n){return function(){var r=t(arguments),e=r.pop();n.call(this,r,e)}};function u(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}var i="function"==typeof setImmediate&&setImmediate,o="object"==typeof process&&"function"==typeof process.nextTick;function c(n){setTimeout(n,0)}function a(n){return function(r){var e=t(arguments,1);n(function(){r.apply(null,e)})}}var f=a(i?setImmediate:o?process.nextTick:c);function l(n){return e(function(t,r){var e;try{e=n.apply(this,t)}catch(n){return r(n)}u(e)&&"function"==typeof e.then?e.then(function(n){s(r,null,n)},function(n){s(r,n.message?n:new Error(n))}):r(null,e)})}function s(n,t,r){try{n(t,r)}catch(n){f(p,n)}}function p(n){throw n}var v="function"==typeof Symbol;function h(n){return v&&"AsyncFunction"===n[Symbol.toStringTag]}function y(n){return h(n)?l(n):n}function d(n){return function(r){var u=t(arguments,1),i=e(function(t,e){var u=this;return n(r,function(n,r){y(n).apply(u,t.concat(r))},e)});return u.length?i.apply(this,u):i}}var m="object"==typeof global&&global&&global.Object===Object&&global,g="object"==typeof self&&self&&self.Object===Object&&self,b=m||g||Function("return this")(),j=b.Symbol,S=Object.prototype,k=S.hasOwnProperty,L=S.toString,O=j?j.toStringTag:void 0;var w=Object.prototype.toString;var x="[object Null]",E="[object Undefined]",A=j?j.toStringTag:void 0;function T(n){return null==n?void 0===n?E:x:A&&A in Object(n)?function(n){var t=k.call(n,O),r=n[O];try{n[O]=void 0;var e=!0}catch(n){}var u=L.call(n);return e&&(t?n[O]=r:delete n[O]),u}(n):function(n){return w.call(n)}(n)}var B="[object AsyncFunction]",F="[object Function]",I="[object GeneratorFunction]",_="[object Proxy]";var M=9007199254740991;function U(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=M}function q(n){return null!=n&&U(n.length)&&!function(n){if(!u(n))return!1;var t=T(n);return t==F||t==I||t==B||t==_}(n)}var z={};function P(){}function V(n){return function(){if(null!==n){var t=n;n=null,t.apply(this,arguments)}}}var D="function"==typeof Symbol&&Symbol.iterator,R=function(n){return D&&n[D]&&n[D]()};function C(n){return null!=n&&"object"==typeof n}var $="[object Arguments]";function W(n){return C(n)&&T(n)==$}var N=Object.prototype,Q=N.hasOwnProperty,G=N.propertyIsEnumerable,H=W(function(){return arguments}())?W:function(n){return C(n)&&Q.call(n,"callee")&&!G.call(n,"callee")},J=Array.isArray;var K="object"==typeof n&&n&&!n.nodeType&&n,X=K&&"object"==typeof module&&module&&!module.nodeType&&module,Y=X&&X.exports===K?b.Buffer:void 0,Z=(Y?Y.isBuffer:void 0)||function(){return!1},nn=9007199254740991,tn=/^(?:0|[1-9]\d*)$/;function rn(n,t){var r=typeof n;return!!(t=null==t?nn:t)&&("number"==r||"symbol"!=r&&tn.test(n))&&n>-1&&n%1==0&&n<t}var en={};en["[object Float32Array]"]=en["[object Float64Array]"]=en["[object Int8Array]"]=en["[object Int16Array]"]=en["[object Int32Array]"]=en["[object Uint8Array]"]=en["[object Uint8ClampedArray]"]=en["[object Uint16Array]"]=en["[object Uint32Array]"]=!0,en["[object Arguments]"]=en["[object Array]"]=en["[object ArrayBuffer]"]=en["[object Boolean]"]=en["[object DataView]"]=en["[object Date]"]=en["[object Error]"]=en["[object Function]"]=en["[object Map]"]=en["[object Number]"]=en["[object Object]"]=en["[object RegExp]"]=en["[object Set]"]=en["[object String]"]=en["[object WeakMap]"]=!1;var un,on="object"==typeof n&&n&&!n.nodeType&&n,cn=on&&"object"==typeof module&&module&&!module.nodeType&&module,an=cn&&cn.exports===on&&m.process,fn=function(){try{var n=cn&&cn.require&&cn.require("util").types;return n||an&&an.binding&&an.binding("util")}catch(n){}}(),ln=fn&&fn.isTypedArray,sn=ln?(un=ln,function(n){return un(n)}):function(n){return C(n)&&U(n.length)&&!!en[T(n)]},pn=Object.prototype.hasOwnProperty;function vn(n,t){var r=J(n),e=!r&&H(n),u=!r&&!e&&Z(n),i=!r&&!e&&!u&&sn(n),o=r||e||u||i,c=o?function(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}(n.length,String):[],a=c.length;for(var f in n)!t&&!pn.call(n,f)||o&&("length"==f||u&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||rn(f,a))||c.push(f);return c}var hn=Object.prototype;var yn=function(n,t){return function(r){return n(t(r))}}(Object.keys,Object),dn=Object.prototype.hasOwnProperty;function mn(n){if(r=(t=n)&&t.constructor,t!==("function"==typeof r&&r.prototype||hn))return yn(n);var t,r,e=[];for(var u in Object(n))dn.call(n,u)&&"constructor"!=u&&e.push(u);return e}function gn(n){return q(n)?vn(n):mn(n)}function bn(n){if(q(n))return function(n){var t=-1,r=n.length;return function(){return++t<r?{value:n[t],key:t}:null}}(n);var t,r,e,u,i=R(n);return i?function(n){var t=-1;return function(){var r=n.next();return r.done?null:(t++,{value:r.value,key:t})}}(i):(r=gn(t=n),e=-1,u=r.length,function(){var n=r[++e];return e<u?{value:t[n],key:n}:null})}function jn(n){return function(){if(null===n)throw new Error("Callback was already called.");var t=n;n=null,t.apply(this,arguments)}}function Sn(n){return function(t,r,e){if(e=V(e||P),n<=0||!t)return e(null);var u=bn(t),i=!1,o=0,c=!1;function a(n,t){if(o-=1,n)i=!0,e(n);else{if(t===z||i&&o<=0)return i=!0,e(null);c||f()}}function f(){for(c=!0;o<n&&!i;){var t=u();if(null===t)return i=!0,void(o<=0&&e(null));o+=1,r(t.value,t.key,jn(a))}c=!1}f()}}function kn(n,t,r,e){Sn(t)(n,y(r),e)}function Ln(n,t){return function(r,e,u){return n(r,t,e,u)}}function On(n,t,r){r=V(r||P);var e=0,u=0,i=n.length;function o(n,t){n?r(n):++u!==i&&t!==z||r(null)}for(0===i&&r(null);e<i;e++)t(n[e],e,jn(o))}var wn=Ln(kn,1/0),xn=function(n,t,r){(q(n)?On:wn)(n,y(t),r)};function En(n){return function(t,r,e){return n(xn,t,y(r),e)}}function An(n,t,r,e){e=e||P,t=t||[];var u=[],i=0,o=y(r);n(t,function(n,t,r){var e=i++;o(n,function(n,t){u[e]=t,r(n)})},function(n){e(n,u)})}var Tn=En(An),Bn=d(Tn);function Fn(n){return function(t,r,e,u){return n(Sn(r),t,y(e),u)}}var In=Fn(An),_n=Ln(In,1),Mn=d(_n);function Un(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==t(n[r],r,n););return n}var qn,zn=function(n,t,r){for(var e=-1,u=Object(n),i=r(n),o=i.length;o--;){var c=i[qn?o:++e];if(!1===t(u[c],c,u))break}return n};function Pn(n,t){return n&&zn(n,t,gn)}function Vn(n){return n!=n}function Dn(n,t,r){return t==t?function(n,t,r){for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}(n,t,r):function(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}(n,Vn,r)}var Rn=function(n,r,e){"function"==typeof r&&(e=r,r=null),e=V(e||P);var u=gn(n).length;if(!u)return e(null);r||(r=u);var i={},o=0,c=!1,a=Object.create(null),f=[],l=[],s={};function p(n,r){f.push(function(){!function(n,r){if(c)return;var u=jn(function(r,u){if(o--,arguments.length>2&&(u=t(arguments,1)),r){var f={};Pn(i,function(n,t){f[t]=n}),f[n]=u,c=!0,a=Object.create(null),e(r,f)}else i[n]=u,Un(a[n]||[],function(n){n()}),v()});o++;var f=y(r[r.length-1]);r.length>1?f(i,u):f(u)}(n,r)})}function v(){if(0===f.length&&0===o)return e(null,i);for(;f.length&&o<r;){f.shift()()}}function h(t){var r=[];return Pn(n,function(n,e){J(n)&&Dn(n,t,0)>=0&&r.push(e)}),r}Pn(n,function(t,r){if(!J(t))return p(r,[t]),void l.push(r);var e=t.slice(0,t.length-1),u=e.length;if(0===u)return p(r,t),void l.push(r);s[r]=u,Un(e,function(i){if(!n[i])throw new Error("async.auto task `"+r+"` has a non-existent dependency `"+i+"` in "+e.join(", "));!function(n,t){var r=a[n];r||(r=a[n]=[]);r.push(t)}(i,function(){0===--u&&p(r,t)})})}),function(){var n,t=0;for(;l.length;)n=l.pop(),t++,Un(h(n),function(n){0==--s[n]&&l.push(n)});if(t!==u)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),v()};function Cn(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}var $n="[object Symbol]";var Wn=1/0,Nn=j?j.prototype:void 0,Qn=Nn?Nn.toString:void 0;function Gn(n){if("string"==typeof n)return n;if(J(n))return Cn(n,Gn)+"";if(function(n){return"symbol"==typeof n||C(n)&&T(n)==$n}(n))return Qn?Qn.call(n):"";var t=n+"";return"0"==t&&1/n==-Wn?"-0":t}function Hn(n,t,r){var e=n.length;return r=void 0===r?e:r,!t&&r>=e?n:function(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),(r=r>u?u:r)<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(u);++e<u;)i[e]=n[e+t];return i}(n,t,r)}var Jn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Kn="[\\ud800-\\udfff]",Xn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Yn="\\ud83c[\\udffb-\\udfff]",Zn="[^\\ud800-\\udfff]",nt="(?:\\ud83c[\\udde6-\\uddff]){2}",tt="[\\ud800-\\udbff][\\udc00-\\udfff]",rt="(?:"+Xn+"|"+Yn+")"+"?",et="[\\ufe0e\\ufe0f]?"+rt+("(?:\\u200d(?:"+[Zn,nt,tt].join("|")+")[\\ufe0e\\ufe0f]?"+rt+")*"),ut="(?:"+[Zn+Xn+"?",Xn,nt,tt,Kn].join("|")+")",it=RegExp(Yn+"(?="+Yn+")|"+ut+et,"g");function ot(n){return function(n){return Jn.test(n)}(n)?function(n){return n.match(it)||[]}(n):function(n){return n.split("")}(n)}var ct=/^\s+|\s+$/g;function at(n,t,r){var e;if((n=null==(e=n)?"":Gn(e))&&(r||void 0===t))return n.replace(ct,"");if(!n||!(t=Gn(t)))return n;var u=ot(n),i=ot(t);return Hn(u,function(n,t){for(var r=-1,e=n.length;++r<e&&Dn(t,n[r],0)>-1;);return r}(u,i),function(n,t){for(var r=n.length;r--&&Dn(t,n[r],0)>-1;);return r}(u,i)+1).join("")}var ft=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,lt=/,/,st=/(=.+)?(\s*)$/,pt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function vt(n,t){var r={};Pn(n,function(n,t){var e,u,i=h(n),o=!i&&1===n.length||i&&0===n.length;if(J(n))e=n.slice(0,-1),n=n[n.length-1],r[t]=e.concat(e.length>0?c:n);else if(o)r[t]=n;else{if(e=u=(u=(u=(u=(u=n).toString().replace(pt,"")).match(ft)[2].replace(" ",""))?u.split(lt):[]).map(function(n){return at(n.replace(st,""))}),0===n.length&&!i&&0===e.length)throw new Error("autoInject task functions require explicit parameters.");i||e.pop(),r[t]=e.concat(c)}function c(t,r){var u=Cn(e,function(n){return t[n]});u.push(r),y(n).apply(null,u)}}),Rn(r,t)}function ht(){this.head=this.tail=null,this.length=0}function yt(n,t){n.length=1,n.head=n.tail=t}function dt(n,t,r){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var e=y(n),u=0,i=[],o=!1;function c(n,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(s.started=!0,J(n)||(n=[n]),0===n.length&&s.idle())return f(function(){s.drain()});for(var e=0,u=n.length;e<u;e++){var i={data:n[e],callback:r||P};t?s._tasks.unshift(i):s._tasks.push(i)}o||(o=!0,f(function(){o=!1,s.process()}))}function a(n){return function(t){u-=1;for(var r=0,e=n.length;r<e;r++){var o=n[r],c=Dn(i,o,0);0===c?i.shift():c>0&&i.splice(c,1),o.callback.apply(o,arguments),null!=t&&s.error(t,o.data)}u<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}var l=!1,s={_tasks:new ht,concurrency:t,payload:r,saturated:P,unsaturated:P,buffer:t/4,empty:P,drain:P,error:P,started:!1,paused:!1,push:function(n,t){c(n,!1,t)},kill:function(){s.drain=P,s._tasks.empty()},unshift:function(n,t){c(n,!0,t)},remove:function(n){s._tasks.remove(n)},process:function(){if(!l){for(l=!0;!s.paused&&u<s.concurrency&&s._tasks.length;){var n=[],t=[],r=s._tasks.length;s.payload&&(r=Math.min(r,s.payload));for(var o=0;o<r;o++){var c=s._tasks.shift();n.push(c),i.push(c),t.push(c.data)}u+=1,0===s._tasks.length&&s.empty(),u===s.concurrency&&s.saturated();var f=jn(a(n));e(t,f)}l=!1}},length:function(){return s._tasks.length},running:function(){return u},workersList:function(){return i},idle:function(){return s._tasks.length+u===0},pause:function(){s.paused=!0},resume:function(){!1!==s.paused&&(s.paused=!1,f(s.process))}};return s}function mt(n,t){return dt(n,1,t)}ht.prototype.removeLink=function(n){return n.prev?n.prev.next=n.next:this.head=n.next,n.next?n.next.prev=n.prev:this.tail=n.prev,n.prev=n.next=null,this.length-=1,n},ht.prototype.empty=function(){for(;this.head;)this.shift();return this},ht.prototype.insertAfter=function(n,t){t.prev=n,t.next=n.next,n.next?n.next.prev=t:this.tail=t,n.next=t,this.length+=1},ht.prototype.insertBefore=function(n,t){t.prev=n.prev,t.next=n,n.prev?n.prev.next=t:this.head=t,n.prev=t,this.length+=1},ht.prototype.unshift=function(n){this.head?this.insertBefore(this.head,n):yt(this,n)},ht.prototype.push=function(n){this.tail?this.insertAfter(this.tail,n):yt(this,n)},ht.prototype.shift=function(){return this.head&&this.removeLink(this.head)},ht.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},ht.prototype.toArray=function(){for(var n=Array(this.length),t=this.head,r=0;r<this.length;r++)n[r]=t.data,t=t.next;return n},ht.prototype.remove=function(n){for(var t=this.head;t;){var r=t.next;n(t)&&this.removeLink(t),t=r}return this};var gt=Ln(kn,1);function bt(n,t,r,e){e=V(e||P);var u=y(r);gt(n,function(n,r,e){u(t,n,function(n,r){t=r,e(n)})},function(n){e(n,t)})}function jt(){var n=Cn(arguments,y);return function(){var r=t(arguments),e=this,u=r[r.length-1];"function"==typeof u?r.pop():u=P,bt(n,r,function(n,r,u){r.apply(e,n.concat(function(n){var r=t(arguments,1);u(n,r)}))},function(n,t){u.apply(e,[n].concat(t))})}}var St=function(){return jt.apply(null,t(arguments).reverse())},kt=Array.prototype.concat,Lt=function(n,r,e,u){u=u||P;var i=y(e);In(n,r,function(n,r){i(n,function(n){return n?r(n):r(null,t(arguments,1))})},function(n,t){for(var r=[],e=0;e<t.length;e++)t[e]&&(r=kt.apply(r,t[e]));return u(n,r)})},Ot=Ln(Lt,1/0),wt=Ln(Lt,1),xt=function(){var n=t(arguments),r=[null].concat(n);return function(){return arguments[arguments.length-1].apply(this,r)}};function Et(n){return n}function At(n,t){return function(r,e,u,i){i=i||P;var o,c=!1;r(e,function(r,e,i){u(r,function(e,u){e?i(e):n(u)&&!o?(c=!0,o=t(!0,r),i(null,z)):i()})},function(n){n?i(n):i(null,c?o:t(!1))})}}function Tt(n,t){return t}var Bt=En(At(Et,Tt)),Ft=Fn(At(Et,Tt)),It=Ln(Ft,1);function _t(n){return function(r){var e=t(arguments,1);e.push(function(r){var e=t(arguments,1);"object"==typeof console&&(r?console.error&&console.error(r):console[n]&&Un(e,function(t){console[n](t)}))}),y(r).apply(null,e)}}var Mt=_t("dir");function Ut(n,r,e){e=jn(e||P);var u=y(n),i=y(r);function o(n){if(n)return e(n);var r=t(arguments,1);r.push(c),i.apply(this,r)}function c(n,t){return n?e(n):t?void u(o):e(null)}c(null,!0)}function qt(n,r,e){e=jn(e||P);var u=y(n),i=function(n){if(n)return e(n);var o=t(arguments,1);if(r.apply(this,o))return u(i);e.apply(null,[null].concat(o))};u(i)}function zt(n,t,r){qt(n,function(){return!t.apply(this,arguments)},r)}function Pt(n,t,r){r=jn(r||P);var e=y(t),u=y(n);function i(n){if(n)return r(n);u(o)}function o(n,t){return n?r(n):t?void e(i):r(null)}u(o)}function Vt(n){return function(t,r,e){return n(t,e)}}function Dt(n,t,r){xn(n,Vt(y(t)),r)}function Rt(n,t,r,e){Sn(t)(n,Vt(y(r)),e)}var Ct=Ln(Rt,1);function $t(n){return h(n)?n:e(function(t,r){var e=!0;t.push(function(){var n=arguments;e?f(function(){r.apply(null,n)}):r.apply(null,n)}),n.apply(this,t),e=!1})}function Wt(n){return!n}var Nt=En(At(Wt,Wt)),Qt=Fn(At(Wt,Wt)),Gt=Ln(Qt,1);function Ht(n){return function(t){return null==t?void 0:t[n]}}function Jt(n,t,r,e){var u=new Array(t.length);n(t,function(n,t,e){r(n,function(n,r){u[t]=!!r,e(n)})},function(n){if(n)return e(n);for(var r=[],i=0;i<t.length;i++)u[i]&&r.push(t[i]);e(null,r)})}function Kt(n,t,r,e){var u=[];n(t,function(n,t,e){r(n,function(r,i){r?e(r):(i&&u.push({index:t,value:n}),e())})},function(n){n?e(n):e(null,Cn(u.sort(function(n,t){return n.index-t.index}),Ht("value")))})}function Xt(n,t,r,e){(q(t)?Jt:Kt)(n,t,y(r),e||P)}var Yt=En(Xt),Zt=Fn(Xt),nr=Ln(Zt,1);function tr(n,t){var r=jn(t||P),e=y($t(n));!function n(t){if(t)return r(t);e(n)}()}var rr=function(n,t,r,e){e=e||P;var u=y(r);In(n,t,function(n,t){u(n,function(r,e){return r?t(r):t(null,{key:e,val:n})})},function(n,t){for(var r={},u=Object.prototype.hasOwnProperty,i=0;i<t.length;i++)if(t[i]){var o=t[i].key,c=t[i].val;u.call(r,o)?r[o].push(c):r[o]=[c]}return e(n,r)})},er=Ln(rr,1/0),ur=Ln(rr,1),ir=_t("log");function or(n,t,r,e){e=V(e||P);var u={},i=y(r);kn(n,t,function(n,t,r){i(n,t,function(n,e){if(n)return r(n);u[t]=e,r()})},function(n){e(n,u)})}var cr=Ln(or,1/0),ar=Ln(or,1);function fr(n,t){return t in n}function lr(n,r){var u=Object.create(null),i=Object.create(null);r=r||Et;var o=y(n),c=e(function(n,e){var c=r.apply(null,n);fr(u,c)?f(function(){e.apply(null,u[c])}):fr(i,c)?i[c].push(e):(i[c]=[e],o.apply(null,n.concat(function(){var n=t(arguments);u[c]=n;var r=i[c];delete i[c];for(var e=0,o=r.length;e<o;e++)r[e].apply(null,n)})))});return c.memo=u,c.unmemoized=n,c}var sr=a(o?process.nextTick:i?setImmediate:c);function pr(n,r,e){e=e||P;var u=q(r)?[]:{};n(r,function(n,r,e){y(n)(function(n,i){arguments.length>2&&(i=t(arguments,1)),u[r]=i,e(n)})},function(n){e(n,u)})}function vr(n,t){pr(xn,n,t)}function hr(n,t,r){pr(Sn(t),n,r)}var yr=function(n,t){var r=y(n);return dt(function(n,t){r(n[0],t)},t,1)},dr=function(n,t){var r=yr(n,t);return r.push=function(n,t,e){if(null==e&&(e=P),"function"!=typeof e)throw new Error("task callback must be a function");if(r.started=!0,J(n)||(n=[n]),0===n.length)return f(function(){r.drain()});t=t||0;for(var u=r._tasks.head;u&&t>=u.priority;)u=u.next;for(var i=0,o=n.length;i<o;i++){var c={data:n[i],priority:t,callback:e};u?r._tasks.insertBefore(u,c):r._tasks.push(c)}f(r.process)},delete r.unshift,r};function mr(n,t){if(t=V(t||P),!J(n))return t(new TypeError("First argument to race must be an array of functions"));if(!n.length)return t();for(var r=0,e=n.length;r<e;r++)y(n[r])(t)}function gr(n,r,e,u){bt(t(n).reverse(),r,e,u)}function br(n){var r=y(n);return e(function(n,e){return n.push(function(n,r){var u;n?e(null,{error:n}):(u=arguments.length<=2?r:t(arguments,1),e(null,{value:u}))}),r.apply(this,n)})}function jr(n){var t;return J(n)?t=Cn(n,br):(t={},Pn(n,function(n,r){t[r]=br.call(this,n)})),t}function Sr(n,t,r,e){Xt(n,t,function(n,t){r(n,function(n,r){t(n,!r)})},e)}var kr=En(Sr),Lr=Fn(Sr),Or=Ln(Lr,1);function wr(n){return function(){return n}}function xr(n,t,r){var e=5,u=0,i={times:e,intervalFunc:wr(u)};if(arguments.length<3&&"function"==typeof n?(r=t||P,t=n):(!function(n,t){if("object"==typeof t)n.times=+t.times||e,n.intervalFunc="function"==typeof t.interval?t.interval:wr(+t.interval||u),n.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");n.times=+t||e}}(i,n),r=r||P),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var o=y(t),c=1;!function n(){o(function(t){t&&c++<i.times&&("function"!=typeof i.errorFilter||i.errorFilter(t))?setTimeout(n,i.intervalFunc(c)):r.apply(null,arguments)})}()}var Er=function(n,t){t||(t=n,n=null);var r=y(t);return e(function(t,e){function u(n){r.apply(null,t.concat(n))}n?xr(n,u,e):xr(u,e)})};function Ar(n,t){pr(gt,n,t)}var Tr=En(At(Boolean,Et)),Br=Fn(At(Boolean,Et)),Fr=Ln(Br,1);function Ir(n,t,r){var e=y(t);function u(n,t){var r=n.criteria,e=t.criteria;return r<e?-1:r>e?1:0}Tn(n,function(n,t){e(n,function(r,e){if(r)return t(r);t(null,{value:n,criteria:e})})},function(n,t){if(n)return r(n);r(null,Cn(t.sort(u),Ht("value")))})}function _r(n,t,r){var u=y(n);return e(function(e,i){var o,c=!1;e.push(function(){c||(i.apply(null,arguments),clearTimeout(o))}),o=setTimeout(function(){var t=n.name||"anonymous",e=new Error('Callback function "'+t+'" timed out.');e.code="ETIMEDOUT",r&&(e.info=r),c=!0,i(e)},t),u.apply(null,e)})}var Mr=Math.ceil,Ur=Math.max;function qr(n,t,r,e){var u=y(r);In(function(n,t,r,e){for(var u=-1,i=Ur(Mr((t-n)/(r||1)),0),o=Array(i);i--;)o[e?i:++u]=n,n+=r;return o}(0,n,1),t,u,e)}var zr=Ln(qr,1/0),Pr=Ln(qr,1);function Vr(n,t,r,e){arguments.length<=3&&(e=r,r=t,t=J(n)?[]:{}),e=V(e||P);var u=y(r);xn(n,function(n,r,e){u(t,n,r,e)},function(n){e(n,t)})}function Dr(n,r){var e,u=null;r=r||P,Ct(n,function(n,r){y(n)(function(n,i){e=arguments.length>2?t(arguments,1):i,u=n,r(!n)})},function(){r(u,e)})}function Rr(n){return function(){return(n.unmemoized||n).apply(null,arguments)}}function Cr(n,r,e){e=jn(e||P);var u=y(r);if(!n())return e(null);var i=function(r){if(r)return e(r);if(n())return u(i);var o=t(arguments,1);e.apply(null,[null].concat(o))};u(i)}function $r(n,t,r){Cr(function(){return!n.apply(this,arguments)},t,r)}var Wr=function(n,r){if(r=V(r||P),!J(n))return r(new Error("First argument to waterfall must be an array of functions"));if(!n.length)return r();var e=0;function u(t){var r=y(n[e++]);t.push(jn(i)),r.apply(null,t)}function i(i){if(i||e===n.length)return r.apply(null,arguments);u(t(arguments,1))}u([])},Nr={apply:r,applyEach:Bn,applyEachSeries:Mn,asyncify:l,auto:Rn,autoInject:vt,cargo:mt,compose:St,concat:Ot,concatLimit:Lt,concatSeries:wt,constant:xt,detect:Bt,detectLimit:Ft,detectSeries:It,dir:Mt,doDuring:Ut,doUntil:zt,doWhilst:qt,during:Pt,each:Dt,eachLimit:Rt,eachOf:xn,eachOfLimit:kn,eachOfSeries:gt,eachSeries:Ct,ensureAsync:$t,every:Nt,everyLimit:Qt,everySeries:Gt,filter:Yt,filterLimit:Zt,filterSeries:nr,forever:tr,groupBy:er,groupByLimit:rr,groupBySeries:ur,log:ir,map:Tn,mapLimit:In,mapSeries:_n,mapValues:cr,mapValuesLimit:or,mapValuesSeries:ar,memoize:lr,nextTick:sr,parallel:vr,parallelLimit:hr,priorityQueue:dr,queue:yr,race:mr,reduce:bt,reduceRight:gr,reflect:br,reflectAll:jr,reject:kr,rejectLimit:Lr,rejectSeries:Or,retry:xr,retryable:Er,seq:jt,series:Ar,setImmediate:f,some:Tr,someLimit:Br,someSeries:Fr,sortBy:Ir,timeout:_r,times:zr,timesLimit:qr,timesSeries:Pr,transform:Vr,tryEach:Dr,unmemoize:Rr,until:$r,waterfall:Wr,whilst:Cr,all:Nt,allLimit:Qt,allSeries:Gt,any:Tr,anyLimit:Br,anySeries:Fr,find:Bt,findLimit:Ft,findSeries:It,forEach:Dt,forEachSeries:Ct,forEachLimit:Rt,forEachOf:xn,forEachOfSeries:gt,forEachOfLimit:kn,inject:bt,foldl:bt,foldr:gr,select:Yt,selectLimit:Zt,selectSeries:nr,wrapSync:l};n.default=Nr,n.apply=r,n.applyEach=Bn,n.applyEachSeries=Mn,n.asyncify=l,n.auto=Rn,n.autoInject=vt,n.cargo=mt,n.compose=St,n.concat=Ot,n.concatLimit=Lt,n.concatSeries=wt,n.constant=xt,n.detect=Bt,n.detectLimit=Ft,n.detectSeries=It,n.dir=Mt,n.doDuring=Ut,n.doUntil=zt,n.doWhilst=qt,n.during=Pt,n.each=Dt,n.eachLimit=Rt,n.eachOf=xn,n.eachOfLimit=kn,n.eachOfSeries=gt,n.eachSeries=Ct,n.ensureAsync=$t,n.every=Nt,n.everyLimit=Qt,n.everySeries=Gt,n.filter=Yt,n.filterLimit=Zt,n.filterSeries=nr,n.forever=tr,n.groupBy=er,n.groupByLimit=rr,n.groupBySeries=ur,n.log=ir,n.map=Tn,n.mapLimit=In,n.mapSeries=_n,n.mapValues=cr,n.mapValuesLimit=or,n.mapValuesSeries=ar,n.memoize=lr,n.nextTick=sr,n.parallel=vr,n.parallelLimit=hr,n.priorityQueue=dr,n.queue=yr,n.race=mr,n.reduce=bt,n.reduceRight=gr,n.reflect=br,n.reflectAll=jr,n.reject=kr,n.rejectLimit=Lr,n.rejectSeries=Or,n.retry=xr,n.retryable=Er,n.seq=jt,n.series=Ar,n.setImmediate=f,n.some=Tr,n.someLimit=Br,n.someSeries=Fr,n.sortBy=Ir,n.timeout=_r,n.times=zr,n.timesLimit=qr,n.timesSeries=Pr,n.transform=Vr,n.tryEach=Dr,n.unmemoize=Rr,n.until=$r,n.waterfall=Wr,n.whilst=Cr,n.all=Nt,n.allLimit=Qt,n.allSeries=Gt,n.any=Tr,n.anyLimit=Br,n.anySeries=Fr,n.find=Bt,n.findLimit=Ft,n.findSeries=It,n.forEach=Dt,n.forEachSeries=Ct,n.forEachLimit=Rt,n.forEachOf=xn,n.forEachOfSeries=gt,n.forEachOfLimit=kn,n.inject=bt,n.foldl=bt,n.foldr=gr,n.select=Yt,n.selectLimit=Zt,n.selectSeries=nr,n.wrapSync=l,Object.defineProperty(n,"__esModule",{value:!0})});

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("timers").setImmediate)
},{"_process":8,"timers":10}],2:[function(require,module,exports){
var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",reIsUint=/^(?:0|[1-9]\d*)$/;function apply(r,e,n){switch(n.length){case 0:return r.call(e);case 1:return r.call(e,n[0]);case 2:return r.call(e,n[0],n[1]);case 3:return r.call(e,n[0],n[1],n[2])}return r.apply(e,n)}function baseTimes(r,e){for(var n=-1,t=Array(r);++n<r;)t[n]=e(n);return t}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeMax=Math.max;function arrayLikeKeys(r,e){var n=isArray(r)||isArguments(r)?baseTimes(r.length,String):[],t=n.length,i=!!t;for(var o in r)!e&&!hasOwnProperty.call(r,o)||i&&("length"==o||isIndex(o,t))||n.push(o);return n}function assignValue(r,e,n){var t=r[e];hasOwnProperty.call(r,e)&&eq(t,n)&&(void 0!==n||e in r)||(r[e]=n)}function baseKeysIn(r){if(!isObject(r))return nativeKeysIn(r);var e=isPrototype(r),n=[];for(var t in r)("constructor"!=t||!e&&hasOwnProperty.call(r,t))&&n.push(t);return n}function baseRest(r,e){return e=nativeMax(void 0===e?r.length-1:e,0),function(){for(var n=arguments,t=-1,i=nativeMax(n.length-e,0),o=Array(i);++t<i;)o[t]=n[e+t];t=-1;for(var a=Array(e+1);++t<e;)a[t]=n[t];return a[e]=o,apply(r,this,a)}}function copyObject(r,e,n,t){n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t?t(n[a],r[a],a,n,r):void 0;assignValue(n,a,void 0===s?r[a]:s)}return n}function createAssigner(r){return baseRest(function(e,n){var t=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=r.length>3&&"function"==typeof o?(i--,o):void 0,a&&isIterateeCall(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++t<i;){var s=n[t];s&&r(e,s,t,o)}return e})}function isIndex(r,e){return!!(e=null==e?MAX_SAFE_INTEGER:e)&&("number"==typeof r||reIsUint.test(r))&&r>-1&&r%1==0&&r<e}function isIterateeCall(r,e,n){if(!isObject(n))return!1;var t=typeof e;return!!("number"==t?isArrayLike(n)&&isIndex(e,n.length):"string"==t&&e in n)&&eq(n[e],r)}function isPrototype(r){var e=r&&r.constructor;return r===("function"==typeof e&&e.prototype||objectProto)}function nativeKeysIn(r){var e=[];if(null!=r)for(var n in Object(r))e.push(n);return e}function eq(r,e){return r===e||r!=r&&e!=e}function isArguments(r){return isArrayLikeObject(r)&&hasOwnProperty.call(r,"callee")&&(!propertyIsEnumerable.call(r,"callee")||objectToString.call(r)==argsTag)}var isArray=Array.isArray;function isArrayLike(r){return null!=r&&isLength(r.length)&&!isFunction(r)}function isArrayLikeObject(r){return isObjectLike(r)&&isArrayLike(r)}function isFunction(r){var e=isObject(r)?objectToString.call(r):"";return e==funcTag||e==genTag}function isLength(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=MAX_SAFE_INTEGER}function isObject(r){var e=typeof r;return!!r&&("object"==e||"function"==e)}function isObjectLike(r){return!!r&&"object"==typeof r}var assignIn=createAssigner(function(r,e){copyObject(e,keysIn(e),r)});function keysIn(r){return isArrayLike(r)?arrayLikeKeys(r,!0):baseKeysIn(r)}module.exports=assignIn;

},{}],3:[function(require,module,exports){
(function (global){
var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function arrayPush(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,Symbol=root.Symbol,propertyIsEnumerable=objectProto.propertyIsEnumerable,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:void 0;function baseFlatten(e,t,r,n,o){var a=-1,l=e.length;for(r||(r=isFlattenable),o||(o=[]);++a<l;){var b=e[a];t>0&&r(b)?t>1?baseFlatten(b,t-1,r,n,o):arrayPush(o,b):n||(o[o.length]=b)}return o}function isFlattenable(e){return isArray(e)||isArguments(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}function flatten(e){return(e?e.length:0)?baseFlatten(e,1):[]}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}var isArray=Array.isArray;function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}module.exports=flatten;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],4:[function(require,module,exports){
(function (global){
var LARGE_ARRAY_SIZE=200,FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reEscapeChar=/\\(\\)?/g,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arrayAggregator(e,t,r,a){for(var n=-1,o=e?e.length:0;++n<o;){var s=e[n];t(a,s,r(s),e)}return a}function arraySome(e,t){for(var r=-1,a=e?e.length:0;++r<a;)if(t(e[r],r,e))return!0;return!1}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function baseTimes(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}function baseUnary(e){return function(t){return e(t)}}function getValue(e,t){return null==e?void 0:e[t]}function isHostObject(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e,a){r[++t]=[a,e]}),r}function overArg(e,t){return function(r){return e(t(r))}}function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function Hash(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(e){return this.has(e)&&delete this.__data__[e]}function hashGet(e){var t=this.__data__;if(nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty.call(t,e)?t[e]:void 0}function hashHas(e){var t=this.__data__;return nativeCreate?void 0!==t[e]:hasOwnProperty.call(t,e)}function hashSet(e,t){return this.__data__[e]=nativeCreate&&void 0===t?HASH_UNDEFINED:t,this}function ListCache(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(e){var t=this.__data__,r=assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),!0)}function listCacheGet(e){var t=this.__data__,r=assocIndexOf(t,e);return r<0?void 0:t[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var r=this.__data__,a=assocIndexOf(r,e);return a<0?r.push([e,t]):r[a][1]=t,this}function MapCache(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(e){return getMapData(this,e).delete(e)}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){return getMapData(this,e).set(e,t),this}function SetCache(e){var t=-1,r=e?e.length:0;for(this.__data__=new MapCache;++t<r;)this.add(e[t])}function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function Stack(e){this.__data__=new ListCache(e)}function stackClear(){this.__data__=new ListCache}function stackDelete(e){return this.__data__.delete(e)}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}function stackSet(e,t){var r=this.__data__;if(r instanceof ListCache){var a=r.__data__;if(!Map||a.length<LARGE_ARRAY_SIZE-1)return a.push([e,t]),this;r=this.__data__=new MapCache(a)}return r.set(e,t),this}function arrayLikeKeys(e,t){var r=isArray(e)||isArguments(e)?baseTimes(e.length,String):[],a=r.length,n=!!a;for(var o in e)!t&&!hasOwnProperty.call(e,o)||n&&("length"==o||isIndex(o,a))||r.push(o);return r}function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq(e[r][0],t))return r;return-1}function baseAggregator(e,t,r,a){return baseEach(e,function(e,n,o){t(a,e,r(e),o)}),a}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var baseEach=createBaseEach(baseForOwn),baseFor=createBaseFor();function baseForOwn(e,t){return e&&baseFor(e,t,keys)}function baseGet(e,t){for(var r=0,a=(t=isKey(t,e)?[t]:castPath(t)).length;null!=e&&r<a;)e=e[toKey(t[r++])];return r&&r==a?e:void 0}function baseGetTag(e){return objectToString.call(e)}function baseHasIn(e,t){return null!=e&&t in Object(e)}function baseIsEqual(e,t,r,a,n){return e===t||(null==e||null==t||!isObject(e)&&!isObjectLike(t)?e!=e&&t!=t:baseIsEqualDeep(e,t,baseIsEqual,r,a,n))}function baseIsEqualDeep(e,t,r,a,n,o){var s=isArray(e),i=isArray(t),c=arrayTag,u=arrayTag;s||(c=(c=getTag(e))==argsTag?objectTag:c),i||(u=(u=getTag(t))==argsTag?objectTag:u);var g=c==objectTag&&!isHostObject(e),l=u==objectTag&&!isHostObject(t),y=c==u;if(y&&!g)return o||(o=new Stack),s||isTypedArray(e)?equalArrays(e,t,r,a,n,o):equalByTag(e,t,c,r,a,n,o);if(!(n&PARTIAL_COMPARE_FLAG)){var f=g&&hasOwnProperty.call(e,"__wrapped__"),p=l&&hasOwnProperty.call(t,"__wrapped__");if(f||p){var h=f?e.value():e,b=p?t.value():t;return o||(o=new Stack),r(h,b,a,n,o)}}return!!y&&(o||(o=new Stack),equalObjects(e,t,r,a,n,o))}function baseIsMatch(e,t,r,a){var n=r.length,o=n,s=!a;if(null==e)return!o;for(e=Object(e);n--;){var i=r[n];if(s&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++n<o;){var c=(i=r[n])[0],u=e[c],g=i[1];if(s&&i[2]){if(void 0===u&&!(c in e))return!1}else{var l=new Stack;if(a)var y=a(u,g,c,e,t,l);if(!(void 0===y?baseIsEqual(g,u,a,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,l):y))return!1}}return!0}function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)||isHostObject(e)?reIsNative:reIsHostCtor).test(toSource(e))}function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[objectToString.call(e)]}function baseIteratee(e){return"function"==typeof e?e:null==e?identity:"object"==typeof e?isArray(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function baseKeys(e){if(!isPrototype(e))return nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty.call(e,r)&&"constructor"!=r&&t.push(r);return t}function baseMatches(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable(t[0][0],t[0][1]):function(r){return r===e||baseIsMatch(r,e,t)}}function baseMatchesProperty(e,t){return isKey(e)&&isStrictComparable(t)?matchesStrictComparable(toKey(e),t):function(r){var a=get(r,e);return void 0===a&&a===t?hasIn(r,e):baseIsEqual(t,a,void 0,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG)}}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function baseToString(e){if("string"==typeof e)return e;if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function castPath(e){return isArray(e)?e:stringToPath(e)}function createAggregator(e,t){return function(r,a){var n=isArray(r)?arrayAggregator:baseAggregator,o=t?t():{};return n(r,e,baseIteratee(a,2),o)}}function createBaseEach(e,t){return function(r,a){if(null==r)return r;if(!isArrayLike(r))return e(r,a);for(var n=r.length,o=t?n:-1,s=Object(r);(t?o--:++o<n)&&!1!==a(s[o],o,s););return r}}function createBaseFor(e){return function(t,r,a){for(var n=-1,o=Object(t),s=a(t),i=s.length;i--;){var c=s[e?i:++n];if(!1===r(o[c],c,o))break}return t}}function equalArrays(e,t,r,a,n,o){var s=n&PARTIAL_COMPARE_FLAG,i=e.length,c=t.length;if(i!=c&&!(s&&c>i))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var g=-1,l=!0,y=n&UNORDERED_COMPARE_FLAG?new SetCache:void 0;for(o.set(e,t),o.set(t,e);++g<i;){var f=e[g],p=t[g];if(a)var h=s?a(p,f,g,t,e,o):a(f,p,g,e,t,o);if(void 0!==h){if(h)continue;l=!1;break}if(y){if(!arraySome(t,function(e,t){if(!y.has(t)&&(f===e||r(f,e,a,n,o)))return y.add(t)})){l=!1;break}}else if(f!==p&&!r(f,p,a,n,o)){l=!1;break}}return o.delete(e),o.delete(t),l}function equalByTag(e,t,r,a,n,o,s){switch(r){case dataViewTag:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag:return!(e.byteLength!=t.byteLength||!a(new Uint8Array(e),new Uint8Array(t)));case boolTag:case dateTag:case numberTag:return eq(+e,+t);case errorTag:return e.name==t.name&&e.message==t.message;case regexpTag:case stringTag:return e==t+"";case mapTag:var i=mapToArray;case setTag:var c=o&PARTIAL_COMPARE_FLAG;if(i||(i=setToArray),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;o|=UNORDERED_COMPARE_FLAG,s.set(e,t);var g=equalArrays(i(e),i(t),a,n,o,s);return s.delete(e),g;case symbolTag:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}function equalObjects(e,t,r,a,n,o){var s=n&PARTIAL_COMPARE_FLAG,i=keys(e),c=i.length;if(c!=keys(t).length&&!s)return!1;for(var u=c;u--;){var g=i[u];if(!(s?g in t:hasOwnProperty.call(t,g)))return!1}var l=o.get(e);if(l&&o.get(t))return l==t;var y=!0;o.set(e,t),o.set(t,e);for(var f=s;++u<c;){var p=e[g=i[u]],h=t[g];if(a)var b=s?a(h,p,g,t,e,o):a(p,h,g,e,t,o);if(!(void 0===b?p===h||r(p,h,a,n,o):b)){y=!1;break}f||(f="constructor"==g)}if(y&&!f){var T=e.constructor,d=t.constructor;T!=d&&"constructor"in e&&"constructor"in t&&!("function"==typeof T&&T instanceof T&&"function"==typeof d&&d instanceof d)&&(y=!1)}return o.delete(e),o.delete(t),y}function getMapData(e,t){var r=e.__data__;return isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}function getMatchData(e){for(var t=keys(e),r=t.length;r--;){var a=t[r],n=e[a];t[r]=[a,n,isStrictComparable(n)]}return t}function getNative(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}var getTag=baseGetTag;function hasPath(e,t,r){for(var a,n=-1,o=(t=isKey(t,e)?[t]:castPath(t)).length;++n<o;){var s=toKey(t[n]);if(!(a=null!=e&&r(e,s)))break;e=e[s]}return a||!!(o=e?e.length:0)&&isLength(o)&&isIndex(s,o)&&(isArray(e)||isArguments(e))}function isIndex(e,t){return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==typeof e||reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function isKey(e,t){if(isArray(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto)}function isStrictComparable(e){return e==e&&!isObject(e)}function matchesStrictComparable(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(e){var t=objectToString.call(e),r=t==objectTag?e.constructor:void 0,a=r?toSource(r):void 0;if(a)switch(a){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return t});var stringToPath=memoize(function(e){e=toString(e);var t=[];return reLeadingDot.test(e)&&t.push(""),e.replace(rePropName,function(e,r,a,n){t.push(a?n.replace(reEscapeChar,"$1"):r||e)}),t});function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var groupBy=createAggregator(function(e,t,r){hasOwnProperty.call(e,r)?e[r].push(t):e[r]=[t]});function memoize(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var a=arguments,n=t?t.apply(this,a):a[0],o=r.cache;if(o.has(n))return o.get(n);var s=e.apply(this,a);return r.cache=o.set(n,s),s};return r.cache=new(memoize.Cache||MapCache),r}function eq(e,t){return e===t||e!=e&&t!=t}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}memoize.Cache=MapCache;var isArray=Array.isArray;function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function toString(e){return null==e?"":baseToString(e)}function get(e,t,r){var a=null==e?void 0:baseGet(e,t);return void 0===a?r:a}function hasIn(e,t){return null!=e&&hasPath(e,t,baseHasIn)}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function identity(e){return e}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}module.exports=groupBy;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],5:[function(require,module,exports){
(function (global){
var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports;function getValue(e,t){return null==e?void 0:e[t]}function isHostObject(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function overArg(e,t){return function(r){return e(t(r))}}var funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nonEnumShadows=!propertyIsEnumerable.call({valueOf:1},"valueOf"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);function baseGetTag(e){return objectToString.call(e)}function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)||isHostObject(e)?reIsNative:reIsHostCtor).test(toSource(e))}function getNative(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}var getTag=baseGetTag;function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto)}function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(e){var t=objectToString.call(e),r=t==objectTag?e.constructor:void 0,o=r?toSource(r):void 0;if(o)switch(o){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return t});var isArray=Array.isArray;function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}var isBuffer=nativeIsBuffer||stubFalse;function isEmpty(e){if(isArrayLike(e)&&(isArray(e)||"string"==typeof e||"function"==typeof e.splice||isBuffer(e)||isArguments(e)))return!e.length;var t=getTag(e);if(t==mapTag||t==setTag)return!e.size;if(nonEnumShadows||isPrototype(e))return!nativeKeys(e).length;for(var r in e)if(hasOwnProperty.call(e,r))return!1;return!0}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function stubFalse(){return!1}module.exports=isEmpty;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],6:[function(require,module,exports){
(function (global){
var LARGE_ARRAY_SIZE=200,FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reEscapeChar=/\\(\\)?/g,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arrayReduce(e,t,r,a){var n=-1,o=e?e.length:0;for(a&&o&&(r=e[++n]);++n<o;)r=t(r,e[n],n,e);return r}function arraySome(e,t){for(var r=-1,a=e?e.length:0;++r<a;)if(t(e[r],r,e))return!0;return!1}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function baseReduce(e,t,r,a,n){return n(e,function(e,n,o){r=a?(a=!1,e):t(r,e,n,o)}),r}function baseTimes(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}function baseUnary(e){return function(t){return e(t)}}function getValue(e,t){return null==e?void 0:e[t]}function isHostObject(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e,a){r[++t]=[a,e]}),r}function overArg(e,t){return function(r){return e(t(r))}}function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function Hash(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(e){return this.has(e)&&delete this.__data__[e]}function hashGet(e){var t=this.__data__;if(nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty.call(t,e)?t[e]:void 0}function hashHas(e){var t=this.__data__;return nativeCreate?void 0!==t[e]:hasOwnProperty.call(t,e)}function hashSet(e,t){return this.__data__[e]=nativeCreate&&void 0===t?HASH_UNDEFINED:t,this}function ListCache(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(e){var t=this.__data__,r=assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),!0)}function listCacheGet(e){var t=this.__data__,r=assocIndexOf(t,e);return r<0?void 0:t[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var r=this.__data__,a=assocIndexOf(r,e);return a<0?r.push([e,t]):r[a][1]=t,this}function MapCache(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(e){return getMapData(this,e).delete(e)}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){return getMapData(this,e).set(e,t),this}function SetCache(e){var t=-1,r=e?e.length:0;for(this.__data__=new MapCache;++t<r;)this.add(e[t])}function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function Stack(e){this.__data__=new ListCache(e)}function stackClear(){this.__data__=new ListCache}function stackDelete(e){return this.__data__.delete(e)}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}function stackSet(e,t){var r=this.__data__;if(r instanceof ListCache){var a=r.__data__;if(!Map||a.length<LARGE_ARRAY_SIZE-1)return a.push([e,t]),this;r=this.__data__=new MapCache(a)}return r.set(e,t),this}function arrayLikeKeys(e,t){var r=isArray(e)||isArguments(e)?baseTimes(e.length,String):[],a=r.length,n=!!a;for(var o in e)!t&&!hasOwnProperty.call(e,o)||n&&("length"==o||isIndex(o,a))||r.push(o);return r}function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq(e[r][0],t))return r;return-1}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var baseEach=createBaseEach(baseForOwn),baseFor=createBaseFor();function baseForOwn(e,t){return e&&baseFor(e,t,keys)}function baseGet(e,t){for(var r=0,a=(t=isKey(t,e)?[t]:castPath(t)).length;null!=e&&r<a;)e=e[toKey(t[r++])];return r&&r==a?e:void 0}function baseGetTag(e){return objectToString.call(e)}function baseHasIn(e,t){return null!=e&&t in Object(e)}function baseIsEqual(e,t,r,a,n){return e===t||(null==e||null==t||!isObject(e)&&!isObjectLike(t)?e!=e&&t!=t:baseIsEqualDeep(e,t,baseIsEqual,r,a,n))}function baseIsEqualDeep(e,t,r,a,n,o){var s=isArray(e),i=isArray(t),c=arrayTag,u=arrayTag;s||(c=(c=getTag(e))==argsTag?objectTag:c),i||(u=(u=getTag(t))==argsTag?objectTag:u);var l=c==objectTag&&!isHostObject(e),y=u==objectTag&&!isHostObject(t),f=c==u;if(f&&!l)return o||(o=new Stack),s||isTypedArray(e)?equalArrays(e,t,r,a,n,o):equalByTag(e,t,c,r,a,n,o);if(!(n&PARTIAL_COMPARE_FLAG)){var g=l&&hasOwnProperty.call(e,"__wrapped__"),p=y&&hasOwnProperty.call(t,"__wrapped__");if(g||p){var h=g?e.value():e,b=p?t.value():t;return o||(o=new Stack),r(h,b,a,n,o)}}return!!f&&(o||(o=new Stack),equalObjects(e,t,r,a,n,o))}function baseIsMatch(e,t,r,a){var n=r.length,o=n,s=!a;if(null==e)return!o;for(e=Object(e);n--;){var i=r[n];if(s&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++n<o;){var c=(i=r[n])[0],u=e[c],l=i[1];if(s&&i[2]){if(void 0===u&&!(c in e))return!1}else{var y=new Stack;if(a)var f=a(u,l,c,e,t,y);if(!(void 0===f?baseIsEqual(l,u,a,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,y):f))return!1}}return!0}function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)||isHostObject(e)?reIsNative:reIsHostCtor).test(toSource(e))}function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[objectToString.call(e)]}function baseIteratee(e){return"function"==typeof e?e:null==e?identity:"object"==typeof e?isArray(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function baseKeys(e){if(!isPrototype(e))return nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty.call(e,r)&&"constructor"!=r&&t.push(r);return t}function baseMatches(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable(t[0][0],t[0][1]):function(r){return r===e||baseIsMatch(r,e,t)}}function baseMatchesProperty(e,t){return isKey(e)&&isStrictComparable(t)?matchesStrictComparable(toKey(e),t):function(r){var a=get(r,e);return void 0===a&&a===t?hasIn(r,e):baseIsEqual(t,a,void 0,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG)}}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function baseToString(e){if("string"==typeof e)return e;if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function castPath(e){return isArray(e)?e:stringToPath(e)}function createBaseEach(e,t){return function(r,a){if(null==r)return r;if(!isArrayLike(r))return e(r,a);for(var n=r.length,o=t?n:-1,s=Object(r);(t?o--:++o<n)&&!1!==a(s[o],o,s););return r}}function createBaseFor(e){return function(t,r,a){for(var n=-1,o=Object(t),s=a(t),i=s.length;i--;){var c=s[e?i:++n];if(!1===r(o[c],c,o))break}return t}}function equalArrays(e,t,r,a,n,o){var s=n&PARTIAL_COMPARE_FLAG,i=e.length,c=t.length;if(i!=c&&!(s&&c>i))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var l=-1,y=!0,f=n&UNORDERED_COMPARE_FLAG?new SetCache:void 0;for(o.set(e,t),o.set(t,e);++l<i;){var g=e[l],p=t[l];if(a)var h=s?a(p,g,l,t,e,o):a(g,p,l,e,t,o);if(void 0!==h){if(h)continue;y=!1;break}if(f){if(!arraySome(t,function(e,t){if(!f.has(t)&&(g===e||r(g,e,a,n,o)))return f.add(t)})){y=!1;break}}else if(g!==p&&!r(g,p,a,n,o)){y=!1;break}}return o.delete(e),o.delete(t),y}function equalByTag(e,t,r,a,n,o,s){switch(r){case dataViewTag:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag:return!(e.byteLength!=t.byteLength||!a(new Uint8Array(e),new Uint8Array(t)));case boolTag:case dateTag:case numberTag:return eq(+e,+t);case errorTag:return e.name==t.name&&e.message==t.message;case regexpTag:case stringTag:return e==t+"";case mapTag:var i=mapToArray;case setTag:var c=o&PARTIAL_COMPARE_FLAG;if(i||(i=setToArray),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;o|=UNORDERED_COMPARE_FLAG,s.set(e,t);var l=equalArrays(i(e),i(t),a,n,o,s);return s.delete(e),l;case symbolTag:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}function equalObjects(e,t,r,a,n,o){var s=n&PARTIAL_COMPARE_FLAG,i=keys(e),c=i.length;if(c!=keys(t).length&&!s)return!1;for(var u=c;u--;){var l=i[u];if(!(s?l in t:hasOwnProperty.call(t,l)))return!1}var y=o.get(e);if(y&&o.get(t))return y==t;var f=!0;o.set(e,t),o.set(t,e);for(var g=s;++u<c;){var p=e[l=i[u]],h=t[l];if(a)var b=s?a(h,p,l,t,e,o):a(p,h,l,e,t,o);if(!(void 0===b?p===h||r(p,h,a,n,o):b)){f=!1;break}g||(g="constructor"==l)}if(f&&!g){var T=e.constructor,d=t.constructor;T!=d&&"constructor"in e&&"constructor"in t&&!("function"==typeof T&&T instanceof T&&"function"==typeof d&&d instanceof d)&&(f=!1)}return o.delete(e),o.delete(t),f}function getMapData(e,t){var r=e.__data__;return isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}function getMatchData(e){for(var t=keys(e),r=t.length;r--;){var a=t[r],n=e[a];t[r]=[a,n,isStrictComparable(n)]}return t}function getNative(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}var getTag=baseGetTag;function hasPath(e,t,r){for(var a,n=-1,o=(t=isKey(t,e)?[t]:castPath(t)).length;++n<o;){var s=toKey(t[n]);if(!(a=null!=e&&r(e,s)))break;e=e[s]}return a||!!(o=e?e.length:0)&&isLength(o)&&isIndex(s,o)&&(isArray(e)||isArguments(e))}function isIndex(e,t){return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==typeof e||reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function isKey(e,t){if(isArray(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto)}function isStrictComparable(e){return e==e&&!isObject(e)}function matchesStrictComparable(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(e){var t=objectToString.call(e),r=t==objectTag?e.constructor:void 0,a=r?toSource(r):void 0;if(a)switch(a){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return t});var stringToPath=memoize(function(e){e=toString(e);var t=[];return reLeadingDot.test(e)&&t.push(""),e.replace(rePropName,function(e,r,a,n){t.push(a?n.replace(reEscapeChar,"$1"):r||e)}),t});function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function reduce(e,t,r){var a=isArray(e)?arrayReduce:baseReduce,n=arguments.length<3;return a(e,baseIteratee(t,4),r,n,baseEach)}function memoize(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var a=arguments,n=t?t.apply(this,a):a[0],o=r.cache;if(o.has(n))return o.get(n);var s=e.apply(this,a);return r.cache=o.set(n,s),s};return r.cache=new(memoize.Cache||MapCache),r}function eq(e,t){return e===t||e!=e&&t!=t}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}memoize.Cache=MapCache;var isArray=Array.isArray;function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function toString(e){return null==e?"":baseToString(e)}function get(e,t,r){var a=null==e?void 0:baseGet(e,t);return void 0===a?r:a}function hasIn(e,t){return null!=e&&hasPath(e,t,baseHasIn)}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function identity(e){return e}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}module.exports=reduce;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],7:[function(require,module,exports){
var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",reIsUint=/^(?:0|[1-9]\d*)$/;function arrayMap(r,e){for(var t=-1,n=r?r.length:0,o=Array(n);++t<n;)o[t]=e(r[t],t,r);return o}function baseTimes(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}function baseValues(r,e){return arrayMap(e,function(e){return r[e]})}function overArg(r,e){return function(t){return r(e(t))}}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeKeys=overArg(Object.keys,Object);function arrayLikeKeys(r,e){var t=isArray(r)||isArguments(r)?baseTimes(r.length,String):[],n=t.length,o=!!n;for(var a in r)!e&&!hasOwnProperty.call(r,a)||o&&("length"==a||isIndex(a,n))||t.push(a);return t}function baseKeys(r){if(!isPrototype(r))return nativeKeys(r);var e=[];for(var t in Object(r))hasOwnProperty.call(r,t)&&"constructor"!=t&&e.push(t);return e}function isIndex(r,e){return!!(e=null==e?MAX_SAFE_INTEGER:e)&&("number"==typeof r||reIsUint.test(r))&&r>-1&&r%1==0&&r<e}function isPrototype(r){var e=r&&r.constructor;return r===("function"==typeof e&&e.prototype||objectProto)}function isArguments(r){return isArrayLikeObject(r)&&hasOwnProperty.call(r,"callee")&&(!propertyIsEnumerable.call(r,"callee")||objectToString.call(r)==argsTag)}var isArray=Array.isArray;function isArrayLike(r){return null!=r&&isLength(r.length)&&!isFunction(r)}function isArrayLikeObject(r){return isObjectLike(r)&&isArrayLike(r)}function isFunction(r){var e=isObject(r)?objectToString.call(r):"";return e==funcTag||e==genTag}function isLength(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=MAX_SAFE_INTEGER}function isObject(r){var e=typeof r;return!!r&&("object"==e||"function"==e)}function isObjectLike(r){return!!r&&"object"==typeof r}function keys(r){return isArrayLike(r)?arrayLikeKeys(r):baseKeys(r)}function values(r){return r?baseValues(r,keys(r)):[]}module.exports=values;

},{}],8:[function(require,module,exports){
var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],9:[function(require,module,exports){
var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function blur(r,t,a,n){if(!(isNaN(n)||n<1)){var e,l,b,f,g,o,u,x,i,s,h,c,v,_,k,m,B,S,w,N,d,p,j,q,y=(n|=0)+n+1,z=t-1,A=a-1,C=n+1,D=C*(C+1)/2,E=new BlurStack,F=E;for(b=1;b<y;b++)if(F=F.next=new BlurStack,b==C)var G=F;F.next=E;var H=null,I=null;u=o=0;var J=mul_table[n],K=shg_table[n];for(l=0;l<a;l++){for(m=B=S=w=x=i=s=h=0,c=C*(N=r[o]),v=C*(d=r[o+1]),_=C*(p=r[o+2]),k=C*(j=r[o+3]),x+=D*N,i+=D*d,s+=D*p,h+=D*j,F=E,b=0;b<C;b++)F.r=N,F.g=d,F.b=p,F.a=j,F=F.next;for(b=1;b<C;b++)f=o+((z<b?z:b)<<2),x+=(F.r=N=r[f])*(q=C-b),i+=(F.g=d=r[f+1])*q,s+=(F.b=p=r[f+2])*q,h+=(F.a=j=r[f+3])*q,m+=N,B+=d,S+=p,w+=j,F=F.next;for(H=E,I=G,e=0;e<t;e++)r[o+3]=j=h*J>>K,0!=j?(j=255/j,r[o]=(x*J>>K)*j,r[o+1]=(i*J>>K)*j,r[o+2]=(s*J>>K)*j):r[o]=r[o+1]=r[o+2]=0,x-=c,i-=v,s-=_,h-=k,c-=H.r,v-=H.g,_-=H.b,k-=H.a,f=u+((f=e+n+1)<z?f:z)<<2,x+=m+=H.r=r[f],i+=B+=H.g=r[f+1],s+=S+=H.b=r[f+2],h+=w+=H.a=r[f+3],H=H.next,c+=N=I.r,v+=d=I.g,_+=p=I.b,k+=j=I.a,m-=N,B-=d,S-=p,w-=j,I=I.next,o+=4;u+=t}for(e=0;e<t;e++){for(B=S=w=m=i=s=h=x=0,c=C*(N=r[o=e<<2]),v=C*(d=r[o+1]),_=C*(p=r[o+2]),k=C*(j=r[o+3]),x+=D*N,i+=D*d,s+=D*p,h+=D*j,F=E,b=0;b<C;b++)F.r=N,F.g=d,F.b=p,F.a=j,F=F.next;for(g=t,b=1;b<=n;b++)o=g+e<<2,x+=(F.r=N=r[o])*(q=C-b),i+=(F.g=d=r[o+1])*q,s+=(F.b=p=r[o+2])*q,h+=(F.a=j=r[o+3])*q,m+=N,B+=d,S+=p,w+=j,F=F.next,b<A&&(g+=t);for(o=e,H=E,I=G,l=0;l<a;l++)r[(f=o<<2)+3]=j=h*J>>K,j>0?(j=255/j,r[f]=(x*J>>K)*j,r[f+1]=(i*J>>K)*j,r[f+2]=(s*J>>K)*j):r[f]=r[f+1]=r[f+2]=0,x-=c,i-=v,s-=_,h-=k,c-=H.r,v-=H.g,_-=H.b,k-=H.a,f=e+((f=l+C)<A?f:A)*t<<2,x+=m+=H.r=r[f],i+=B+=H.g=r[f+1],s+=S+=H.b=r[f+2],h+=w+=H.a=r[f+3],H=H.next,c+=N=I.r,v+=d=I.g,_+=p=I.b,k+=j=I.a,m-=N,B-=d,S-=p,w-=j,I=I.next,o+=t}}}function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}module.exports=blur;

},{}],10:[function(require,module,exports){
(function (setImmediate,clearImmediate){
var nextTick=require("process/browser.js").nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;function Timeout(e,t){this._id=e,this._clearFn=t}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(e){e.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},exports.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},exports._unrefActive=exports.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(e){var t=nextImmediateId++,i=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[t]=!0,nextTick(function(){immediateIds[t]&&(i?e.apply(null,i):e.call(null),exports.clearImmediate(t))}),t},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(e){delete immediateIds[e]};

}).call(this,require("timers").setImmediate,require("timers").clearImmediate)
},{"process/browser.js":8,"timers":10}],11:[function(require,module,exports){
function DOMParser(t){this.options=t||{locator:{}}}function buildErrorHandler(t,e,n){if(!t){if(e instanceof DOMHandler)return e;t=e}var r={},o=t instanceof Function;function i(e){var i=t[e];!i&&o&&(i=2==t.length?function(n){t(e,n)}:t),r[e]=i&&function(t){i("[xmldom "+e+"]\t"+t+_locator(n))}||function(){}}return n=n||{},i("warning"),i("error"),i("fatalError"),r}function DOMHandler(){this.cdata=!1}function position(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function _locator(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function _toString(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function appendElement(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}DOMParser.prototype.parseFromString=function(t,e){var n=this.options,r=new XMLReader,o=n.domBuilder||new DOMHandler,i=n.errorHandler,a=n.locator,c=n.xmlns||{},l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&o.setDocumentLocator(a),r.errorHandler=buildErrorHandler(i,o,a),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(e)&&(l.nbsp=" ",l.copy="©",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",t?r.parse(t,c,l):r.errorHandler.error("invalid doc source"),o.doc},DOMHandler.prototype={startDocument:function(){this.doc=(new DOMImplementation).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var o=this.doc,i=o.createElementNS(t,n||e),a=r.length;appendElement(this,i),this.currentElement=i,this.locator&&position(this.locator,i);for(var c=0;c<a;c++){t=r.getURI(c);var l=r.getValue(c),s=(n=r.getQName(c),o.createAttributeNS(t,n));this.locator&&position(r.getLocator(c),s),s.value=s.nodeValue=l,i.setAttributeNode(s)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&position(this.locator,n),appendElement(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=_toString.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(t);else r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&position(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=_toString.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&position(this.locator,r),appendElement(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(t,e,n);this.locator&&position(this.locator,o),appendElement(this,o)}},warning:function(t){console.warn("[xmldom warning]\t"+t,_locator(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,_locator(this.locator))},fatalError:function(t){throw console.error("[xmldom fatalError]\t"+t,_locator(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){DOMHandler.prototype[t]=function(){return null}});var XMLReader=require("./sax").XMLReader,DOMImplementation=exports.DOMImplementation=require("./dom").DOMImplementation;exports.XMLSerializer=require("./dom").XMLSerializer,exports.DOMParser=DOMParser;

},{"./dom":12,"./sax":13}],12:[function(require,module,exports){
function copy(e,t){for(var n in e)t[n]=e[n]}function _extends(e,t){var n=e.prototype;if(Object.create){var o=Object.create(t.prototype);n.__proto__=o}if(!(n instanceof t)){function i(){}i.prototype=t.prototype,copy(n,i=new i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),n.constructor=e)}var htmlns="http://www.w3.org/1999/xhtml",NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3),WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8),NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10),INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ExceptionMessage[e]),this.message=ExceptionMessage[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return n.code=e,t&&(this.message=this.message+": "+t),n}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);__set__(e,"length",n.length),copy(n,e),e._inc=t}}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function _addNamedNode(e,t,n,o){if(o?t[_findNodeIndex(t,o)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(o&&_onRemoveAttribute(i,e,o),_onAddAttribute(i,e,n))}}function _removeNamedNode(e,t,n){var o=_findNodeIndex(t,n);if(!(o>=0))throw DOMException(NOT_FOUND_ERR,new Error(e.tagName+"@"+n));for(var i=t.length-1;o<i;)t[o]=t[++o];if(t.length=i,e){var r=e.ownerDocument;r&&(_onRemoveAttribute(r,e,n),n.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(_visitNode(e,t))return!0}while(e=e.nextSibling)}function Document(){}function _onAddAttribute(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function _onRemoveAttribute(e,t,n,o){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function _onUpdateChild(e,t,n){if(e&&e._inc){e._inc++;var o=t.childNodes;if(n)o[o.length++]=n;else{for(var i=t.firstChild,r=0;i;)o[r++]=i,i=i.nextSibling;o.length=r}}}function _removeChild(e,t){var n=t.previousSibling,o=t.nextSibling;return n?n.nextSibling=o:e.firstChild=o,o?o.previousSibling=n:e.lastChild=n,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,n){var o=t.parentNode;if(o&&o.removeChild(t),t.nodeType===DOCUMENT_FRAGMENT_NODE){var i=t.firstChild;if(null==i)return t;var r=t.lastChild}else i=r=t;var a=n?n.previousSibling:e.lastChild;i.previousSibling=a,r.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=r:n.previousSibling=r;do{i.parentNode=e}while(i!==r&&(i=i.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==DOCUMENT_FRAGMENT_NODE&&(t.firstChild=t.lastChild=null),t}function _appendSingleChild(e,t){var n=t.parentNode;if(n){var o=e.lastChild;n.removeChild(t);o=e.lastChild}o=e.lastChild;return t.parentNode=e,t.previousSibling=o,t.nextSibling=null,o?o.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(e,t){var n=[],o=9==this.nodeType?this.documentElement:this,i=o.prefix,r=o.namespaceURI;if(r&&null==i&&null==(i=o.lookupPrefix(r)))var a=[{namespace:r,prefix:null}];return serializeToString(this,n,e,t,a),n.join("")}function needNamespaceDefine(e,t,n){var o=e.prefix||"",i=e.namespaceURI;if(!o&&!i)return!1;if("xml"===o&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var r=n.length;r--;){var a=n[r];if(a.prefix==o)return a.namespace!=i}return!0}function serializeToString(e,t,n,o,i){if(o){if(!(e=o(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case ELEMENT_NODE:i||(i=[]);i.length;var r=e.attributes,a=r.length,s=e.firstChild,u=e.tagName;n=htmlns===e.namespaceURI||n,t.push("<",u);for(var d=0;d<a;d++){"xmlns"==(c=r.item(d)).prefix?i.push({prefix:c.localName,namespace:c.value}):"xmlns"==c.nodeName&&i.push({prefix:"",namespace:c.value})}for(d=0;d<a;d++){var c;if(needNamespaceDefine(c=r.item(d),n,i)){var N=c.prefix||"",l=c.namespaceURI,p=N?" xmlns:"+N:" xmlns";t.push(p,'="',l,'"'),i.push({prefix:N,namespace:l})}serializeToString(c,t,n,o,i)}if(needNamespaceDefine(e,n,i)){N=e.prefix||"",l=e.namespaceURI,p=N?" xmlns:"+N:" xmlns";t.push(p,'="',l,'"'),i.push({prefix:N,namespace:l})}if(s||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),n&&/^script$/i.test(u))for(;s;)s.data?t.push(s.data):serializeToString(s,t,n,o,i),s=s.nextSibling;else for(;s;)serializeToString(s,t,n,o,i),s=s.nextSibling;t.push("</",u,">")}else t.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(s=e.firstChild;s;)serializeToString(s,t,n,o,i),s=s.nextSibling;return;case ATTRIBUTE_NODE:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return t.push("<![CDATA[",e.data,"]]>");case COMMENT_NODE:return t.push("\x3c!--",e.data,"--\x3e");case DOCUMENT_TYPE_NODE:var E=e.publicId,m=e.systemId;if(t.push("<!DOCTYPE ",e.name),E)t.push(' PUBLIC "',E),m&&"."!=m&&t.push('" "',m),t.push('">');else if(m&&"."!=m)t.push(' SYSTEM "',m,'">');else{var h=e.internalSubset;h&&t.push(" [",h,"]"),t.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return t.push("<?",e.target," ",e.data,"?>");case ENTITY_REFERENCE_NODE:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function importNode(e,t,n){var o;switch(t.nodeType){case ELEMENT_NODE:(o=t.cloneNode(!1)).ownerDocument=e;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:n=!0}if(o||(o=t.cloneNode(!1)),o.ownerDocument=e,o.parentNode=null,n)for(var i=t.firstChild;i;)o.appendChild(importNode(e,i,n)),i=i.nextSibling;return o}function cloneNode(e,t,n){var o=new t.constructor;for(var i in t){var r=t[i];"object"!=typeof r&&r!=o[i]&&(o[i]=r)}switch(t.childNodes&&(o.childNodes=new NodeList),o.ownerDocument=e,o.nodeType){case ELEMENT_NODE:var a=t.attributes,s=o.attributes=new NamedNodeMap,u=a.length;s._ownerElement=o;for(var d=0;d<u;d++)o.setAttributeNode(cloneNode(e,a.item(d),!0));break;case ATTRIBUTE_NODE:n=!0}if(n)for(var c=t.firstChild;c;)o.appendChild(cloneNode(e,c,n)),c=c.nextSibling;return o}function __set__(e,t,n){e[t]=n}DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],o=0;o<this.length;o++)serializeToString(this[o],n,e,t);return n.join("")}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var n=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var o=this[n];if(o.localName==t&&o.namespaceURI==e)return o}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var o=new Document;if(o.implementation=this,o.childNodes=new NodeList,o.doctype=n,n&&o.appendChild(n),t){var i=o.createElementNS(e,t);o.appendChild(i)}return o},createDocumentType:function(e,t,n){var o=new DocumentType;return o.name=e,o.nodeName=e,o.publicId=t,o.systemId=n,o}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return cloneNode(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==TEXT_NODE&&e.nodeType==TEXT_NODE?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var o in n)if(n[o]==e)return o;t=t.nodeType==ATTRIBUTE_NODE?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==ATTRIBUTE_NODE?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==DOCUMENT_FRAGMENT_NODE){for(var n=e.firstChild;n;){var o=n.nextSibling;this.insertBefore(n,t),n=o}return e}return null==this.documentElement&&e.nodeType==ELEMENT_NODE&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return importNode(this,e,t)},getElementById:function(e){var t=null;return _visitNode(this.documentElement,function(n){if(n.nodeType==ELEMENT_NODE&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new Element;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList,(t.attributes=new NamedNodeMap)._ownerElement=t,t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ProcessingInstruction;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Element,o=t.split(":"),i=n.attributes=new NamedNodeMap;return n.childNodes=new NodeList,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new Attr,o=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,n}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(e,null):_appendSingleChild(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var o=this.ownerDocument.createAttributeNS(e,t);o.value=o.nodeValue=""+n,this.setAttributeNode(o)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new LiveNodeList(this,function(t){var n=[];return _visitNode(t,function(o){o===t||o.nodeType!=ELEMENT_NODE||"*"!==e&&o.tagName!=e||n.push(o)}),n})},getElementsByTagNameNS:function(e,t){return new LiveNodeList(this,function(n){var o=[];return _visitNode(n,function(i){i===n||i.nodeType!==ELEMENT_NODE||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||o.push(i)}),o})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var o=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling),o}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(e,t,n){return nodeSerializeToString.call(e,t,n)},Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){function getTextContent(e){switch(e.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(getTextContent(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(e){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),__set__=function(e,t,n){e["$$"+t]=n}}}catch(e){}exports.DOMImplementation=DOMImplementation,exports.XMLSerializer=XMLSerializer;

},{}],13:[function(require,module,exports){
var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_SPACE=2,S_EQ=3,S_ATTR_NOQUOT_VALUE=4,S_ATTR_END=5,S_TAG_SPACE=6,S_TAG_CLOSE=7;function XMLReader(){}function parse(e,t,r,a,n){function s(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(n.error("entity not found:"+e),e)}function c(t){if(t>d){var r=e.substring(d,t).replace(/&#?\w+;/g,s);_&&i(d),a.characters(r,0,t-d),d=t}}function i(t,r){for(;t>=u&&(r=l.exec(e));)o=r.index,u=o+r[0].length,_.lineNumber++;_.columnNumber=t-o+1}for(var o=0,u=0,l=/.*(?:\r\n?|\n)|.*$/g,_=a.locator,m=[{currentNSMap:t}],f={},d=0;;){try{var p=e.indexOf("<",d);if(p<0){if(!e.substr(d).match(/^\s*$/)){var T=a.doc,S=T.createTextNode(e.substr(d));T.appendChild(S),a.currentElement=S}return}switch(p>d&&c(p),e.charAt(p+1)){case"/":var h=e.indexOf(">",p+3),A=e.substring(p+2,h),g=m.pop();h<0?(A=e.substring(p+2).replace(/[\s<].*/,""),n.error("end tag name: "+A+" is not complete:"+g.tagName),h=p+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),n.error("end tag name: "+A+" maybe not complete"),h=p+1+A.length);var w=g.localNSMap,E=g.tagName==A;if(E||g.tagName&&g.tagName.toLowerCase()==A.toLowerCase()){if(a.endElement(g.uri,g.localName,A),w)for(var N in w)a.endPrefixMapping(N);E||n.fatalError("end tag name: "+A+" is not match the current start tagName:"+g.tagName)}else m.push(g);h++;break;case"?":_&&i(p),h=parseInstruction(e,p,a);break;case"!":_&&i(p),h=parseDCC(e,p,a,n);break;default:_&&i(p);var b=new ElementAttributes,x=m[m.length-1].currentNSMap,C=(h=parseElementStartPart(e,p,b,x,s,n),b.length);if(!b.closed&&fixSelfClosed(e,h,b.tagName,f)&&(b.closed=!0,r.nbsp||n.warning("unclosed xml attribute")),_&&C){for(var v=copyLocator(_,{}),R=0;R<C;R++){var O=b[R];i(O.offset),O.locator=copyLocator(_,{})}a.locator=v,appendElement(b,a,x)&&m.push(b),a.locator=_}else appendElement(b,a,x)&&m.push(b);"http://www.w3.org/1999/xhtml"!==b.uri||b.closed?h++:h=parseHtmlSpecialContent(e,h,b.tagName,s,a)}}catch(e){n.error("element parse error: "+e),h=-1}h>d?d=h:c(Math.max(p,d)+1)}}function copyLocator(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function parseElementStartPart(e,t,r,a,n,s){for(var c,i=++t,o=S_TAG;;){var u=e.charAt(i);switch(u){case"=":if(o===S_ATTR)c=e.slice(t,i),o=S_EQ;else{if(o!==S_ATTR_SPACE)throw new Error("attribute equal must after attrName");o=S_EQ}break;case"'":case'"':if(o===S_EQ||o===S_ATTR){if(o===S_ATTR&&(s.warning('attribute value must after "="'),c=e.slice(t,i)),t=i+1,!((i=e.indexOf(u,t))>0))throw new Error("attribute value no end '"+u+"' match");l=e.slice(t,i).replace(/&#?\w+;/g,n),r.add(c,l,t-1),o=S_ATTR_END}else{if(o!=S_ATTR_NOQUOT_VALUE)throw new Error('attribute value must after "="');l=e.slice(t,i).replace(/&#?\w+;/g,n),r.add(c,l,t),s.warning('attribute "'+c+'" missed start quot('+u+")!!"),t=i+1,o=S_ATTR_END}break;case"/":switch(o){case S_TAG:r.setTagName(e.slice(t,i));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:o=S_TAG_CLOSE,r.closed=!0;case S_ATTR_NOQUOT_VALUE:case S_ATTR:case S_ATTR_SPACE:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),o==S_TAG&&r.setTagName(e.slice(t,i)),i;case">":switch(o){case S_TAG:r.setTagName(e.slice(t,i));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:"/"===(l=e.slice(t,i)).slice(-1)&&(r.closed=!0,l=l.slice(0,-1));case S_ATTR_SPACE:o===S_ATTR_SPACE&&(l=c),o==S_ATTR_NOQUOT_VALUE?(s.warning('attribute "'+l+'" missed quot(")!!'),r.add(c,l.replace(/&#?\w+;/g,n),t)):("http://www.w3.org/1999/xhtml"===a[""]&&l.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),r.add(l,l,t));break;case S_EQ:throw new Error("attribute value missed!!")}return i;case"":u=" ";default:if(u<=" ")switch(o){case S_TAG:r.setTagName(e.slice(t,i)),o=S_TAG_SPACE;break;case S_ATTR:c=e.slice(t,i),o=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var l=e.slice(t,i).replace(/&#?\w+;/g,n);s.warning('attribute "'+l+'" missed quot(")!!'),r.add(c,l,t);case S_ATTR_END:o=S_TAG_SPACE}else switch(o){case S_ATTR_SPACE:r.tagName;"http://www.w3.org/1999/xhtml"===a[""]&&c.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+c+'" missed value!! "'+c+'" instead2!!'),r.add(c,c,t),t=i,o=S_ATTR;break;case S_ATTR_END:s.warning('attribute space is required"'+c+'"!!');case S_TAG_SPACE:o=S_ATTR,t=i;break;case S_EQ:o=S_ATTR_NOQUOT_VALUE,t=i;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to")}}i++}}function appendElement(e,t,r){for(var a=e.tagName,n=null,s=e.length;s--;){var c=e[s],i=c.qName,o=c.value;if((m=i.indexOf(":"))>0)var u=c.prefix=i.slice(0,m),l=i.slice(m+1),_="xmlns"===u&&l;else l=i,u=null,_="xmlns"===i&&"";c.localName=l,!1!==_&&(null==n&&(n={},_copy(r,r={})),r[_]=n[_]=o,c.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(_,o))}for(s=e.length;s--;){(u=(c=e[s]).prefix)&&("xml"===u&&(c.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(c.uri=r[u||""]))}var m;(m=a.indexOf(":"))>0?(u=e.prefix=a.slice(0,m),l=e.localName=a.slice(m+1)):(u=null,l=e.localName=a);var f=e.uri=r[u||""];if(t.startElement(f,l,a,e),!e.closed)return e.currentNSMap=r,e.localNSMap=n,!0;if(t.endElement(f,l,a),n)for(u in n)t.endPrefixMapping(u)}function parseHtmlSpecialContent(e,t,r,a,n){if(/^(?:script|textarea)$/i.test(r)){var s=e.indexOf("</"+r+">",t),c=e.substring(t+1,s);if(/[&<]/.test(c))return/^script$/i.test(r)?(n.characters(c,0,c.length),s):(c=c.replace(/&#?\w+;/g,a),n.characters(c,0,c.length),s)}return t+1}function fixSelfClosed(e,t,r,a){var n=a[r];return null==n&&((n=e.lastIndexOf("</"+r+">"))<t&&(n=e.lastIndexOf("</"+r)),a[r]=n),n<t}function _copy(e,t){for(var r in e)t[r]=e[r]}function parseDCC(e,t,r,a){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(n=e.indexOf("--\x3e",t+4))>t?(r.comment(e,t+4,n-t-4),n+3):(a.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var n=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,n-t-9),r.endCDATA(),n+3}var s=split(e,t),c=s.length;if(c>1&&/!doctype/i.test(s[0][0])){var i=s[1][0],o=c>3&&/^public$/i.test(s[2][0])&&s[3][0],u=c>4&&s[4][0],l=s[c-1];return r.startDTD(i,o&&o.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),l.index+l[0].length}}return-1}function parseInstruction(e,t,r){var a=e.indexOf("?>",t);if(a){var n=e.substring(t,a).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){n[0].length;return r.processingInstruction(n[1],n[2]),a+2}return-1}return-1}function ElementAttributes(e){}function _set_proto_(e,t){return e.__proto__=t,e}function split(e,t){var r,a=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=t,n.exec(e);r=n.exec(e);)if(a.push(r),r[1])return a}XMLReader.prototype={parse:function(e,t,r){var a=this.domBuilder;a.startDocument(),_copy(t,t={}),parse(e,t,r,a,this.errorHandler),a.endDocument()}},ElementAttributes.prototype={setTagName:function(e){if(!tagNamePattern.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!tagNamePattern.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},_set_proto_({},_set_proto_.prototype)instanceof _set_proto_||(_set_proto_=function(e,t){function r(){}for(t in r.prototype=t,r=new r,e)r[t]=e[t];return r}),exports.XMLReader=XMLReader;

},{}],14:[function(require,module,exports){
"use strict";var isEmpty=require("lodash.isempty"),flatten=require("lodash.flatten"),vg=require("./libraries/vg/vg"),img=require("./libraries/img/img"),g={};function importCommands(r){for(var i in r)g[i]=r[i]}for(var k in vg)g[k]=vg[k];for(var k in delete g.delete,img)g[k]=img[k];function splitRow(r,i){var e,t,n=[],o="",m=!1;for(r=r.trim(),t=0;t<r.length;t+=1)'"'===(e=r[t])?'"'===r[t+1]?(o+='"',t+=1):m=!m:e===i?m?o+=e:(n.push(o),o=""):o+=e;return n.push(o),n}importCommands(require("./libraries/math")),importCommands(require("./libraries/string")),importCommands(require("./libraries/list")),importCommands(require("./libraries/data")),importCommands(require("./libraries/image")),importCommands(require("./libraries/graphics")),importCommands(require("./libraries/easing")),g.importSVG=function(r){return g.svg.parseString(r)},g.importImage=function(r){var i=g.Layer.fromImage(r);return new g.Img(i.toCanvas())},g.importText=function(r){return r?String(r):""},g.importCSV=function(r,i){var e,t;if(i=i||",",!r)return null;t=splitRow((e=r.split(/\r\n|\r|\n/g))[0],i),e=e.slice(1);for(var n,o,m,a,g,s=[],u=0;u<e.length;u+=1)if(n=e[u],!isEmpty(n)){for(o={},m=splitRow(n,i),g=0;g<m.length;g+=1)a=m[g],o[t[g]]=isNaN(a)?a:parseFloat(a);s.push(o)}return s},g.merge=function(){var r=flatten(arguments);if(Array.isArray(r)){for(var i=[],e=0;e<r.length;e+=1)isEmpty(r[e])||i.push(r[e]);if(i.length>0){var t=i[0];if(t&&(t.commands||t.shapes||t.fontFamily))return vg.merge(i);if(t instanceof img.Img)return img.merge(i)}}return null},g.mix=function(r,i,e){if(e=void 0!==e?e:.5,"number"==typeof r)return r*(1-e)+i*e;if(r instanceof g.Color&&i instanceof g.Color)return new g.Color(g.mix(r.r,i.r,e),g.mix(r.g,i.g,e),g.mix(r.b,i.b,e),g.mix(r.a,i.a,e));if("object"==typeof r){for(var t={},n=Object.keys(r),o=0,m=n.length;o<m;o+=1){var a=n[o],s=r[a],u=i[a];void 0!==s&&void 0!==u&&(t[a]=g.mix(s,u,e))}return t}return 0},module.exports=g;

},{"./libraries/data":15,"./libraries/easing":17,"./libraries/graphics":18,"./libraries/image":19,"./libraries/img/img":23,"./libraries/list":26,"./libraries/math":27,"./libraries/string":28,"./libraries/vg/vg":50,"lodash.flatten":3,"lodash.isempty":5}],15:[function(require,module,exports){
"use strict";var values=require("lodash.values"),groupBy=require("lodash.groupby"),list=require("./list"),g={convert:function(r,t,e,n,o){var u=arguments.length;if(2===u){var i=arguments[1];t=i.inMin,e=i.inMax,n=i.outMin,o=i.outMax}else 3===u&&(t=arguments[1][0],e=arguments[1][1],n=arguments[2][0],o=arguments[2][1]);try{r=(r-t)/(e-t)}catch(e){r=t}return n+r*(o-n)},filterData:function(r,t,e,n){if(!r)return[];var o,u,i;if(null==n)return r;var l=[];if("=="===e)for(o=0,u=r.length;o<u;o++)(i=r[o])[t]==n&&l.push(i);else if("!="===e)for(o=0,u=r.length;o<u;o++)(i=r[o])[t]!=n&&l.push(i);else if(">"===e)for(o=0,u=r.length;o<u;o++)(i=r[o])[t]>n&&l.push(i);else if(">="===e)for(o=0,u=r.length;o<u;o++)(i=r[o])[t]>=n&&l.push(i);else if("<"===e)for(o=0,u=r.length;o<u;o++)(i=r[o])[t]<n&&l.push(i);else{if("<="!==e)throw new Error("Invalid op "+e);for(o=0,u=r.length;o<u;o++)(i=r[o])[t]<=n&&l.push(i)}return l},groupBy:function(r,t){return values(groupBy(r,t))},keys:function(r){for(var t=[],e=0;e<r.length;e++)t=t.concat(Object.keys(r[e]));return list.distinct(t)},lookup:function(r,t){var e,n;if(void 0!==(n=(e=r)[t]))return"function"==typeof n&&(n=n.call(e)),n;for(var o,u=t.split("."),i=0;i<u.length;i+=1)o=u[i],e&&(e="function"==typeof e[o]?(n=e[o]).call(e):e[o]);return e},dataScale:function(r,t,e){return{domain:r,outMin:t,outMax:e}},ticks:function(r,t,e){e=void 0!==e?e:10;var n,o=t-r,u=Math.pow(10,Math.floor(Math.log(o/e)/Math.LN10)),i=e/o*u,l=[];for(i<=.15?u*=10:i<=.35?u*=5:i<=.75&&(u*=2),r=Math.ceil(r/u)*u,t=Math.floor(t/u)*u+.5*u,n=r;n<t;n+=u)l.push(n);return l}};module.exports=g;

},{"./list":26,"lodash.groupby":4,"lodash.values":7}],16:[function(require,module,exports){
"use strict";function isBuffer(){return!1}function isObject(e){return"object"==typeof e&&null!==e}function objectToString(e){return Object.prototype.toString.call(e)}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isNullOrUndefined(e){return null==e}var isArguments,_deepEqual,objEquiv,util={isObject:isObject,isRegExp:isRegExp,isDate:isDate,isNullOrUndefined:isNullOrUndefined,isBuffer:isBuffer},pSlice=Array.prototype.slice,deepEqual={};_deepEqual=function(e,t){if(e===t)return!0;if(util.isBuffer(e)&&util.isBuffer(t)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}return util.isDate(e)&&util.isDate(t)?e.getTime()===t.getTime():util.isRegExp(e)&&util.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:util.isObject(e)||util.isObject(t)?objEquiv(e,t):e==t},deepEqual.deepEqual=_deepEqual,isArguments=function(e){return"[object Arguments]"===Object.prototype.toString.call(e)},objEquiv=function(e,t){if(util.isNullOrUndefined(e)||util.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;var i,r,u,n,l=isArguments(e),s=isArguments(t);if(l&&!s||!l&&s)return!1;if(l)return e=pSlice.call(e),t=pSlice.call(t),_deepEqual(e,t);try{i=Object.keys(e),r=Object.keys(t)}catch(e){return!1}if(i.length!==r.length)return!1;for(i.sort(),r.sort(),n=i.length-1;n>=0;n--)if(i[n]!=r[n])return!1;for(n=i.length-1;n>=0;n--)if(u=i[n],!_deepEqual(e[u],t[u]))return!1;return!0},module.exports=deepEqual;

},{}],17:[function(require,module,exports){
"use strict";var g={easeInQuad:function(t,n,e,u){return e*(t/=u)*t+n},easeOutQuad:function(t,n,e,u){return-e*(t/=u)*(t-2)+n},easeInOutQuad:function(t,n,e,u){return(t/=u/2)<1?e/2*t*t+n:-e/2*(--t*(t-2)-1)+n},easeInCubic:function(t,n,e,u){return e*(t/=u)*t*t+n},easeOutCubic:function(t,n,e,u){return e*((t=t/u-1)*t*t+1)+n},easeInOutCubic:function(t,n,e,u){return(t/=u/2)<1?e/2*t*t*t+n:e/2*((t-=2)*t*t+2)+n},easeInQuart:function(t,n,e,u){return e*(t/=u)*t*t*t+n},easeOutQuart:function(t,n,e,u){return-e*((t=t/u-1)*t*t*t-1)+n},easeInOutQuart:function(t,n,e,u){return(t/=u/2)<1?e/2*t*t*t*t+n:-e/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(t,n,e,u){return e*(t/=u)*t*t*t*t+n},easeOutQuint:function(t,n,e,u){return e*((t=t/u-1)*t*t*t*t+1)+n},easeInOutQuint:function(t,n,e,u){return(t/=u/2)<1?e/2*t*t*t*t*t+n:e/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(t,n,e,u){return-e*Math.cos(t/u*(Math.PI/2))+e+n},easeOutSine:function(t,n,e,u){return e*Math.sin(t/u*(Math.PI/2))+n},easeInOutSine:function(t,n,e,u){return-e/2*(Math.cos(Math.PI*t/u)-1)+n},easeInExpo:function(t,n,e,u){return 0===t?n:e*Math.pow(2,10*(t/u-1))+n},easeOutExpo:function(t,n,e,u){return t===u?n+e:e*(1-Math.pow(2,-10*t/u))+n},easeInOutExpo:function(t,n,e,u){return 0===t?n:t===u?n+e:(t/=u/2)<1?e/2*Math.pow(2,10*(t-1))+n:e/2*(2-Math.pow(2,-10*--t))+n},easeInCirc:function(t,n,e,u){return-e*(Math.sqrt(1-(t/=u)*t)-1)+n},easeOutCirc:function(t,n,e,u){return e*Math.sqrt(1-(t=t/u-1)*t)+n},easeInOutCirc:function(t,n,e,u){return(t/=u/2)<1?-e/2*(Math.sqrt(1-t*t)-1)+n:e/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(t,n,e,u){var a=1.70158,r=0,i=e;return 0===t?n:1==(t/=u)?n+e:(r||(r=.3*u),i<Math.abs(e)?(i=e,a=r/4):a=r/(2*Math.PI)*Math.asin(e/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*u-a)*(2*Math.PI)/r)+n)},easeOutElastic:function(t,n,e,u){var a=1.70158,r=0,i=e;return 0===t?n:1==(t/=u)?n+e:(r||(r=.3*u),i<Math.abs(e)?(i=e,a=r/4):a=r/(2*Math.PI)*Math.asin(e/i),i*Math.pow(2,-10*t)*Math.sin((t*u-a)*(2*Math.PI)/r)+e+n)},easeInOutElastic:function(t,n,e,u){var a=1.70158,r=0,i=e;return 0===t?n:2==(t/=u/2)?n+e:(r||(r=u*(.3*1.5)),i<Math.abs(e)?(i=e,a=r/4):a=r/(2*Math.PI)*Math.asin(e/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*u-a)*(2*Math.PI)/r)*-.5+n:i*Math.pow(2,-10*(t-=1))*Math.sin((t*u-a)*(2*Math.PI)/r)*.5+e+n)},easeInBack:function(t,n,e,u,a){return void 0===a&&(a=1.70158),e*(t/=u)*t*((a+1)*t-a)+n},easeOutBack:function(t,n,e,u,a){return void 0===a&&(a=1.70158),e*((t=t/u-1)*t*((a+1)*t+a)+1)+n},easeInOutBack:function(t,n,e,u,a){return void 0===a&&(a=1.70158),(t/=u/2)<1?e/2*(t*t*((1+(a*=1.525))*t-a))+n:e/2*((t-=2)*t*((1+(a*=1.525))*t+a)+2)+n},easeInBounce:function(t,n,e,u){return e-g.easeOutBounce(u-t,0,e,u)+n},easeOutBounce:function(t,n,e,u){return(t/=u)<1/2.75?e*(7.5625*t*t)+n:t<2/2.75?e*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?e*(7.5625*(t-=2.25/2.75)*t+.9375)+n:e*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,e,u){return t<u/2?.5*g.easeInBounce(2*t,0,e,u)+n:.5*g.easeOutBounce(2*t-u,0,e,u)+.5*e+n},easing:function(t){var n=g[t],e=Array.prototype.slice.call(arguments,1);return n.apply(null,e)}};module.exports=g;

},{}],18:[function(require,module,exports){
"use strict";var vg=require("./vg/vg"),img=require("./img/img"),math=require("./math"),g={};function clamp(r,t,n){return Math.min(n,Math.max(t,r))}function transformShape(r,t){return t.transformShape(r)}function transformImage(r,t){return r._transform(t.m)}function transform(r,t){if(r instanceof vg.Path||r instanceof vg.Group||r instanceof vg.Text||void 0!==r.x&&void 0!==r.y)return transformShape(r,t);if(Array.isArray(r)){for(var n=[],e=0;e<r.length;e+=1)n.push(transform(r[e],t));return n}return r instanceof img.Img?transformImage(r,t):void 0}g.HORIZONTAL="horizontal",g.VERTICAL="vertical",g.BOTH="both",g.LEFT="left",g.RIGHT="right",g.CENTER="center",g.TOP="top",g.BOTTOM="bottom",g.MIDDLE="middle",g.align=function(r,t,n,e){if(r){var o,a,i=t.x,s=t.y,f=vg.bounds(r);return o=n===g.LEFT?i-f.x:n===g.RIGHT?i-f.x-f.width:n===g.CENTER?i-f.x-f.width/2:0,a=e===g.TOP?s-f.y:e===g.BOTTOM?s-f.y-f.height:e===g.MIDDLE?s-f.y-f.height/2:0,transform(r,(new vg.Transform).translate(o,a))}},g.colorize=function(r,t){var n=arguments;if(("object"!=typeof t||t instanceof vg.Color)&&(t={},void 0!==n[1]&&(t.fill=n[1]),void 0!==n[2]&&(t.stroke=n[2]),void 0!==n[3]&&(t.strokeWidth=n[3])),r instanceof vg.Path||r instanceof vg.Group)return r.colorize(t);if(r instanceof img.Img||r instanceof vg.Text){if(t.fill||0===t.fill)return r.colorize(t.fill);throw new Error("No color given")}},g.copy=function(r,t,n,e,o,a){if(!r)return[];var i,g,s,f,u,v=[],l=0,h=0,c=0,m=1,d=1,p=!1;for(r instanceof vg.Path||r instanceof vg.Group||r instanceof vg.Text?u=transformShape:Array.isArray(r)&&r.length>0&&void 0!==r[0].x&&void 0!==r[0].y?(p=!0,u=transformShape):r instanceof img.Img&&(u=transformImage),i=0;i<t;i+=1){for(g=new vg.Transform,s=0;s<n.length;s+=1)"t"===(f=n[s])?g=g.translate(l,h):"r"===f?g=g.rotate(c):"s"===f&&(g=g.scale(m,d));p?v=v.concat(u(r,g)):v.push(u(r,g)),l+=e.x,h+=e.y,c+=o,m+=a.x,d+=a.y}return v},g.flip=function(r,t){if("none"===t)return r;if(r instanceof vg.Path||r instanceof vg.Group||r instanceof vg.Text||Array.isArray(r)&&r.length>0&&void 0!==r[0].x&&void 0!==r[0].y){var n=t===g.HORIZONTAL||t===g.BOTH?-1:1,e=t===g.VERTICAL||t===g.BOTH?-1:1;return vg.scale(r,new vg.Point(n,e),vg.centerPoint(r))}if(r instanceof img.Img){var o=r,a=o.toLayer(!1);return t!==g.HORIZONTAL&&t!==g.BOTH||a.flipHorizontal(),t!==g.VERTICAL&&t!==g.BOTH||a.flipVertical(),o.withCanvas(a.toCanvas())}},g.fit=function(r,t,n,e,o){if(r){o=void 0!==o&&o;var a,i,g,s=vg.bounds(r),f=s.x,u=s.y,v=s.width,l=s.height;return v=v>1e-12?v:0,l=l>1e-12?l:0,a=(a=new vg.Transform).translate(t.x,t.y),o?(i=v>0?n/v:1,g=l>0?e/l:1):(i=v>0?n/v:Number.MAX_VALUE,g=l>0?e/l:Number.MAX_VALUE,i=g=Math.min(i,g)),transform(r,a=(a=a.scale(i,g)).translate(-v/2-f,-l/2-u))}},g.fitTo=function(r,t,n){if(r){if(!t)return r;var e=vg.bounds(t),o=e.x,a=e.y,i=e.width,s=e.height;return g.fit(r,{x:o+i/2,y:a+s/2},i,s,n)}},g.hslAdjust=function(r,t,n,e,o){if(o||(o=0),r instanceof img.Img){var a=r,i=a.toLayer(!1);return i.addFilter("hslAdjust",{h:t,s:n,l:e,a:o}),a.withCanvas(i.toCanvas())}t=clamp(t,-1,1),n=clamp(n,-1,1),e=clamp(e,-1,1),o=clamp(o,-1,1);var g,s,f,u,v,l,h,c,m,d,p,y,T=1+n*(n<0?1:2),w=e<0?1+e:1-e,x=e<0?0:e;return t=6*t%6,function e(a){if(a instanceof vg.Group){for(var i=[],C=0;C<a.shapes.length;C+=1)i.push(e(a.shapes[C]));return new vg.Group(i)}if(a instanceof vg.Path){var b=a.clone();return b.fill=e(b.fill),b.stroke=e(b.stroke),b}var A=a;return A instanceof vg.Color||(A=vg.Color.parse(A)),g=A.r,s=A.g,f=A.b,0===t&&0===n||(s>(u=g)&&(u=s),f>u&&(u=f),s<(v=g)&&(v=s),f<v&&(v=f),l=u-v,(m=(v+u)/2)>0&&l>0&&(m<=.5?((c=l/(u+v)*T)>1&&(c=1),r=m*(1+c)):((c=l/(2-u-v)*T)>1&&(c=1),r=m+c-m*c),(h=g===u?s===v?5+(u-f)/l+t:1-(u-s)/l+t:s===u?f===v?1+(u-g)/l+t:3-(u-f)/l+t:g===v?3+(u-s)/l+t:5-(u-g)/l+t)<0&&(h+=6),h>=6&&(h-=6),p=(r-(d=m+m-r))*(h-(y=h>>0)),0===y?(g=r,s=d+p,f=d):1===y?(g=r-p,s=r,f=d):2===y?(g=d,s=r,f=d+p):3===y?(g=d,s=r-p,f=r):4===y?(g=d+p,s=d,f=r):5===y&&(g=r,s=d,f=r-p))),(g=g*w+x)<0&&(g=0),(s=s*w+x)<0&&(s=0),(f=f*w+x)<0&&(f=0),g>1&&(g=1),s>1&&(s=1),f>1&&(f=1),new vg.Color(g,s,f,A.a+o)}(r)},g.rgbAdjust=function(r,t,n,e,o){return o||(o=0),t=clamp(t,-1,1),n=clamp(n,-1,1),e=clamp(e,-1,1),o=clamp(o,-1,1),function r(a){if(a instanceof img.Img){var i=a,g=i.toLayer(!1);return g.addFilter("rgbAdjust",{r:t,g:n,b:e,a:o}),i.withCanvas(g.toCanvas())}if(a instanceof vg.Group){for(var s=[],f=0;f<a.shapes.length;f+=1)s.push(r(a.shapes[f]));return new vg.Group(s)}if(a instanceof vg.Path){var u=a.clone();return u.fill=r(u.fill),u.stroke=r(u.stroke),u}var v=a;return v instanceof vg.Color||(v=vg.Color.parse(v)),new vg.Color(v.r+t,v.g+n,v.b+e,v.a+o)}(r)},g.stack=function(r,t,n){if(!r)return[];if(r.length<=1)return r;var e,o,a,i,g,s,f=r[0].bounds(),u=[];if("e"===t)for(a=f.x,e=0;e<r.length;e+=1)s=(o=r[e]).bounds(),g=(new vg.Transform).translate(a-s.x,0),u.push(transform(o,g)),a+=s.width+n;else if("w"===t)for(a=f.x+f.width,e=0;e<r.length;e+=1)s=(o=r[e]).bounds(),g=(new vg.Transform).translate(a-(s.x+s.width),0),u.push(transform(o,g)),a-=s.width+n;else if("n"===t)for(i=f.y+f.height,e=0;e<r.length;e+=1)s=(o=r[e]).bounds(),g=(new vg.Transform).translate(0,i-(s.y+s.height)),u.push(transform(o,g)),i-=s.height+n;else if("s"===t)for(i=f.y,e=0;e<r.length;e+=1)s=(o=r[e]).bounds(),g=(new vg.Transform).translate(0,i-s.y),u.push(transform(o,g)),i+=s.height+n;return u},g.angle=function(r,t){var n=arguments;return 4===n.length?(r=vg.Point.read(n[0],n[1]),t=vg.Point.read(n[2],n[3])):(r=vg.Point.read(r),t=vg.Point.read(t)),math.degrees(Math.atan2(t.y-r.y,t.x-r.x))},g.coordinates=function(r,t,n){var e=arguments;return 4===e.length?(r=vg.Point.read(e[0],e[1]),t=e[2],n=e[3]):r=vg.Point.read(r),vg.geo.coordinates(r.x,r.y,t,n)},g.distance=function(r,t){var n=arguments;return 4===n.length?(r=vg.Point.read(n[0],n[1]),t=vg.Point.read(n[2],n[3])):(r=vg.Point.read(r),t=vg.Point.read(t)),Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))},g.grayColor=function(r,t){return t||0===t||(t=1),vg.Color.gray(r,t,1)},g.hexColor=function(r){var t;return t=r,"#"!==(r=!isNaN(parseFloat(t))&&isFinite(t)?r.toString(16):String(r))[0]&&(r="#"+r),vg.Color.parse(r)},g.hslColor=function(r,t,n,e){return e||0===e||(e=1),vg.Color.hsl(r,t,n,e,1)},g.rgbColor=function(r,t,n,e){return e||0===e||(e=1),vg.Color.rgb(r,t,n,e,1)},g.desaturate=function(r,t){return r?r.desaturate({method:t}):null},g.invert=function(r){if(!r)return null;if(r instanceof img.Img){var t=r,n=t.toLayer(!1);return n.addFilter("invert"),t.withCanvas(n.toCanvas())}return r.invert()},module.exports=g;

},{"./img/img":23,"./math":27,"./vg/vg":50}],19:[function(require,module,exports){
"use strict";var vg=require("./vg/vg"),img=require("./img/img"),Img=img.Img,Layer=img.Layer,ImageCanvas=img.ImageCanvas,g={blend:function(a,t,e){var r=a.bounds(),n=t.bounds(),i=new vg.Rect(r.x,r.y,r.width,r.height).unite(n),o=Math.ceil(i.width),d=Math.ceil(i.height),s=o/2+i.x,h=d/2+i.y,u=new ImageCanvas(o,d);u.addLayer(a.toLayer()).translate(-s,-h);var v=u.addLayer(t.toLayer());return v.translate(-s,-h),v.blendmode=e,new Img(u.render(),s,h)},blur:function(a,t){var e=a.toLayer(!1);return e.addFilter("blur",{radius:t}),a.withCanvas(e.toCanvas())},brighten:function(a,t,e){var r=a.toLayer(!1);return r.addFilter("brightness",{brightness:t/100,contrast:e/100}),a.withCanvas(r.toCanvas())},bump:function(a,t,e,r){var n=a.toLayer(!1);return n.addFilter("bump",{dx:t.x,dy:t.y,radius:e,zoom:r/100}),a.withCanvas(n.toCanvas())},colorImage:function(a,t,e){var r=Layer.fromColor(e);return r.width=a,r.height=t,new Img(r.toCanvas())},crop:function(a,t){return a.crop(t)},crossEdges:function(a,t){var e=a.toLayer(!1);return e.addFilter("crossedges",{strength:t/100}),a.withCanvas(e.toCanvas())},dent:function(a,t,e,r){var n=a.toLayer(!1);return n.addFilter("dent",{dx:t.x,dy:t.y,radius:e,zoom:r/100}),a.withCanvas(n.toCanvas())},emboss:function(a,t,e){var r=a.toLayer(!1);return r.addFilter("emboss",{amount:t/100,angle:e}),a.withCanvas(r.toCanvas())},equalize:function(a){var t=a.toLayer(!1);return t.addFilter("equalize"),a.withCanvas(t.toCanvas())},findEdges:function(a){var t=a.toLayer(!1);return t.addFilter("findedges"),a.withCanvas(t.toCanvas())},glow:function(a,t,e){var r=a.toLayer(!1);return r.addFilter("glow",{amount:t/100,kernelSize:e}),a.withCanvas(r.toCanvas())},gradientImage:function(a,t,e,r,n,i,o){var d=Layer.fromGradient(e,r,n,i,o/100);return d.width=a,d.height=t,new Img(d.toCanvas())},histogram:function(a,t,e){var r,n,i,o,d=a.getPixels(),s=new Array(256);for(r=0;r<s.length;r+=1)s[r]=0;if("lum"===t)for(r=0;r<d.width*d.height;r+=1)o=.2125*(i=d.get(r))[0]+.7154*i[1]+.0721*i[2],s[Math.round(o)]+=1;else for("red"===t&&(n=0),"green"===t&&(n=1),"blue"===t&&(n=2),"alpha"===t&&(n=3),r=0;r<d.width*d.height;r+=1)s[o=(i=d.get(r))[n]]+=1;if(e)for(r=0;r<s.length;r+=1)s[r]/=d.width*d.height;return s},lightTunnel:function(a,t,e){var r=a.toLayer(!1);return r.addFilter("splash",{dx:t.x,dy:t.y,radius:e}),a.withCanvas(r.toCanvas())},luminanceBW:function(a){var t=a.toLayer(!1);return t.addFilter("luminancebw"),a.withCanvas(t.toCanvas())},mask:function(a,t){a=a.transformed(),t=t.transformed();var e=a.toLayer(!1),r=t.toLayer(),n=a.bounds(),i=t.bounds(),o=new vg.Rect(n.x,n.y,n.width,n.height).unite(i),d=Math.ceil(o.width),s=Math.ceil(o.height),h=d/2+o.x,u=s/2+o.y;r.translate(-h,-u);var v=e.mask.addLayer("white");return v.width=e.width,v.height=e.height,e.mask.addLayer(r),a.withCanvas(e.toCanvas())},mosaic:function(a,t){var e=a.toLayer(!1);return e.addFilter("mosaic",{blockSize:t}),a.withCanvas(e.toCanvas())},pinch:function(a,t,e){var r=a.toLayer(!1);return r.addFilter("pinch",{dx:t.x,dy:t.y,zoom:e/100}),a.withCanvas(r.toCanvas())},posterize:function(a,t){var e=a.toLayer(!1);return e.addFilter("posterize",{levels:t}),a.withCanvas(e.toCanvas())},removeNoise:function(a){var t=a.toLayer(!1);return t.addFilter("removenoise"),a.withCanvas(t.toCanvas())},solarize:function(a){var t=a.toLayer(!1);return t.addFilter("solarize"),a.withCanvas(t.toCanvas())},toBitmap:function(a,t){var e,r=document.createElement("canvas"),n=(e=t?t.bounds():a.bounds()).x,i=e.y,o=r.width=Math.ceil(e.width),d=r.height=Math.ceil(e.height),s=r.getContext("2d");return s.translate(-n,-i),a.draw(s),new Img(r,o/2+n,d/2+i)},toPixels:function(a,t){t=t>1?t:1;for(var e=a.canvas,r=e.width,n=e.height,i=e.getContext("2d").getImageData(0,0,e.width,e.height).data,o=4*e.width,d=[],s=0;s<n;s+=t)for(var h=0;h<r;h+=t){var u=s*o+4*h,v=i[u],g=i[u+1],l=i[u+2],c=i[u+3];d.push({x:h-r/2,y:s-n/2,r:v,g:g,b:l,a:c,color:new vg.Color(v/255,g/255,l/255,c/255)})}return d},twirl:function(a,t,e,r){var n=a.toLayer(!1);return n.addFilter("twirl",{dx:t.x,dy:t.y,radius:e,angle:r}),a.withCanvas(n.toCanvas())}};module.exports=g;

},{"./img/img":23,"./vg/vg":50}],20:[function(require,module,exports){
"use strict";var async=require("async"),process=require("./process"),CanvasRenderer=require("./canvasrenderer");function passThrough(e,n){n(null,e)}var AsyncRenderer={};function processLayers(e){return function(n,r){async.compose(AsyncRenderer.processImage(n.filters),AsyncRenderer.processMask(n.mask),AsyncRenderer.load(e,n))(null,r)}}AsyncRenderer.toImage=function(){return function(e,n){n(null,CanvasRenderer.toImage(e))}},AsyncRenderer.load=function(e,n){return n.isPath()?AsyncRenderer.loadFile(n.data):n.isFill()?AsyncRenderer.generateColor(e,n):n.isGradient()?AsyncRenderer.generateGradient(e,n):n.isHtmlCanvas()?AsyncRenderer.loadHtmlCanvas(n.data):n.isImage()?AsyncRenderer.loadImage(n.data):n.isImageCanvas()?AsyncRenderer.loadImageCanvas(n.data):void 0},AsyncRenderer.loadFile=function(e){return function(n,r){var a=document.createElement("canvas"),t=a.getContext("2d"),s=new Image;s.onload=function(){a.width=s.width,a.height=s.height,t.drawImage(s,0,0,a.width,a.height),r(null,a)},s.src=e}},AsyncRenderer.loadHtmlCanvas=function(e){return function(n,r){r(null,e)}},AsyncRenderer.loadImageCanvas=function(e){return function(n,r){e.render(function(e){r(null,e)})}},AsyncRenderer.loadImage=function(e){return function(n,r){r(null,CanvasRenderer.loadImage(e))}},AsyncRenderer.generateColor=function(e,n){return function(r,a){a(null,CanvasRenderer.generateColor(e,n))}},AsyncRenderer.generateGradient=function(e,n){return function(r,a){a(null,CanvasRenderer.generateGradient(e,n))}},AsyncRenderer.processImage=function(e){return 0===e.length?passThrough:function(n,r){CanvasRenderer.processImage(n,e),r(null,n)}},AsyncRenderer.processMask=function(e){return 0===e.layers.length?passThrough:function(n,r){e.width=n.width,e.height=n.height,AsyncRenderer.renderBW(e,function(e){var a={name:"mask",options:{data:e.getContext("2d").getImageData(0,0,e.width,e.height).data,x:0,y:0,width:e.width,height:e.height}};AsyncRenderer.processImage([a])(n,r)})}},AsyncRenderer.mergeManualBlend=function(e,n){return function(r,a){CanvasRenderer.mergeManualBlend(e,n)(r),a(null,r)}},AsyncRenderer.mergeNativeBlend=function(e,n){return function(r,a){CanvasRenderer.mergeNativeBlend(e,n)(r),a(null,r)}},AsyncRenderer.merge=function(e,n,r){var a=CanvasRenderer.createRenderPipe(AsyncRenderer,e,n);a.reverse();var t=CanvasRenderer.singleLayerWithOpacity(e,n[0]);a.push(function(e,n){n(null,t)}),async.compose.apply(null,a)(null,function(){r(t)})},AsyncRenderer.composite=function(e,n,r){n&&0!==n.length?1!==n.length?AsyncRenderer.merge(e,n,r):r(CanvasRenderer.singleLayerWithOpacity(e,n[0])):r(null)},AsyncRenderer.render=function(e,n){async.map(e.layers,processLayers(e),function(r,a){n&&AsyncRenderer.composite(e,CanvasRenderer.getLayerData(e,a),n)})},AsyncRenderer.renderBW=function(e,n){AsyncRenderer.render(e,function(e){e.getContext("2d").getImageData(0,0,e.width,e.height).data;AsyncRenderer.processImage([{name:"desaturate",options:{method:"ITU-R BT.709"}}])(e,function(e,r){n(r)})})},module.exports=AsyncRenderer;

},{"./canvasrenderer":22,"./process":24,"async":1}],21:[function(require,module,exports){
"use strict";var blend,process,aliases={normal:"source-over","linear-dodge":"add"};function addAliases(n){var t,e,i,o=Object.keys(aliases);for(t=0;t<o.length;t+=1)e=o[t],i=aliases[e],n[e]=n[i]}function realBlendMode(n){return void 0!==aliases[n]?aliases[n]:n}function getNativeModes(){if("undefined"==typeof document)return{};var n,t,e,i,o={},r=document.createElement("canvas"),a=r.getContext("2d");if(!a)return{};var l=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],c=["multiply","screen","overlay","soft-light","hard-light","color-dodge","color-burn","darken","lighten","difference","exclusion","hue","saturation","luminosity","color","add","subtract","average","negation"],d=["divide","darker-color","lighter-color","linear-burn","linear-light","vivid-light","pin-light","hard-mix"];for(n=0;n<l.length;n+=1)o[l[n]]=!0;for(n=0;n<d.length;n+=1)o[d[n]]=!1;for(r.width=1,r.height=1,n=0;n<c.length;n+=1){e="darken"===(t=c[n]),i=!1,a.save();try{a.fillStyle=e?"#300":"#a00",a.fillRect(0,0,1,1),a.globalCompositeOperation=t,a.globalCompositeOperation===t&&(a.fillStyle=e?"#a00":"#300",a.fillRect(0,0,1,1),i=a.getImageData(0,0,1,1).data[0]!==(e?170:51))}catch(n){}a.restore(),o[t]=i}return addAliases(o),o}function _blend(n,t,e,i,o){process(n,t,e,i,o)}function _wrap(n){return function(t,e,i,o,r){r.type=n,_blend(t,e,i,o,r)}}process=function(n,t,e,i,o){var r,a,l,c,d,u,f,s,h,g,v,y,p=Math.max,m=Math.min,b=.2126,x=.7152,k=.0722;function w(n,t,e){var i,o,r;return e/=255,(n/=255)===(t/=255)&&t===e?(o=0,i=0):i=n>=t&&t>=e?60*(t-e)/(o=n-e):t>n&&n>=e?60*(t-n)/(o=t-e)+60:t>=e&&e>n?60*(e-n)/(o=t-n)+120:e>t&&t>n?60*(e-t)/(o=e-n)+180:e>n&&n>=t?60*(n-t)/(o=e-t)+240:60*(n-e)/(o=n-t)+300,r=b*n+x*t+k*e,[i%360,m(p(o,0),1),m(p(r,0),1)]}function M(n,t,e){var i,o,r,a;return(n%=360)>=0&&n<60?(i=(r=e-b*t-x*(a=t*n/60))+t,o=r+a):n>=60&&n<120?(r=(o=e+k*t+b*(a=t*(n-60)/60))-t,i=o-a):n>=120&&n<180?(o=(i=e-x*t-k*(a=t*(n-120)/60))+t,r=i+a):n>=180&&n<240?(i=(r=e+b*t+x*(a=t*(n-180)/60))-t,o=r-a):n>=240&&n<300?(r=(o=e-k*t-b*(a=t*(n-240)/60))+t,i=o+a):(o=(i=e+x*t+k*(a=t*(n-300)/60))-t,r=i-a),[i=255*m(p(i,0),1),o=255*m(p(o,0),1),r=255*m(p(r,0),1)]}r={"source-over":function(){g=a+u-u*d,v=l+f-f*d,y=c+s-s*d},multiply:function(){g=a*u+a*(1-h)+u*(1-d),v=l*f+l*(1-h)+f*(1-d),y=c*s+c*(1-h)+s*(1-d)},subtract:function(){g=p(u*d-a*h,0)+a*(1-h)+u*(1-d),v=p(f*d-l*h,0)+l*(1-h)+f*(1-d),y=p(s*d-c*h,0)+c*(1-h)+s*(1-d)},divide:function(){g=0===a?0:u/a*255,v=0===l?0:f/l*255,y=0===c?0:s/c*255},screen:function(){g=a+u-a*u,v=l+f-l*f,y=c+s-c*s},lighten:function(){g=p(a*h,u*d)+a*(1-h)+u*(1-d),v=p(l*h,f*d)+l*(1-h)+f*(1-d),y=p(c*h,s*d)+c*(1-h)+s*(1-d)},darken:function(){g=m(a*h,u*d)+a*(1-h)+u*(1-d),v=m(l*h,f*d)+l*(1-h)+f*(1-d),y=m(c*h,s*d)+c*(1-h)+s*(1-d)},"darker-color":function(){u*d*.3+f*d*.59+s*d*.11<=a*h*.3+l*h*.59+c*h*.11?(g=u*d,v=f*d,y=s*d):(g=a*h,v=l*h,y=c*h),g+=a*(1-h)+u*(1-d),v+=l*(1-h)+f*(1-d),y+=c*(1-h)+s*(1-d)},"lighter-color":function(){u*d*.3+f*d*.59+s*d*.11>a*h*.3+l*h*.59+c*h*.11?(g=u*d,v=f*d,y=s*d):(g=a*h,v=l*h,y=c*h),g+=a*(1-h)+u*(1-d),v+=l*(1-h)+f*(1-d),y+=c*(1-h)+s*(1-d)},add:function(){g=m(u+a,255),v=m(f+l,255),y=m(s+c,255)},"linear-burn":function(){g=(g=u+a)<255?0:g-255,v=(v=f+l)<255?0:v-255,y=(y=s+c)<255?0:y-255},difference:function(){g=a+u-2*m(a*h,u*d),v=l+f-2*m(l*h,f*d),y=c+s-2*m(c*h,s*d)},exclusion:function(){g=a*h+u*d-2*a*u+a*(1-h)+u*(1-d),v=l*h+f*d-2*l*f+l*(1-h)+f*(1-d),y=c*h+s*d-2*c*s+c*(1-h)+s*(1-d)},overlay:function(){g=2*u<=h?2*a*u+a*(1-h)+u*(1-d):a*(1+h)+u*(1+d)-2*u*a-h*d,v=2*f<=h?2*l*f+l*(1-h)+f*(1-d):l*(1+h)+f*(1+d)-2*f*l-h*d,y=2*s<=h?2*c*s+c*(1-h)+s*(1-d):c*(1+h)+s*(1+d)-2*s*c-h*d},"soft-light":function(){var n,t=Math.pow;if(0===h)return g=a,v=l,void(y=c);n=u/h,2*a<=d?g=u*(d+(2*a-d)*(1-n))+a*(1-h)+u*(1-d):2*a>d&&4*u<=h?g=h*(2*a-d)*(16*t(n,3)-12*t(n,2)-3*n)+a-a*h+u:2*a>d&&4*u>h&&(g=h*(2*a-d)*(t(n,.5)-n)+a-a*h+u),n=f/h,2*l<=d?v=f*(d+(2*l-d)*(1-n))+l*(1-h)+f*(1-d):2*l>d&&4*f<=h?v=h*(2*l-d)*(16*t(n,3)-12*t(n,2)-3*n)+l-l*h+f:2*l>d&&4*f>h&&(v=h*(2*l-d)*(t(n,.5)-n)+l-l*h+f),n=s/h,2*c<=d?y=s*(d+(2*c-d)*(1-n))+c*(1-h)+s*(1-d):2*c>d&&4*s<=h?y=h*(2*c-d)*(16*t(n,3)-12*t(n,2)-3*n)+c-c*h+s:2*c>d&&4*s>h&&(y=h*(2*c-d)*(t(n,.5)-n)+c-c*h+s)},"hard-light":function(){g=2*a<=d?2*a*u+a*(1-h)+u*(1-d):a*(1+h)+u*(1+d)-d*h-2*a*u,v=2*l<=d?2*l*f+l*(1-h)+f*(1-d):l*(1+h)+f*(1+d)-d*h-2*l*f,y=2*c<=d?2*c*s+c*(1-h)+s*(1-d):c*(1+h)+s*(1+d)-d*h-2*c*s},"color-dodge":function(){if(0===h)return g=a,v=l,void(y=c);a===d&&0===u?g=a*(1-h):a===d?g=d*h+a*(1-h)+u*(1-d):a<d&&(g=d*h*m(1,u/h*d/(d-a))+a*(1-h)+u*(1-d)),l===d&&0===f?v=l*(1-h):a===d?v=d*h+l*(1-h)+f*(1-d):a<d&&(v=d*h*m(1,f/h*d/(d-l))+l*(1-h)+f*(1-d)),c===d&&0===s?y=c*(1-h):a===d?y=d*h+c*(1-h)+s*(1-d):a<d&&(y=d*h*m(1,s/h*d/(d-c))+c*(1-h)+s*(1-d))},"color-burn":function(){if(0===h)return g=a,v=l,void(y=c);0===a&&u===h?g=d*h+u*(1-d):0===a?g=u*(1-d):a>0&&(g=d*h*(1-m(1,(1-u/h)*d/a))+a*(1-h)+u*(1-d)),0===l&&f===h?v=d*h+f*(1-d):0===l?v=f*(1-d):l>0&&(v=d*h*(1-m(1,(1-f/h)*d/l))+l*(1-h)+f*(1-d)),0===c&&s===h?y=d*h+s*(1-d):0===c?y=s*(1-d):c>0&&(y=d*h*(1-m(1,(1-s/h)*d/c))+c*(1-h)+s*(1-d))},"linear-light":function(){var n=2*a+u-256,t=2*l+f-256,e=2*c+s-256;g=n<0||a<128&&n<0?0:n>255?255:n,v=t<0||l<128&&t<0?0:t>255?255:t,y=e<0||c<128&&e<0?0:e>255?255:e},"vivid-light":function(){var n;g=a<128?a?(n=255-(255-u<<8)/(2*a))<0?0:n:0:(n=2*a-256)<255?(n=(u<<8)/(255-n))>255?255:n:n<0?0:n,v=l<128?l?(n=255-(255-f<<8)/(2*l))<0?0:n:0:(n=2*l-256)<255?(n=(f<<8)/(255-n))>255?255:n:n<0?0:n,y=c<128?c?(n=255-(255-s<<8)/(2*c))<0?0:n:0:(n=2*c-256)<255?(n=(s<<8)/(255-n))>255?255:n:n<0?0:n},"pin-light":function(){var n;g=a<128?u<(n=2*a)?u:n:u>(n=2*a-256)?u:n,v=l<128?f<(n=2*l)?f:n:f>(n=2*l-256)?f:n,y=c<128?s<(n=2*c)?s:n:s>(n=2*c-256)?s:n},"hard-mix":function(){var n;g=a<128?255-(255-u<<8)/(2*a)<128||0===a?0:255:(n=2*a-256)<255&&(u<<8)/(255-n)<128?0:255,v=l<128?255-(255-f<<8)/(2*l)<128||0===l?0:255:(n=2*l-256)<255&&(f<<8)/(255-n)<128?0:255,y=c<128?255-(255-s<<8)/(2*c)<128||0===c?0:255:(n=2*c-256)<255&&(s<<8)/(255-n)<128?0:255},hue:function(){var n=w(u,f,s),t=M(w(a,l,c)[0],n[1],n[2]);g=t[0],v=t[1],y=t[2]},saturation:function(){var n=w(u,f,s),t=w(a,l,c),e=M(n[0],t[1],n[2]);g=e[0],v=e[1],y=e[2]},luminosity:function(){var n=w(u,f,s),t=w(a,l,c),e=M(n[0],n[1],t[2]);g=e[0],v=e[1],y=e[2]},color:function(){var n=w(u,f,s),t=w(a,l,c),e=M(t[0],t[1],n[2]);g=e[0],v=e[1],y=e[2]}},function(){var b,x,k,w,M,_,O,A,B,C=o.data,N=0===o.opacity?0:o.opacity||1,j=r[o.type||"_svg_normal"],R=o.dx||0,S=o.dy||0,D=function(n,t){var e=n.x+n.width,i=n.y+n.height,o=t.x+t.width,r=t.y+t.height,a=p(n.x,t.x),l=p(n.y,t.y);return[a,l,p(m(e,o)-a,0),p(m(i,r)-l,0)]}({x:0,y:0,width:e,height:i},{x:R,y:S,width:o.width,height:o.height}),E=D[0],I=D[1],q=D[2],z=D[3];for(B=0===j.name.indexOf("_svg_")?function(){d=C[x+3]/255*N,h=n[b+3]/255,A=255/(O=d+h-d*h),a=C[x]/255*d,l=C[x+1]/255*d,c=C[x+2]/255*d,u=n[b]/255*h,f=n[b+1]/255*h,s=n[b+2]/255*h,j(),t[b]=g*A,t[b+1]=v*A,t[b+2]=y*A,t[b+3]=255*O}:function(){u=n[b],f=n[b+1],s=n[b+2],a=C[x],l=C[x+1],c=C[x+2],j(),t[b]=g,t[b+1]=v,t[b+2]=y,t[b+3]=n[b+3],(M=N*C[x+3]/255)<1&&(_=1-M,t[b]=n[b]*_+t[b]*M,t[b+1]=n[b+1]*_+t[b+1]*M,t[b+2]=n[b+2]*_+t[b+2]*M)},w=0;w<i;w+=1)for(k=0;k<e;k+=1)b=4*(w*e+k),w>=I&&k>=E&&k<E+q&&w<I+z?(x=4*((w-S)*o.width+k-R),B()):(t[b]=n[b],t[b+1]=n[b+1],t[b+2]=n[b+2],t[b+3]=n[b+3])}()},blend=function(){for(var n,t={blend:_blend},e=["source-over","add","multiply","subtract","divide","screen","lighten","darken","darker-color","lighter-color","linear-burn","difference","exclusion","overlay","soft-light","hard-light","color-dodge","color-burn","linear-light","vivid-light","pin-light","hard-mix","hue","saturation","luminosity","color"],i=0;i<e.length;i+=1)t[n=e[i]]=_wrap(n);for(e=Object.keys(e),i=0;i<e.length;i+=1);return addAliases(t),t.getNativeModes=getNativeModes,t.realBlendMode=realBlendMode,t}(),module.exports=blend;

},{}],22:[function(require,module,exports){
"use strict";var blend=require("./blend"),process=require("./process"),util=require("./util"),nativeBlendModes=blend.getNativeModes();function createImageData(e,a,t){return e.createImageData?e.createImageData(a,t):e.getImageData(0,0,a,t)}var CanvasRenderer={};function transformLayer(e,a,t){var r=t.transform.matrix();e.translate(a.width/2,a.height/2),e.transform(r[0],r[1],r[3],r[4],r[6],r[7]),(t.flip_h||t.flip_v)&&e.scale(t.flip_h?-1:1,t.flip_v?-1:1),e.translate(-t.img.width/2,-t.img.height/2)}function transformRect(e,a){var t,r,n,i,d,h=a.img.width,o=a.img.height,s=[{x:0,y:0},{x:h,y:0},{x:0,y:o},{x:h,y:o}],g=util.transform();g=(g=(g=g.translate(e.width/2,e.height/2)).append(a.transform)).translate(-a.img.width/2,-a.img.height/2);for(var l=0;l<4;l+=1)t=g.transformPoint(s[l]),0===l?(r=i=t.x,n=d=t.y):(t.x<r&&(r=t.x),t.x>i&&(i=t.x),t.y<n&&(n=t.y),t.y>d&&(d=t.y));return{x:r,y:n,width:i-r,height:d-n}}function rectIntersect(e,a){var t=e.x+e.width,r=e.y+e.height,n=a.x+a.width,i=a.y+a.height,d=Math.max(e.x,a.x),h=Math.max(e.y,a.y);return{x:d,y:h,width:Math.max(Math.min(t,n)-d,0),height:Math.max(Math.min(r,i)-h,0)}}function calcLayerRect(e,a){var t=transformRect(e,a);return t=rectIntersect(t,{x:0,y:0,width:e.width,height:e.height}),{x:Math.round(t.x),y:Math.round(t.y),width:Math.ceil(t.width),height:Math.ceil(t.height)}}function getTransformedLayerData(e,a,t){var r=document.createElement("canvas"),n=r.getContext("2d");return r.width=t.width,r.height=t.height,n.translate(-t.x,-t.y),transformLayer(n,e,a),n.drawImage(a.img,0,0),n.getImageData(0,0,t.width,t.height)}CanvasRenderer.toImage=function(e){var a=new Image;return a.width=e.width,a.height=e.height,a.src=e.toDataURL(),a},CanvasRenderer.load=function(e,a){return a.isFill()?CanvasRenderer.generateColor(e,a):a.isGradient()?CanvasRenderer.generateGradient(e,a):a.isHtmlCanvas()?CanvasRenderer.loadHtmlCanvas(a.data):a.isImage()?CanvasRenderer.loadImage(a.data):a.isImageCanvas()?CanvasRenderer.loadImageCanvas(a.data):void 0},CanvasRenderer.loadHtmlCanvas=function(e){return e},CanvasRenderer.loadImageCanvas=function(e){return e.render()},CanvasRenderer.loadImage=function(e){var a=document.createElement("canvas"),t=a.getContext("2d");return a.width=e.width,a.height=e.height,t.drawImage(e,0,0,a.width,a.height),a},CanvasRenderer.generateColor=function(e,a){var t=void 0!==a.width?a.width:e.width,r=void 0!==a.height?a.height:e.height,n=document.createElement("canvas"),i=n.getContext("2d");return n.width=t,n.height=r,i.fillStyle=a.data,i.fillRect(0,0,t,r),n},CanvasRenderer.generateGradient=function(e,a){var t,r,n,i,d,h=void 0!==a.width?a.width:e.width,o=void 0!==a.height?a.height:e.height,s=h/2,g=o/2,l=document.createElement("canvas"),m=l.getContext("2d"),v=a.data,c=v.type||"linear",u=v.rotation||0;return"radial"===c?t=m.createRadialGradient(s,g,0,s,g,Math.min(h,o)/2):(u<0&&(u+=360),0<=u&&u<45?(r=0,i=h,d=o-(n=o/2*(45-u)/45)):45<=u&&u<135?(n=0,i=h-(r=h*(u-45)/90),d=o):135<=u&&u<225?(r=h,i=0,d=o-(n=o*(u-135)/90)):225<=u&&u<315?(n=o,i=h-(r=h*(1-(u-225)/90)),d=0):315<=u&&(r=0,i=h,d=o-(n=o-o/2*(u-315)/45)),t=m.createLinearGradient(r,n,i,d)),t.addColorStop(v.spread||0,v.startColor),t.addColorStop(1,v.endColor),l.width=h,l.height=o,m.fillStyle=t,m.fillRect(0,0,h,o),l},CanvasRenderer.processImage=function(e,a){if(0===a.length)return e;for(var t,r,n=e.getContext("2d"),i=e.width,d=e.height,h=n.getImageData(0,0,i,d),o=createImageData(n,i,d),s=0;s<a.length;s+=1)s>0&&(r=h,h=o,o=r),t=a[s],process[t.name](h.data,o.data,i,d,t.options);return n.putImageData(o,0,0),e},CanvasRenderer.processMask=function(e,a){if(0===a.layers.length)return e;a.width=e.width,a.height=e.height;var t=CanvasRenderer.renderBW(a),r={name:"mask",options:{data:t.getContext("2d").getImageData(0,0,t.width,t.height).data,x:0,y:0,width:t.width,height:t.height}};return CanvasRenderer.processImage(e,[r])},CanvasRenderer.processLayer=function(e,a){var t=CanvasRenderer.load(e,a),r=CanvasRenderer.processMask(t,a.mask);return CanvasRenderer.processImage(r,a.filters)},CanvasRenderer.mergeManualBlend=function(e,a){return function(t){for(var r,n,i,d,h,o=t.getContext("2d"),s=e.width,g=e.height,l=o.getImageData(0,0,s,g),m=createImageData(o,s,g),v=0;v<a.length;v+=1)if(r=a[v],(h=calcLayerRect(e,r)).width>0&&h.height>0){if(v>0&&(i=l,l=m,m=i),d={data:getTransformedLayerData(e,r,h).data,width:h.width,height:h.height,opacity:r.opacity,dx:h.x,dy:h.y},void 0===blend[r.blendmode])throw new Error("No blend mode named '"+r.blendmode+"'");n=blend.realBlendMode(r.blendmode),blend[n](l.data,m.data,s,g,d)}return o.putImageData(m,0,0),t}},CanvasRenderer.singleLayerWithOpacity=function(e,a){var t=document.createElement("canvas"),r=t.getContext("2d");return t.width=e.width,t.height=e.height,r.save(),transformLayer(r,e,a),1!==a.opacity&&(r.globalAlpha=a.opacity),r.drawImage(a.img,0,0),r.restore(),t},CanvasRenderer.mergeNativeBlend=function(e,a){return function(t){for(var r,n=t.getContext("2d"),i=0;i<a.length;i+=1)r=a[i],n.save(),transformLayer(n,e,r),1!==r.opacity&&(n.globalAlpha=r.opacity),"source-over"!==r.blendmode&&(n.globalCompositeOperation=blend.realBlendMode(r.blendmode)),n.drawImage(r.img,0,0),n.restore();return t}},CanvasRenderer.createRenderPipe=function(e,a,t){var r,n,i,d,h=[];function o(){if(void 0!==n){var t=n?e.mergeNativeBlend:e.mergeManualBlend;h.push(t(a,i))}}for(var s=1;s<t.length;s+=1)r=(d=t[s]).blendmode,void 0!==n&&n===nativeBlendModes[r]||(o(),i=[]),i.push(d),n=nativeBlendModes[r],s===t.length-1&&o();return h},CanvasRenderer.merge=function(e,a){for(var t=CanvasRenderer.createRenderPipe(CanvasRenderer,e,a),r=CanvasRenderer.singleLayerWithOpacity(e,a[0]),n=0;n<t.length;n+=1)r=t[n](r);return r},CanvasRenderer.composite=function(e,a){return a&&0!==a.length?1===a.length?CanvasRenderer.singleLayerWithOpacity(e,a[0]):CanvasRenderer.merge(e,a):null},CanvasRenderer.getLayerData=function(e,a){for(var t,r,n=[],i=0;i<a.length;i+=1)r=e.layers[i],t={img:a[i],opacity:r.opacity,blendmode:r.blendmode,transform:r.transform,flip_h:r.flip_h,flip_v:r.flip_v},n.push(t);return n},CanvasRenderer.render=function(e){for(var a=[],t=0;t<e.layers.length;t+=1)a.push(CanvasRenderer.processLayer(e,e.layers[t]));return CanvasRenderer.composite(e,CanvasRenderer.getLayerData(e,a))},CanvasRenderer.renderBW=function(e){var a=CanvasRenderer.render(e);a.getContext("2d").getImageData(0,0,a.width,a.height).data;return CanvasRenderer.processImage(a,[{name:"desaturate",options:{method:"ITU-R BT.709"}}])},module.exports=CanvasRenderer;

},{"./blend":21,"./process":24,"./util":25}],23:[function(require,module,exports){
"use strict";var img,ImageCanvas,Layer,Img,util=require("./util"),CanvasRenderer=require("./canvasrenderer"),AsyncRenderer=require("./asyncrenderer"),DEFAULT_WIDTH=800,DEFAULT_HEIGHT=800,TYPE_PATH="path",TYPE_IMAGE="image",TYPE_HTML_CANVAS="htmlCanvas",TYPE_IMAGE_CANVAS="iCanvas",TYPE_FILL="fill",TYPE_GRADIENT="gradient",IDENTITY_TRANSFORM=util.transform(),Transform=IDENTITY_TRANSFORM,clamp=util.clamp,colors=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"];function toColor(t,e,r,a,n){var i,o,s,h,l;if(void 0===t)i=o=s=0,h=1;else if(Array.isArray(t))l=e||{},i=void 0!==t[0]?t[0]:0,o=void 0!==t[1]?t[1]:0,s=void 0!==t[2]?t[2]:0,h=void 0!==t[3]?t[3]:l.base||1;else if(void 0!==t.r)l=e||{},i=t.r,o=t.g,s=t.b,h=void 0!==t.a?t.a:l.base||1;else if("string"==typeof t){if(0===t.indexOf("#"))return t;if(0===t.indexOf("rgb"))return t;if(-1!==colors.indexOf(t))return t}else"number"==typeof t&&(1===arguments.length?(i=o=s=t,h=1):2===arguments.length?(i=o=s=t,h="number"==typeof e?e:(l=e).base||1):3===arguments.length?"number"==typeof r?(i=t,o=e,s=r,h=1):(i=o=s=t,h=e,l=r):4===arguments.length?(i=t,o=e,s=r,h="number"==typeof a?a:(l=a||{}).base||1):(i=t,o=e,s=r,h=a,l=n));if("number"!=typeof i||"number"!=typeof o||"number"!=typeof s||"number"!=typeof h)throw new Error("Invalid color arguments");return void 0!==(l=l||{}).base&&(i/=l.base,o/=l.base,s/=l.base,h/=l.base),"rgba("+Math.round(255*i)+", "+Math.round(255*o)+", "+Math.round(255*s)+", "+h+")"}function toGradientData(t,e,r,a,n){var i,o,s,h,l,d,y={};if(1===arguments.length)i=(d=t||{}).startColor,o=d.endColor,s=d.type,h=d.rotation,l=d.spread;else if(arguments.length>=2)if(i=t,o=e,s="linear",h=0,l=0,3===arguments.length)"string"==typeof r?s=r:"number"==typeof r&&(h=r);else if(4===arguments.length)if("number"==typeof r)h=r,l=a;else if("linear"===r)h=a;else{if("radial"!==r)throw new Error("Wrong argument provided: "+r);s=r,l=a}else 5===arguments.length&&(s=r,h=a,l=n);if(!i&&0!==i)throw new Error("No startColor was given.");if(!o&&0!==o)throw new Error("No endColor was given.");try{y.startColor=toColor(i)}catch(t){throw new Error("startColor is not a valid color: "+i)}try{y.endColor=toColor(o)}catch(t){throw new Error("endColor is not a valid color: "+o)}if(void 0===s&&(s="linear"),"linear"!==s&&"radial"!==s)throw new Error("Unknown gradient type: "+s);if(y.type=s,void 0===l&&(l=0),"number"!=typeof l)throw new Error("Spread value is not a number: "+l);if("linear"===s){if(void 0===h&&(h=0),"number"!=typeof h)throw new Error("Rotation value is not a number: "+h);y.rotation=h}return y.spread=clamp(l,0,.99),y}function findType(t){if("string"==typeof t)return TYPE_PATH;if(t instanceof Image)return TYPE_IMAGE;if(t instanceof HTMLCanvasElement)return TYPE_HTML_CANVAS;if(t instanceof ImageCanvas)return TYPE_IMAGE_CANVAS;if(void 0!==t.r&&void 0!==t.g&&void 0!==t.b&&void 0!==t.a)return TYPE_FILL;if(void 0!==t.startColor&&void 0!==t.endColor)return TYPE_GRADIENT;throw new Error("Cannot establish type for data ",t)}(Layer=function(t,e){e||(e=findType(t)),this.data=t,this.type=e,e!==TYPE_HTML_CANVAS&&e!==TYPE_IMAGE_CANVAS&&e!==TYPE_IMAGE||(this.width=t.width,this.height=t.height),this.opacity=1,this.blendmode="source-over",this.transform=IDENTITY_TRANSFORM,this.flip_h=!1,this.flip_v=!1,this.mask=new ImageCanvas,this.filters=[]}).Transform=Layer.IDENTITY_TRANSFORM=IDENTITY_TRANSFORM,Layer.prototype.clone=function(){function t(t){var e,r,a={};if(a.name=t.name,void 0!==t.options){a.options={};for(var n=Object.keys(t.options),i=0;i<n.length;i+=1)e=n[i],r=t.options[e],Array.isArray(r)?a.options[e]=r.slice(0):a.options[e]=r}return a}var e=Object.create(Layer.prototype);e.data=this.data,e.type=this.type,e.width=this.width,e.height=this.height,e.opacity=this.opacity,e.blendmode=this.blendmode,e.transform=this.transform,e.flip_h=this.flip_h,e.flip_v=this.flip_v,e.mask=this.mask.clone(),e.filters=[],this.type===TYPE_IMAGE_CANVAS?e.data=this.data.clone():this.type===TYPE_GRADIENT&&(e.data={startColor:this.data.startColor,endColor:this.data.endColor,type:this.data.type,rotation:this.data.rotation,spread:this.data.spread});for(var r=0;r<this.filters.length;r+=1)e.filters.push(t(this.filters[r]));return e},Layer.prototype.setOpacity=function(t){this.opacity=clamp(t,0,1)},Layer.prototype.translate=function(t,e){e=void 0===e?0:e;var r=Transform.translate(t,e);this.transform=this.transform.prepend(r)},Layer.prototype.scale=function(t,e){e=void 0===e?t:e;var r=Transform.scale(t,e);this.transform=this.transform.prepend(r)},Layer.prototype.rotate=function(t){var e=Transform.rotate(t);this.transform=this.transform.prepend(e)},Layer.prototype.skew=function(t,e){e=void 0===e?t:e;var r=Transform.skew(t,e);this.transform=this.transform.prepend(r)},Layer.prototype.flipHorizontal=function(t){this.flip_h=void 0!==t?t:!this.flip_h},Layer.prototype.flipVertical=function(t){this.flip_v=void 0!==t?t:!this.flip_v},Layer.prototype.addFilter=function(t,e){this.filters.push({name:t,options:e})},Layer.prototype.draw=function(t){var e=void 0===this.width?DEFAULT_WIDTH:this.width,r=void 0===this.height?DEFAULT_HEIGHT:this.height,a=new ImageCanvas(e,r);a.addLayer(this),a.draw(t)},Layer.prototype.toCanvas=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height;var e=t.getContext("2d");return this.draw(e),t},Layer.fromFile=function(t){return new Layer(t,TYPE_PATH)},Layer.fromImage=function(t){return new Layer(t,TYPE_IMAGE)},Layer.fromCanvas=function(t){return t instanceof HTMLCanvasElement?Layer.fromHtmlCanvas(t):Layer.fromImageCanvas(t)},Layer.fromHtmlCanvas=function(t){return new Layer(t,TYPE_HTML_CANVAS)},Layer.fromImageCanvas=function(t){return new Layer(t,TYPE_IMAGE_CANVAS)},Layer.fromColor=function(t){return new Layer(toColor(t),TYPE_FILL)},Layer.fromGradient=function(){return new Layer(toGradientData.apply(null,arguments),TYPE_GRADIENT)},Layer.prototype.isPath=function(){return this.type===TYPE_PATH},Layer.prototype.isFill=function(){return this.type===TYPE_FILL},Layer.prototype.isGradient=function(){return this.type===TYPE_GRADIENT},Layer.prototype.isHtmlCanvas=function(){return this.type===TYPE_HTML_CANVAS},Layer.prototype.isImage=function(){return this.type===TYPE_IMAGE},Layer.prototype.isImageCanvas=function(){return this.type===TYPE_IMAGE_CANVAS};var Pixels=function(t){this.width=t.width,this.height=t.height;var e=t.getContext("2d");this._data=e.getImageData(0,0,this.width,this.height),this.array=this._data.data};function isPoint(t){return!!t&&(void 0!==t.x&&void 0!==t.y)}function pointFromArray(t){var e=t[0];return{x:e,y:t.length>1?t[1]:e}}function pointFromNumber(t){return{x:t,y:t}}function isValidArg(t){return null!=t}function convertArg(t){return Array.isArray(t)?pointFromArray(t):"number"==typeof t?pointFromNumber(t):isPoint(t)?t:void 0}Pixels.prototype.get=function(t){t*=4;var e=this.array;return[e[t+0],e[t+1],e[t+2],e[t+3]]},Pixels.prototype.set=function(t,e){t*=4;var r=this.array;r[t+0]=e[0],r[t+1]=e[1],r[t+2]=e[2],r[t+3]=e[3]},Pixels.prototype.toCanvas=function(){var t=document.createElement("canvas");return t.width=this.width,t.height=this.height,t.getContext("2d").putImageData(this._data,0,0),t},(ImageCanvas=function(t,e){t||(t=DEFAULT_WIDTH),e||(e=DEFAULT_HEIGHT),this.width=t,this.height=e,this.layers=[]}).prototype.clone=function(){for(var t=new ImageCanvas(this.width,this.height),e=0;e<this.layers.length;e+=1)t.layers.push(this.layers[e].clone());return t},ImageCanvas.prototype.addLayer=function(t){var e;try{return this.addGradientLayer.apply(this,arguments)}catch(t){}try{return this.addColorLayer.apply(this,arguments)}catch(t){}if(1===arguments.length&&("string"==typeof t?e=new Layer(t,TYPE_PATH):t instanceof Layer?e=t:t instanceof HTMLCanvasElement?e=new Layer(t,TYPE_HTML_CANVAS):t instanceof Image?e=new Layer(t,TYPE_IMAGE):t instanceof ImageCanvas&&(e=new Layer(t,TYPE_IMAGE_CANVAS))),!e)throw new Error("Error creating layer.");return this.layers.push(e),e},ImageCanvas.prototype.addColorLayer=function(){var t=toColor.apply(null,arguments),e=new Layer(t,TYPE_FILL);return this.layers.push(e),e},ImageCanvas.prototype.addGradientLayer=function(){var t=toGradientData.apply(null,arguments),e=new Layer(t,TYPE_GRADIENT);return this.layers.push(e),e},ImageCanvas.prototype.render=function(t){return(t?AsyncRenderer:CanvasRenderer).render(this,t)},ImageCanvas.prototype.draw=function(t,e){if(e)this.render(function(e){t.drawImage(e,0,0,e.width,e.height)});else{var r=this.render();t.drawImage(r,0,0,r.width,r.height)}},(Img=function(t,e,r){this.canvas=t,this.originalWidth=t?t.width:0,this.originalHeight=t?t.height:0,this.transform=e||r?Transform.translate(e,r):Layer.IDENTITY_TRANSFORM}).prototype.clone=function(){var t=new Img;return t.canvas=this.canvas,t.originalWidth=this.originalWidth,t.originalHeight=this.originalHeight,t.transform=this.transform,t},Img.prototype.withCanvas=function(t){var e=this.clone();return e.canvas=t,e},Img.prototype._transform=function(t){var e=this.clone();return e.transform=e.transform.prepend(t),e},Img.prototype.translate=function(t){var e=pointFromNumber(0),r=arguments;return 1===r.length&&isValidArg(t)?e=convertArg(t):2===r.length&&(e={x:r[0],y:r[1]}),0===e.x&&0===e.y?this:this._transform(Transform.translate(e.x,e.y))},Img.prototype.rotate=function(t){if(!t)return this;var e=pointFromNumber(0),r=arguments;return 2===r.length?e=convertArg(r[1]):3===r.length&&(e={x:r[1],y:r[2]}),this._transform(Transform.translate(e.x,e.y).rotate(t).translate(-e.x,-e.y))},Img.prototype.scale=function(t){var e=pointFromNumber(1),r=pointFromNumber(0),a=arguments;return 1===a.length&&isValidArg(t)?e=convertArg(t):2===a.length?"number"==typeof t&&"number"==typeof a[1]?e={x:a[0],y:a[1]}:(e=convertArg(t),r=convertArg(a[1])):4===a.length&&(e={x:a[0],y:a[1]},r={x:a[2],y:a[3]}),1===e.x&&1===e.y?this:this._transform(Transform.translate(r.x,r.y).scale(e.x,e.y).translate(-r.x,-r.y))},Img.prototype.skew=function(t){var e=pointFromNumber(0),r=pointFromNumber(0),a=arguments;return 1===a.length&&isValidArg(t)?e=convertArg(t):2===a.length?"number"==typeof t&&"number"==typeof a[1]?e={x:a[0],y:a[1]}:(e=convertArg(t),r=convertArg(a[1])):4===a.length&&(e={x:a[0],y:a[1]},r={x:a[2],y:a[3]}),0===e.x&&0===e.y?this:this._transform(Transform.translate(r.x,r.y).skew(e.x,e.y).translate(-r.x,-r.y))},Img.prototype.transformed=function(){return img.merge([this])},Img.prototype.bounds=function(){for(var t,e,r,a,n,i=this.transform,o=this.originalWidth/2,s=this.originalHeight/2,h=[{x:-o,y:-s},{x:o,y:-s},{x:-o,y:s},{x:o,y:s}],l=0;l<4;l+=1)t=i.transformPoint(h[l]),0===l?(e=a=t.x,r=n=t.y):(t.x<e&&(e=t.x),t.x>a&&(a=t.x),t.y<r&&(r=t.y),t.y>n&&(n=t.y));return{x:e,y:r,width:a-e,height:n-r}},Img.prototype.colorize=function(t){var e=Layer.fromColor(t);e.width=this.originalWidth,e.height=this.originalHeight;var r=new Img(e.toCanvas());return r=r._transform(this.transform.matrix()),img.merge([this,r])},Img.prototype.desaturate=function(t){var e=this.toLayer(!1);return e.addFilter("desaturate",t),this.withCanvas(e.toCanvas())},Img.prototype.crop=function(t){var e,r,a,n,i,o,s,h,l=this.bounds(),d=t.bounds(),y=(r=d,a=(e=l).x+e.width,n=e.y+e.height,i=r.x+r.width,o=r.y+r.height,s=Math.max(e.x,r.x),h=Math.max(e.y,r.y),{x:s,y:h,width:Math.max(Math.min(a,i)-s,0),height:Math.max(Math.min(n,o)-h,0)}),g=Math.ceil(y.width),m=Math.ceil(y.height);if(0===y.width||0===y.height)throw new Error("Resulting image has no dimensions");var u=new img.ImageCanvas(g,m),p=u.addLayer(this.toLayer());return p.translate(g/2-d.width-d.x,m/2-d.height-d.y),g<d.width&&y.x>l.x&&p.translate(d.width-g,0),m<d.height&&y.y>l.y&&p.translate(0,d.height-m),new Img(u.render(),y.x+g/2,y.y+m/2)},Img.prototype.draw=function(t){t.save();var e=this.transform.matrix();t.transform(e[0],e[1],e[3],e[4],e[6],e[7]),t.translate(-this.originalWidth/2,-this.originalHeight/2),t.drawImage(this.canvas,0,0),t.restore()},Img.prototype.toLayer=function(t){var e=document.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,e.getContext("2d").drawImage(this.canvas,0,0);var r=img.Layer.fromHtmlCanvas(e);return void 0===t&&(t=!0),t&&(r.transform=this.transform),r},Img.prototype.getPixels=function(){return new Pixels(this.canvas)},Img.prototype.toImage=function(){var t=this.bounds(),e=this.crop({bounds:function(){return t}}),r=new Image;return r.width=e.canvas.width,r.height=e.canvas.height,r.src=e.canvas.toDataURL(),r},(img={}).Layer=Layer,img.ImageCanvas=ImageCanvas,img.Img=Img,img.Pixels=Pixels;var async=require("async");function loadImage(t,e){var r=new Image;r.onload=function(){e(null,[t,this])},r.src=t}function loadImages(t,e){async.map(t,loadImage,function(t,r){if(e){for(var a,n,i={},o=0;o<r.length;o+=1)a=r[o][0],n=r[o][1],i[a]=n;e(i)}})}function rectUnite(t,e){var r=Math.min(t.x,e.x),a=Math.min(t.y,e.y);return{x:r,y:a,width:Math.max(t.x+t.width,e.x+e.width)-r,height:Math.max(t.y+t.height,e.y+e.height)-a}}function merge(t){var e,r,a;for(e=0;e<t.length;e+=1)r=t[e],a=0===e?r.bounds():rectUnite(a,r.bounds());var n=a.width/2+a.x,i=a.height/2+a.y,o=new ImageCanvas(a.width,a.height);for(e=0;e<t.length;e+=1)o.addLayer(t[e].toLayer()).translate(-n,-i);return new Img(o.render(),n,i)}img.loadImages=loadImages,img.merge=merge,module.exports=img;

},{"./asyncrenderer":20,"./canvasrenderer":22,"./util":25,"async":1}],24:[function(require,module,exports){
"use strict";var stackblur=require("stackblur"),util=require("./util"),clamp=util.clamp,LUMINOSITY_ITU_R_BT601="ITU-R BT.601",LUMINOSITY_ITU_R_BT709="ITU-R BT.709";function defaultOptions(o,n){if(!o)return n;var t,r={};for(t in n)n.hasOwnProperty(t)&&(void 0===o[t]?r[t]=n[t]:r[t]=o[t]);return r}function smoothstep(o,n,t){return t<o?0:t>=n?1:(t=(t-o)/(n-o))*t*(3-2*t)}function noise(){return.5*Math.random()+.5}function colorDistance(o,n,t){return clamp(o*n+(1-o)*t,0,255)}function convolve3x3(o,n,t,r,a,e,i,u){var l,c,f,s,v,p,d,m,h,x,g,O,M,T,I,b,y,_,z,U,k,S,w=a[0][0],B=a[0][1],R=a[0][2],P=a[1][0],L=a[1][1],N=a[1][2],Y=a[2][0],q=a[2][1],A=a[2][2];for(c=0;c<r;c+=1)for(h=(m=c*t*4)-4*t,x=m+4*t,c<1&&(h=m),c>=t-1&&(x=m),l=0;l<t;l+=1)f=4*(c*t+l),O=(g=4*l)-4,M=g+4,l<1&&(O=g),l>=t-1&&(M=g),I=h+g,b=h+M,y=m+O,_=m+g,z=m+M,U=x+O,k=x+g,S=x+M,s=o[T=h+O]*w+o[I]*B+o[b]*R+o[y]*P+o[_]*L+o[z]*N+o[U]*Y+o[k]*q+o[S]*A,v=o[T+1]*w+o[I+1]*B+o[b+1]*R+o[y+1]*P+o[_+1]*L+o[z+1]*N+o[U+1]*Y+o[k+1]*q+o[S+1]*A,p=o[T+2]*w+o[I+2]*B+o[b+2]*R+o[y+2]*P+o[_+2]*L+o[z+2]*N+o[U+2]*Y+o[k+2]*q+o[S+2]*A,d=e?o[T+3]*w+o[I+3]*B+o[b+3]*R+o[y+3]*P+o[_+3]*L+o[z+3]*N+o[U+3]*Y+o[k+3]*q+o[S+3]*A:o[f+3],u&&(s=v=p=(s+v+p)/3),i&&(s=255-s,v=255-v,p=255-p),n[f]=s,n[f+1]=v,n[f+2]=p,n[f+3]=d}function convolve5x5(o,n,t,r,a,e,i,u){var l,c,f,s,v,p,d,m,h,x,g,O,M,T,I,b,y,_,z,U,k,S,w,B,R,P,L,N,Y,q,A,j,D,C,E,F,G,H=a[0][0],J=a[0][1],K=a[0][2],Q=(a[0][3],a[0][4]),V=a[1][0],W=a[1][1],X=a[1][2],Z=(a[1][3],a[1][4]),$=a[2][0],oo=a[2][1],no=a[2][2],to=(a[2][3],a[2][4]),ro=a[3][0],ao=a[3][1],eo=a[3][2],io=(a[3][3],a[3][4]),uo=a[4][0],lo=a[4][1],co=a[4][2],fo=(a[4][3],a[4][4]);for(c=0;c<r;c+=1)for(h=(m=c*t*4)-4*t,g=m-4*t*2,x=m+4*t,O=m+4*t*2,c<1&&(h=m),c>=t-1&&(x=m),c<2&&(g=h),c>=t-2&&(O=x),l=0;l<t;l+=1)f=4*(c*t+l),T=(M=4*l)-4,I=M+4,b=M-8,y=M+8,l<1&&(T=M),l>=t-1&&(I=M),l<2&&(b=T),l>=t-2&&(y=I),z=g+T,U=g+M,k=g+I,g+y,S=h+b,w=h+T,B=h+M,R=h+I,h+y,P=m+b,L=m+T,N=m+M,Y=m+I,m+y,q=x+b,A=x+T,j=x+M,D=x+I,x+y,C=O+b,E=O+T,F=O+M,G=O+I,O+y,s=o[_=g+b]*H+o[z]*J+o[U]*K+o[k]*Q+o[U]*Q+o[S]*V+o[w]*W+o[B]*X+o[R]*Z+o[B]*Z+o[P]*$+o[L]*oo+o[N]*no+o[Y]*to+o[N]*to+o[q]*ro+o[A]*ao+o[j]*eo+o[D]*io+o[j]*io+o[C]*uo+o[E]*lo+o[F]*co+o[G]*fo+o[F]*fo,v=o[_+1]*H+o[z+1]*J+o[U+1]*K+o[k+1]*Q+o[U+1]*Q+o[S+1]*V+o[w+1]*W+o[B+1]*X+o[R+1]*Z+o[B+1]*Z+o[P+1]*$+o[L+1]*oo+o[N+1]*no+o[Y+1]*to+o[N+1]*to+o[q+1]*ro+o[A+1]*ao+o[j+1]*eo+o[D+1]*io+o[j+1]*io+o[C+1]*uo+o[E+1]*lo+o[F+1]*co+o[G+1]*fo+o[F+1]*fo,p=o[_+2]*H+o[z+2]*J+o[U+2]*K+o[k+2]*Q+o[U+2]*Q+o[S+2]*V+o[w+2]*W+o[B+2]*X+o[R+2]*Z+o[B+2]*Z+o[P+2]*$+o[L+2]*oo+o[N+2]*no+o[Y+2]*to+o[N+2]*to+o[q+2]*ro+o[A+2]*ao+o[j+2]*eo+o[D+2]*io+o[j+2]*io+o[C+2]*uo+o[E+2]*lo+o[F+2]*co+o[G+2]*fo+o[F+2]*fo,d=e?o[_+3]*H+o[z+3]*J+o[U+3]*K+o[k+3]*Q+o[U+3]*Q+o[S+3]*V+o[w+3]*W+o[B+3]*X+o[R+3]*Z+o[B+3]*Z+o[P+3]*$+o[L+3]*oo+o[N+3]*no+o[Y+3]*to+o[N+3]*to+o[q+3]*ro+o[A+3]*ao+o[j+3]*eo+o[D+3]*io+o[j+3]*io+o[C+3]*uo+o[E+3]*lo+o[F+3]*co+o[G+3]*fo+o[F+3]*fo:o[f+3],u&&(s=v=p=(s+v+p)/3),i&&(s=255-s,v=255-v,p=255-p),n[f]=s,n[f+1]=v,n[f+2]=p,n[f+3]=d}function gaussian(o,n,t,r,a){var e,i,u,l,c,f,s,v,p,d,m,h,x,g,O,M=[],T=[[1]];for(g=(a=clamp(a,3,13))+(x=-a/2+(a%2?.5:0)),u=1;u<13;u+=1)T[0][u]=0;for(u=1;u<13;u+=1)for(T[u]=[1],l=1;l<13;l+=1)T[u][l]=T[u-1][l]+T[u-1][l-1];for(O=T[a-1],u=0,h=0;u<a;u+=1)h+=O[u];for(u=0;u<a;u+=1)O[u]/=h;for(i=0;i<r;i+=1)for(e=0;e<t;e+=1){for(c=f=s=v=0,u=x;u<g;u+=1)d=e+u,m=i,h=O[u-x],d<0&&(d=0),d>=t&&(d=t-1),c+=o[p=4*(m*t+d)]*h,f+=o[p+1]*h,s+=o[p+2]*h,v+=o[p+3]*h;M[p=4*(i*t+e)]=c,M[p+1]=f,M[p+2]=s,M[p+3]=v}for(i=0;i<r;i+=1)for(e=0;e<t;e+=1){for(c=f=s=v=0,u=x;u<g;u+=1)d=e,m=i+u,h=O[u-x],m<0&&(m=0),m>=r&&(m=r-1),c+=M[p=4*(m*t+d)]*h,f+=M[p+1]*h,s+=M[p+2]*h,v+=M[p+3]*h;n[p=4*(i*t+e)]=c,n[p+1]=f,n[p+2]=s,n[p+3]=v}}function getPixel(o,n){return[o[(n*=4)+0],o[n+1],o[n+2],o[n+3]]}function setPixel(o,n,t){o[(n*=4)+0]=t[0],o[n+1]=t[1],o[n+2]=t[2],o[n+3]=t[3]}function polar(o,n,t,r,a,e,i){var u,l,c,f,s,v,p;for(t=a/2+(t||0),r=e/2+(r||0),u=0;u<e;u+=1)for(l=0;l<a;l+=1)c=l-t,f=u-r,s=(p=i(s=Math.sqrt(Math.pow(c,2)+Math.pow(f,2)),v=Math.atan2(f,c)))[0],v=p[1],setPixel(n,l+u*a,getPixel(o,Math.round(t+Math.cos(v)*s)+Math.round(r+Math.sin(v)*s)*a))}var process={invert:function(o,n,t,r){var a,e=t*r*4;for(a=0;a<e;a+=4)n[a]=255-o[a],n[a+1]=255-o[a+1],n[a+2]=255-o[a+2],n[a+3]=o[a+3]},sepia:function(o,n,t,r){var a,e,i,u,l=t*r*4;for(a=0;a<l;a+=4)e=o[a],i=o[a+1],u=o[a+2],n[a]=.393*e+.769*i+.189*u,n[a+1]=.349*e+.686*i+.168*u,n[a+2]=.272*e+.534*i+.131*u,n[a+3]=o[a+3]},solarize:function(o,n,t,r){var a,e,i,u,l=t*r*4;for(a=0;a<l;a+=4)e=o[a],i=o[a+1],u=o[a+2],n[a]=e>127?255-e:e,n[a+1]=i>127?255-i:i,n[a+2]=u>127?255-u:u,n[a+3]=o[a+3]},brightness:function(o,n,t,r,a){a=defaultOptions(a,{brightness:1,contrast:0});var e,i,u,l,c,f=t*r*4,s=clamp(a.contrast,-1,1)/2,v=1+clamp(a.brightness,-1,1),p=v<0?-v:v,d=v<0?0:v;for(c=255*-((s=.5*Math.tan((s+1)*Math.PI/4))-.5),e=0;e<f;e+=4)i=((i=o[e])+i*p+d)*s+c,u=((u=o[e+1])+u*p+d)*s+c,l=((l=o[e+2])+l*p+d)*s+c,n[e]=i,n[e+1]=u,n[e+2]=l,n[e+3]=o[e+3]},desaturate:function(o,n,t,r,a){var e,i,u,l,c,f=t*r*4;for((a=defaultOptions(a,{method:LUMINOSITY_ITU_R_BT601})).method===LUMINOSITY_ITU_R_BT601?(u=.3,l=.59,c=.11):a.method===LUMINOSITY_ITU_R_BT709&&(u=.2125,l=.7154,c=.0721),e=0;e<f;e+=4)i=o[e]*u+o[e+1]*l+o[e+2]*c,n[e]=i,n[e+1]=i,n[e+2]=i,n[e+3]=o[e+3]},lighten:function(o,n,t,r,a){a=defaultOptions(a,{amount:.25});var e,i=t*r*4,u=1+clamp(a.amount,0,1);for(e=0;e<i;e+=4)n[e]=o[e]*u,n[e+1]=o[e+1]*u,n[e+2]=o[e+2]*u,n[e+3]=o[e+3]},noise:function(o,n,t,r,a){a=defaultOptions(a,{amount:.5,strength:.5,mono:!1});var e,i,u,l,c,f=t*r*4,s=clamp(a.amount,0,1),v=clamp(a.strength,0,1),p=!!a.mono,d=Math.random;for(e=0;e<f;e+=4)u=o[e],l=o[e+1],c=o[e+2],(i=d())<s&&(p?(u+=i=v*(i/s*2-1)*255,l+=i,c+=i):(u+=v*d()*255,l+=v*d()*255,c+=v*d()*255)),n[e]=u,n[e+1]=l,n[e+2]=c,n[e+3]=o[e+3]},flipv:function(o,n,t,r){var a,e,i,u;for(e=0;e<r;e+=1)for(a=0;a<t;a+=1)i=4*(e*t+a),n[u=4*(e*t+(t-a-1))]=o[i],n[u+1]=o[i+1],n[u+2]=o[i+2],n[u+3]=o[i+3]},fliph:function(o,n,t,r){var a,e,i,u;for(e=0;e<r;e+=1)for(a=0;a<t;a+=1)i=4*(e*t+a),n[u=4*((r-e-1)*t+a)]=o[i],n[u+1]=o[i+1],n[u+2]=o[i+2],n[u+3]=o[i+3]},blur:function(o,n,t,r,a){a=defaultOptions(a,{radius:10});for(var e=0;e<o.length;e+=1)n[e]=o[e];stackblur(n,t,r,a.radius)},glow:function(o,n,t,r,a){var e,i,u,l,c=t*r*4,f=(a=defaultOptions(a,{amount:.75,kernelSize:5})).amount,s=[];for(gaussian(o,s,t,r,a.kernelSize),e=0;e<c;e+=4)(i=o[e]+s[e]*f)>255&&(i=255),(u=o[e+1]+s[e+1]*f)>255&&(u=255),(l=o[e+2]+s[e+2]*f)>255&&(l=255),n[e]=i,n[e+1]=u,n[e+2]=l,n[e+3]=o[e+3]},convolve3x3:function(o,n,t,r,a){convolve3x3(o,n,t,r,a.kernel)},convolve5x5:function(o,n,t,r,a){convolve5x5(o,n,t,r,a.kernel)},sharpen3x3:function(o,n,t,r,a){a=defaultOptions(a,{strength:1});var e=-clamp(a.strength,0,1);convolve3x3(o,n,t,r,[[e,e,e],[e,1-8*e,e],[e,e,e]])},sharpen5x5:function(o,n,t,r,a){a=defaultOptions(a,{strength:1});var e=-clamp(a.strength,0,1);convolve5x5(o,n,t,r,[[e,e,e,e,e],[e,e,e,e,e],[e,e,1-24*e,e,e],[e,e,e,e,e],[e,e,e,e,e]])},soften3x3:function(o,n,t,r){var a=1/9;convolve3x3(o,n,t,r,[[a,a,a],[a,a,a],[a,a,a]])},soften5x5:function(o,n,t,r){var a=.04;convolve5x5(o,n,t,r,[[a,a,a,a,a],[a,a,a,a,a],[a,a,a,a,a],[a,a,a,a,a],[a,a,a,a,a]])},crossedges:function(o,n,t,r,a){a=defaultOptions(a,{strength:1});var e=5*clamp(a.strength,0,1);convolve3x3(o,n,t,r,[[0,-e,0],[-e,0,e],[0,e,0]],!1,!0)},emboss:function(o,n,t,r,a){var e,i=t*r*4,u=(a=defaultOptions(a,{amount:1,angle:0})).amount,l=a.angle,c=Math.cos(-l)*u,f=Math.sin(-l)*u,s=[];for(convolve3x3(o,s,t,r,[[-c-f,-f,-f+c],[-c,0,c],[f-c,f,f+c]]),e=0;e<i;e+=4)n[e]=128+s[e],n[e+1]=128+s[e+1],n[e+2]=128+s[e+2],n[e+3]=o[e+3]},findedges:function(o,n,t,r){var a,e,i,u,l,c,f,s=t*r*4,v=[],p=[];for(convolve3x3(o,v,t,r,[[-1,0,1],[-2,0,2],[-1,0,1]]),convolve3x3(o,p,t,r,[[-1,-2,-1],[0,0,0],[1,2,1]]),a=0;a<s;a+=4)(e=v[a])<0&&(e=-e),(i=p[a])<0&&(i=-i),(u=v[a+1])<0&&(u=-u),(l=p[a+1])<0&&(l=-l),(c=v[a+2])<0&&(c=-c),(f=p[a+2])<0&&(f=-f),n[a]=255-.8*(e+i),n[a+1]=255-.8*(u+l),n[a+2]=255-.8*(c+f),n[a+3]=o[a+3]},edgeenhance3x3:function(o,n,t,r){var a=-1/9;convolve3x3(o,n,t,r,[[a,a,a],[a,17/9,a],[a,a,a]])},edgeenhance5x5:function(o,n,t,r){var a=-.04;convolve5x5(o,n,t,r,[[a,a,a,a,a],[a,a,a,a,a],[a,a,1.96,a,a],[a,a,a,a,a],[a,a,a,a,a]])},laplace3x3:function(o,n,t,r){convolve3x3(o,n,t,r,[[-1,-1,-1],[-1,8,-1],[-1,-1,-1]],!1,!0,!0)},laplace5x5:function(o,n,t,r){convolve5x5(o,n,t,r,[[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,24,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1]],!1,!0,!0)},rgbAdjust:function(o,n,t,r,a){a=defaultOptions(a,{r:0,g:0,b:0,a:0});var e,i,u,l,c,f=t*r*4,s=255*clamp(a.r,-1,1),v=255*clamp(a.g,-1,1),p=255*clamp(a.b,-1,1),d=255*clamp(a.a,-1,1);for(e=0;e<f;e+=4)(i=o[e]+s)<0&&(i=0),(u=o[e+1]+v)<0&&(u=0),(l=o[e+2]+p)<0&&(l=0),(c=o[e+3]+d)<0&&(c=0),i>255&&(i=255),u>255&&(u=255),l>255&&(l=255),c>255&&(c=255),n[e]=i,n[e+1]=u,n[e+2]=l,n[e+3]=c},colorfilter:function(o,n,t,r,a){var e,i,u,l,c,f,s,v,p,d,m,h=t*r*4,x=!!(a=defaultOptions(a,{luminosity:!1,r:1,g:.5,b:0})).luminosity,g=clamp(a.r,0,1),O=clamp(a.g,0,1),M=clamp(a.b,0,1);for(e=0;e<h;e+=4)v=.3*(i=o[e]/255)+.59*(u=o[e+1]/255)+.11*(l=o[e+2]/255),i=(i+i*g)/2,u=(u+u*O)/2,l=(l+l*M)/2,x&&(c=f=i,u>f&&(f=u),l>f&&(f=l),u<c&&(c=u),l<c&&(c=l),m=(d=f-c)*((s=i===f?(u-l)/d%6:u===f?(l-i)/d+2:(i-u)/d+4)-(p=s>>0)),i=u=l=v-(.3*i+.59*u+.11*l),0===p?(i+=d,u+=m):1===p?(i+=d-m,u+=d):2===p?(u+=d,l+=m):3===p?(u+=d-m,l+=d):4===p?(i+=m,l+=d):5===p&&(i+=d,l+=d-m)),n[e]=255*i,n[e+1]=255*u,n[e+2]=255*l,n[e+3]=o[e+3]},hslAdjust:function(o,n,t,r,a){a=defaultOptions(a,{h:.5,s:.3,l:.1,a:0});var e,i,u,l,c,f,s,v,p,d,m,h,x,g,O,M=t*r*4,T=clamp(a.h,-1,1),I=clamp(a.s,-1,1),b=clamp(a.l,-1,1),y=255*clamp(a.a,-1,1),_=1+I*(I<0?1:2),z=b<0?1+b:1-b,U=b<0?0:255*b;for(T=6*T%6,e=0;e<M;e+=4)i=o[e],u=o[e+1],l=o[e+2],0===T&&0===I||(u>(f=i)&&(f=u),l>f&&(f=l),u<(s=i)&&(s=u),l<s&&(s=l),v=f-s,(m=(s+f)/510)>0&&v>0&&(m<=.5?((d=v/(f+s)*_)>1&&(d=1),h=m*(1+d)):((d=v/(510-f-s)*_)>1&&(d=1),h=m+d-m*d),(p=i===f?u===s?5+(f-l)/v+T:1-(f-u)/v+T:u===f?l===s?1+(f-i)/v+T:3-(f-l)/v+T:i===s?3+(f-u)/v+T:5-(f-i)/v+T)<0&&(p+=6),p>=6&&(p-=6),g=(h-(x=m+m-h))*(p-(O=p>>0)),0===O?(i=h,u=x+g,l=x):1===O?(i=h-g,u=h,l=x):2===O?(i=x,u=h,l=x+g):3===O?(i=x,u=h-g,l=h):4===O?(i=x+g,u=x,l=h):5===O&&(i=h,u=x,l=h-g),i*=255,u*=255,l*=255)),(i=i*z+U)<0&&(i=0),(u=u*z+U)<0&&(u=0),(l=l*z+U)<0&&(l=0),(c=o[e+3]+y)<0&&(c=0),i>255&&(i=255),u>255&&(u=255),l>255&&(l=255),c>255&&(c=255),n[e]=i,n[e+1]=u,n[e+2]=l,n[e+3]=c},posterize:function(o,n,t,r,a){a=defaultOptions(a,{levels:5});var e,i=t*r*4,u=clamp(a.levels,2,256),l=256/u,c=256/(u-1);for(e=0;e<i;e+=4)n[e]=c*(o[e]/l>>0),n[e+1]=c*(o[e+1]/l>>0),n[e+2]=c*(o[e+2]/l>>0),n[e+3]=o[e+3]},removenoise:function(o,n,t,r){var a,e,i,u,l,c,f,s,v,p,d,m,h,x,g,O,M;for(e=0;e<r;e+=1)for(v=(s=e*t*4)-4*t,p=s+4*t,e<1&&(v=s),e>=t-1&&(p=s),a=0;a<t;a+=1)f=4*(e*t+a),m=(d=4*a)-4,h=d+4,a<1&&(m=d),a>=t-1&&(h=d),x=M=o[s+m],(c=o[s+h])<x&&(x=c),c>M&&(M=c),(c=o[v+d])<x&&(x=c),c>M&&(M=c),(c=o[p+d])<x&&(x=c),c>M&&(M=c),g=o[s+m+1],(c=o[s+h+1])<g&&(g=c),(c=o[v+d+1])<g&&(g=c),(c=o[p+d+1])<g&&(g=c),O=o[s+m+2],(c=o[s+h+2])<O&&(O=c),(c=o[v+d+2])<O&&(O=c),(c=o[p+d+2])<O&&(O=c),(i=o[f])<x&&(i=x),i>M&&(i=M),(u=o[f+1])<g&&(u=g),u>void 0&&(u=void 0),(l=o[f+2])<O&&(l=O),l>void 0&&(l=void 0),n[f]=i,n[f+1]=u,n[f+2]=l,n[f+3]=o[f+3]},mosaic:function(o,n,t,r,a){a=defaultOptions(a,{blockSize:8});var e,i,u,l,c,f,s,v,p,d,m,h,x,g=clamp(a.blockSize,1,Math.max(t,r)),O=Math.ceil(r/g),M=Math.ceil(t/g);for(e=0,0,s=0;s<O;s+=1){for(i=clamp(e+g,0,r),u=0,v=0;v<M;v+=1){for(l=clamp(u+g,0,t),p=o[c=e*t+u<<2],d=o[c+1],m=o[c+2],h=e;h<i;h+=1)for(x=u;x<l;x+=1)n[f=h*t+x<<2]=p,n[f+1]=d,n[f+2]=m,n[f+3]=o[f+3];u=l,1}e=i}},equalize:function(o,n,t,r,a){var e,i,u,l,c=t*r,f=Math.round,s=new Array(256);for(i=0;i<256;i+=1)s[i]=0;for(i=0;i<c;i+=1)u=clamp(f(.3*o[e=4*i]+.59*o[e+1]+.11*o[e+2]),0,255),n[e+3]=u,s[u]+=1;var v=new Array(256);for(v[0]=s[0],i=1;i<256;i+=1)v[i]=v[i-1]+s[i];for(i=0;i<256;i+=1)v[i]=v[i]/c*255;for(i=0;i<c;i+=1)l=v[u=n[(e=4*i)+3]]/(u||1),n[e]=clamp(f(o[e]*l),0,255),n[e+1]=clamp(f(o[e+1]*l),0,255),n[e+2]=clamp(f(o[e+2]*l),0,255),n[e+3]=o[e+3]},mask:function(o,n,t,r,a){var e,i=t*r*4,u=a.data;for(e=0;e<i;e+=4)n[e]=o[e],n[e+1]=o[e+1],n[e+2]=o[e+2],n[e+3]=o[e+3]*u[e]/255*u[e+3]/255},bump:function(o,n,t,r,a){var e=(a=defaultOptions(a,{dx:0,dy:0,radius:0,zoom:0})).radius,i=clamp(a.zoom,0,1);return polar(o,n,a.dx,a.dy,t,r,function(o,n){return[o*smoothstep(0,i,o/e),n]})},dent:function(o,n,t,r,a){var e=(a=defaultOptions(a,{dx:0,dy:0,radius:0,zoom:0})).radius,i=clamp(a.zoom,0,1);return polar(o,n,a.dx,a.dy,t,r,function(o,n){return[2*o-o*smoothstep(0,i,o/e),n]})},pinch:function(o,n,t,r,a){a=defaultOptions(a,{dx:0,dy:0,zoom:0});var e=util.distance(0,0,t,r),i=clamp(.75*a.zoom,-.75,.75);return polar(o,n,a.dx,a.dy,t,r,function(o,n){return[o*Math.pow(e/o,i)*(1-i),n]})},splash:function(o,n,t,r,a){var e=(a=defaultOptions(a,{dx:0,dy:0,radius:0})).radius;return polar(o,n,a.dx,a.dy,t,r,function(o,n){return[o>e?e:o,n]})},twirl:function(o,n,t,r,a){a=defaultOptions(a,{dx:0,dy:0,radius:0,angle:0});var e=util.radians(a.angle),i=a.radius;return polar(o,n,a.dx,a.dy,t,r,function(o,n){return[o,n+(1-smoothstep(-i,i,o))*e]})}};module.exports=process;

},{"./util":25,"stackblur":9}],25:[function(require,module,exports){
"use strict";function degrees(n){return 180*n/Math.PI}function radians(n){return n/180*Math.PI}function distance(n,t,r,a){return Math.sqrt(Math.pow(r-n,2)+Math.pow(a-t,2))}function clamp(n,t,r){return Math.min(r,Math.max(t,n))}function transform(n){function t(n,t){var r=(t=t.slice())[0],a=t[1],e=(t[2],t[3]),i=t[4],o=(t[5],t[6]),u=t[7];t[8];return t[0]=n[0]*r+n[1]*e,t[1]=n[0]*a+n[1]*i,t[3]=n[3]*r+n[4]*e,t[4]=n[3]*a+n[4]*i,t[6]=n[6]*r+n[7]*e+o,t[7]=n[6]*a+n[7]*i+u,transform(t)}return n=void 0===n?[1,0,0,0,1,0,0,0,1]:n.slice(),{matrix:function(){return n.slice()},clone:function(){return transform(n)},prepend:function(r){return r.matrix&&(r=r.matrix()),t(n,r)},append:function(r){return r.matrix&&(r=r.matrix()),t(r,n)},translate:function(r,a){return t([1,0,0,0,1,0,r,a,1],n)},scale:function(r,a){return void 0===a&&(a=r),t([r,0,0,0,a,0,0,0,1],n)},skew:function(r,a){void 0===a&&(a=r);var e=Math.PI*r/180,i=Math.PI*a/180;return t([1,Math.tan(i),0,-Math.tan(e),1,0,0,0,1],n)},rotate:function(r){var a=Math.cos(radians(r)),e=Math.sin(radians(r));return t([a,e,0,-e,a,0,0,0,1],n)},transformPoint:function(t){var r=t.x,a=t.y;return{x:r*n[0]+a*n[3]+n[6],y:r*n[1]+a*n[4]+n[7]}}}}module.exports={degrees:degrees,radians:radians,distance:distance,clamp:clamp,transform:transform};

},{}],26:[function(require,module,exports){
"use strict";var deepEqual=require("./deepequal"),util=require("./util"),g={combine:function(){var r,n,t=[];for(r=0;r<arguments.length;r++)(n=arguments[r])&&(t=t.concat(n));return t},contains:function(r,n){if(!r)return!1;for(var t=0;t<r.length;t+=1)if(deepEqual.deepEqual(r[t],n))return!0;return!1},cycle:function(r,n){if(!r||n<=0)return[];for(var t=[],e=r.length,u=0;u<n;u+=1)t.push(r[u%e]);return t},equals:function(r,n){return deepEqual.deepEqual(r,n)},count:function(r){return r&&r.length?r.length:0},cull:function(r,n){if(!r)return[];if(!n)return r;var t,e=[];for(t=0;t<r.length;t++)n[t%n.length]&&e.push(r[t]);return e},distinct:function(r){if(!r)return[];var n,t,e,u=[],i=[];for(n=0,t=r.length;n<t;n+=1)e=r[n],g.contains(i,e)||(i.push(e),u.push(r[n]));return u},first:function(r){return r&&0!==r.length?r[0]:null},get:function(r,n){return r&&0!==r.length?r[n]:null},interleave:function(){const r=Array.from(arguments).filter(r=>!!r);if(0===r.length)return[];const n=[];let t=0;for(;;){for(let e=0;e<r.length;e++){let u=r[e];if(!(u.length>t))return n;n.push(u[t])}t+=1}},last:function(r){return r&&0!==r.length?r[r.length-1]:null},pick:function(r,n,t){if(!r||0===r.length||n<=0)return[];t||0===t||(t=Math.random());for(var e=util.randomGenerator(t||0),u=[],i=0;i<n;i+=1)u.push(r[Math.floor(e(0,r.length))]);return u},randomSample:function(r,n,t){if(!r||0===r.length||n<=0)return[];t||0===t||(t=Math.random());var e=g.shuffle(r,t);return n?g.slice(e,0,n):e},repeat:function(r,n,t){if(!r)return[];if(Array.isArray(r)||(r=[r]),n<=0)return[];var e,u,i,l=[];if(t)for(e=0;e<r.length;e+=1)for(i=r[e],u=0;u<n;u+=1)l.push(i);else for(e=0;e<n;e+=1)l.push.apply(l,r);return l},rest:function(r){return r?r.slice(1):[]},reverse:function(r){return r?r.slice().reverse():[]},second:function(r){return!r||r.length<2?null:r[1]},shift:function(r,n){if(!r)return[];n%=r.length;var t=r.slice(0,n),e=r.slice(n);return e.push.apply(e,t),e},shuffle:function(r,n){var t,e,u,i;for(n||0===n||(n=Math.random()),i=util.randomGenerator(n||0),t=(r=r.slice()).length-1;t>0;t--)e=Math.floor(i(0,t+1)),u=r[t],r[t]=r[e],r[e]=u;return r},slice:function(r,n,t,e){return r?e?(u=r.slice(0,n),i=r.slice(n+t),u.push.apply(u,i),u):r.slice(n,n+t):[];var u,i},sort:function(r,n){if(!r)return[];if(n){if("string"==typeof n)return r.slice().sort(function(r,t){return r[n]>t[n]?1:r[n]===t[n]?0:-1});if("function"==typeof n)return r.slice().sort(n)}return r&&void 0!==r[0]&&null!==r[0]&&"number"==typeof r[0]?r.slice().sort(function(r,n){return r-n}):r.slice().sort()},switch:function(r){var n=arguments.length-1;return(r%=n)<0&&(r+=n),arguments[r+1]},takeEvery:function(r,n,t){if(!r)return[];var e,u=[];for(t=t||0,e=0;e<r.length;e+=1)e%n===t&&u.push(r[e]);return u},zipMap:function(r,n){var t,e,u,i={},l=Math.min(r.length,n.length);for(t=0;t<l;t+=1)e=r[t],u=n[t],i[e]=u;return i}};module.exports=g;

},{"./deepequal":16,"./util":29}],27:[function(require,module,exports){
"use strict";var reduce=require("lodash.reduce"),util=require("./util"),vg=require("./vg/vg"),g={},TWO_PI=2*Math.PI;g.abs=Math.abs,g.accumulate=function(r){if(arguments.length>1?r=arguments:1!==arguments.length||Array.isArray(r)||(r=[r]),!r||0===r.length)return[0];var n,t=[],e=0;for(n=0;n<r.length;n++)t.push(e),e+=r[n];return t},g.add=function(r,n){return 2===arguments.length?r+n:reduce(arguments,function(r,n){return r+n},0)},g.and=function(r,n){var t=arguments.length;if(2===t)return r&&n;if(1===t)return!!r;if(0===t)throw new Error("Wrong number of arguments");return reduce(arguments,function(r,n){return r&&n},!0)},g.average=function(r){if(arguments.length>1?r=arguments:1!==arguments.length||Array.isArray(r)||(r=[r]),!r||0===r.length)return 0;var n,t=0;for(n=0;n<r.length;n+=1)t+=r[n];return t/r.length},g.boolean=function(r){return!!r},g.ceil=Math.ceil,g.clamp=function(r,n,t){return t="number"==typeof t?t:1,r<(n="number"==typeof n?n:0)?n:r>t?t:r},g.compare=function(r,n,t){if("<"===t)return r<n;if(">"===t)return r>n;if("<="===t)return r<=n;if(">="===t)return r>=n;if("=="===t)return r===n;if("!="===t)return r!==n;throw new Error("Unknown comparison operation "+t)},g.cos=Math.cos,g.degrees=function(r){return 180*r/Math.PI},g.divide=function(r,n){var t=arguments.length;function e(r){if(0===r)throw new Error("Divide by zero")}if(2===t)return e(n),r/n;if(1===t)return e(r),1/r;if(0===t)throw new Error("Wrong number of arguments");return reduce([].slice.call(arguments,1),function(r,n){return e(n),r/n},arguments[0])},g.e=function(){return Math.E},g.even=function(r){return r%2==0},g.floor=Math.floor,g.integer=function(r){return 0|r},g.log=function(r){return r>0?Math.log(r):-Math.log(-r)},g.makeNumbers=function(r,n){if(!r)return[];n||(n="");var t,e,u=[],o=r.split(n);for(t=0;t<o.length;t+=1)(0===(e=parseFloat(o[t]))||e)&&u.push(e);return u},g.max=function(){var r=arguments;if(1===arguments.length&&Array.isArray(arguments[0])&&(r=arguments[0]),0===r.length)throw new Error("Wrong number of arguments");return Math.max.apply(null,r)},g.min=function(){var r=arguments;if(1===arguments.length&&Array.isArray(arguments[0])&&(r=arguments[0]),0===r.length)throw new Error("Wrong number of arguments");return Math.min.apply(null,r)},g.mod=function(r,n){return r%n},g.multiply=function(r,n){var t=arguments.length;return 2===t?r*n:1===t?r:reduce(arguments,function(r,n){return r*n},1)},g.negate=function(r){return-r},g.not=function(r){return!r},g.number=function(r){return r},g.odd=function(r){return r%2!=0},g.or=function(r,n){var t=arguments.length;if(2===t)return r||n;if(1===t)return!!r;if(0===t)throw new Error("Wrong number of arguments");return reduce(arguments,function(r,n){return r||n},!1)},g.perlinNoise=function(r,n,t){return vg.math.noise(r,n,t)},g.pi=function(){return Math.PI},g.pow=Math.pow,g.radians=function(r){return r*Math.PI/180},g.randomNumbers=function(r,n,t,e){var u,o=arguments.length;if((o<4||!e&&0!==e)&&(e=Math.random()),3===o||4===o?(n=n||0,t=t||(0===t?0:1)):2===o?(t=n||(0===n?0:1),n=0):1===o&&(n=0,t=1),t<n){var i=t;t=n,n=i}for(var a=t-n,g=[],f=util.randomGenerator(e||0),h=0;h<r;h+=1)u=n+f(0,1)*a,g.push(u);return g},g.range=function(r,n,t,e){if(r===n)return[];if(0!==t&&(t=t||(r<n?1:-1)),t>0&&r>n)return[];if(t<0&&r<n)return[];if(0===t)return[];var u,o=[];if(r<n)if(e)for(u=r;u<=n;u+=t)o.push(u);else for(u=r;u<n;u+=t)o.push(u);else if(e)for(u=r;u>=n;u+=t)o.push(u);else for(u=r;u>n;u+=t)o.push(u);return o},g.round=function(r,n){return(n|=0)?Math.round(r/n)*n:Math.round(r)},g.sample=function(r,n,t,e){var u,o,i=[];for(i.length=r,u=e?(t-n)/r:(t-n)/(r-1),o=0;o<r;o+=1)i[o]=n+o*u;return i},g.sineWave=function(r,n,t,e,u){void 0===n&&(n=-1),void 0===t&&(t=1),void 0===e&&(e=1),void 0===u&&(u=0);var o=(t-n)/2;return n+o+Math.sin((u+r)*TWO_PI/e)*o},g.squareWave=function(r,n,t,e,u){return void 0===n&&(n=-1),void 0===t&&(t=1),void 0===e&&(e=1),void 0===u&&(u=0),(r+u)%e<e/2?t:n},g.triangleWave=function(r,n,t,e,u){void 0===n&&(n=-1),void 0===t&&(t=1),void 0===e&&(e=1),void 0===u&&(u=0);var o=0,i=r+u+e/4;return i%e!=0&&(o=i*(TWO_PI/e)%TWO_PI),o<0&&(o+=TWO_PI),2*((t-n)/2)*(1-Math.abs(o/TWO_PI*2-1))+n},g.sawtoothWave=function(r,n,t,e,u){void 0===n&&(n=-1),void 0===t&&(t=1),void 0===e&&(e=1),void 0===u&&(u=0);var o=0,i=r+u;return i%e!=0&&(o=i*(TWO_PI/e)%TWO_PI),o<0&&(o+=TWO_PI),o/TWO_PI*2*((t-n)/2)+n},g.sign=function(r){return r>0?1:0===r?0:-1},g.sin=Math.sin,g.sqrt=Math.sqrt,g.subtract=function(r,n){var t=arguments.length;if(2===t)return r-n;if(1===t)return-r;if(0===t)throw new Error("Wrong number of arguments");return reduce([].slice.call(arguments,1),function(r,n){return r-n},arguments[0])},g.tan=Math.tan,g.total=function(r){if(arguments.length>1?r=arguments:1!==arguments.length||Array.isArray(r)?0===arguments.length&&(r=[]):r=[r],0===r.length)return 0;var n,t=0;for(n=0;n<r.length;n+=1)t+=r[n];return t},g.xor=function(r,n){if(2===arguments.length)return!!(r^n);throw new Error("Wrong number of arguments")},module.exports=g;

},{"./util":29,"./vg/vg":50,"lodash.reduce":6}],28:[function(require,module,exports){
"use strict";var g={characterAt:function(t,n){return t&&0!==t.length?(t=String(t),n<0&&(n=t.length+n),t.charAt(n)):""},concatenate:function(){for(var t="",n=0;n<arguments.length;n++){var r=arguments[n];t+=r=void 0!==r?String(r):""}return t},endsWith:function(t,n){return!(!t||!n)&&-1!==(t=String(t)).indexOf(n,t.length-n.length)},reverse:function(t){return t.slice().reverse()},startsWith:function(t,n){return!(!t||!n)&&0===(t=String(t)).indexOf(n)}};g.string=String,g.stringContains=function(t,n){return!(!t||!n)&&-1!==(t=String(t)).indexOf(n)},g.stringEquals=function(t,n,r){return t=String(t),n=String(n),!(!t||!n)&&(r?t.toLowerCase()===n.toLowerCase():t===n)},g.stringLength=function(t){return t?(t=String(t)).length:0},g.stringReplace=function(t,n,r){return(t=String(t)).replace(new RegExp(n,"g"),r)},g.stringSplit=function(t,n){return t?(n&&0!==n.length||(n=""),(t=String(t)).split(n)):[]},g.stringTrim=function(t){return t?(t=String(t)).trim():null},g.substring=function(t,n,r,e){return t?r<n?"":(t=String(t),n<0&&r<0&&(n=t.length+n,r=t.length+r),void 0!==r&&e&&(r+=1),t.substring(n,r)):""},g.toCharacterCodes=function(t){if(!t)return[];var n=[];n.length=t.length;for(var r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n},g.toCharacters=function(t){return t?(t=String(t)).split(""):[]},g.toLowerCase=function(t){return(t=String(t)).toLowerCase()},g.toTitleCase=function(t){var n,r="";t=String(t);for(var e=0;e<t.length;e+=1)n=t[e],0===r.length||" "===r[r.length-1]?r+=n.toUpperCase():r+=n;return r},g.toUpperCase=function(t){return(t=String(t)).toUpperCase()},g.wordCount=function(t){return t?(t=String(t)).split(new RegExp("\\w+")).length-1:0},g.toWords=function(t){var n=t.split(/\W+/);return""===n[n.length-1]&&n.pop(),n},module.exports=g;

},{}],29:[function(require,module,exports){
"use strict";var randomGenerator=function(r){if(r<0){for(var n=randomGenerator(Math.abs(r)),e=0;e<23;e+=1)n();return randomGenerator(n(0,1e4))}return function(n,e){return(n=n||0)+(r=(9301*r+49297)%233280)/233280*((e=e||1)-n)}};exports.randomGenerator=randomGenerator;

},{}],30:[function(require,module,exports){
"use strict";var Color=require("../objects/color"),vg={isDrawable:function(r){return Array.isArray(r)&&(r=r[0]),!!r&&("function"==typeof r.draw||("number"==typeof r.x&&"number"==typeof r.y||"number"==typeof r.r&&"number"==typeof r.g&&"number"==typeof r.b))},drawPoints:function(r,e){var t;r.fillStyle="blue",r.beginPath();for(var o=0;o<e.length;o+=1)t=e[o],r.moveTo(t.x,t.y),r.arc(t.x,t.y,2,0,2*Math.PI,!1);r.fill()},drawColoredPoints:function(r,e){for(var t,o=0,n=e.length;o<n;o+=1)t=e[o],r.fillStyle=Color.toCSS(t),r.fillRect(t.x-2,t.y-2,4,4)},drawRectangles:function(r,e){var t;r.save();for(var o=0;o<e.length;o+=1)t=e[o],r.strokeStyle="black",r.strokeWidth=1,r.rect(t.x,t.y,t.width,t.height),r.stroke();r.restore()},drawColors:function(r,e){var t;r.save();for(var o=0;o<e.length;o+=1)t=e[o],r.fillStyle=Color.toCSS(t),r.fillRect(0,0,30,30),r.translate(30,0);r.restore()},draw:function(r,e){var t=e,o=!1;if(Array.isArray(e)&&(t=e[0],o=!0),t)if("function"==typeof t.draw)if(o)for(var n=0,i=e.length;n<i;n+=1)vg.draw(r,e[n]);else e.draw(r);else"number"==typeof t.x&&"number"==typeof t.y?"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b?vg.drawColoredPoints(r,o?e:[e]):"number"==typeof t.width&&"number"==typeof t.height?vg.drawRectangles(r,o?e:[e]):vg.drawPoints(r,o?e:[e]):"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b&&vg.drawColors(r,o?e:[e])},toSVG:function(r,e){var t=!0===(e=e||{}).header,o=void 0!==e.x?e.x:0,n=void 0!==e.y?e.y:0,i=void 0!==e.width?e.width:500,f=void 0!==e.height?e.height:500,l="";if(r)if("function"==typeof r.toSVG)l=r.toSVG();else if(Array.isArray(r)){l="<g>\n";for(var a=0,y=r.length;a<y;a+=1)l+=vg.toSVG(r[a])+"\n";l+="</g>\n"}return t&&(l='<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="'+o+'" y="'+n+'" width="'+i+'px" height="'+f+'px" viewBox="'+o+" "+n+" "+i+" "+f+'">\n'+l+"</svg>\n"),l}};module.exports=vg;

},{"../objects/color":33}],31:[function(require,module,exports){
"use strict";var flatten=require("lodash.flatten"),ClipperLib=require("../../../../third_party/clipper"),bezier=require("../util/bezier"),geo=require("../util/geo"),math=require("../util/math"),random=require("../util/random"),Color=require("../objects/color"),Group=require("../objects/group"),Path=require("../objects/path"),Point=require("../objects/point"),Rect=require("../objects/rect"),Transform=require("../objects/transform"),Transformable=require("../objects/transformable");function _cloneCommand(e){var t={type:e.type};return t.type!==bezier.CLOSE&&(t.x=e.x,t.y=e.y),t.type===bezier.QUADTO?(t.x1=e.x1,t.y1=e.y1):t.type===bezier.CURVETO&&(t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2),t}var vg={HORIZONTAL:"horizontal",VERTICAL:"vertical",EAST:"e",WEST:"w",NORTH:"n",SOUTH:"s",bounds:function(e){var t,n,r;if(e){if("function"==typeof e.bounds)return e.bounds();if(void 0!==e.x&&void 0!==e.y)return void 0!==e.width&&void 0!==e.height?new Rect(e.x,e.y,e.width,e.height):new Rect(e.x,e.y,0,0);if(void 0!==e.r&&void 0!==e.g&&void 0!==e.b)return new vg.Rect(0,0,30,30);if(Array.isArray(e)){if(t=null,(r=e.length)>0&&void 0!==e[0].r&&void 0!==e[0].g&&void 0!==e[0].b)return new Rect(0,0,30*e.length,30);for(n=0;n<r;n+=1)t=t?t.unite(vg.bounds(e[n])):vg.bounds(e[n]);return t||new Rect}return new Rect}return new Rect},makeCenteredRect:function(e,t,n,r){return new Rect(e-n/2,t-r/2,n,r)},makePoint:function(e,t){return new Point(e,t)},makeRect:function(e,t,n,r){return new Rect(e,t,n,r)},merge:function(){for(var e=flatten(arguments),t=[],n=0;n<e.length;n+=1)e[n]&&0!==e[n].length&&t.push(e[n]);return new Group(t)},combinePaths:function(e){return Path.combine(e)}};vg.shapePoints=vg.toPoints=function(e){if(!e)return[];var t;if(e.commands){var n,r=[];for(t=0;t<e.commands.length;t+=1)void 0!==(n=e.commands[t]).x&&r.push(new Point(n.x,n.y));return r}var o=[];for(t=0;t<e.shapes.length;t+=1)o=o.concat(vg.shapePoints(e.shapes[t]));return o},vg.colorize=function(e,t,n,r){return e?e.colorize(t,n,r):null},vg.translate=function(e,t){return e?e.translate?e.translate(t):Transformable.translate.apply(e,[t]):null},vg.scale=function(e,t,n){return e?e.scale?e.scale(t,n):Transformable.scale.apply(e,[t,n]):null},vg.rotate=function(e,t,n){return e?e.rotate?e.rotate(t,n):Transformable.rotate.apply(e,[t,n]):null},vg.skew=function(e,t,n){return e?e.skew?e.skew(t,n):Transformable.skew.apply(e,[t,n]):null},vg.copy=function(e,t,n,r,o,i){var a,s,l,u,h=[],g=0,c=0,p=0,f=1,v=1;for(a=0;a<t;a+=1){for(s=new Transform,l=0;l<n.length;l+=1)"t"===(u=n[l])?s=s.translate(g,c):"r"===u?s=s.rotate(p):"s"===u&&(s=s.scale(f,v));Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y?h=h.concat(s.transformShape(e)):h.push(s.transformShape(e)),g+=r.x,c+=r.y,p+=o,f+=i.x,v+=i.y}return h},vg.fit=function(e,t,n,r,o){if(!e)return null;o=void 0!==o&&o;var i,a,s,l=vg.bounds(e),u=l.x,h=l.y,g=l.width,c=l.height;return g=g>1e-12?g:0,c=c>1e-12?c:0,i=(i=new Transform).translate(t.x,t.y),o?(a=g>0?n/g:1,s=c>0?r/c:1):(a=g>0?n/g:Number.MAX_VALUE,s=c>0?r/c:Number.MAX_VALUE,a=s=Math.min(a,s)),(i=(i=i.scale(a,s)).translate(-g/2-u,-c/2-h)).transformShape(e)},vg.fitTo=function(e,t,n){if(!e)return null;if(!t)return e;var r=vg.bounds(t),o=r.x,i=r.y,a=r.width,s=r.height;return vg.fit(e,{x:o+a/2,y:i+s/2},a,s,n)},vg.mirror=function(e,t,n,r){if(!e)return null;var o=new Transform,i=(o=(o=(o=(o=o.translate(n.x,n.y)).rotate(2*t-180)).scale(-1,1)).translate(-n.x,-n.y)).transformShape(e);return r?Array.isArray(e)&&e.length>0?e.concat(i):new Group([e,i]):i},vg.pathLength=function(e,t){if(!e)return 0;var n=20;return t&&t.precision&&(n=t.precision),e.length(n)},vg.resampleByLength=function(e,t){return e?e.resampleByLength(t):null},vg.resampleByAmount=function(e,t,n){return e?e.resampleByAmount(t,n):null},vg._wigglePoints=function(e,t,n){var r,o,i;if(e.commands){var a=new Path([],e.fill,e.stroke,e.strokeWidth);for(r=0;r<e.commands.length;r+=1){o=(n(0,1)-.5)*t.x*2,i=(n(0,1)-.5)*t.y*2;var s=e.commands[r];s.type===bezier.MOVETO?a.moveTo(s.x+o,s.y+i):s.type===bezier.LINETO?a.lineTo(s.x+o,s.y+i):s.type===bezier.CURVETO?a.curveTo(s.x1,s.y1,s.x2,s.y2,s.x+o,s.y+i):s.type===bezier.CLOSE&&a.close()}return a}if(e.shapes){var l=[];for(l.length=e.shapes.length,r=0;r<e.shapes.length;r+=1)l[r]=vg._wigglePoints(e.shapes[r],t,n);return new Group(l)}if(Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y){var u=[];for(u.length=e.length,r=0;r<e.length;r+=1)o=(n(0,1)-.5)*t.x*2,i=(n(0,1)-.5)*t.y*2,u[r]=new Point(e[r].x+o,e[r].y+i);return u}var h=[];for(h.length=e.length,r=0;r<e.length;r+=1)h[r]=vg._wigglePoints(e[r],t,n);return h},vg.wigglePoints=function(e,t,n){if(!e)return null;n=void 0!==n?n:Math.random();var r=random.generator(n);return void 0===t?t={x:10,y:10}:"number"==typeof t&&(t={x:t,y:t}),vg._wigglePoints(e,t,r)},vg._wiggleContours=function(e,t,n){var r;if(e.commands){var o,i,a,s=e.contours(),l=[];for(r=0;r<s.length;r+=1)o=(n(0,1)-.5)*t.x*2,i=(n(0,1)-.5)*t.y*2,a=(new Transform).translate(o,i),l=l.concat(a.transformShape(new Path(s[r])).commands);return new Path(l,e.fill,e.stroke,e.strokeWidth)}if(e.shapes){var u=[];for(u.length=e.shapes.length,r=0;r<e.shapes.length;r+=1)u[r]=vg._wiggleContours(e.shapes[r],t,n);return new Group(u)}var h=[];for(h.length=e.length,r=0;r<e.length;r+=1)h[r]=vg._wiggleContours(e[r],t,n);return h},vg.wiggleContours=function(e,t,n){if(!e)return null;n=void 0!==n?n:Math.random();var r=random.generator(n);return void 0===t?t={x:10,y:10}:"number"==typeof t&&(t={x:t,y:t}),vg._wiggleContours(e,t,r)},vg._wigglePaths=function(e,t,n){if(e.commands)return e;if(e.shapes)return new Group(vg._wigglePaths(e.shapes,t,n));if(Array.isArray(e)){for(var r,o,i,a,s=[],l=0;l<e.length;l+=1)(r=e[l]).commands?(o=(n(0,1)-.5)*t.x*2,i=(n(0,1)-.5)*t.y*2,a=(new Transform).translate(o,i),s.push(a.transformShape(r))):r.shapes&&s.push(vg._wigglePaths(r,t,n));return s}},vg.wigglePaths=function(e,t,n){if(!e)return null;n=void 0!==n?n:Math.random();var r=random.generator(n);return void 0===t?t={x:10,y:10}:"number"==typeof t&&(t={x:t,y:t}),vg._wigglePaths(e,t,r)},vg.scatterPoints=function(e,t,n){if(!e)return[];n=void 0!==n?n:Math.random();var r,o,i,a,s,l,u,h,g=random.generator(n),c=e.bounds(),p=c.x,f=c.y,v=c.width,y=c.height,d=e.contours(),m=[],x=[];for(r=0;r<d.length;r++)a=(i=new Path(d[r])).commands.length,m.push(i.points(5*a,{closed:!0}));for(r=0;r<t;r+=1)for(s=100;s>0;){for(l=0,u=p+g(0,1)*v,h=f+g(0,1)*y,o=0;o<m.length;o++)geo.pointInPolygon(m[o],u,h)&&(l+=1);if(l%2){x.push(new Point(u,h));break}s-=1}return x},vg.connectPoints=function(e,t){if(!e)return null;for(var n,r=new Path,o=0;o<e.length;o+=1)n=e[o],0===o?r.moveTo(n.x,n.y):r.lineTo(n.x,n.y);return t&&r.close(),r.fill=null,r.stroke=Color.BLACK,r},vg.align=function(e,t,n,r){if(!e)return null;var o,i,a=t.x,s=t.y,l=vg.bounds(e);return o="left"===n?a-l.x:"right"===n?a-l.x-l.width:"center"===n?a-l.x-l.width/2:0,i="top"===r?s-l.y:"bottom"===r?s-l.y-l.height:"middle"===r?s-l.y-l.height/2:0,(new Transform).translate(o,i).transformShape(e)},vg.snap=function(e,t,n,r){if(!e)return null;var o,i,a;if(n=void 0!==n?n:1,r=r||Point.ZERO,e.commands){var s,l,u,h,g,c=new Path([],e.fill,e.stroke,e.strokeWidth);for(o=0;o<e.commands.length;o+=1)if((s=e.commands[o]).type===bezier.MOVETO||s.type===bezier.LINETO||s.type===bezier.CURVETO)i=math.snap(s.x+r.x,t,n)-r.x,a=math.snap(s.y+r.y,t,n)-r.y,s.type===bezier.MOVETO?c.moveTo(i,a):s.type===bezier.LINETO?c.lineTo(i,a):s.type===bezier.CURVETO&&(l=math.snap(s.x1+r.x,t,n)-r.x,u=math.snap(s.y1+r.y,t,n)-r.y,h=math.snap(s.x2+r.x,t,n)-r.x,g=math.snap(s.y2+r.y,t,n)-r.y,c.curveTo(l,u,h,g,i,a));else{if(s.type!==bezier.CLOSE)throw new Error("Invalid path command "+s);c.close()}return c}if(e.shapes){var p=[];for(p.length=e.shapes.length,o=0;o<e.shapes.length;o+=1)p[o]=vg.snap(e.shapes[o],t,n,r);return new Group(p)}if(Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y){var f,v=[];for(v.length=e.length,o=0;o<e.length;o+=1)f=e[o],i=math.snap(f.x+r.x,t,n)-r.x,a=math.snap(f.y+r.y,t,n)-r.y,v[o]=new Point(i,a);return v}var y=[];for(y.length=e.length,o=0;o<e.length;o+=1)y[o]=vg.snap(e[o],t,n,r);return y},vg.deletePoints=function(e,t,n){if(!e)return null;if(!t)return e;var r,o,i,a=[],s=[];if(e.commands){var l=!0;for(r=0;r<e.commands.length;r+=1)(void 0===(o=_cloneCommand(e.commands[r])).x||n&&t.contains(o.x,o.y)||!n&&!t.contains(o.x,o.y))&&(l&&o.type!==bezier.MOVETO&&(o.type=bezier.MOVETO),a.push(o),o.type===bezier.MOVETO?l=!1:o.type===bezier.CLOSE&&(l=!0));return new Path(a,e.fill,e.stroke,e.strokeWidth)}if(e.shapes){var u=[];for(u.length=e.shapes.length,r=0;r<e.shapes.length;r+=1)u[r]=vg.deletePoints(e.shapes[r],t,n);return new Group(u)}if(Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y){for(r=0;r<e.length;r+=1)i=e[r],(n&&t.contains(i.x,i.y)||!n&&!t.contains(i.x,i.y))&&s.push(_cloneCommand(i));return s}var h=[];for(h.length=e.length,r=0;r<e.length;r+=1)h[r]=vg.deletePoints(e[r],t,n);return h},vg.deletePaths=function(e,t,n){if(!e||e.commands)return null;if(e.shapes)return new Group(vg.deletePaths(e.shapes,t,n));if(Array.isArray(e)){if(!t)return e;for(var r,o,i,a,s,l=[],u=e,h=0;h<u.length;h+=1)if((o=u[h]).commands){for(i=!1,r=0;r<o.commands.length;r+=1)if(void 0!==(a=o.commands[r]).x&&t.contains(a.x,a.y)){i=!0;break}n&&!i||i&&!n||l.push(o)}else o.shapes&&0!==(s=vg.deletePaths(o,t,n)).length&&l.push(s);return l}},vg.delete=function(e,t,n,r){if(null===e||null===t)return null;if("points"===n)return vg.deletePoints(e,t,r);if("paths"===n)return vg.deletePaths(e,t,r);throw new Error("Invalid scope.")},vg.pointOnPath=function(e,t){if(!e)return Point.ZERO;e.shapes&&(e=new Path(vg.combinePaths(e))),(t%=1)<0&&(t=1+t);var n=e.point(t);return new Point(n.x,n.y)},vg._x=function(e){return void 0!==e.x?e.x:e.bounds().x},vg._y=function(e){return void 0!==e.y?e.y:e.bounds().y},vg._angleToPoint=function(e){return function(t){if(void 0!==t.x&&void 0!==t.y)return geo.angle(t.x,t.y,e.x,e.y);var n=t.bounds().centerPoint();return geo.angle(n.x,n.y,e.x,e.y)}},vg._distanceToPoint=function(e){return function(t){if(void 0!==t.x&&void 0!==t.y)return geo.distance(t.x,t.y,e.x,e.y);var n=t.bounds().centerPoint();return geo.distance(n.x,n.y,e.x,e.y)}},vg.shapeSort=function(e,t,n){if(!e)return null;n=n||Point.ZERO;var r={x:vg._x,y:vg._y,angle:vg._angleToPoint(n),distance:vg._distanceToPoint(n)};if(void 0===(t=r[t]))return e;var o=e.slice(0);return o.sort(function(e,n){var r=t(e),o=t(n);return r<o?-1:r>o?1:0}),o},vg.group=function(){return new Group(flatten(arguments))},vg.ungroup=function(e){if(e){if(e.shapes){var t,n,r=[];for(t=0;t<e.shapes.length;t+=1)(n=e.shapes[t]).commands?r.push(n):n.shapes&&(r=r.concat(vg.ungroup(n)));return r}return e.commands?[e]:[]}return[]},vg.centerPoint=function(e){if(!e)return Point.ZERO;var t=vg.bounds(e);return new Point(t.x+t.width/2,t.y+t.height/2)},vg.link=function(e,t,n){if(!e||!t)return null;var r=new Path,o=e.bounds(),i=t.bounds();if(n===vg.HORIZONTAL){var a=(i.x-(o.x+o.width))/2;r.moveTo(o.x+o.width,o.y),r.curveTo(o.x+o.width+a,o.y,i.x-a,i.y,i.x,i.y),r.lineTo(i.x,i.y+i.height),r.curveTo(i.x-a,i.y+i.height,o.x+o.width+a,o.y+o.height,o.x+o.width,o.y+o.height),r.close()}else{var s=(i.y-(o.y+o.height))/2;r.moveTo(o.x,o.y+o.height),r.curveTo(o.x,o.y+o.height+s,i.x,i.y-s,i.x,i.y),r.lineTo(i.x+i.width,i.y),r.curveTo(i.x+i.width,i.y-s,o.x+o.width,o.y+o.height+s,o.x+o.width,o.y+o.height),r.close()}return r};var compoundMethods={union:ClipperLib.ClipType.ctUnion,difference:ClipperLib.ClipType.ctDifference,intersection:ClipperLib.ClipType.ctIntersection,xor:ClipperLib.ClipType.ctXor};function constructPath(e,t){const n=[];let r={},o=0;e.forEach(e=>{0===o?r._in=e:1===o?r._pt=e:2===o&&(r._out=e),3===(o+=1)&&(n.push(r),o=0,r={})});const i=[];let a=n.length;for(t&&(a+=1),o=0;o<a;o+=1){let e=n[o%n.length];0===o?i.push({cmd:"moveto",pt:e._pt}):(r={cmd:"curveto",pt:e._pt,ctrl1:n[o-1]._out,ctrl2:e._in},i.push(r))}const s=new Path;return i.forEach(e=>{"moveto"===e.cmd?s.moveTo(e.pt.x,e.pt.y):"curveto"===e.cmd&&s.curveTo(e.ctrl1.x,e.ctrl1.y,e.ctrl2.x,e.ctrl2.y,e.pt.x,e.pt.y)}),s}vg._compoundToPoints=function(e){var t,n,r,o,i,a=[];for(t=0;t<e.length;t+=1){for(n=[],r=e[t],o=0;o<r.length;o+=1)(i=r[o]).type!==bezier.CLOSE&&n.push({X:i.x,Y:i.y});a.push(n)}return a},vg.compound=function(e,t,n){e.commands||(e=Path.combine(e)),t.commands||(t=Path.combine(t));var r=e.resampleByLength(1).contours(),o=t.resampleByLength(1).contours(),i=vg._compoundToPoints(r),a=vg._compoundToPoints(o);ClipperLib.JS.ScaleUpPaths(i,100),ClipperLib.JS.ScaleUpPaths(a,100);var s=new ClipperLib.Clipper;s.AddPaths(i,ClipperLib.PolyType.ptSubject,e.isClosed()),s.AddPaths(a,ClipperLib.PolyType.ptClip,t.isClosed());var l=new ClipperLib.Paths;s.Execute(compoundMethods[n],l,ClipperLib.PolyFillType.pftNonZero,ClipperLib.PolyFillType.pftNonZero),l=ClipperLib.JS.Clean(l,10),ClipperLib.JS.ScaleDownPaths(l,100);var u,h,g,c=new Path;for(u=0;u<l.length;u+=1){for(g=l[u],h=0;h<g.length;h+=1)0===h?c.moveTo(g[h].X,g[h].Y):c.lineTo(g[h].X,g[h].Y);g[0].X===g[g.length-1].X&&g[0].Y===g[g.length-1].Y||c.closePath()}return c},vg.roundedSegments=function(e,t){if(!t||0===t.length)return e;const n=vg.toPoints(e),r=[];for(let e=0;e<n.length;e+=1){let o,i=n[e];o=0===e?n[n.length-1]:n[e-1];let a=n[(e+1)%n.length],s=math.degrees(Math.atan2(a.y-o.y,a.x-o.x)),l=geo.coordinates(i.x,i.y,s,-t[e%t.length]),u=geo.coordinates(i.x,i.y,s,t[e%t.length]);r.push(l),r.push(i),r.push(u)}let o=constructPath(r,e.isClosed());return o.fill=e.fill,o.stroke=e.stroke,o.strokeWidth=e.strokeWidth,o},module.exports=vg;

},{"../../../../third_party/clipper":51,"../objects/color":33,"../objects/group":34,"../objects/path":36,"../objects/point":37,"../objects/rect":38,"../objects/transform":40,"../objects/transformable":41,"../util/bezier":43,"../util/geo":45,"../util/math":47,"../util/random":48,"lodash.flatten":3}],32:[function(require,module,exports){
"use strict";var geo=require("../util/geo"),Color=require("../objects/color"),Path=require("../objects/path"),Point=require("../objects/point"),gText=require("../objects/text"),vg={roundedRect:function(e,n,t,r,o,a){var i=new Path;return i.addRoundedRect(e,n,t,r,o,a),i},quad:function(e,n,t,r){var o=arguments,a=new Path;return 8===o.length?Path.prototype.addQuad.apply(a,o):(e=Point.read(e),n=Point.read(n),t=Point.read(t),r=Point.read(r),a.addQuad(e.x,e.y,n.x,n.y,t.x,t.y,r.x,r.y)),a},rect:function(e,n,t,r){var o=arguments;if(3===o.length?e=Point.read(e):4===o.length?"number"==typeof o[0]&&"number"==typeof o[1]?(e=Point.read(o[0],o[1]),n=o[2],t=o[3],r=null):(e=Point.read(e),r=Point.read(r)):5!==o.length&&6!==o.length||(e=Point.read(o[0],o[1]),n=o[2],t=o[3],r=5===o.length&&"number"==typeof o[4]?Point.read(o[4],o[4]):Point.read(o[4],o[5])),!r||0===r.x&&0===r.y){var a=new Path;return a.addRect(e.x-n/2,e.y-t/2,n,t),a}return vg.roundedRect(e.x-n/2,e.y-t/2,n,t,r.x,r.y)},ellipse:function(e,n,t){var r=arguments;4===r.length?(e=Point.read(r[0],r[1]),n=r[2],t=r[3]):e=Point.read(e);var o=new Path;return o.addEllipse(e.x-n/2,e.y-t/2,n,t),o},line:function(e,n){var t=arguments;4===t.length?(e=Point.read(t[0],t[1]),n=Point.read(t[2],t[3])):(e=Point.read(e),n=Point.read(n));var r=new Path;return r.addLine(e.x,e.y,n.x,n.y),r.fill=null,r.stroke="black",r},lineAngle:function(e,n,t){var r=arguments;4===r.length?(e=Point.read(r[0],r[1]),t=r[2],n=r[3]):e=Point.read(e);var o=geo.coordinates(e.x,e.y,n,t);return vg.line(e,o)},arc:function(e,n,t,r,o,a){var i=arguments;7===i.length?(e=Point.read(i[0],i[1]),n=i[2],t=i[3],r=i[4],o=i[5],a=i[6]):e=Point.read(e);var l=new Path;return l.addArc(e.x,e.y,n,t,r,o,a),l},curve:function(e,n,t,r){var o=arguments;6===o.length?(e=Point.read(o[0],o[1]),n=Point.read(o[2],o[3]),t=o[4],r=o[5]):(e=Point.read(e),n=Point.read(n));var a=e.x+t*(n.x-e.x),i=e.y+t*(n.y-e.y),l=geo.angle(e.x,e.y,n.x,n.y)+90,u=geo.coordinates(a,i,l,r),d=u.x,y=u.y,g=e.x+2/3*(d-e.x),c=e.y+2/3*(y-e.y),P=n.x+2/3*(d-n.x),h=n.y+2/3*(y-n.y),v=new Path;return v.moveTo(e.x,e.y),v.curveTo(g,c,P,h,n.x,n.y),v.fill=null,v.stroke=Color.BLACK,v},polygon:function(e,n,t,r){var o=arguments;5===o.length||4===o.length&&"number"==typeof o[0]&&"number"==typeof o[1]?(e=Point.read(o[0],o[1]),n=o[2],t=o[3],r=5!==o.length||o[4]):(e=Point.read(e),3===o.length&&(r=!0)),t=Math.max(t,3);var a,i,l,u,d=e.x,y=e.y,g=n,c=360/t,P=0;!0===r&&(a=geo.coordinates(d,y,0,g),i=geo.coordinates(d,y,c,g),P=-geo.angle(i.x,i.y,a.x,a.y));var h=new Path;for(l=0;l<t;l+=1)u=geo.coordinates(d,y,c*l+P,g),0===l?h.moveTo(u.x,u.y):h.lineTo(u.x,u.y);return h.close(),h},star:function(e,n,t,r){var o,a,i,l,u,d=arguments;5===d.length||4===d.length&&"number"==typeof d[0]&&"number"==typeof d[1]?(e=Point.read(d[0],d[1]),n=d[2],t=d[3],r=d[4]):e=Point.read(e),r||(r=t);var y=new Path;for(y.moveTo(e.x,e.y+t/2),o=1;o<2*n;o+=1)a=o*Math.PI/n,i=o%2==1?r/2:t/2,l=e.x+i*Math.sin(a),u=e.y+i*Math.cos(a),y.lineTo(l,u);return y.close(),y}},nonEmpty=function(e){return""!==e},stripCommas=function(e){return e.replace(/,/g," ")};vg.freehand=function(e){var n,t,r,o,a,i=[],l=e.split("M");for(n=0;n<l.length;n+=1)nonEmpty(l[n])&&i.push(stripCommas(l[n]));var u=new Path;for(t=0;t<i.length;t+=1){for(a=[],l=i[t].split(" "),n=0;n<l.length;n+=1)nonEmpty(l[n])&&a.push(l[n]);for(n=0;n<a.length;n+=2)void 0!==a[n+1]&&(r=parseFloat(a[n]),o=parseFloat(a[n+1]),0===n?u.moveTo(r,o):u.lineTo(r,o))}return u.fill=null,u.stroke=Color.BLACK,u},vg.grid=function(e,n,t,r,o){var a,i,l,u,d,y,g,c,P,h=[];for(h.length=e*n,o=void 0!==o?o:Point.ZERO,e>1?(a=t*(e-1),i=o.x-a/2):i=o.x,n>1?(l=r*(n-1),u=o.y-l/2):u=o.y,P=0,d=0;d<n;d+=1)for(y=0;y<e;y+=1)g=i+y*t,c=u+d*r,h[P]=new Point(g,c),P+=1;return h},vg.text=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(null),new(Function.prototype.bind.apply(gText,e))},vg.demoRect=function(){return new vg.rect({x:0,y:0},100,100,{x:0,y:0})},vg.demoEllipse=function(){return new vg.ellipse({x:0,y:0},100,100)},module.exports=vg;

},{"../objects/color":33,"../objects/path":36,"../objects/point":37,"../objects/text":39,"../util/geo":45}],33:[function(require,module,exports){
"use strict";var math=require("../util/math"),color=require("../util/color"),js=require("../util/js"),HSB="HSB",HSL="HSL",HEX="HEX",Color=function(r,o,t,e,n){var s,l,i,a,h,d;void 0===r?(s=l=i=0,a=1):Array.isArray(r)?(d=o||{},s=void 0!==r[0]?r[0]:0,l=void 0!==r[1]?r[1]:0,i=void 0!==r[2]?r[2]:0,a=void 0!==r[3]?r[3]:d.range||1):void 0!==r.r?(d=o||{},s=r.r,l=r.g,i=r.b,a=void 0!==r.a?r.a:d.range||1):"string"==typeof r?(s=(h=color.hex2rgb(r))[0],l=h[1],i=h[2],a=1):"number"==typeof r&&(1===arguments.length?(s=l=i=r,a=1):2===arguments.length?(s=l=i=r,a="number"==typeof o?o:(d=o).range||1):3===arguments.length?"number"==typeof t?(s=r,l=o,i=t,a=1):(s=l=i=r,a=o,d=t):4===arguments.length?(s=r,l=o,i=t,a="number"==typeof e?e:(d=e).range||1):(s=r,l=o,i=t,a=e,d=n)),void 0!==(d=d||{}).range&&(s/=d.range,l/=d.range,i/=d.range,a/=d.range,d.mode===HSB&&(r/=d.range,o/=d.range,t/=d.range)),d.mode===HSB?(r=math.clamp(r,0,1),o=math.clamp(o,0,1),t=math.clamp(t,0,1),s=(h=color.hsb2rgb(r,o,t))[0],l=h[1],i=h[2]):d.mode===HSL?(r=math.clamp(r,0,1),o=math.clamp(o,0,1),t=math.clamp(t,0,1),s=(h=color.hsl2rgb(r,o,t))[0],l=h[1],i=h[2]):d.mode===HEX&&(s=(h=color.hex2rgb(r))[0],l=h[1],i=h[2],a=1),this.r=math.clamp(s,0,1),this.g=math.clamp(l,0,1),this.b=math.clamp(i,0,1),this.a=math.clamp(a,0,1)};Color.BLACK=new Color(0),Color.WHITE=new Color(1),js.defineAlias(Color,"r","red"),js.defineAlias(Color,"g","green"),js.defineAlias(Color,"b","blue"),js.defineAlias(Color,"a","alpha"),js.defineGetter(Color,"h",function(){return color.rgb2hsl(this.r,this.g,this.b)[0]}),js.defineGetter(Color,"s",function(){return color.rgb2hsl(this.r,this.g,this.b)[1]}),js.defineGetter(Color,"l",function(){return color.rgb2hsl(this.r,this.g,this.b)[2]}),js.defineAlias(Color,"h","hue"),js.defineAlias(Color,"s","saturation"),js.defineAlias(Color,"l","lightness"),js.defineGetter(Color,"rgb",function(){return[this.r,this.g,this.b]}),js.defineGetter(Color,"rgba",function(){return[this.r,this.g,this.b,this.a]}),js.defineGetter(Color,"hsb",function(){return color.rgb2hsb(this.r,this.g,this.b)}),js.defineGetter(Color,"hsba",function(){return color.rgb2hsb(this.r,this.g,this.b).concat([this.a])}),js.defineGetter(Color,"hsl",function(){return color.rgb2hsl(this.r,this.g,this.b)}),js.defineGetter(Color,"hsla",function(){return color.rgb2hsl(this.r,this.g,this.b).concat([this.a])}),Color.prototype.toCSS=function(){return Color.toCSS(this)},Color.prototype.toHex=function(r){return r||this.a>=1?color.rgb2hex(this.r,this.g,this.b):color.rgba2hex(this.r,this.g,this.b,this.a)},Color.prototype.desaturate=function(r){if(this.r===this.g&&this.g===this.b)return this;var o,t,e;void 0!==r&&r.method&&"ITU-R BT.601"!==r.method?"ITU-R BT.709"===r.method&&(o=.2125,t=.7154,e=.0721):(o=.3,t=.59,e=.11);var n=this.r*o+this.g*t+this.b*e;return new Color(n,n,n,this.a)},Color.prototype.invert=function(){return new Color(1-this.r,1-this.g,1-this.b,this.a)},Color.clone=function(r){return null==r?null:"string"==typeof r?r:new Color(r.r,r.g,r.b,r.a)},Color.toCSS=function(r){if(null===r)return"none";if(void 0===r)return"black";if("string"==typeof r)return r;if(r instanceof Color){return"rgba("+Math.round(255*r.r)+", "+Math.round(255*r.g)+", "+Math.round(255*r.b)+", "+r.a+")"}if(void 0!==r.r&&void 0!==r.g&&void 0!==r.b){let o=Math.round(255*r.r),t=Math.round(255*r.g),e=Math.round(255*r.b);return void 0===r.a?"rgb("+o+", "+t+", "+e+")":"rgba("+o+", "+t+", "+e+", "+r.a+")"}throw new Error("Don't know how to convert "+r+" to CSS.")},Color.toHex=function(r,o){return Color.parse(r,o).toHex()},Color.make=function(){var r=Object.create(Color.prototype);return r.constructor=Color.prototype,Color.apply(r,arguments),r},Color.parse=function(r){function o(r,o){return!(!r||!o)&&0===(r=String(r)).indexOf(o)}var t;if(null==r)return new Color(0,0,0,0);if(r instanceof Color)return r;if(color.namedColors[r])return Color.make.apply(null,color.namedColors[r]);if("#"===r[0])return new Color(r,0,0,0,{mode:HEX});if(o(r,"rgba"))return(t=r.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+|\d+.\d+)\s*\)$/i))?new Color(parseInt(t[1])/255,parseInt(t[2])/255,parseInt(t[3])/255,parseFloat(t[4])):(t=r.match(/^rgba\s*\(\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)\s*\)$/i))?new Color(parseFloat(t[1])/100,parseFloat(t[2])/100,parseFloat(t[3])/100,parseFloat(t[4])):new Color(0,0,0,0);if(o(r,"rgb"))return(t=r.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i))?new Color(parseInt(t[1])/255,parseInt(t[2])/255,parseInt(t[3])/255):(t=r.match(/^rgb\s*\(\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*\)$/i))?new Color(parseFloat(t[1])/100,parseFloat(t[2])/100,parseFloat(t[3])/100):new Color(0,0,0,0);if(o(r,"hsla"))return(t=r.match(/^hsla\s*\(\s*(\d+|\d+.\d+)\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)\s*\)$/i))?new Color(parseFloat(t[1])/360,parseFloat(t[2])/100,parseFloat(t[3])/100,parseFloat(t[4])):new Color(0,0,0,0);if(o(r,"hsl"))return(t=r.match(/^hsl\s*\(\s*(\d+|\d+.\d+)\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*\)$/i))?new Color(parseFloat(t[1])/360,parseFloat(t[2])/100,parseFloat(t[3])/100):new Color(0,0,0,0);if("none"===r||"null"===r||o(r,"url("))return new Color(0,0,0,0);throw new Error("Color "+r+"can not be parsed")},Color.gray=function(r,o,t){return t=Math.max(t,1),new Color(r/t,r/t,r/t,o/t)},Color.rgb=function(r,o,t,e,n){return n=Math.max(n,1),new Color(r/n,o/n,t/n,e/n)},Color.hsb=function(r,o,t,e,n){return n=Math.max(n,1),new Color(r/n,o/n,t/n,e/n,{mode:HSB})},Color.hsl=function(r,o,t,e,n){return n=Math.max(n,1),new Color(r/n,o/n,t/n,e/n,{mode:HSL})},module.exports=Color;

},{"../util/color":44,"../util/js":46,"../util/math":47}],34:[function(require,module,exports){
"use strict";var Path=require("../objects/path"),Rect=require("../objects/rect"),Color=require("../objects/color"),Group=function(t){t?t.shapes||t.commands?this.shapes=[t]:t&&(this.shapes=t):this.shapes=[]};Group.prototype.add=function(t){this.shapes.push(t)},Group.prototype.clone=function(){var t,e=[],s=this.shapes.length;for(e.length=s,t=0;t<s;t+=1)e[t]=this.shapes[t].clone();return new Group(e)},Group.prototype.colorize=function(t){var e=arguments;("object"!=typeof t||t instanceof Color)&&(t={},void 0!==e[0]&&(t.fill=e[0]),void 0!==e[1]&&(t.stroke=e[1]),void 0!==e[2]&&(t.strokeWidth=e[2]));var s=[];s.length=this.shapes.length;for(var r=0;r<this.shapes.length;r+=1)s[r]=this.shapes[r].colorize(t);return new Group(s)},Group.prototype.desaturate=function(t){var e=[];e.length=this.shapes.length;for(var s=0;s<this.shapes.length;s+=1)e[s]=this.shapes[s].desaturate(t);return new Group(e)},Group.prototype.invert=function(){var t=[];t.length=this.shapes.length;for(var e=0;e<this.shapes.length;e+=1)t[e]=this.shapes[e].invert();return new Group(t)},Group.prototype.bounds=function(){if(0===this.shapes.length)return new Rect(0,0,0,0);var t,e,s,r=this.shapes;for(t=0;t<r.length;t+=1)s=r[t],void 0===e&&(e=s.bounds()),(s.shapes&&0!==s.shapes.length||s.commands&&0!==s.commands.length)&&(e=e.unite(s.bounds()));return void 0!==e?e:new Rect(0,0,0,0)},Group.prototype.contains=function(t,e,s){void 0===s&&(s=100);var r,o=this.shapes;for(r=0;r<o.length;r+=1)if(o[r].contains(t,e,s))return!0;return!1},Group.prototype.length=function(t){void 0===t&&(t=10);for(var e=0,s=this.shapes,r=0;r<s.length;r+=1)e+=s[r].length(t);return e},Group.prototype.resampleByAmount=function(t,e){if(!e)return new Path.combine(this).resampleByAmount(t,e);var s=[];s.length=this.shapes.length;for(var r=0;r<this.shapes.length;r+=1)s[r]=this.shapes[r].resampleByAmount(t,e);return new Group(s)},Group.prototype.resampleByLength=function(t){var e=[];e.length=this.shapes.length;for(var s=0;s<this.shapes.length;s+=1)e[s]=this.shapes[s].resampleByLength(t);return new Group(e)},Group.prototype.toSVG=function(){var t=[];t.length=this.shapes.length;for(var e=0;e<this.shapes.length;e+=1)t[e]=this.shapes[e].toSVG();return"<g>"+t.join("")+"</g>"},Group.prototype.draw=function(t){var e,s=this.shapes,r=s.length;for(e=0;e<r;e+=1)s[e].draw(t)},module.exports=Group;

},{"../objects/color":33,"../objects/path":36,"../objects/rect":38}],35:[function(require,module,exports){
"use strict";var Vec3=require("../objects/vec3"),Matrix4=function(m){void 0!==m?this.m=m:((m=new Float32Array(16))[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,this.m=m)};Matrix4.IDENTITY=new Matrix4,Matrix4.perspective=function(m,t,i,s){var h=new Float32Array(Matrix4.IDENTITY.m),r=1/Math.tan(.5*m);return h[0]=r/t,h[1]=h[2]=h[3]=0,h[5]=r,h[4]=h[6]=h[7]=0,h[8]=h[9]=0,h[10]=-s/(i-s),h[11]=1,h[12]=h[13]=h[15]=0,h[14]=i*s/(i-s),new Matrix4(h)},Matrix4.lookAt=function(m,t,i){var s,h,r,a,e,n,o;return s=new Float32Array(16),h=t.subtract(m).normalize(),r=Vec3.cross(i,h).normalize(),a=Vec3.cross(h,r).normalize(),e=-Vec3.dot(r,m),n=-Vec3.dot(a,m),o=-Vec3.dot(h,m),s[0]=r.x,s[1]=a.x,s[2]=h.x,s[3]=0,s[4]=r.y,s[5]=a.y,s[6]=h.y,s[7]=0,s[8]=r.z,s[9]=a.z,s[10]=h.z,s[11]=0,s[12]=e,s[13]=n,s[14]=o,s[15]=1,new Matrix4(s)},Matrix4.prototype.invert=function(){var m,t,i,s,h,r,a,e,n,o,c,x,u,M,l,y,w,p,v,A,f,z,F,V,d,I,T,b,D,E,N,Y,j,k,q,g,B,C,G,H;return m=this.m[0],t=this.m[1],i=this.m[2],s=this.m[3],h=this.m[4],r=this.m[5],a=this.m[6],e=this.m[7],n=this.m[8],o=this.m[9],c=this.m[10],x=this.m[11],u=this.m[12],M=this.m[13],l=this.m[14],T=1/(m*(F=r*(w=c*(y=this.m[15])-x*l)-a*(p=o*y-x*M)+e*(v=o*l-c*M))+t*(V=-(h*w-a*(A=n*y-x*u)+e*(f=n*l-c*u)))+i*(d=h*p-r*A+e*(z=n*M-o*u))+s*(I=-(h*v-r*f+a*z))),b=a*y-e*l,D=r*y-e*M,E=r*l-a*M,N=h*y-e*u,Y=h*l-a*u,j=h*M-r*u,k=a*x-e*c,q=r*x-e*o,g=r*c-a*o,B=h*x-e*n,C=h*c-a*n,G=h*o-r*n,(H=new Float32Array(16))[0]=F*T,H[4]=V*T,H[8]=d*T,H[12]=I*T,H[1]=-(t*w-i*p+s*v)*T,H[5]=(m*w-i*A+s*f)*T,H[9]=-(m*p-t*A+s*z)*T,H[13]=(m*v-t*f+i*z)*T,H[2]=(t*b-i*D+s*E)*T,H[6]=-(m*b-i*N+s*Y)*T,H[10]=(m*D-t*N+s*j)*T,H[14]=-(m*E-t*Y+i*j)*T,H[3]=-(t*k-i*q+s*g)*T,H[7]=(m*k-i*B+s*C)*T,H[11]=-(m*q-t*B+s*G)*T,H[15]=(m*g-t*C+i*G)*T,new Matrix4(H)},Matrix4.prototype.multiply=function(m){var t=new Float32Array(16);return t[0]=this.m[0]*m.m[0]+this.m[1]*m.m[4]+this.m[2]*m.m[8]+this.m[3]*m.m[12],t[1]=this.m[0]*m.m[1]+this.m[1]*m.m[5]+this.m[2]*m.m[9]+this.m[3]*m.m[13],t[2]=this.m[0]*m.m[2]+this.m[1]*m.m[6]+this.m[2]*m.m[10]+this.m[3]*m.m[14],t[3]=this.m[0]*m.m[3]+this.m[1]*m.m[7]+this.m[2]*m.m[11]+this.m[3]*m.m[15],t[4]=this.m[4]*m.m[0]+this.m[5]*m.m[4]+this.m[6]*m.m[8]+this.m[7]*m.m[12],t[5]=this.m[4]*m.m[1]+this.m[5]*m.m[5]+this.m[6]*m.m[9]+this.m[7]*m.m[13],t[6]=this.m[4]*m.m[2]+this.m[5]*m.m[6]+this.m[6]*m.m[10]+this.m[7]*m.m[14],t[7]=this.m[4]*m.m[3]+this.m[5]*m.m[7]+this.m[6]*m.m[11]+this.m[7]*m.m[15],t[8]=this.m[8]*m.m[0]+this.m[9]*m.m[4]+this.m[10]*m.m[8]+this.m[11]*m.m[12],t[9]=this.m[8]*m.m[1]+this.m[9]*m.m[5]+this.m[10]*m.m[9]+this.m[11]*m.m[13],t[10]=this.m[8]*m.m[2]+this.m[9]*m.m[6]+this.m[10]*m.m[10]+this.m[11]*m.m[14],t[11]=this.m[8]*m.m[3]+this.m[9]*m.m[7]+this.m[10]*m.m[11]+this.m[11]*m.m[15],t[12]=this.m[12]*m.m[0]+this.m[13]*m.m[4]+this.m[14]*m.m[8]+this.m[15]*m.m[12],t[13]=this.m[12]*m.m[1]+this.m[13]*m.m[5]+this.m[14]*m.m[9]+this.m[15]*m.m[13],t[14]=this.m[12]*m.m[2]+this.m[13]*m.m[6]+this.m[14]*m.m[10]+this.m[15]*m.m[14],t[15]=this.m[12]*m.m[3]+this.m[13]*m.m[7]+this.m[14]*m.m[11]+this.m[15]*m.m[15],new Matrix4(t)},Matrix4.prototype.translate=function(m,t,i){var s=new Float32Array(this.m);return s[12]+=m,s[13]+=t,s[14]+=i,new Matrix4(s)},module.exports=Matrix4;

},{"../objects/vec3":42}],36:[function(require,module,exports){
"use strict";var flatten=require("lodash.flatten"),bezier=require("../util/bezier"),geo=require("../util/geo"),math=require("../util/math"),Color=require("../objects/color"),Rect=require("../objects/rect"),MOVETO=bezier.MOVETO,LINETO=bezier.LINETO,QUADTO=bezier.QUADTO,CURVETO=bezier.CURVETO,CLOSE=bezier.CLOSE,CLOSE_COMMAND=Object.freeze({type:CLOSE}),KAPPA=.5522847498307936;function _roundCoord(t,o=3){return t%1==0?t:t.toFixed(o)}function _cloneCommand(t){var o={type:t.type};return o.type!==CLOSE&&(o.x=t.x,o.y=t.y),o.type===QUADTO?(o.x1=t.x1,o.y1=t.y1):o.type===CURVETO&&(o.x1=t.x1,o.y1=t.y1,o.x2=t.x2,o.y2=t.y2),o}var Path=function(t,o,e,i){this.commands=void 0!==t?t:[],this.fill=void 0!==o?o:"black",this.stroke=void 0!==e?e:null,this.strokeWidth=void 0!==i?i:1};Path.prototype.clone=function(){var t,o=new Path,e=this.commands.length;for(o.commands.length=this.commands.length,t=0;t<e;t+=1)o.commands[t]=_cloneCommand(this.commands[t]);return o.fill=Color.clone(this.fill),o.stroke=Color.clone(this.stroke),o.strokeWidth=this.strokeWidth,o},Path.prototype.extend=function(t){var o=t.commands||t;Array.prototype.push.apply(this.commands,o)},Path.prototype.moveTo=function(t,o){this.commands.push({type:MOVETO,x:t,y:o})},Path.prototype.lineTo=function(t,o){this.commands.push({type:LINETO,x:t,y:o})},Path.prototype.curveTo=function(t,o,e,i,s,r){this.commands.push({type:CURVETO,x1:t,y1:o,x2:e,y2:i,x:s,y:r})},Path.prototype.quadTo=function(t,o,e,i){var s=this.commands[this.commands.length-1].x,r=this.commands[this.commands.length-1].y,n=s+2/3*(t-s),h=r+2/3*(o-r),a=n+1/3*(e-s),l=h+1/3*(i-r);this.curveTo(n,h,a,l,e,i)},Path.prototype.closePath=Path.prototype.close=function(){this.commands.push(CLOSE_COMMAND)},Path.prototype.isClosed=function(){return 0!==this.commands.length&&this.commands[this.commands.length-1].type===CLOSE},Path.prototype.addRect=function(t,o,e,i){this.moveTo(t,o),this.lineTo(t+e,o),this.lineTo(t+e,o+i),this.lineTo(t,o+i),this.close()},Path.prototype.addRoundedRect=function(t,o,e,i,s,r){var n=s,h=r,a=t,l=t+e,c=o,p=o+i;n=Math.min(n,.5*e),h=Math.min(h,.5*i),this.moveTo(a+n,c),n<.5*e&&this.lineTo(l-s,c),this.curveTo(l-n*(1-.552),c,l,c+h*(1-.552),l,c+h),h<.5*i&&this.lineTo(l,p-h),this.curveTo(l,p-h*(1-.552),l-n*(1-.552),p,l-n,p),n<.5*e&&this.lineTo(a+n,p),this.curveTo(a+n*(1-.552),p,a,p-h*(1-.552),a,p-h),h<.5*i&&this.lineTo(a,c+h),this.curveTo(a,c+h*(1-.552),a+n*(1-.552),c,a+n,c),this.close()},Path.prototype.addEllipse=function(t,o,e,i){var s=.5*KAPPA*e,r=.5*KAPPA*i,n=t+.5*e,h=o+.5*i,a=t+e,l=o+i;this.moveTo(t,h),this.curveTo(t,h-r,n-s,o,n,o),this.curveTo(n+s,o,a,h-r,a,h),this.curveTo(a,h+r,n+s,l,n,l),this.curveTo(n-s,l,t,h+r,t,h),this.close()},Path.prototype.addLine=function(t,o,e,i){this.moveTo(t,o),this.lineTo(e,i)},Path.prototype.addQuad=function(t,o,e,i,s,r,n,h){this.moveTo(t,o),this.lineTo(e,i),this.lineTo(s,r),this.lineTo(n,h),this.close()},Path.prototype.addArc=function(t,o,e,i,s,r,n){var h,a,l,c,p,d,u,m,y,f,v,T,C;for(n=n||"pie",h=e/2,a=i/2,l=math.radians(s),(c=r)>=360||c<=-360?(p=4,d=Math.PI/2,u=.5522847498307933,c<0&&(d=-d,u=-u)):(p=Math.ceil(Math.abs(c)/90),d=math.radians(c/p),0===(u=4/3*Math.sin(d/2)/(1+Math.cos(d/2)))&&(p=0)),"open"===n?m=0:"chord"===n?m=1:"pie"===n&&(m=2),(h<0||a<0)&&(p=m=-1),y=0;y<=p+m;)f=l,0===y?this.moveTo(t+Math.cos(f)*h,o+Math.sin(f)*a):y>p?y===p+m?this.close():this.lineTo(t,o):(f+=d*(y-1),v=Math.cos(f),T=Math.sin(f),(C=[]).push(t+(v-u*T)*h),C.push(o+(T+u*v)*a),f+=d,v=Math.cos(f),T=Math.sin(f),C.push(t+(v+u*T)*h),C.push(o+(T-u*v)*a),C.push(t+v*h),C.push(o+T*a),Path.prototype.curveTo.apply(this,C)),y+=1},Path.prototype.colorize=function(t){var o=arguments;("object"!=typeof t||t instanceof Color)&&(t={},void 0!==o[0]&&(t.fill=o[0]),void 0!==o[1]&&(t.stroke=o[1]),void 0!==o[2]&&(t.strokeWidth=o[2]));var e=this.clone();return t.fill&&(e.fill=Color.clone(t.fill)),t.stroke&&(e.stroke=Color.clone(t.stroke)),(t.strokeWidth||0===t.strokeWidth)&&(e.strokeWidth=t.strokeWidth),e},Path.prototype.desaturate=function(t){var o=this.clone(),e=o.fill,i=o.stroke;return e instanceof Color||(e=Color.parse(e)),i instanceof Color||(i=Color.parse(i)),o.fill=e.desaturate(t),o.stroke=i.desaturate(t),o},Path.prototype.invert=function(){var t=this.clone(),o=t.fill,e=t.stroke;return o instanceof Color||(o=Color.parse(o)),e instanceof Color||(e=Color.parse(e)),t.fill=o.invert(),t.stroke=e.invert(),t},Path.prototype.contours=function(){for(var t,o=[],e=[],i=0;i<this.commands.length;i+=1)(t=this.commands[i]).type===MOVETO?(0!==e.length&&o.push(e),e=[t]):e.push(t);return 0!==e.length&&o.push(e),o},Path.prototype.bounds=function(){if(this._bounds)return this._bounds;if(0===this.commands.length)return new Rect(0,0,0,0);for(var t,o,e,i,s,r,n=Number.MAX_VALUE,h=Number.MAX_VALUE,a=-Number.MAX_VALUE,l=-Number.MAX_VALUE,c=0;c<this.commands.length;c+=1)if((r=this.commands[c]).type===MOVETO||r.type===LINETO)(t=r.x)<n&&(n=t),(o=r.y)<h&&(h=o),t>a&&(a=t),o>l&&(l=o),e=r;else if(r.type===CURVETO){var p=bezier.extrema(e.x,e.y,r.x1,r.y1,r.x2,r.y2,r.x,r.y);i=p.x+p.width,s=p.y+p.height,p.x<n&&(n=p.x),i>a&&(a=i),p.y<h&&(h=p.y),s>l&&(l=s),e=r}return new Rect(n,h,a-n,l-h)},Path.prototype.point=function(t,o){return void 0===o&&(o=bezier.segmentLengths(this.commands,!0,10)),bezier.point(this,t,o)},Path.prototype.points=function(t,o){var e,i=o&&void 0!==o.start?o.start:0,s=o&&void 0!==o.end?o.end:1;if(0===this.commands.length)return[];t=Math.round(t),e=o&&o.closed?t>1?(s-i)/t:s-i:t>1?(s-i)/(t-1):s-i;for(var r=[],n=bezier.segmentLengths(this.commands,!0,10),h=0;h<t;h+=1)r.push(this.point(i+e*h,n));return r},Path.prototype.length=function(t){return void 0===t&&(t=20),bezier.length(this,t)},Path.prototype.contains=function(t,o,e){var i=this.points(void 0!==e?e:100);return geo.pointInPolygon(i,t,o)},Path.prototype.resampleByAmount=function(t,o){for(var e=o?this.contours():[this.commands],i=new Path([],this.fill,this.stroke,this.strokeWidth),s=0;s<e.length;s+=1){var r=new Path(e[s]),n={};r.isClosed()&&(n.closed=!0);for(var h=r.points(t,n),a=0;a<h.length;a+=1)0===a?i.moveTo(h[a].x,h[a].y):i.lineTo(h[a].x,h[a].y);r.isClosed()&&i.close()}return i},Path.prototype.resampleByLength=function(t,o){var e=(o=o||{}).force||!1,i=this.contours(),s=[];e||(t=Math.max(t,1));for(var r=0;r<i.length;r+=1){var n=new Path(i[r]),h=n.length(),a=Math.ceil(h/t);s=s.concat(n.resampleByAmount(a).commands)}return new Path(s,this.fill,this.stroke,this.strokeWidth)},Path.prototype.toPathData=function(t=3){var o,e,i,s,r,n,h,a,l;for(e="",o=0;o<this.commands.length;o+=1)void 0!==(i=this.commands[o]).x&&(s=_roundCoord(math.clamp(i.x,-9999,9999),t),r=_roundCoord(math.clamp(i.y,-9999,9999),t)),void 0!==i.x1&&(n=_roundCoord(math.clamp(i.x1,-9999,9999),t),h=_roundCoord(math.clamp(i.y1,-9999,9999),t)),void 0!==i.x2&&(a=_roundCoord(math.clamp(i.x2,-9999,9999),t),l=_roundCoord(math.clamp(i.y2,-9999,9999),t)),i.type===MOVETO?isNaN(s)||isNaN(r)||(e+="M"+s+" "+r):i.type===LINETO?isNaN(s)||isNaN(r)||(e+="L"+s+" "+r):i.type===QUADTO?isNaN(s)||isNaN(r)||isNaN(n)||isNaN(h)||(e+="Q"+n+" "+h+" "+s+" "+r):i.type===CURVETO?isNaN(s)||isNaN(r)||isNaN(n)||isNaN(h)||isNaN(a)||isNaN(l)||(e+="C"+n+" "+h+" "+a+" "+l+" "+s+" "+r):i.type===CLOSE&&(e+="Z");return e},Path.prototype.toSVG=function(){var t='<path d="';t+=this.toPathData(),t+='"';var o,e,i,s,r="";return this.fill&&((o=Color.parse(this.fill)).a<1&&(e=o.a),o=Color.toHex(o).substring(0,7)),"black"!==o&&"#000000"!==o&&(r+=null==o?"fill:none;":"fill:"+o+";"),void 0!==e&&(r+="fill-opacity:"+e+";"),this.stroke&&((i=Color.parse(this.stroke)).a<1&&(s=i.a),i=Color.toHex(i).substring(0,7)),i&&(r+="stroke:"+i+";",r+="stroke-width:"+this.strokeWidth+";"),void 0!==s&&(r+="stroke-opacity:"+s+";"),r&&(t+=' style="'+r+'"'),t+="/>"},Path.prototype.draw=function(t){var o,e,i;for(t.beginPath(),o=this.commands.length,e=0;e<o;e+=1)(i=this.commands[e]).type===MOVETO?t.moveTo(i.x,i.y):i.type===LINETO?t.lineTo(i.x,i.y):i.type===QUADTO?t.quadraticCurveTo(i.x1,i.y1,i.x,i.y):i.type===CURVETO?t.bezierCurveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):i.type===CLOSE&&t.closePath();null!==this.fill&&void 0!==this.fill&&(t.fillStyle=Color.toCSS(this.fill),t.fill()),null!==this.stroke&&void 0!==this.stroke&&null!==this.strokeWidth&&this.strokeWidth>0&&(t.strokeStyle=Color.toCSS(this.stroke),t.lineWidth=this.strokeWidth,t.stroke())},Path.combine=function(){for(var t,o=Array.apply(null,arguments),e=flatten(o),i=[],s=0;s<e.length;s+=1)(t=e[s]).commands?i=i.concat(t.commands):t.shapes&&(i=i.concat(Path.combine(t.shapes).commands));return new Path(i)},module.exports=Path;

},{"../objects/color":33,"../objects/rect":38,"../util/bezier":43,"../util/geo":45,"../util/math":47,"lodash.flatten":3}],37:[function(require,module,exports){
"use strict";var Point=function(t,n){this.x=void 0!==t?t:0,this.y=void 0!==n?n:0};Object.defineProperty(Point.prototype,"xy",{get:function(){return[this.x,this.y]}}),Point.ZERO=new Point(0,0),Point.read=function(t,n){if(2===arguments.length)return new Point(t,n);var i=t;return i instanceof Point?i:"number"==typeof i?new Point(i,i):Array.isArray(i)?0===i.length?Point.ZERO:(t=i[0],n=i.length>1?i[1]:t,new Point(t,n)):void 0!==i.x&&void 0!==i.y?new Point(i.x,i.y):Point.ZERO},Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.add=function(t){return new Point(this.x+t.x,this.y+t.y)},Point.prototype.subtract=Point.prototype.sub=function(t){return new Point(this.x-t.x,this.y-t.y)},Point.prototype.divide=function(t){return new Point(this.x/t,this.y/t)},Point.prototype.multiply=function(t){return new Point(this.x*t,this.y*t)},Point.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Point.prototype.magnitudeSquared=function(){return this.x*this.x+this.y*this.y},Point.prototype.heading=function(){return Math.atan2(this.y,this.x)},Point.prototype.distanceTo=function(t){var n=this.x-t.x,i=this.y-t.y;return Math.sqrt(n*n+i*i)},Point.prototype.normalize=function(){var t=this.magnitude();return 0!==t?this.divide(t):Point.ZERO},Point.prototype.limit=function(t){return this.magnitudeSquared()>t*t?this.normalize().multiply(t):this},Point.prototype.translate=function(t,n){return new Point(this.x+t,this.y+n)},Point.prototype.scale=function(t,n){return n=void 0!==n?n:t,new Point(this.x*t,this.y*n)},Point.prototype.toString=function(){return"["+this.x+", "+this.y+"]"},module.exports=Point;

},{}],38:[function(require,module,exports){
"use strict";var Point=require("../objects/point"),Rect=function(t,i,h,e){this.x=void 0!==t?t:0,this.y=void 0!==i?i:0,this.width=void 0!==h?h:0,this.height=void 0!==e?e:0};Object.defineProperty(Rect.prototype,"xywh",{get:function(){return[this.x,this.y,this.width,this.height]}}),Rect.prototype.normalize=function(){var t=this.x,i=this.y,h=this.width,e=this.height;return h<0&&(t+=h,h=-h),e<0&&(i+=e,e=-e),new Rect(t,i,h,e)},Rect.prototype.containsPoint=function(t,i){return 1===arguments.length&&(i=t.y,t=t.x),t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height},Rect.prototype.containsRect=function(t){return t.x>=this.x&&t.x+t.width<=this.x+this.width&&t.y>=this.y&&t.y+t.height<=this.y+this.height},Rect.prototype.grow=function(t,i){var h=this.x-t,e=this.y-i,s=this.width+2*t,n=this.height+2*i;return new Rect(h,e,s,n)},Rect.prototype.unite=function(t){var i=Math.min(this.x,t.x),h=Math.min(this.y,t.y),e=Math.max(this.x+this.width,t.x+t.width)-i,s=Math.max(this.y+this.height,t.y+t.height)-h;return new Rect(i,h,e,s)},Rect.prototype.addPoint=function(t,i){var h=this.x,e=this.y,s=this.width,n=this.height;return t<this.x?(h=t,s+=this.x-t):t>this.x+this.width&&(s+=t-(this.x+this.width)),i<this.y?(e=i,n+=this.y-i):i>this.y+this.height&&(n+=i-(this.y+this.height)),new Rect(h,e,s,n)},Rect.prototype.centerPoint=function(){return new Point(this.x+this.width/2,this.y+this.height/2)},module.exports=Rect;

},{"../objects/point":37}],39:[function(require,module,exports){
"use strict";var Color=require("../objects/color"),Rect=require("../objects/rect"),Transform=require("../objects/transform"),_dummyContext=null,GText=function(t){var e,i=Array.prototype.slice.call(arguments,1),n=arguments[1],o=arguments[2],s=arguments[arguments.length-1];this.text=String(t),"number"==typeof n?(this._x=n,this._y=o,i=i.slice(2)):Array.isArray(n)?(this._x=n[0],this._y=n[1],i=i.slice(1)):"object"==typeof n?(this._x=void 0!==n.x?n.x:0,this._y=void 0!==n.y?n.y:0,i=i.slice(1)):(this._x=0,this._y=0),"object"==typeof s?(e=s,n!==s&&(i=i.slice(0,i.length-1))):e={},i.length?this.fontFamily=i.shift():this.fontFamily=e.fontFamily||e.fontName||e.font||"sans-serif",i.length?this.fontSize=i.shift():this.fontSize=e.fontSize||24,i.length?this.textAlign=i.shift():this.textAlign=e.align||e.textAlign||"left",i.length?this.fill=i.shift():this.fill=e.fill||"black",this.transform=new Transform};GText.prototype.clone=function(){var t=new GText;return t.text=this.text,t._x=this._x,t._y=this._y,t.fontFamily=this.fontFamily,t.fontSize=this.fontSize,t.textAlign=this.textAlign,t.fill=Color.clone(this.fill),t.transform=this.transform,t},GText._getDummyContext=function(){return _dummyContext||(_dummyContext="undefined"!=typeof document?document.createElement("canvas").getContext("2d"):{font:"10px sans-serif",measureText:function(t){var e=parseFloat(this.font);return{width:t.length*e*.6}}}),_dummyContext},GText.prototype._getFont=function(){return this.fontSize+"px "+this.fontFamily},GText.prototype.colorize=function(t){var e=this.clone();return e.fill=Color.clone(t),e},GText.prototype.draw=function(t){t.save(),t.font=this._getFont(),t.textAlign=this.textAlign;var e=this.transform.m;t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.fillStyle=Color.toCSS(this.fill),t.fillText(this.text,this._x,this._y),t.restore()},GText.prototype.bounds=function(){var t,e=GText._getDummyContext(),i=this._x;return e.font=this._getFont(),t=e.measureText(this.text),"center"===this.textAlign?i=this._x-t.width/2:"right"===this.textAlign&&(i=this._x-t.width),new Rect(i,this._y-this.fontSize,t.width,1.2*this.fontSize)},GText.prototype.toSVG=function(){var t,e="<text";if(e+=' x="'+this._x+'"',e+=' y="'+this._y+'"',e+=' font-family="'+this.fontFamily+'"',e+=' font-size="'+this.fontSize+'"',"left"===this.textAlign?t="start":"center"===this.textAlign?t="middle":"right"===this.textAlign&&(t="end"),e+=' text-anchor="'+t+'"',"black"!==this.fill){var i=Color.parse(this.fill);e+=' fill="'+i.toHex(!0)+'"',i.a<1&&(e+=' opacity="'+i.a+'"')}return this.transform.isIdentity()||(e+=' transform="matrix('+this.transform.m.join(",")+')"'),e+=">",e+=this.text,e+="</text>"},module.exports=GText;

},{"../objects/color":33,"../objects/rect":38,"../objects/transform":40}],40:[function(require,module,exports){
"use strict";var bezier=require("../util/bezier"),math=require("../util/math"),Group=require("../objects/group"),Path=require("../objects/path"),Point=require("../objects/point"),MOVETO=bezier.MOVETO,LINETO=bezier.LINETO,QUADTO=bezier.QUADTO,CURVETO=bezier.CURVETO,CLOSE=bezier.CLOSE,Transform=function(r){this.m=void 0!==r?r:[1,0,0,1,0,0]};Transform.IDENTITY=new Transform,Transform.identity=function(){return new Transform},Transform._mmult=function(r,t){return void 0!==r.m&&(r=r.m),void 0!==t.m&&(t=t.m),new Transform([r[0]*t[0]+r[1]*t[2],r[0]*t[1]+r[1]*t[3],r[2]*t[0]+r[3]*t[2],r[2]*t[1]+r[3]*t[3],r[4]*t[0]+r[5]*t[2]+t[4],r[4]*t[1]+r[5]*t[3]+t[5]])},Transform.prototype.isIdentity=function(){var r=this.m;return 1===r[0]&&0===r[1]&&0===r[2]&&1===r[3]&&0===r[4]&&0===r[5]},Transform.prototype.prepend=function(r){return Transform._mmult(this.m,r.m)},Transform.prototype.append=function(r){return Transform._mmult(r.m,this.m)},Transform.prototype.inverse=function(){var r=this.m,t=r[0]*r[3]-r[1]*r[2];return new Transform([r[3]/t,-r[1]/t,-r[2]/t,r[0]/t,(r[2]*r[5]-r[3]*r[4])/t,-(r[0]*r[5]-r[1]*r[4])/t])},Transform.prototype.scale=function(r,t){return void 0===t&&(t=r),Transform._mmult([r,0,0,t,0,0],this.m)},Transform.prototype.translate=function(r,t){return Transform._mmult([1,0,0,1,r,t],this.m)},Transform.prototype.rotate=function(r){var t=Math.cos(math.radians(r)),n=Math.sin(math.radians(r));return Transform._mmult([t,n,-n,t,0,0],this.m)},Transform.prototype.skew=function(r,t){var n=Math.PI*r/180,o=Math.PI*t/180;return Transform._mmult([1,Math.tan(o),-Math.tan(n),1,0,0],this.m)},Transform.prototype.transformPoint=function(r){var t=r.x,n=r.y,o=this.m;return new Point(t*o[0]+n*o[2]+o[4],t*o[1]+n*o[3]+o[5])},Transform.prototype.transformPoints=function(r){for(var t=[],n=0;n<r.length;n+=1)t.push(this.transformPoint(r[n]));return t},Transform.prototype.transformPath=function(r){var t=this.m,n=[];n.length=r.commands.length;for(var o=0,e=r.commands.length;o<e;o++){var a=r.commands[o];switch(a.type){case MOVETO:case LINETO:n[o]={type:a.type,x:a.x*t[0]+a.y*t[2]+t[4],y:a.x*t[1]+a.y*t[3]+t[5]};break;case QUADTO:n[o]={type:QUADTO,x:a.x*t[0]+a.y*t[2]+t[4],y:a.x*t[1]+a.y*t[3]+t[5],x1:a.x1*t[0]+a.y1*t[2]+t[4],y1:a.x1*t[1]+a.y1*t[3]+t[5]};break;case CURVETO:n[o]={type:CURVETO,x:a.x*t[0]+a.y*t[2]+t[4],y:a.x*t[1]+a.y*t[3]+t[5],x1:a.x1*t[0]+a.y1*t[2]+t[4],y1:a.x1*t[1]+a.y1*t[3]+t[5],x2:a.x2*t[0]+a.y2*t[2]+t[4],y2:a.x2*t[1]+a.y2*t[3]+t[5]};break;case CLOSE:n[o]={type:CLOSE};break;default:throw new Error("Unknown command type "+a)}}return new Path(n,r.fill,r.stroke,r.strokeWidth)},Transform.prototype.transformText=function(r){var t=r.clone();return t.transform=this.append(t.transform),t},Transform.prototype.transformGroup=function(r){for(var t=[],n=0;n<r.shapes.length;n+=1)t.push(this.transformShape(r.shapes[n]));return new Group(t)},Transform.prototype.transformShape=function(r){var t;if(r.shapes)t=this.transformGroup;else if(r.commands)t=this.transformPath;else if(r.text)t=this.transformText;else if(void 0!==r.x&&void 0!==r.y)t=this.transformPoint;else{if(void 0!==r._transform)return r._transform(this.m);if(!(Array.isArray(r)&&r.length>0))throw new Error("Don't know how to transform "+r);if(void 0===r[0].x||void 0===r[0].y){for(var n=[],o=0;o<r.length;o+=1)n.push(this.transformShape(r[o]));return n}t=this.transformPoints}return t.call(this,r)},module.exports=Transform;

},{"../objects/group":34,"../objects/path":36,"../objects/point":37,"../util/bezier":43,"../util/math":47}],41:[function(require,module,exports){
"use strict";var Point=require("../objects/point"),Transform=require("../objects/transform"),Transformable={translate:function(r){return r||(r=Point.ZERO),(new Transform).translate(r.x,r.y).transformShape(this)},scale:function(r,t){var a,n;t||(t=Point.ZERO),"number"==typeof r?(a=r,n=r):(a=r.x,n=r.y);var e=new Transform;return(e=(e=(e=e.translate(t.x,t.y)).scale(a,n)).translate(-t.x,-t.y)).transformShape(this)},rotate:function(r,t){t||(t=Point.ZERO);var a=new Transform;return(a=(a=(a=a.translate(t.x,t.y)).rotate(r)).translate(-t.x,-t.y)).transformShape(this)},skew:function(r,t){t||(t=Point.ZERO);var a=new Transform;return(a=(a=(a=a.translate(t.x,t.y)).skew(r.x,r.y)).translate(-t.x,-t.y)).transformShape(this)}};module.exports=Transformable;

},{"../objects/point":37,"../objects/transform":40}],42:[function(require,module,exports){
"use strict";var Vec3=function(t,i,e){this.x=void 0===t?0:t,this.y=void 0===i?0:i,this.z=void 0===e?0:e};Vec3.ZERO=new Vec3(0,0,0),Vec3.up=function(){return new Vec3(0,1,0)},Vec3.dot=function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z},Vec3.cross=function(t,i){return new Vec3(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x)},Vec3.prototype.toString=function(){return"["+this.x+", "+this.y+", "+this.z+"]"},Vec3.prototype.toArray=function(){var t=[];return t.push(this.x),t.push(this.y),t.push(this.z),t},Vec3.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Vec3.prototype.normalize=function(){var t,i;return 0===(t=this.getLength())?this:(i=1/t,new Vec3(this.x*i,this.y*i,this.z*i))},Vec3.prototype.add=function(t){return new Vec3(this.x+t.x,this.y+t.y,this.z+t.z)},Vec3.prototype.subtract=function(t){return new Vec3(this.x-t.x,this.y-t.y,this.z-t.z)},Vec3.prototype.transform=function(t){var i,e,s,h,n;return n=t,i=this.x*n.m[0]+this.y*n.m[4]+this.z*n.m[8]+n.m[12],e=this.x*n.m[1]+this.y*n.m[5]+this.z*n.m[9]+n.m[13],s=this.x*n.m[2]+this.y*n.m[6]+this.z*n.m[10]+n.m[14],h=this.x*n.m[3]+this.y*n.m[7]+this.z*n.m[11]+n.m[15],new Vec3(i/h,e/h,s/h)},module.exports=Vec3;

},{}],43:[function(require,module,exports){
"use strict";var math=require("../util/math"),Point=require("../objects/point"),Rect=require("../objects/rect"),bezier={},MOVETO=bezier.MOVETO="M",LINETO=bezier.LINETO="L";bezier.QUADTO="Q";var CURVETO=bezier.CURVETO="C",CLOSE=bezier.CLOSE="Z";function fuzzyCompare(e,t){return Math.abs(e-t)<=1e-12*Math.min(Math.abs(e),Math.abs(t))}function coefficients(e){var t,r,n,i;return i=(n=e*e)*e,[(r=(t=1-e)*t)*t,r*=3*e,n*=3*t,i]}function pointAt(e,t,r,n,i,o,a,u,h){var s,y,c,z,b;return{x:(s=(b=coefficients(h))[0])*e+(y=b[1])*r+(c=b[2])*i+(z=b[3])*a,y:s*t+y*n+c*o+z*u}}bezier.linePoint=function(e,t,r,n,i){return{type:LINETO,x:t+e*(n-t),y:r+e*(i-r)}},bezier.lineLength=function(e,t,r,n){var i=Math.pow(Math.abs(e-r),2),o=Math.pow(Math.abs(t-n),2);return Math.sqrt(i+o)},bezier.curvePoint=function(e,t,r,n,i,o,a,u,h){var s=1-e,y=n*s+o*e,c=i*s+a*e,z=(t*s+n*e)*s+y*e,b=(r*s+i*e)*s+c*e,m=y*s+(o*s+u*e)*e,f=c*s+(a*s+h*e)*e;return{type:CURVETO,x1:z,y1:b,x2:m,y2:f,x:z*s+m*e,y:b*s+f*e}},bezier.curveLength=function(e,t,r,n,i,o,a,u,h){void 0===h&&(h=20);var s,y,c,z=0,b=e,m=t;for(s=0;s<h;s+=1)y=(s+1)/h,c=bezier.curvePoint(y,e,t,r,n,i,o,a,u),z+=Math.sqrt(Math.pow(Math.abs(b-c.x),2)+Math.pow(Math.abs(m-c.y),2)),b=c.x,m=c.y;return z},bezier.segmentLengths=function(e,t,r){var n,i,o,a,u,h,s,y,c,z;for(t=void 0!==t&&t,void 0===r&&(r=20),c=[],n=0;n<e.length;n+=1)o=(i=e[n]).type,0===n?(a=i.x,u=i.y):o===MOVETO?(a=i.x,u=i.y,c.push(0)):o===CLOSE?c.push(bezier.lineLength(h,s,a,u)):o===LINETO?c.push(bezier.lineLength(h,s,i.x,i.y)):o===CURVETO&&c.push(bezier.curveLength(h,s,i.x1,i.y1,i.x2,i.y2,i.x,i.y,r)),o!==CLOSE&&(h=i.x,s=i.y);if(!0===t){if(y=math.sum(c),(z=[]).length=c.length,y>0)for(n=0;n<c.length;n+=1)z[n]=c[n]/y;else for(n=0;n<c.length;n+=1)z[n]=0;return z}return c},bezier.length=function(e,t){return t=t||20,math.sum(bezier.segmentLengths(e.commands,!1,t))},bezier._locate=function(e,t,r){var n,i,o;for(void 0===r&&(r=bezier.segmentLengths(e.commands,!0)),n=0;n<e.commands.length&&(i=e.commands[n],0!==n&&i.type!==MOVETO||(o=new Point(i.x,i.y)),!(t<=r[n]||n===r.length-1));n+=1)t-=r[n];return 0!==r[n]&&(t/=r[n]),n===r.length-1&&0===r[n]&&(n-=1),[n,t,o]},bezier.point=function(e,t,r){var n,i,o,a,u,h;return i=(n=bezier._locate(e,t,r))[0],t=n[1],o=n[2],a=e.commands[i].x,u=e.commands[i].y,(h=e.commands[i+1]).type===LINETO||h.type===CLOSE?h=h.type===CLOSE?bezier.linePoint(t,a,u,o.x,o.y):bezier.linePoint(t,a,u,h.x,h.y):h.type===CURVETO&&(h=bezier.curvePoint(t,a,u,h.x1,h.y1,h.x2,h.y2,h.x,h.y)),h},bezier.extrema=function(e,t,r,n,i,o,a,u){var h,s,y,c,z,b,m,f,x,p,O,v,M,g;function l(z){if(z>=0&&z<=1){var b=pointAt(e,t,r,n,i,o,a,u,z);b.x<h?h=b.x:b.x>s&&(s=b.x),b.y<y?y=b.y:b.y>c&&(c=b.y)}}return e<a?(h=e,s=a):(h=a,s=e),t<u?(y=t,c=u):(y=u,c=t),b=6*(e-2*r+i),m=3*(-e+r),fuzzyCompare((z=3*(3*r-e-3*i+a))+1,1)?fuzzyCompare(b+1,1)||l(-m/b):(M=b*b-4*z*m)>=0&&(l((-b+(O=Math.sqrt(M)))*(v=1/(2*z))),l((-b-O)*v)),x=6*(t-2*n+o),p=3*(-t+n),fuzzyCompare((f=3*(3*n-t-3*o+u))+1,1)?fuzzyCompare(x+1,1)||l(-p/x):(g=x*x-4*f*p)>0&&(l((-x+(O=Math.sqrt(g)))*(v=1/(2*f))),l((-x-O)*v)),new Rect(h,y,s-h,c-y)},module.exports=bezier;

},{"../objects/point":37,"../objects/rect":38,"../util/math":47}],44:[function(require,module,exports){
"use strict";var color={};function toHex(e){var r;return 0===e?"00":((r=e.toString(16).toUpperCase()).length<2&&(r="0"+r),r)}color.namedColors={lightpink:[1,.71,.76],pink:[1,.75,.8],crimson:[.86,.08,.24],lavenderblush:[1,.94,.96],palevioletred:[.86,.44,.58],hotpink:[1,.41,.71],deeppink:[1,.08,.58],mediumvioletred:[.78,.08,.52],orchid:[.85,.44,.84],thistle:[.85,.75,.85],plum:[.87,.63,.87],violet:[.93,.51,.93],fuchsia:[1,0,1],darkmagenta:[.55,0,.55],purple:[.5,0,.5],mediumorchid:[.73,.33,.83],darkviolet:[.58,0,.83],darkorchid:[.6,.2,.8],indigo:[.29,0,.51],blueviolet:[.54,.17,.89],mediumpurple:[.58,.44,.86],mediumslateblue:[.48,.41,.93],slateblue:[.42,.35,.8],darkslateblue:[.28,.24,.55],ghostwhite:[.97,.97,1],lavender:[.9,.9,.98],blue:[0,0,1],mediumblue:[0,0,.8],darkblue:[0,0,.55],navy:[0,0,.5],midnightblue:[.1,.1,.44],royalblue:[.25,.41,.88],cornflowerblue:[.39,.58,.93],lightsteelblue:[.69,.77,.87],lightslategray:[.47,.53,.6],slategray:[.44,.5,.56],dodgerblue:[.12,.56,1],aliceblue:[.94,.97,1],steelblue:[.27,.51,.71],lightskyblue:[.53,.81,.98],skyblue:[.53,.81,.92],deepskyblue:[0,.75,1],lightblue:[.68,.85,.9],powderblue:[.69,.88,.9],cadetblue:[.37,.62,.63],darkturquoise:[0,.81,.82],azure:[.94,1,1],lightcyan:[.88,1,1],paleturquoise:[.69,.93,.93],aqua:[0,1,1],darkcyan:[0,.55,.55],teal:[0,.5,.5],darkslategray:[.18,.31,.31],mediumturquoise:[.28,.82,.8],lightseagreen:[.13,.7,.67],turquoise:[.25,.88,.82],aquamarine:[.5,1,.83],mediumaquamarine:[.4,.8,.67],mediumspringgreen:[0,.98,.6],mintcream:[.96,1,.98],springgreen:[0,1,.5],mediumseagreen:[.24,.7,.44],seagreen:[.18,.55,.34],honeydew:[.94,1,.94],darkseagreen:[.56,.74,.56],palegreen:[.6,.98,.6],lightgreen:[.56,.93,.56],limegreen:[.2,.8,.2],lime:[0,1,0],forestgreen:[.13,.55,.13],green:[0,.5,0],darkgreen:[0,.39,0],lawngreen:[.49,.99,0],chartreuse:[.5,1,0],greenyellow:[.68,1,.18],darkolivegreen:[.33,.42,.18],yellowgreen:[.6,.8,.2],olivedrab:[.42,.56,.14],ivory:[1,1,.94],beige:[.96,.96,.86],lightyellow:[1,1,.88],lightgoldenrodyellow:[.98,.98,.82],yellow:[1,1,0],olive:[.5,.5,0],darkkhaki:[.74,.72,.42],palegoldenrod:[.93,.91,.67],lemonchiffon:[1,.98,.8],khaki:[.94,.9,.55],gold:[1,.84,0],cornsilk:[1,.97,.86],goldenrod:[.85,.65,.13],darkgoldenrod:[.72,.53,.04],floralwhite:[1,.98,.94],oldlace:[.99,.96,.9],wheat:[.96,.87,.07],orange:[1,.65,0],moccasin:[1,.89,.71],papayawhip:[1,.94,.84],blanchedalmond:[1,.92,.8],navajowhite:[1,.87,.68],antiquewhite:[.98,.92,.84],tan:[.82,.71,.55],burlywood:[.87,.72,.53],darkorange:[1,.55,0],bisque:[1,.89,.77],linen:[.98,.94,.9],peru:[.8,.52,.25],peachpuff:[1,.85,.73],sandybrown:[.96,.64,.38],chocolate:[.82,.41,.12],saddlebrown:[.55,.27,.07],seashell:[1,.96,.93],sienna:[.63,.32,.18],lightsalmon:[1,.63,.48],coral:[1,.5,.31],orangered:[1,.27,0],darksalmon:[.91,.59,.48],tomato:[1,.39,.28],salmon:[.98,.5,.45],mistyrose:[1,.89,.88],lightcoral:[.94,.5,.5],snow:[1,.98,.98],rosybrown:[.74,.56,.56],indianred:[.8,.36,.36],red:[1,0,0],brown:[.65,.16,.16],firebrick:[.7,.13,.13],darkred:[.55,0,0],maroon:[.5,0,0],white:[1,1,1],whitesmoke:[.96,.96,.96],gainsboro:[.86,.86,.86],lightgrey:[.83,.83,.83],silver:[.75,.75,.75],darkgray:[.66,.66,.66],gray:[.5,.5,.5],grey:[.5,.5,.5],dimgray:[.41,.41,.41],dimgrey:[.41,.41,.41],black:[0,0,0],cyan:[0,.68,.94],transparent:[0,0,0,0],bark:[.25,.19,.13]},color.rgb2hex=function(e,r,a){return"#"+toHex(Math.round(255*e))+toHex(Math.round(255*r))+toHex(Math.round(255*a))},color.rgba2hex=function(e,r,a,o){return"#"+toHex(Math.round(255*e))+toHex(Math.round(255*r))+toHex(Math.round(255*a))+toHex(Math.round(255*o))},color.hex2rgb=function(e){if(3!==(e=e.replace(/^#/,"")).length&&6!==e.length||!/^[0-9a-fA-F]*$/.test(e))throw new Error("Invalid hex value: #"+e);return 3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[parseInt(e.substr(0,2),16)/255,parseInt(e.substr(2,2),16)/255,parseInt(e.substr(4,2),16)/255]},color.rgb2hsb=function(e,r,a){var o=0,l=0,n=Math.max(e,r,a),t=n-Math.min(e,r,a);return 0!==n&&(l=t/n),0!==l&&(o=e===n?0+(r-a)/t:r===n?2+(a-e)/t:4+(e-r)/t),(o*=60/360)<0&&(o+=1),[o,l,n]},color.hsb2rgb=function(e,r,a){if(0===r)return[a,a,a];e=e%1*6;var o=Math.floor(e),l=e-o,n=a*(1-r),t=a*(1-r*l),i=a*(1-r*(1-l));return o>4?[a,n,t]:[[a,i,n],[t,a,n],[n,a,i],[n,t,a],[i,n,a]][parseInt(o,10)]},color.rgb2hsl=function(e,r,a){var o,l,n=Math.min(e,r,a),t=Math.max(e,r,a),i=t-n;return t===n?o=0:e===t?o=(r-a)/i:r===t?o=2+(a-e)/i:a===t&&(o=4+(e-r)/i),(o=Math.min(60*o,360))<0&&(o+=360),l=(n+t)/2,[o/360,t===n?0:l<=.5?i/(t+n):i/(2-t-n),l]},color.hsl2rgb=function(e,r,a){var o,l,n,t,i;if(0===r)return[i=a,i,i];o=2*a-(l=a<.5?a*(1+r):a+r-a*r),t=[0,0,0];for(var u=0;u<3;u++)(n=e+1/3*-(u-1))<0&&(n+=1),n>1&&(n-=1),i=6*n<1?o+6*(l-o)*n:2*n<1?l:3*n<2?o+(l-o)*(2/3-n)*6:o,t[u]=i;return t},module.exports=color;

},{}],45:[function(require,module,exports){
"use strict";var math=require("../util/math"),Point=require("../objects/point"),geo={angle:function(t,n,a,r){return math.degrees(Math.atan2(r-n,a-t))},distance:function(t,n,a,r){return Math.sqrt(Math.pow(a-t,2)+Math.pow(r-n,2))},coordinates:function(t,n,a,r){var e=t+Math.cos(math.radians(a))*r,o=n+Math.sin(math.radians(a))*r;return new Point(e,o)},pointInPolygon:function(t,n,a){var r,e,o,i,u,h,s=!1,c=t.length;for(r=0;r<c;r+=1)e=r<c-1?r+1:0,o=t[r].x,i=t[r].y,u=t[e].x,h=t[e].y,(i<a&&h>=a||h<a&&i>=a)&&o+(a-i)/(h-i)*(u-o)<n&&(s=!s);return s}};module.exports=geo;

},{"../objects/point":37,"../util/math":47}],46:[function(require,module,exports){
"use strict";exports.defineAlias=function(t,e,n){Object.defineProperty(t.prototype,n,{get:function(){return this[e]},set:function(t){this[e]=t}})},exports.defineGetter=function(t,e,n){Object.defineProperty(t.prototype,e,{get:n})};

},{}],47:[function(require,module,exports){
"use strict";var math={sum:function(r){var t,n=r.length,a=0;for(t=0;t<n;t+=1)a+=r[t];return a},round:function(r,t){return t?Math.round(r*Math.pow(10,t))/Math.pow(10,t):Math.round(r)},sign:function(r){return r<0?-1:r>0?1:0},degrees:function(r){return 180*r/Math.PI},radians:function(r){return r/180*Math.PI},clamp:function(r,t,n){return t<n?r<t?t:r>n?n:r:r<n?n:r>t?t:r},snap:function(r,t,n){return r*(1-(n=void 0!==n?n:1))+n*Math.round(r/t)*t},dot:function(r,t){var n,a=Math.min(r.length,t.length),e=0;for(n=0;n<a;n+=1)e+=r[n]*t[n];return e}},_lerp=math.mix=math.lerp=function(r,t,n,a){if(a){if(n<0)return r;if(n>1)return t}return r+(t-r)*n};function _fade(r){return r*r*r*(r*(6*r-15)+10)}function _grad(r,t,n,a){var e,o,u;return o=(e=15&r)<8?t:n,u=e<4?n:12===e||14===e?t:a,(0==(1&e)?o:-o)+(0==(2&e)?u:-u)}function _scale(r){return(1+r)/2}var _permutation=function(){var r,t,n;for(r=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=new Uint8Array(512),n=0;n<256;n+=1)t[256+n]=t[n]=r[n];return t}();math.noise=function(r,t,n){var a=_permutation,e=255&Math.floor(r),o=255&Math.floor(t),u=255&Math.floor(n);r-=Math.floor(r),t-=Math.floor(t),n-=Math.floor(n);var f=_fade(r),i=_fade(t),_=_fade(n),d=a[e]+o,h=a[d]+u,l=a[d+1]+u,c=a[e+1]+o,p=a[c]+u,g=a[c+1]+u;return _scale(_lerp(_lerp(_lerp(_grad(a[h],r,t,n),_grad(a[p],r-1,t,n),f),_lerp(_grad(a[l],r,t-1,n),_grad(a[g],r-1,t-1,n),f),i),_lerp(_lerp(_grad(a[h+1],r,t,n-1),_grad(a[p+1],r-1,t,n-1),f),_lerp(_grad(a[l+1],r,t-1,n-1),_grad(a[g+1],r-1,t-1,n-1),f),i),_))},module.exports=math;

},{}],48:[function(require,module,exports){
"use strict";function generator(r){if(r<0){for(var e=generator(Math.abs(r)),t=0;t<23;t+=1)e();return generator(e(0,1e4))}return function(e,t){return(e=e||0)+(r=(9301*r+49297)%233280)/233280*((t=t||1)-e)}}exports.generator=generator;

},{}],49:[function(require,module,exports){
"use strict";var xmldom=require("xmldom"),Color=require("../objects/color"),Group=require("../objects/group"),Path=require("../objects/path"),Point=require("../objects/point"),Transform=require("../objects/transform"),trim=function(t){return t.replace(/^\s+|\s+$/g,"")},compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},toNumberArray=function(t){var e,r=trim(compressSpaces((t||"").replace(/,/g," "))).split(" ");for(e=0;e<r.length;e+=1)r[e]=parseFloat(r[e]);return r},readSvgAttributes=function(t,e){var r,a,o,n,i,s,c,l,u,d,p,m,h,v,g,f,b,y,A;m=e?Object.create(e):{},l=[],(u={}).translate=function(t){var e=toNumberArray(t),r=e[0],a=e[1]||0;return(new Transform).translate(r,a)},u.scale=function(t){var e=toNumberArray(t),r=e[0],a=e[1]||r;return(new Transform).scale(r,a)},u.rotate=function(t){var e=toNumberArray(t),r=e[0],a=e[1]||0,o=e[2]||0;return(new Transform).translate(a,o).rotate(r).translate(-a,-o)},u.matrix=function(t){var e=toNumberArray(t);return new Transform([e[0],e[1],0,e[2],e[3],0,e[4],e[5],1])};for(var C=0;C<t.attributes.length;C+=1)switch((h=t.attributes[C]).nodeName){case"transform":for(v=trim(compressSpaces(h.nodeValue)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),p=0;p<v.length;p+=1)g=trim(v[p].split("(")[0]),f=v[p].split("(")[1].replace(")",""),d=u[g](f),l.push(d);break;case"visibility":case"stroke-linecap":case"stroke-linejoin":case"stroke-miterlimit":break;case"stroke-width":i=parseFloat(h.nodeValue);break;case"stroke-opacity":n=parseFloat(h.nodeValue);break;case"fill-opacity":a=parseFloat(h.nodeValue);break;case"fill":r=h.nodeValue;break;case"stroke":o=h.nodeValue;break;case"opacity":s=parseFloat(h.nodeValue);break;case"color":c=h.nodeValue;break;case"style":for(b={},y=h.nodeValue.split(";"),p=0;p<y.length;p+=1)b[(A=y[p].split(":"))[0].trim()]=A[1];b.fill&&(r=b.fill),b.stroke&&(o=b.stroke),void 0!==b["stroke-width"]&&(i=parseFloat(b["stroke-width"])),void 0!==b["stroke-opacity"]&&(n=parseFloat(b["stroke-opacity"])),void 0!==b["fill-opacity"]&&(a=parseFloat(b["fill-opacity"])),void 0!==b.opacity&&(s=parseFloat(b.opacity)),b.color&&(c=b.color)}if(void 0!==r&&(m.fill=r),void 0!==o&&(m.stroke=o),void 0!==a&&(m.fillOpacity=a),void 0!==n&&(m.strokeOpacity=n),void 0!==i&&(m.strokeWidth=i),void 0!==s&&(m.opacity=s),void 0!==c&&"currentColor"!==c&&(m.color=c),l.length>0){for(d=new Transform,p=0;p<l.length;p+=1)d=d.append(l[p]);d.isIdentity()||(m.transform?m.transform=m.transform.append(d):m.transform=d)}return m},applySvgAttributes=function(t,e){var r=e.fill;t.commands&&t.commands.length>0&&void 0===r&&(r="black");var a,o=e.fillOpacity,n=e.stroke,i=e.strokeOpacity,s=e.opacity,c=e.strokeWidth,l=e.transform,u=e.color;"currentColor"===r&&(r=void 0===u?"black":u),void 0!==r&&(r=Color.parse(r),void 0!==o&&(r.a*=o),void 0!==s&&(r.a*=s)),"currentColor"===n&&(n=void 0===u?"black":u),void 0!==n&&(n=Color.parse(n),void 0!==i&&(n.a*=i),void 0!==s&&(n.a*=s)),a=l?l.transformShape(t).commands:t.commands;var d=void 0===r?t.fill:r,p=void 0===n?t.stroke:n,m=void 0===c?t.strokeWidth:c;return void 0!==m&&void 0!==l&&(m*=l.m[0]),new Path(a,d,p,m)},arcToSegments=function(t,e,r,a,o,n,i,s,c){var l,u,d,p,m,h,v,g,f,b,y,A,C,k,x,S,P,w,M,T,F,E,q,$,O;for(l=i*(Math.PI/180),u=Math.sin(l),(h=(p=(d=Math.cos(l))*(s-t)*.5+u*(c-e)*.5)*p/((r=Math.abs(r))*r)+(m=d*(c-e)*.5-u*(s-t)*.5)*m/((a=Math.abs(a))*a))>1&&(r*=h=Math.sqrt(h),a*=h),(x=1/(((C=(v=d/r)*t+(g=u/r)*e)-(y=v*s+g*c))*(C-y)+((k=(f=-u/a)*t+(b=d/a)*e)-(A=f*s+b*c))*(k-A))-.25)<0&&(x=0),S=Math.sqrt(x),n===o&&(S=-S),P=.5*(y+C)-S*(k-A),w=.5*(A+k)+S*(C-y),M=Math.atan2(A-w,y-P),(T=Math.atan2(k-w,C-P)-M)<0&&1===n?T+=2*Math.PI:T>0&&0===n&&(T-=2*Math.PI),F=Math.ceil(Math.abs(T/(.5*Math.PI+.001))),E=[],O=0;O<F;O+=1)q=M+O*T/F,$=M+(O+1)*T/F,E[O]=[P,w,q,$,r,a,u,d];return E},segmentToBezier=function(t,e,r,a,o,n,i,s){var c=s*o,l=-i*n,u=i*o,d=s*n,p=.5*(a-r),m=8/3*Math.sin(.5*p)*Math.sin(.5*p)/Math.sin(p),h=t+Math.cos(r)-m*Math.sin(r),v=e+Math.sin(r)+m*Math.cos(r),g=t+Math.cos(a),f=e+Math.sin(a),b=g+m*Math.sin(a),y=f-m*Math.cos(a);return[c*h+l*v,u*h+d*v,c*b+l*y,u*b+d*y,c*g+l*f,u*g+d*f]},read={svg:function(){return read.g.apply(this,arguments)},g:function(t,e){for(var r,a,o,n,i=[],s=readSvgAttributes(t,e),c=0;c<t.childNodes.length;c+=1){if(!(a=(r=t.childNodes[c]).nodeName))return;o=a.replace(/svg\:/gi,"").toLowerCase(),void 0!==read[o]&&(n=read[o].call(this,r,s),i.push(n))}return new Group(i)},_polyline:function(t){var e=t.getAttribute("points"),r=new Path;return e.replace(/([\d\.?]+),([\d\.?]+)/g,function(t,e,a){var o=parseFloat(e),n=parseFloat(a);0===r.commands.length?r.moveTo(o,n):r.lineTo(o,n)}),r},polygon:function(t,e){var r=readSvgAttributes(t,e),a=read._polyline(t);return a.close(),applySvgAttributes(a,r)},polyline:function(t,e){var r=readSvgAttributes(t,e),a=read._polyline(t);return applySvgAttributes(a,r)},rect:function(t,e){var r=readSvgAttributes(t,e),a=parseFloat(t.getAttribute("x")),o=parseFloat(t.getAttribute("y"));a||(a=0),o||(o=0);var n=parseFloat(t.getAttribute("width")),i=parseFloat(t.getAttribute("height"));n||(n=0),i||(i=0),n<0&&(console.error('Error: invalid negative value for <rect> attribute width="'+n+'"'),n=0),i<0&&(console.error('Error: invalid negative value for <rect> attribute height="'+i+'"'),i=0);var s=parseFloat(t.getAttribute("rx")),c=parseFloat(t.getAttribute("ry"));s||(s=0),c||(c=0),s<0&&(console.error('Error: invalid negative value for <rect> attribute rx="'+s+'"'),s=0),c<0&&(console.error('Error: invalid negative value for <rect> attribute ry="'+c+'"'),c=0),s&&c||(s=c=Math.max(s,c)),s>n/2&&(s=n/2),c>i/2&&(c=i/2);var l=new Path;return s&&c?l.addRoundedRect(a,o,n,i,s,c):l.addRect(a,o,n,i),applySvgAttributes(l,r)},ellipse:function(t,e){var r=readSvgAttributes(t,e),a=parseFloat(t.getAttribute("cx")),o=parseFloat(t.getAttribute("cy"));a||(a=0),o||(o=0);var n=parseFloat(t.getAttribute("rx")),i=parseFloat(t.getAttribute("ry"));n||(n=0),i||(i=0),n<0&&(console.error('Error: invalid negative value for <ellipse> attribute rx="'+n+'"'),n=0),i<0&&(console.error('Error: invalid negative value for <ellipse> attribute ry="'+i+'"'),i=0);var s=new Path;return s.addEllipse(a-n,o-i,2*n,2*i),applySvgAttributes(s,r)},circle:function(t,e){var r=readSvgAttributes(t,e),a=parseFloat(t.getAttribute("cx")),o=parseFloat(t.getAttribute("cy"));a||(a=0),o||(o=0);var n=parseFloat(t.getAttribute("r"));n||(n=0),n<0&&(console.error('Error: invalid negative value for <circle> attribute r="'+n+'"'),n=0);var i=new Path;return i.addEllipse(a-n,o-n,2*n,2*n),applySvgAttributes(i,r)},line:function(t,e){var r=readSvgAttributes(t,e),a=parseFloat(t.getAttribute("x1")),o=parseFloat(t.getAttribute("y1")),n=parseFloat(t.getAttribute("x2")),i=parseFloat(t.getAttribute("y2"));a||(a=0),o||(o=0),n||(n=0),i||(i=0);var s=new Path;return s.addLine(a,o,n,i),applySvgAttributes(s,r)},path:function(t,e){var r,a,o,n,i,s,c,l,u,d,p,m,h,v,g,f,b,y,A,C,k,x,S,P=readSvgAttributes(t,e);r=(r=(r=(r=(r=(r=(r=(r=(r=t.getAttribute("d")).replace(/,/gm," ")).replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2")).replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/(\.[0-9]*)(\.)/gm,"$1 $2")).replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),r=compressSpaces(r),r=trim(r),a=function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new Point(0,0),this.control=new Point(0,0),this.current=new Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!==this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i+=1,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){return"c"!==this.previousCommand.toLowerCase()&&"s"!==this.previousCommand.toLowerCase()&&"q"!==this.previousCommand.toLowerCase()&&"t"!==this.previousCommand.toLowerCase()?this.current:new Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()?new Point(t.x+this.current.x,t.y+this.current.y):t}};var w=new Path;for((o=new a(r)).reset();!o.isEnd();)switch(o.nextCommand(),o.command){case"M":case"m":for(n=o.getAsCurrentPoint(),w.moveTo(n.x,n.y),o.start=o.current;!o.isCommandOrEnd();)n=o.getAsCurrentPoint(),w.lineTo(n.x,n.y);break;case"L":case"l":for(;!o.isCommandOrEnd();)n=o.getAsCurrentPoint(),w.lineTo(n.x,n.y);break;case"H":case"h":for(;!o.isCommandOrEnd();)i=new Point((o.isRelativeCommand()?o.current.x:0)+o.getScalar(),o.current.y),o.current=i,w.lineTo(o.current.x,o.current.y);break;case"V":case"v":for(;!o.isCommandOrEnd();)i=new Point(o.current.x,(o.isRelativeCommand()?o.current.y:0)+o.getScalar()),o.current=i,w.lineTo(o.current.x,o.current.y);break;case"C":case"c":for(;!o.isCommandOrEnd();)s=o.current,c=o.getPoint(),l=o.getAsControlPoint(),u=o.getAsCurrentPoint(),w.curveTo(c.x,c.y,l.x,l.y,u.x,u.y);break;case"S":case"s":for(;!o.isCommandOrEnd();)s=o.current,c=o.getReflectedControlPoint(),l=o.getAsControlPoint(),u=o.getAsCurrentPoint(),w.curveTo(c.x,c.y,l.x,l.y,u.x,u.y);break;case"Q":case"q":for(;!o.isCommandOrEnd();)s=o.current,l=o.getAsControlPoint(),u=o.getAsCurrentPoint(),d=s.x+2/3*(l.x-s.x),p=s.y+2/3*(l.y-s.y),m=d+1/3*(u.x-s.x),h=p+1/3*(u.y-s.y),w.curveTo(d,p,m,h,u.x,u.y);break;case"T":case"t":for(;!o.isCommandOrEnd();)s=o.current,l=o.getReflectedControlPoint(),o.control=l,u=o.getAsCurrentPoint(),d=s.x+2/3*(l.x-s.x),p=s.y+2/3*(l.y-s.y),m=d+1/3*(u.x-s.x),h=p+1/3*(u.y-s.y),w.curveTo(d,p,m,h,u.x,u.y);break;case"A":case"a":for(;!o.isCommandOrEnd();)for(s=o.current,v=o.getScalar(),g=o.getScalar(),f=o.getScalar(),b=o.getScalar(),y=o.getScalar(),A=(u=o.getAsCurrentPoint()).x,C=u.y,k=arcToSegments(A,C,v,g,b,y,f,s.x,s.y),x=0;x<k.length;x+=1)S=segmentToBezier.apply(this,k[x]),w.curveTo.apply(w,S);break;case"Z":case"z":w.close(),o.current=o.start}return applySvgAttributes(w,P)}};exports.interpret=function(t){var e=t.tagName.toLowerCase();return void 0===read[e]?null:read[e].call(this,t)},exports.parseString=function(t){var e=new xmldom.DOMParser({errorHandler:function(e,r){throw new Error('Could not parse string "'+String(t)+'": '+r)}}).parseFromString(t);return e?exports.interpret(e.documentElement):null};

},{"../objects/color":33,"../objects/group":34,"../objects/path":36,"../objects/point":37,"../objects/transform":40,"xmldom":11}],50:[function(require,module,exports){
"use strict";var assignIn=require("lodash.assignin"),vg={};function importCommands(r){for(var e in r)vg[e]=r[e]}vg.bezier=require("./util/bezier"),vg.color=require("./util/color"),vg.geo=require("./util/geo"),vg.math=require("./util/math"),vg.random=require("./util/random"),vg.svg=require("./util/svg"),vg.Color=require("./objects/color"),vg.Group=require("./objects/group"),vg.Matrix4=require("./objects/matrix4"),vg.Path=require("./objects/path"),vg.Point=vg.Vec2=require("./objects/point"),vg.Rect=require("./objects/rect"),vg.Text=require("./objects/text"),vg.Transform=vg.Matrix3=require("./objects/transform"),vg.Vec3=require("./objects/vec3");var Transformable=require("./objects/transformable");assignIn(vg.Point.prototype,Transformable),assignIn(vg.Path.prototype,Transformable),assignIn(vg.Group.prototype,Transformable),assignIn(vg.Text.prototype,Transformable),importCommands(require("./commands/draw")),importCommands(require("./commands/filters")),importCommands(require("./commands/shapes")),module.exports=vg;

},{"./commands/draw":30,"./commands/filters":31,"./commands/shapes":32,"./objects/color":33,"./objects/group":34,"./objects/matrix4":35,"./objects/path":36,"./objects/point":37,"./objects/rect":38,"./objects/text":39,"./objects/transform":40,"./objects/transformable":41,"./objects/vec3":42,"./util/bezier":43,"./util/color":44,"./util/geo":45,"./util/math":47,"./util/random":48,"./util/svg":49,"lodash.assignin":2}],51:[function(require,module,exports){
!function(){"use strict";var t,e={use_lines:!0,use_xyz:!1},i=!1;if("undefined"!=typeof module&&module.exports?(module.exports=e,i=!0):"undefined"!=typeof document?window.ClipperLib=e:self.ClipperLib=e,i){n="chrome";t="Netscape"}else{var n=navigator.userAgent.toString().toLowerCase();t=navigator.appName}var o,r={};-1!=n.indexOf("chrome")&&-1==n.indexOf("chromium")?r.chrome=1:r.chrome=0,-1!=n.indexOf("chromium")?r.chromium=1:r.chromium=0,-1!=n.indexOf("safari")&&-1==n.indexOf("chrome")&&-1==n.indexOf("chromium")?r.safari=1:r.safari=0,-1!=n.indexOf("firefox")?r.firefox=1:r.firefox=0,-1!=n.indexOf("firefox/17")?r.firefox17=1:r.firefox17=0,-1!=n.indexOf("firefox/15")?r.firefox15=1:r.firefox15=0,-1!=n.indexOf("firefox/3")?r.firefox3=1:r.firefox3=0,-1!=n.indexOf("opera")?r.opera=1:r.opera=0,-1!=n.indexOf("msie 10")?r.msie10=1:r.msie10=0,-1!=n.indexOf("msie 9")?r.msie9=1:r.msie9=0,-1!=n.indexOf("msie 8")?r.msie8=1:r.msie8=0,-1!=n.indexOf("msie 7")?r.msie7=1:r.msie7=0,-1!=n.indexOf("msie ")?r.msie=1:r.msie=0,e.biginteger_used=null;function s(t,i,n){e.biginteger_used=1,null!=t&&("number"==typeof t&&void 0===i?this.fromInt(t):"number"==typeof t?this.fromNumber(t,i,n):null==i&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,i))}function l(){return new s(null,void 0,void 0)}"Microsoft Internet Explorer"==t?(s.prototype.am=function(t,e,i,n,o,r){for(var s=32767&e,l=e>>15;--r>=0;){var p=32767&this[t],h=this[t++]>>15,u=l*p+h*s;o=((p=s*p+((32767&u)<<15)+i[n]+(1073741823&o))>>>30)+(u>>>15)+l*h+(o>>>30),i[n++]=1073741823&p}return o},o=30):"Netscape"!=t?(s.prototype.am=function(t,e,i,n,o,r){for(;--r>=0;){var s=e*this[t++]+i[n]+o;o=Math.floor(s/67108864),i[n++]=67108863&s}return o},o=26):(s.prototype.am=function(t,e,i,n,o,r){for(var s=16383&e,l=e>>14;--r>=0;){var p=16383&this[t],h=this[t++]>>14,u=l*p+h*s;o=((p=s*p+((16383&u)<<14)+i[n]+o)>>28)+(u>>14)+l*h,i[n++]=268435455&p}return o},o=28),s.prototype.DB=o,s.prototype.DM=(1<<o)-1,s.prototype.DV=1<<o;s.prototype.FV=Math.pow(2,52),s.prototype.F1=52-o,s.prototype.F2=2*o-52;var p,h,u="0123456789abcdefghijklmnopqrstuvwxyz",a=new Array;for(p="0".charCodeAt(0),h=0;h<=9;++h)a[p++]=h;for(p="a".charCodeAt(0),h=10;h<36;++h)a[p++]=h;for(p="A".charCodeAt(0),h=10;h<36;++h)a[p++]=h;function f(t){return u.charAt(t)}function d(t,e){var i=a[t.charCodeAt(e)];return null==i?-1:i}function P(t){var e=l();return e.fromInt(t),e}function m(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function y(t){this.m=t}function c(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function v(t,e){return t&e}function C(t,e){return t|e}function I(t,e){return t^e}function _(t,e){return t&~e}function x(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function L(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function E(){}function T(t){return t}function g(t){this.r2=l(),this.q3=l(),s.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}y.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},y.prototype.revert=function(t){return t},y.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},y.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},y.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},c.prototype.convert=function(t){var e=l();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(s.ZERO)>0&&this.m.subTo(e,e),e},c.prototype.revert=function(t){var e=l();return t.copyTo(e),this.reduce(e),e},c.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},c.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},c.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},s.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},s.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},s.prototype.fromString=function(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var n=t.length,o=!1,r=0;--n>=0;){var l=8==i?255&t[n]:d(t,n);l<0?"-"==t.charAt(n)&&(o=!0):(o=!1,0==r?this[this.t++]=l:r+i>this.DB?(this[this.t-1]|=(l&(1<<this.DB-r)-1)<<r,this[this.t++]=l>>this.DB-r):this[this.t-1]|=l<<r,(r+=i)>=this.DB&&(r-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,r>0&&(this[this.t-1]|=(1<<this.DB-r)-1<<r)),this.clamp(),o&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},s.prototype.dlShiftTo=function(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s},s.prototype.drShiftTo=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s},s.prototype.lShiftTo=function(t,e){var i,n=t%this.DB,o=this.DB-n,r=(1<<o)-1,s=Math.floor(t/this.DB),l=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)e[i+s+1]=this[i]>>o|l,l=(this[i]&r)<<n;for(i=s-1;i>=0;--i)e[i]=0;e[s]=l,e.t=this.t+s+1,e.s=this.s,e.clamp()},s.prototype.rShiftTo=function(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var n=t%this.DB,o=this.DB-n,r=(1<<n)-1;e[0]=this[i]>>n;for(var s=i+1;s<this.t;++s)e[s-i-1]|=(this[s]&r)<<o,e[s-i]=this[s]>>n;n>0&&(e[this.t-i-1]|=(this.s&r)<<o),e.t=this.t-i,e.clamp()}},s.prototype.subTo=function(t,e){for(var i=0,n=0,o=Math.min(t.t,this.t);i<o;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:n>0&&(e[i++]=n),e.t=i,e.clamp()},s.prototype.multiplyTo=function(t,e){var i=this.abs(),n=t.abs(),o=i.t;for(e.t=o+n.t;--o>=0;)e[o]=0;for(o=0;o<n.t;++o)e[o+i.t]=i.am(0,n[o],e,o,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&s.ZERO.subTo(e,e)},s.prototype.squareTo=function(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()},s.prototype.divRemTo=function(t,e,i){var n=t.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=l());var r=l(),p=this.s,h=t.s,u=this.DB-m(n[n.t-1]);u>0?(n.lShiftTo(u,r),o.lShiftTo(u,i)):(n.copyTo(r),o.copyTo(i));var a=r.t,f=r[a-1];if(0!=f){var d=f*(1<<this.F1)+(a>1?r[a-2]>>this.F2:0),P=this.FV/d,y=(1<<this.F1)/d,c=1<<this.F2,v=i.t,C=v-a,I=null==e?l():e;for(r.dlShiftTo(C,I),i.compareTo(I)>=0&&(i[i.t++]=1,i.subTo(I,i)),s.ONE.dlShiftTo(a,I),I.subTo(r,r);r.t<a;)r[r.t++]=0;for(;--C>=0;){var _=i[--v]==f?this.DM:Math.floor(i[v]*P+(i[v-1]+c)*y);if((i[v]+=r.am(0,_,i,C,0,a))<_)for(r.dlShiftTo(C,I),i.subTo(I,i);i[v]<--_;)i.subTo(I,i)}null!=e&&(i.drShiftTo(a,e),p!=h&&s.ZERO.subTo(e,e)),i.t=a,i.clamp(),u>0&&i.rShiftTo(u,i),p<0&&s.ZERO.subTo(i,i)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},s.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},s.prototype.exp=function(t,e){if(t>4294967295||t<1)return s.ONE;var i=l(),n=l(),o=e.convert(this),r=m(t)-1;for(o.copyTo(i);--r>=0;)if(e.sqrTo(i,n),(t&1<<r)>0)e.mulTo(n,o,i);else{var p=i;i=n,n=p}return e.revert(i)},s.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,o=!1,r="",s=this.t,l=this.DB-s*this.DB%e;if(s-- >0)for(l<this.DB&&(i=this[s]>>l)>0&&(o=!0,r=f(i));s>=0;)l<e?(i=(this[s]&(1<<l)-1)<<e-l,i|=this[--s]>>(l+=this.DB-e)):(i=this[s]>>(l-=e)&n,l<=0&&(l+=this.DB,--s)),i>0&&(o=!0),o&&(r+=f(i));return o?r:"0"},s.prototype.negate=function(){var t=l();return s.ZERO.subTo(this,t),t},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM)},s.prototype.mod=function(t){var e=l();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(s.ZERO)>0&&t.subTo(e,e),e},s.prototype.modPowInt=function(t,e){var i;return i=t<256||e.isEven()?new y(e):new c(e),this.exp(t,i)},s.ZERO=P(0),s.ONE=P(1),E.prototype.convert=T,E.prototype.revert=T,E.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i)},E.prototype.sqrTo=function(t,e){t.squareTo(e)},g.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=l();return t.copyTo(e),this.reduce(e),e},g.prototype.revert=function(t){return t},g.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},g.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},g.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var X=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Y=(1<<26)/X[X.length-1];s.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},s.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=P(i),o=l(),r=l(),s="";for(this.divRemTo(n,o,r);o.signum()>0;)s=(i+r.intValue()).toString(t).substr(1)+s,o.divRemTo(n,o,r);return r.intValue().toString(t)+s},s.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),n=Math.pow(e,i),o=!1,r=0,l=0,p=0;p<t.length;++p){var h=d(t,p);h<0?"-"==t.charAt(p)&&0==this.signum()&&(o=!0):(l=e*l+h,++r>=i&&(this.dMultiply(n),this.dAddOffset(l,0),r=0,l=0))}r>0&&(this.dMultiply(Math.pow(e,r)),this.dAddOffset(l,0)),o&&s.ZERO.subTo(this,this)},s.prototype.fromNumber=function(t,e,i){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(s.ONE.shiftLeft(t-1),C,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(s.ONE.shiftLeft(t-1),this);else{var n=new Array,o=7&t;n.length=1+(t>>3),e.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}},s.prototype.bitwiseTo=function(t,e,i){var n,o,r=Math.min(t.t,this.t);for(n=0;n<r;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){for(o=t.s&this.DM,n=r;n<this.t;++n)i[n]=e(this[n],o);i.t=this.t}else{for(o=this.s&this.DM,n=r;n<t.t;++n)i[n]=e(o,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()},s.prototype.changeBit=function(t,e){var i=s.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i},s.prototype.addTo=function(t,e){for(var i=0,n=0,o=Math.min(t.t,this.t);i<o;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[i++]=n:n<-1&&(e[i++]=this.DV+n),e.t=i,e.clamp()},s.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},s.prototype.multiplyLowerTo=function(t,e,i){var n,o=Math.min(this.t+t.t,e);for(i.s=0,i.t=o;o>0;)i[--o]=0;for(n=i.t-this.t;o<n;++o)i[o+this.t]=this.am(0,t[o],i,o,0,this.t);for(n=Math.min(t.t,e);o<n;++o)this.am(0,t[o],i,o,0,e-o);i.clamp()},s.prototype.multiplyUpperTo=function(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)},s.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var n=this.t-1;n>=0;--n)i=(e*i+this[n])%t;return i},s.prototype.millerRabin=function(t){var e=this.subtract(s.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var n=e.shiftRight(i);(t=t+1>>1)>X.length&&(t=X.length);for(var o=l(),r=0;r<t;++r){o.fromInt(X[Math.floor(Math.random()*X.length)]);var p=o.modPow(n,this);if(0!=p.compareTo(s.ONE)&&0!=p.compareTo(e)){for(var h=1;h++<i&&0!=p.compareTo(e);)if(0==(p=p.modPowInt(2,this)).compareTo(s.ONE))return!1;if(0!=p.compareTo(e))return!1}}return!0},s.prototype.clone=function(){var t=l();return this.copyTo(t),t},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},s.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},s.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},s.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var i,n=this.DB-t*this.DB%8,o=0;if(t-- >0)for(n<this.DB&&(i=this[t]>>n)!=(this.s&this.DM)>>n&&(e[o++]=i|this.s<<this.DB-n);t>=0;)n<8?(i=(this[t]&(1<<n)-1)<<8-n,i|=this[--t]>>(n+=this.DB-8)):(i=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==o&&(128&this.s)!=(128&i)&&++o,(o>0||i!=this.s)&&(e[o++]=i);return e},s.prototype.equals=function(t){return 0==this.compareTo(t)},s.prototype.min=function(t){return this.compareTo(t)<0?this:t},s.prototype.max=function(t){return this.compareTo(t)>0?this:t},s.prototype.and=function(t){var e=l();return this.bitwiseTo(t,v,e),e},s.prototype.or=function(t){var e=l();return this.bitwiseTo(t,C,e),e},s.prototype.xor=function(t){var e=l();return this.bitwiseTo(t,I,e),e},s.prototype.andNot=function(t){var e=l();return this.bitwiseTo(t,_,e),e},s.prototype.not=function(){for(var t=l(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},s.prototype.shiftLeft=function(t){var e=l();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},s.prototype.shiftRight=function(t){var e=l();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},s.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+x(this[t]);return this.s<0?this.t*this.DB:-1},s.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=L(this[i]^e);return t},s.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},s.prototype.setBit=function(t){return this.changeBit(t,C)},s.prototype.clearBit=function(t){return this.changeBit(t,_)},s.prototype.flipBit=function(t){return this.changeBit(t,I)},s.prototype.add=function(t){var e=l();return this.addTo(t,e),e},s.prototype.subtract=function(t){var e=l();return this.subTo(t,e),e},s.prototype.multiply=function(t){var e=l();return this.multiplyTo(t,e),e},s.prototype.divide=function(t){var e=l();return this.divRemTo(t,e,null),e},s.prototype.remainder=function(t){var e=l();return this.divRemTo(t,null,e),e},s.prototype.divideAndRemainder=function(t){var e=l(),i=l();return this.divRemTo(t,e,i),new Array(e,i)},s.prototype.modPow=function(t,e){var i,n,o=t.bitLength(),r=P(1);if(o<=0)return r;i=o<18?1:o<48?3:o<144?4:o<768?5:6,n=o<8?new y(e):e.isEven()?new g(e):new c(e);var s=new Array,p=3,h=i-1,u=(1<<i)-1;if(s[1]=n.convert(this),i>1){var a=l();for(n.sqrTo(s[1],a);p<=u;)s[p]=l(),n.mulTo(a,s[p-2],s[p]),p+=2}var f,d,v=t.t-1,C=!0,I=l();for(o=m(t[v])-1;v>=0;){for(o>=h?f=t[v]>>o-h&u:(f=(t[v]&(1<<o+1)-1)<<h-o,v>0&&(f|=t[v-1]>>this.DB+o-h)),p=i;0==(1&f);)f>>=1,--p;if((o-=p)<0&&(o+=this.DB,--v),C)s[f].copyTo(r),C=!1;else{for(;p>1;)n.sqrTo(r,I),n.sqrTo(I,r),p-=2;p>0?n.sqrTo(r,I):(d=r,r=I,I=d),n.mulTo(I,s[f],r)}for(;v>=0&&0==(t[v]&1<<o);)n.sqrTo(r,I),d=r,r=I,I=d,--o<0&&(o=this.DB-1,--v)}return n.revert(r)},s.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return s.ZERO;for(var i=t.clone(),n=this.clone(),o=P(1),r=P(0),l=P(0),p=P(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?(o.isEven()&&r.isEven()||(o.addTo(this,o),r.subTo(t,r)),o.rShiftTo(1,o)):r.isEven()||r.subTo(t,r),r.rShiftTo(1,r);for(;n.isEven();)n.rShiftTo(1,n),e?(l.isEven()&&p.isEven()||(l.addTo(this,l),p.subTo(t,p)),l.rShiftTo(1,l)):p.isEven()||p.subTo(t,p),p.rShiftTo(1,p);i.compareTo(n)>=0?(i.subTo(n,i),e&&o.subTo(l,o),r.subTo(p,r)):(n.subTo(i,n),e&&l.subTo(o,l),p.subTo(r,p))}return 0!=n.compareTo(s.ONE)?s.ZERO:p.compareTo(t)>=0?p.subtract(t):p.signum()<0?(p.addTo(t,p),p.signum()<0?p.add(t):p):p},s.prototype.pow=function(t){return this.exp(t,new E)},s.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var n=e;e=i,i=n}var o=e.getLowestSetBit(),r=i.getLowestSetBit();if(r<0)return e;for(o<r&&(r=o),r>0&&(e.rShiftTo(r,e),i.rShiftTo(r,i));e.signum()>0;)(o=e.getLowestSetBit())>0&&e.rShiftTo(o,e),(o=i.getLowestSetBit())>0&&i.rShiftTo(o,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return r>0&&i.lShiftTo(r,i),i},s.prototype.isProbablePrime=function(t){var e,i=this.abs();if(1==i.t&&i[0]<=X[X.length-1]){for(e=0;e<X.length;++e)if(i[0]==X[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<X.length;){for(var n=X[e],o=e+1;o<X.length&&n<Y;)n*=X[o++];for(n=i.modInt(n);e<o;)if(n%X[e++]==0)return!1}return i.millerRabin(t)},s.prototype.square=function(){var t=l();return this.squareTo(t),t};var N=s;N.prototype.IsNegative=function(){return-1==this.compareTo(N.ZERO)},N.op_Equality=function(t,e){return 0==t.compareTo(e)},N.op_Inequality=function(t,e){return 0!=t.compareTo(e)},N.op_GreaterThan=function(t,e){return t.compareTo(e)>0},N.op_LessThan=function(t,e){return t.compareTo(e)<0},N.op_Addition=function(t,e){return new N(t).add(new N(e))},N.op_Subtraction=function(t,e){return new N(t).subtract(new N(e))},N.Int128Mul=function(t,e){return new N(t).multiply(new N(e))},N.op_Division=function(t,e){return t.divide(e)},N.prototype.ToDouble=function(){return parseFloat(this.toString())};var O=function(t,e){var i;if(void 0===Object.getOwnPropertyNames){for(i in e.prototype)void 0!==t.prototype[i]&&t.prototype[i]!=Object.prototype[i]||(t.prototype[i]=e.prototype[i]);for(i in e)void 0===t[i]&&(t[i]=e[i]);t.$baseCtor=e}else{for(var n=Object.getOwnPropertyNames(e.prototype),o=0;o<n.length;o++)void 0===Object.getOwnPropertyDescriptor(t.prototype,n[o])&&Object.defineProperty(t.prototype,n[o],Object.getOwnPropertyDescriptor(e.prototype,n[o]));for(i in e)void 0===t[i]&&(t[i]=e[i]);t.$baseCtor=e}};e.Path=function(){return[]},e.Paths=function(){return[]},e.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},e.DoublePoint0=function(){this.X=0,this.Y=0},e.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},e.DoublePoint2=function(t,e){this.X=t,this.Y=e},e.PolyNode=function(){this.m_Parent=null,this.m_polygon=new e.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},e.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},e.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},e.PolyNode.prototype.Contour=function(){return this.m_polygon},e.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},e.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},e.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},e.PolyNode.prototype.Childs=function(){return this.m_Childs},e.PolyNode.prototype.Parent=function(){return this.m_Parent},e.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},e.PolyTree=function(){this.m_AllPolys=[],e.PolyNode.call(this)},e.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},e.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},e.PolyTree.prototype.Total=function(){var t=this.m_AllPolys.length;return t>0&&this.m_Childs[0]!=this.m_AllPolys[0]&&t--,t},O(e.PolyTree,e.PolyNode),e.Math_Abs_Int64=e.Math_Abs_Int32=e.Math_Abs_Double=function(t){return Math.abs(t)},e.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},r.msie||r.opera||r.safari?e.Cast_Int32=function(t){return 0|t}:e.Cast_Int32=function(t){return~~t},r.chrome?e.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):~~t}:r.firefox&&"function"==typeof Number.toInteger?e.Cast_Int64=function(t){return Number.toInteger(t)}:r.msie7||r.msie8?e.Cast_Int64=function(t){return parseInt(t,10)}:r.msie?e.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):0|t}:e.Cast_Int64=function(t){return t<0?Math.ceil(t):Math.floor(t)},e.Clear=function(t){t.length=0},e.PI=3.141592653589793,e.PI2=6.283185307179586,e.IntPoint=function(){var t=arguments,i=t.length;if(this.X=0,this.Y=0,e.use_xyz)if(this.Z=0,3==i)this.X=t[0],this.Y=t[1],this.Z=t[2];else if(2==i)this.X=t[0],this.Y=t[1],this.Z=0;else if(1==i)if(t[0]instanceof e.DoublePoint){var n=t[0];this.X=e.Clipper.Round(n.X),this.Y=e.Clipper.Round(n.Y),this.Z=0}else{void 0===(o=t[0]).Z&&(o.Z=0),this.X=o.X,this.Y=o.Y,this.Z=o.Z}else this.X=0,this.Y=0,this.Z=0;else if(2==i)this.X=t[0],this.Y=t[1];else if(1==i)if(t[0]instanceof e.DoublePoint){n=t[0];this.X=e.Clipper.Round(n.X),this.Y=e.Clipper.Round(n.Y)}else{var o=t[0];this.X=o.X,this.Y=o.Y}else this.X=0,this.Y=0},e.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},e.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},e.use_xyz?(e.IntPoint0=function(){this.X=0,this.Y=0,this.Z=0},e.IntPoint1=function(t){this.X=t.X,this.Y=t.Y,this.Z=t.Z},e.IntPoint1dp=function(t){this.X=e.Clipper.Round(t.X),this.Y=e.Clipper.Round(t.Y),this.Z=0},e.IntPoint2=function(t,e){this.X=t,this.Y=e,this.Z=0},e.IntPoint3=function(t,e,i){this.X=t,this.Y=e,this.Z=i}):(e.IntPoint0=function(){this.X=0,this.Y=0},e.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},e.IntPoint1dp=function(t){this.X=e.Clipper.Round(t.X),this.Y=e.Clipper.Round(t.Y)},e.IntPoint2=function(t,e){this.X=t,this.Y=e}),e.IntRect=function(){var t=arguments,e=t.length;4==e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==e?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},e.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},e.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},e.IntRect4=function(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n},e.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},e.PolyType={ptSubject:0,ptClip:1},e.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},e.JoinType={jtSquare:0,jtRound:1,jtMiter:2},e.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},e.EdgeSide={esLeft:0,esRight:1},e.Direction={dRightToLeft:0,dLeftToRight:1},e.TEdge=function(){this.Bot=new e.IntPoint,this.Curr=new e.IntPoint,this.Top=new e.IntPoint,this.Delta=new e.IntPoint,this.Dx=0,this.PolyTyp=e.PolyType.ptSubject,this.Side=e.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},e.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new e.IntPoint},e.MyIntersectNodeSort=function(){},e.MyIntersectNodeSort.Compare=function(t,e){var i=e.Pt.Y-t.Pt.Y;return i>0?1:i<0?-1:0},e.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},e.Scanbeam=function(){this.Y=0,this.Next=null},e.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},e.OutPt=function(){this.Idx=0,this.Pt=new e.IntPoint,this.Next=null,this.Prev=null},e.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new e.IntPoint},e.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},e.ClipperBase.horizontal=-9007199254740992,e.ClipperBase.Skip=-2,e.ClipperBase.Unassigned=-1,e.ClipperBase.tolerance=1e-20,e.ClipperBase.loRange=47453132,e.ClipperBase.hiRange=0xfffffffffffff,e.ClipperBase.near_zero=function(t){return t>-e.ClipperBase.tolerance&&t<e.ClipperBase.tolerance},e.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},e.ClipperBase.prototype.PointIsVertex=function(t,i){var n=i;do{if(e.IntPoint.op_Equality(n.Pt,t))return!0;n=n.Next}while(n!=i);return!1},e.ClipperBase.prototype.PointOnLineSegment=function(t,e,i,n){return n?t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&N.op_Equality(N.Int128Mul(t.X-e.X,i.Y-e.Y),N.Int128Mul(i.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&(t.X-e.X)*(i.Y-e.Y)==(i.X-e.X)*(t.Y-e.Y)},e.ClipperBase.prototype.PointOnPolygon=function(t,e,i){for(var n=e;;){if(this.PointOnLineSegment(t,n.Pt,n.Next.Pt,i))return!0;if((n=n.Next)==e)break}return!1},e.ClipperBase.prototype.SlopesEqual=e.ClipperBase.SlopesEqual=function(){var t,i,n,o,r,s,l=arguments,p=l.length;return 3==p?(t=l[0],i=l[1],l[2]?N.op_Equality(N.Int128Mul(t.Delta.Y,i.Delta.X),N.Int128Mul(t.Delta.X,i.Delta.Y)):e.Cast_Int64(t.Delta.Y*i.Delta.X)==e.Cast_Int64(t.Delta.X*i.Delta.Y)):4==p?(n=l[0],o=l[1],r=l[2],l[3]?N.op_Equality(N.Int128Mul(n.Y-o.Y,o.X-r.X),N.Int128Mul(n.X-o.X,o.Y-r.Y)):e.Cast_Int64((n.Y-o.Y)*(o.X-r.X))-e.Cast_Int64((n.X-o.X)*(o.Y-r.Y))==0):(n=l[0],o=l[1],r=l[2],s=l[3],l[4]?N.op_Equality(N.Int128Mul(n.Y-o.Y,r.X-s.X),N.Int128Mul(n.X-o.X,r.Y-s.Y)):e.Cast_Int64((n.Y-o.Y)*(r.X-s.X))-e.Cast_Int64((n.X-o.X)*(r.Y-s.Y))==0)},e.ClipperBase.SlopesEqual3=function(t,i,n){return n?N.op_Equality(N.Int128Mul(t.Delta.Y,i.Delta.X),N.Int128Mul(t.Delta.X,i.Delta.Y)):e.Cast_Int64(t.Delta.Y*i.Delta.X)==e.Cast_Int64(t.Delta.X*i.Delta.Y)},e.ClipperBase.SlopesEqual4=function(t,i,n,o){return o?N.op_Equality(N.Int128Mul(t.Y-i.Y,i.X-n.X),N.Int128Mul(t.X-i.X,i.Y-n.Y)):e.Cast_Int64((t.Y-i.Y)*(i.X-n.X))-e.Cast_Int64((t.X-i.X)*(i.Y-n.Y))==0},e.ClipperBase.SlopesEqual5=function(t,i,n,o,r){return r?N.op_Equality(N.Int128Mul(t.Y-i.Y,n.X-o.X),N.Int128Mul(t.X-i.X,n.Y-o.Y)):e.Cast_Int64((t.Y-i.Y)*(n.X-o.X))-e.Cast_Int64((t.X-i.X)*(n.Y-o.Y))==0},e.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,i=this.m_edges.length;t<i;++t){for(var n=0,o=this.m_edges[t].length;n<o;++n)this.m_edges[t][n]=null;e.Clear(this.m_edges[t])}e.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},e.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},e.ClipperBase.prototype.RangeTest=function(t,i){i.Value?(t.X>e.ClipperBase.hiRange||t.Y>e.ClipperBase.hiRange||-t.X>e.ClipperBase.hiRange||-t.Y>e.ClipperBase.hiRange)&&e.Error("Coordinate outside allowed range in RangeTest()."):(t.X>e.ClipperBase.loRange||t.Y>e.ClipperBase.loRange||-t.X>e.ClipperBase.loRange||-t.Y>e.ClipperBase.loRange)&&(i.Value=!0,this.RangeTest(t,i))},e.ClipperBase.prototype.InitEdge=function(t,i,n,o){t.Next=i,t.Prev=n,t.Curr.X=o.X,t.Curr.Y=o.Y,e.use_xyz&&(t.Curr.Z=o.Z),t.OutIdx=-1},e.ClipperBase.prototype.InitEdge2=function(t,i){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,e.use_xyz&&(t.Bot.Z=t.Curr.Z),t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y,e.use_xyz&&(t.Top.Z=t.Next.Curr.Z)):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,e.use_xyz&&(t.Top.Z=t.Curr.Z),t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y,e.use_xyz&&(t.Bot.Z=t.Next.Curr.Z)),this.SetDx(t),t.PolyTyp=i},e.ClipperBase.prototype.FindNextLocMin=function(t){for(var i;;){for(;e.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||e.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=e.ClipperBase.horizontal&&t.Prev.Dx!=e.ClipperBase.horizontal)break;for(;t.Prev.Dx==e.ClipperBase.horizontal;)t=t.Prev;for(i=t;t.Dx==e.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){i.Prev.Bot.X<t.Bot.X&&(t=i);break}}return t},e.ClipperBase.prototype.ProcessBound=function(t,i){var n,o,r=t;if(r.OutIdx==e.ClipperBase.Skip){if(t=r,i){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=r&&t.Dx==e.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=r&&t.Dx==e.ClipperBase.horizontal;)t=t.Next}if(t==r)r=i?t.Next:t.Prev;else{t=i?r.Next:r.Prev;var s=new e.LocalMinima;s.Next=null,s.Y=t.Bot.Y,s.LeftBound=null,s.RightBound=t,t.WindDelta=0,r=this.ProcessBound(t,i),this.InsertLocalMinima(s)}return r}if(t.Dx==e.ClipperBase.horizontal&&(n=i?t.Prev:t.Next).OutIdx!=e.ClipperBase.Skip&&(n.Dx==e.ClipperBase.horizontal?n.Bot.X!=t.Bot.X&&n.Top.X!=t.Bot.X&&this.ReverseHorizontal(t):n.Bot.X!=t.Bot.X&&this.ReverseHorizontal(t)),n=t,i){for(;r.Top.Y==r.Next.Bot.Y&&r.Next.OutIdx!=e.ClipperBase.Skip;)r=r.Next;if(r.Dx==e.ClipperBase.horizontal&&r.Next.OutIdx!=e.ClipperBase.Skip){for(o=r;o.Prev.Dx==e.ClipperBase.horizontal;)o=o.Prev;o.Prev.Top.X==r.Next.Top.X?i||(r=o.Prev):o.Prev.Top.X>r.Next.Top.X&&(r=o.Prev)}for(;t!=r;)t.NextInLML=t.Next,t.Dx==e.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==e.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),r=r.Next}else{for(;r.Top.Y==r.Prev.Bot.Y&&r.Prev.OutIdx!=e.ClipperBase.Skip;)r=r.Prev;if(r.Dx==e.ClipperBase.horizontal&&r.Prev.OutIdx!=e.ClipperBase.Skip){for(o=r;o.Next.Dx==e.ClipperBase.horizontal;)o=o.Next;o.Next.Top.X==r.Prev.Top.X?i||(r=o.Next):o.Next.Top.X>r.Prev.Top.X&&(r=o.Next)}for(;t!=r;)t.NextInLML=t.Prev,t.Dx==e.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==e.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),r=r.Prev}return r},e.ClipperBase.prototype.AddPath=function(t,i,n){e.use_lines?n||i!=e.PolyType.ptClip||e.Error("AddPath: Open paths must be subject."):n||e.Error("AddPath: Open paths have been disabled.");var o=t.length-1;if(n)for(;o>0&&e.IntPoint.op_Equality(t[o],t[0]);)--o;for(;o>0&&e.IntPoint.op_Equality(t[o],t[o-1]);)--o;if(n&&o<2||!n&&o<1)return!1;for(var r=new Array,s=0;s<=o;s++)r.push(new e.TEdge);var l=!0;r[1].Curr.X=t[1].X,r[1].Curr.Y=t[1].Y,e.use_xyz&&(r[1].Curr.Z=t[1].Z);var p={Value:this.m_UseFullRange};this.RangeTest(t[0],p),this.m_UseFullRange=p.Value,p.Value=this.m_UseFullRange,this.RangeTest(t[o],p),this.m_UseFullRange=p.Value,this.InitEdge(r[0],r[1],r[o],t[0]),this.InitEdge(r[o],r[0],r[o-1],t[o]);for(s=o-1;s>=1;--s)p.Value=this.m_UseFullRange,this.RangeTest(t[s],p),this.m_UseFullRange=p.Value,this.InitEdge(r[s],r[s+1],r[s-1],t[s]);for(var h,u=r[0],a=u,f=u;;)if(a.Curr!=a.Next.Curr||!n&&a.Next==u){if(a.Prev==a.Next)break;if(!n||!e.ClipperBase.SlopesEqual(a.Prev.Curr,a.Curr,a.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(a.Prev.Curr,a.Curr,a.Next.Curr)){if((a=a.Next)==f||!n&&a.Next==u)break}else a==u&&(u=a.Next),f=a=(a=this.RemoveEdge(a)).Prev}else{if(a==a.Next)break;a==u&&(u=a.Next),f=a=this.RemoveEdge(a)}if(!n&&a==a.Next||n&&a.Prev==a.Next)return!1;n||(this.m_HasOpenPaths=!0,u.Prev.OutIdx=e.ClipperBase.Skip),a=u;do{this.InitEdge2(a,i),a=a.Next,l&&a.Curr.Y!=u.Curr.Y&&(l=!1)}while(a!=u);if(l){if(n)return!1;for(a.Prev.OutIdx=e.ClipperBase.Skip,a.Prev.Bot.X<a.Prev.Top.X&&this.ReverseHorizontal(a.Prev),(P=new e.LocalMinima).Next=null,P.Y=a.Bot.Y,P.LeftBound=null,P.RightBound=a,P.RightBound.Side=e.EdgeSide.esRight,P.RightBound.WindDelta=0;a.Next.OutIdx!=e.ClipperBase.Skip;)a.NextInLML=a.Next,a.Bot.X!=a.Prev.Top.X&&this.ReverseHorizontal(a),a=a.Next;return this.InsertLocalMinima(P),this.m_edges.push(r),!0}this.m_edges.push(r);var d=null;for(e.IntPoint.op_Equality(a.Prev.Bot,a.Prev.Top)&&(a=a.Next);(a=this.FindNextLocMin(a))!=d;){var P;null==d&&(d=a),(P=new e.LocalMinima).Next=null,P.Y=a.Bot.Y,a.Dx<a.Prev.Dx?(P.LeftBound=a.Prev,P.RightBound=a,h=!1):(P.LeftBound=a,P.RightBound=a.Prev,h=!0),P.LeftBound.Side=e.EdgeSide.esLeft,P.RightBound.Side=e.EdgeSide.esRight,n?P.LeftBound.Next==P.RightBound?P.LeftBound.WindDelta=-1:P.LeftBound.WindDelta=1:P.LeftBound.WindDelta=0,P.RightBound.WindDelta=-P.LeftBound.WindDelta,(a=this.ProcessBound(P.LeftBound,h)).OutIdx==e.ClipperBase.Skip&&(a=this.ProcessBound(a,h));var m=this.ProcessBound(P.RightBound,!h);m.OutIdx==e.ClipperBase.Skip&&(m=this.ProcessBound(m,!h)),P.LeftBound.OutIdx==e.ClipperBase.Skip?P.LeftBound=null:P.RightBound.OutIdx==e.ClipperBase.Skip&&(P.RightBound=null),this.InsertLocalMinima(P),h||(a=m)}return!0},e.ClipperBase.prototype.AddPaths=function(t,e,i){for(var n=!1,o=0,r=t.length;o<r;++o)this.AddPath(t[o],e,i)&&(n=!0);return n},e.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,i,n){return!(e.IntPoint.op_Equality(t,n)||e.IntPoint.op_Equality(t,i)||e.IntPoint.op_Equality(n,i))&&(t.X!=n.X?i.X>t.X==i.X<n.X:i.Y>t.Y==i.Y<n.Y)},e.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},e.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=e.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},e.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},e.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},e.ClipperBase.prototype.ReverseHorizontal=function(t){var i=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=i,e.use_xyz&&(i=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=i)},e.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var i=t.LeftBound;null!=i&&(i.Curr.X=i.Bot.X,i.Curr.Y=i.Bot.Y,e.use_xyz&&(i.Curr.Z=i.Bot.Z),i.Side=e.EdgeSide.esLeft,i.OutIdx=e.ClipperBase.Unassigned),null!=(i=t.RightBound)&&(i.Curr.X=i.Bot.X,i.Curr.Y=i.Bot.Y,e.use_xyz&&(i.Curr.Z=i.Bot.Z),i.Side=e.EdgeSide.esRight,i.OutIdx=e.ClipperBase.Unassigned),t=t.Next}},e.Clipper=function(t){void 0===t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=e.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=e.PolyFillType.pftEvenOdd,this.m_SubjFillType=e.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,e.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=e.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!=(1&t),this.StrictlySimple=0!=(2&t),this.PreserveCollinear=0!=(4&t),e.use_xyz&&(this.ZFillFunction=null)},e.Clipper.ioReverseSolution=1,e.Clipper.ioStrictlySimple=2,e.Clipper.ioPreserveCollinear=4,e.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),e.ClipperBase.prototype.Clear.call(this))},e.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},e.Clipper.prototype.Reset=function(){e.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},e.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new e.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){(n=new e.Scanbeam).Y=t,n.Next=this.m_Scanbeam,this.m_Scanbeam=n}else{for(var i=this.m_Scanbeam;null!==i.Next&&t<=i.Next.Y;)i=i.Next;if(t==i.Y)return;var n;(n=new e.Scanbeam).Y=t,n.Next=i.Next,i.Next=n}},e.Clipper.prototype.Execute=function(){var t=arguments,i=t.length,n=t[1]instanceof e.PolyTree;if(4==i&&!n){var o=t[0],r=t[1],s=t[2],l=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&e.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,e.Clear(r),this.m_SubjFillType=s,this.m_ClipFillType=l,this.m_ClipType=o,this.m_UsingPolyTree=!1;try{(h=this.ExecuteInternal())&&this.BuildResult(r)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return h}if(4==i&&n){o=t[0];var p=t[1];s=t[2],l=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=s,this.m_ClipFillType=l,this.m_ClipType=o,this.m_UsingPolyTree=!0;try{var h;(h=this.ExecuteInternal())&&this.BuildResult2(p)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return h}if(2==i&&!n){o=t[0],r=t[1];return this.Execute(o,r,e.PolyFillType.pftEvenOdd,e.PolyFillType.pftEvenOdd)}if(2==i&&n){o=t[0],p=t[1];return this.Execute(o,p,e.PolyFillType.pftEvenOdd,e.PolyFillType.pftEvenOdd)}},e.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole==t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},e.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),e.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var i=this.PopScanbeam();if(!this.ProcessIntersections(i))return!1;this.ProcessEdgesAtTopOfScanbeam(i),t=i}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var n=0,o=this.m_PolyOuts.length;n<o;n++){null===(r=this.m_PolyOuts[n]).Pts||r.IsOpen||(r.IsHole^this.ReverseSolution)==this.Area(r)>0&&this.ReversePolyPtLinks(r.Pts)}this.JoinCommonEdges();for(n=0,o=this.m_PolyOuts.length;n<o;n++){var r;null===(r=this.m_PolyOuts[n]).Pts||r.IsOpen||this.FixupOutPolygon(r)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{e.Clear(this.m_Joins),e.Clear(this.m_GhostJoins)}},e.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y;return this.m_Scanbeam=this.m_Scanbeam.Next,t},e.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,i=this.m_PolyOuts.length;t<i;++t)this.DisposeOutRec(t);e.Clear(this.m_PolyOuts)},e.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];e.Pts=null,e=null,this.m_PolyOuts[t]=null},e.Clipper.prototype.AddJoin=function(t,i,n){var o=new e.Join;o.OutPt1=t,o.OutPt2=i,o.OffPt.X=n.X,o.OffPt.Y=n.Y,e.use_xyz&&(o.OffPt.Z=n.Z),this.m_Joins.push(o)},e.Clipper.prototype.AddGhostJoin=function(t,i){var n=new e.Join;n.OutPt1=t,n.OffPt.X=i.X,n.OffPt.Y=i.Y,e.use_xyz&&(n.OffPt.Z=i.Z),this.m_GhostJoins.push(n)},e.Clipper.prototype.SetZ=function(t,i,n){if(null!==this.ZFillFunction){if(0!=t.Z||null===this.ZFillFunction)return;e.IntPoint.op_Equality(t,i.Bot)?t.Z=i.Bot.Z:e.IntPoint.op_Equality(t,i.Top)?t.Z=i.Top.Z:e.IntPoint.op_Equality(t,n.Bot)?t.Z=n.Bot.Z:e.IntPoint.op_Equality(t,n.Top)?t.Z=n.Top.Z:this.ZFillFunction(i.Bot,i.Top,n.Bot,n.Top,t)}},e.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var i=this.m_CurrentLM.LeftBound,n=this.m_CurrentLM.RightBound;this.PopLocalMinima();var o=null;if(null===i?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(o=this.AddOutPt(n,n.Bot))):null==n?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(o=this.AddOutPt(i,i.Bot)),this.InsertScanbeam(i.Top.Y)):(this.InsertEdgeIntoAEL(i,null),this.InsertEdgeIntoAEL(n,i),this.SetWindingCount(i),n.WindCnt=i.WindCnt,n.WindCnt2=i.WindCnt2,this.IsContributing(i)&&(o=this.AddLocalMinPoly(i,n,i.Bot)),this.InsertScanbeam(i.Top.Y)),null!=n&&(e.ClipperBase.IsHorizontal(n)?this.AddEdgeToSEL(n):this.InsertScanbeam(n.Top.Y)),null!=i&&null!=n){if(null!==o&&e.ClipperBase.IsHorizontal(n)&&this.m_GhostJoins.length>0&&0!==n.WindDelta)for(var r=0,s=this.m_GhostJoins.length;r<s;r++){var l=this.m_GhostJoins[r];this.HorzSegmentsOverlap(l.OutPt1.Pt.X,l.OffPt.X,n.Bot.X,n.Top.X)&&this.AddJoin(l.OutPt1,o,l.OffPt)}if(i.OutIdx>=0&&null!==i.PrevInAEL&&i.PrevInAEL.Curr.X==i.Bot.X&&i.PrevInAEL.OutIdx>=0&&e.ClipperBase.SlopesEqual(i.PrevInAEL,i,this.m_UseFullRange)&&0!==i.WindDelta&&0!==i.PrevInAEL.WindDelta){var p=this.AddOutPt(i.PrevInAEL,i.Bot);this.AddJoin(o,p,i.Top)}if(i.NextInAEL!=n){if(n.OutIdx>=0&&n.PrevInAEL.OutIdx>=0&&e.ClipperBase.SlopesEqual(n.PrevInAEL,n,this.m_UseFullRange)&&0!==n.WindDelta&&0!==n.PrevInAEL.WindDelta){p=this.AddOutPt(n.PrevInAEL,n.Bot);this.AddJoin(o,p,n.Top)}var h=i.NextInAEL;if(null!==h)for(;h!=n;)this.IntersectEdges(n,h,i.Curr,!1),h=h.NextInAEL}}}},e.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},e.Clipper.prototype.E2InsertsBeforeE1=function(t,i){return i.Curr.X==t.Curr.X?i.Top.Y>t.Top.Y?i.Top.X<e.Clipper.TopX(t,i.Top.Y):t.Top.X>e.Clipper.TopX(i,t.Top.Y):i.Curr.X<t.Curr.X},e.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==e.PolyType.ptSubject?this.m_SubjFillType==e.PolyFillType.pftEvenOdd:this.m_ClipFillType==e.PolyFillType.pftEvenOdd},e.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==e.PolyType.ptSubject?this.m_ClipFillType==e.PolyFillType.pftEvenOdd:this.m_SubjFillType==e.PolyFillType.pftEvenOdd},e.Clipper.prototype.IsContributing=function(t){var i,n;switch(t.PolyTyp==e.PolyType.ptSubject?(i=this.m_SubjFillType,n=this.m_ClipFillType):(i=this.m_ClipFillType,n=this.m_SubjFillType),i){case e.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case e.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case e.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(-1!=t.WindCnt)return!1}switch(this.m_ClipType){case e.ClipType.ctIntersection:switch(n){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case e.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case e.ClipType.ctUnion:switch(n){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return 0===t.WindCnt2;case e.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case e.ClipType.ctDifference:if(t.PolyTyp==e.PolyType.ptSubject)switch(n){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return 0===t.WindCnt2;case e.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(n){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case e.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case e.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(n){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return 0===t.WindCnt2;case e.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},e.Clipper.prototype.SetWindingCount=function(t){for(var i=t.PrevInAEL;null!==i&&(i.PolyTyp!=t.PolyTyp||0===i.WindDelta);)i=i.PrevInAEL;if(null===i)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,i=this.m_ActiveEdges;else if(0===t.WindDelta&&this.m_ClipType!=e.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=i.WindCnt2,i=i.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var n=!0,o=i.PrevInAEL;null!==o;)o.PolyTyp==i.PolyTyp&&0!==o.WindDelta&&(n=!n),o=o.PrevInAEL;t.WindCnt=n?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=i.WindCnt2,i=i.NextInAEL}else i.WindCnt*i.WindDelta<0?Math.abs(i.WindCnt)>1?i.WindDelta*t.WindDelta<0?t.WindCnt=i.WindCnt:t.WindCnt=i.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=i.WindCnt<0?i.WindCnt-1:i.WindCnt+1:i.WindDelta*t.WindDelta<0?t.WindCnt=i.WindCnt:t.WindCnt=i.WindCnt+t.WindDelta,t.WindCnt2=i.WindCnt2,i=i.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;i!=t;)0!==i.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),i=i.NextInAEL;else for(;i!=t;)t.WindCnt2+=i.WindDelta,i=i.NextInAEL},e.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},e.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},e.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!=t.PrevInAEL&&e.NextInAEL!=e.PrevInAEL){if(t.NextInAEL==e)null!==(i=e.NextInAEL)&&(i.PrevInAEL=t),null!==(n=t.PrevInAEL)&&(n.NextInAEL=e),e.PrevInAEL=n,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=i;else if(e.NextInAEL==t){null!==(i=t.NextInAEL)&&(i.PrevInAEL=e),null!==(n=e.PrevInAEL)&&(n.NextInAEL=t),t.PrevInAEL=n,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=i}else{var i=t.NextInAEL,n=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=i,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=n,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},e.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL==e)null!==(i=e.NextInSEL)&&(i.PrevInSEL=t),null!==(n=t.PrevInSEL)&&(n.NextInSEL=e),e.PrevInSEL=n,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i;else if(e.NextInSEL==t){null!==(i=t.NextInSEL)&&(i.PrevInSEL=e),null!==(n=e.PrevInSEL)&&(n.NextInSEL=t),t.PrevInSEL=n,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i}else{var i=t.NextInSEL,n=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=i,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=n,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},e.Clipper.prototype.AddLocalMaxPoly=function(t,e,i){this.AddOutPt(t,i),0==e.WindDelta&&this.AddOutPt(e,i),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},e.Clipper.prototype.AddLocalMinPoly=function(t,i,n){var o,r,s;if(e.ClipperBase.IsHorizontal(i)||t.Dx>i.Dx?(o=this.AddOutPt(t,n),i.OutIdx=t.OutIdx,t.Side=e.EdgeSide.esLeft,i.Side=e.EdgeSide.esRight,s=(r=t).PrevInAEL==i?i.PrevInAEL:r.PrevInAEL):(o=this.AddOutPt(i,n),t.OutIdx=i.OutIdx,t.Side=e.EdgeSide.esRight,i.Side=e.EdgeSide.esLeft,s=(r=i).PrevInAEL==t?t.PrevInAEL:r.PrevInAEL),null!==s&&s.OutIdx>=0&&e.Clipper.TopX(s,n.Y)==e.Clipper.TopX(r,n.Y)&&e.ClipperBase.SlopesEqual(r,s,this.m_UseFullRange)&&0!==r.WindDelta&&0!==s.WindDelta){var l=this.AddOutPt(s,n);this.AddJoin(o,l,r.Top)}return o},e.Clipper.prototype.CreateOutRec=function(){var t=new e.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},e.Clipper.prototype.AddOutPt=function(t,i){var n=t.Side==e.EdgeSide.esLeft;if(t.OutIdx<0){(r=this.CreateOutRec()).IsOpen=0===t.WindDelta;var o=new e.OutPt;return r.Pts=o,o.Idx=r.Idx,o.Pt.X=i.X,o.Pt.Y=i.Y,e.use_xyz&&(o.Pt.Z=i.Z),o.Next=o,o.Prev=o,r.IsOpen||this.SetHoleState(t,r),t.OutIdx=r.Idx,o}var r,s=(r=this.m_PolyOuts[t.OutIdx]).Pts;return n&&e.IntPoint.op_Equality(i,s.Pt)?s:!n&&e.IntPoint.op_Equality(i,s.Prev.Pt)?s.Prev:((o=new e.OutPt).Idx=r.Idx,o.Pt.X=i.X,o.Pt.Y=i.Y,e.use_xyz&&(o.Pt.Z=i.Z),o.Next=s,o.Prev=s.Prev,o.Prev.Next=o,s.Prev=o,n&&(r.Pts=o),o)},e.Clipper.prototype.SwapPoints=function(t,i){var n=new e.IntPoint(t.Value);t.Value.X=i.Value.X,t.Value.Y=i.Value.Y,e.use_xyz&&(t.Value.Z=i.Value.Z),i.Value.X=n.X,i.Value.Y=n.Y,e.use_xyz&&(i.Value.Z=n.Z)},e.Clipper.prototype.HorzSegmentsOverlap=function(t,e,i,n){var o;return t>e&&(o=t,t=e,e=o),i>n&&(o=i,i=n,n=o),t<n&&i<e},e.Clipper.prototype.SetHoleState=function(t,e){for(var i=!1,n=t.PrevInAEL;null!==n;)n.OutIdx>=0&&0!=n.WindDelta&&(i=!i,null===e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[n.OutIdx])),n=n.PrevInAEL;i&&(e.IsHole=!0)},e.Clipper.prototype.GetDx=function(t,i){return t.Y==i.Y?e.ClipperBase.horizontal:(i.X-t.X)/(i.Y-t.Y)},e.Clipper.prototype.FirstIsBottomPt=function(t,i){for(var n=t.Prev;e.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Prev;var o=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=t.Next;e.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Next;var r=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=i.Prev;e.IntPoint.op_Equality(n.Pt,i.Pt)&&n!=i;)n=n.Prev;var s=Math.abs(this.GetDx(i.Pt,n.Pt));for(n=i.Next;e.IntPoint.op_Equality(n.Pt,i.Pt)&&n!=i;)n=n.Next;var l=Math.abs(this.GetDx(i.Pt,n.Pt));return o>=s&&o>=l||r>=s&&r>=l},e.Clipper.prototype.GetBottomPt=function(t){for(var i=null,n=t.Next;n!=t;)n.Pt.Y>t.Pt.Y?(t=n,i=null):n.Pt.Y==t.Pt.Y&&n.Pt.X<=t.Pt.X&&(n.Pt.X<t.Pt.X?(i=null,t=n):n.Next!=t&&n.Prev!=t&&(i=n)),n=n.Next;if(null!==i)for(;i!=n;)for(this.FirstIsBottomPt(n,i)||(t=i),i=i.Next;e.IntPoint.op_Inequality(i.Pt,t.Pt);)i=i.Next;return t},e.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var i=t.BottomPt,n=e.BottomPt;return i.Pt.Y>n.Pt.Y?t:i.Pt.Y<n.Pt.Y?e:i.Pt.X<n.Pt.X?t:i.Pt.X>n.Pt.X?e:i.Next==i?e:n.Next==n?t:this.FirstIsBottomPt(i,n)?t:e},e.Clipper.prototype.Param1RightOfParam2=function(t,e){do{if((t=t.FirstLeft)==e)return!0}while(null!==t);return!1},e.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!=this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},e.Clipper.prototype.AppendPolygon=function(t,i){var n,o=this.m_PolyOuts[t.OutIdx],r=this.m_PolyOuts[i.OutIdx];n=this.Param1RightOfParam2(o,r)?r:this.Param1RightOfParam2(r,o)?o:this.GetLowermostRec(o,r);var s,l=o.Pts,p=l.Prev,h=r.Pts,u=h.Prev;t.Side==e.EdgeSide.esLeft?(i.Side==e.EdgeSide.esLeft?(this.ReversePolyPtLinks(h),h.Next=l,l.Prev=h,p.Next=u,u.Prev=p,o.Pts=u):(u.Next=l,l.Prev=u,h.Prev=p,p.Next=h,o.Pts=h),s=e.EdgeSide.esLeft):(i.Side==e.EdgeSide.esRight?(this.ReversePolyPtLinks(h),p.Next=u,u.Prev=p,h.Next=l,l.Prev=h):(p.Next=h,h.Prev=p,l.Prev=u,u.Next=l),s=e.EdgeSide.esRight),o.BottomPt=null,n==r&&(r.FirstLeft!=o&&(o.FirstLeft=r.FirstLeft),o.IsHole=r.IsHole),r.Pts=null,r.BottomPt=null,r.FirstLeft=o;var a=t.OutIdx,f=i.OutIdx;t.OutIdx=-1,i.OutIdx=-1;for(var d=this.m_ActiveEdges;null!==d;){if(d.OutIdx==f){d.OutIdx=a,d.Side=s;break}d=d.NextInAEL}r.Idx=o.Idx},e.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,i;e=t;do{i=e.Next,e.Next=e.Prev,e.Prev=i,e=i}while(e!=t)}},e.Clipper.SwapSides=function(t,e){var i=t.Side;t.Side=e.Side,e.Side=i},e.Clipper.SwapPolyIndexes=function(t,e){var i=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=i},e.Clipper.prototype.IntersectEdges=function(t,i,n){var o=t.OutIdx>=0,r=i.OutIdx>=0;if(e.use_xyz&&this.SetZ(n,t,i),!e.use_lines||0!==t.WindDelta&&0!==i.WindDelta){if(t.PolyTyp==i.PolyTyp)if(this.IsEvenOddFillType(t)){var s=t.WindCnt;t.WindCnt=i.WindCnt,i.WindCnt=s}else t.WindCnt+i.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=i.WindDelta,i.WindCnt-t.WindDelta==0?i.WindCnt=-i.WindCnt:i.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(i)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=i.WindDelta,this.IsEvenOddFillType(t)?i.WindCnt2=0===i.WindCnt2?1:0:i.WindCnt2-=t.WindDelta;var l,p,h,u,a,f;switch(t.PolyTyp==e.PolyType.ptSubject?(l=this.m_SubjFillType,h=this.m_ClipFillType):(l=this.m_ClipFillType,h=this.m_SubjFillType),i.PolyTyp==e.PolyType.ptSubject?(p=this.m_SubjFillType,u=this.m_ClipFillType):(p=this.m_ClipFillType,u=this.m_SubjFillType),l){case e.PolyFillType.pftPositive:a=t.WindCnt;break;case e.PolyFillType.pftNegative:a=-t.WindCnt;break;default:a=Math.abs(t.WindCnt)}switch(p){case e.PolyFillType.pftPositive:f=i.WindCnt;break;case e.PolyFillType.pftNegative:f=-i.WindCnt;break;default:f=Math.abs(i.WindCnt)}if(o&&r)0!=a&&1!=a||0!=f&&1!=f||t.PolyTyp!=i.PolyTyp&&this.m_ClipType!=e.ClipType.ctXor?this.AddLocalMaxPoly(t,i,n):(this.AddOutPt(t,n),this.AddOutPt(i,n),e.Clipper.SwapSides(t,i),e.Clipper.SwapPolyIndexes(t,i));else if(o)0!==f&&1!=f||(this.AddOutPt(t,n),e.Clipper.SwapSides(t,i),e.Clipper.SwapPolyIndexes(t,i));else if(r)0!==a&&1!=a||(this.AddOutPt(i,n),e.Clipper.SwapSides(t,i),e.Clipper.SwapPolyIndexes(t,i));else if(!(0!=a&&1!=a||0!=f&&1!=f)){var d,P;switch(h){case e.PolyFillType.pftPositive:d=t.WindCnt2;break;case e.PolyFillType.pftNegative:d=-t.WindCnt2;break;default:d=Math.abs(t.WindCnt2)}switch(u){case e.PolyFillType.pftPositive:P=i.WindCnt2;break;case e.PolyFillType.pftNegative:P=-i.WindCnt2;break;default:P=Math.abs(i.WindCnt2)}if(t.PolyTyp!=i.PolyTyp)this.AddLocalMinPoly(t,i,n);else if(1==a&&1==f)switch(this.m_ClipType){case e.ClipType.ctIntersection:d>0&&P>0&&this.AddLocalMinPoly(t,i,n);break;case e.ClipType.ctUnion:d<=0&&P<=0&&this.AddLocalMinPoly(t,i,n);break;case e.ClipType.ctDifference:(t.PolyTyp==e.PolyType.ptClip&&d>0&&P>0||t.PolyTyp==e.PolyType.ptSubject&&d<=0&&P<=0)&&this.AddLocalMinPoly(t,i,n);break;case e.ClipType.ctXor:this.AddLocalMinPoly(t,i,n)}else e.Clipper.SwapSides(t,i)}}else{if(0==t.WindDelta&&0==i.WindDelta)return;t.PolyTyp==i.PolyTyp&&t.WindDelta!=i.WindDelta&&this.m_ClipType==e.ClipType.ctUnion?0===t.WindDelta?r&&(this.AddOutPt(t,n),o&&(t.OutIdx=-1)):o&&(this.AddOutPt(i,n),r&&(i.OutIdx=-1)):t.PolyTyp!=i.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(i.WindCnt)||this.m_ClipType==e.ClipType.ctUnion&&0!==i.WindCnt2?0!==i.WindDelta||1!=Math.abs(t.WindCnt)||this.m_ClipType==e.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(i,n),r&&(i.OutIdx=-1)):(this.AddOutPt(t,n),o&&(t.OutIdx=-1)))}},e.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,i=t.NextInAEL;null===e&&null===i&&t!=this.m_ActiveEdges||(null!==e?e.NextInAEL=i:this.m_ActiveEdges=i,null!==i&&(i.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},e.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,i=t.NextInSEL;null===e&&null===i&&t!=this.m_SortedEdges||(null!==e?e.NextInSEL=i:this.m_SortedEdges=i,null!==i&&(i.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},e.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&e.Error("UpdateEdgeIntoAEL: invalid call");var i=t.PrevInAEL,n=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==i?i.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==n&&(n.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,(t=t.NextInLML).Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,e.use_xyz&&(t.Curr.Z=t.Bot.Z),t.PrevInAEL=i,t.NextInAEL=n,e.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},e.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;null!==e;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},e.Clipper.prototype.GetHorzDirection=function(t,i){t.Bot.X<t.Top.X?(i.Left=t.Bot.X,i.Right=t.Top.X,i.Dir=e.Direction.dLeftToRight):(i.Left=t.Top.X,i.Right=t.Bot.X,i.Dir=e.Direction.dRightToLeft)},e.Clipper.prototype.ProcessHorizontal=function(t,i){var n={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,n);for(var o=n.Dir,r=n.Left,s=n.Right,l=t,p=null;null!==l.NextInLML&&e.ClipperBase.IsHorizontal(l.NextInLML);)l=l.NextInLML;for(null===l.NextInLML&&(p=this.GetMaximaPair(l));;){for(var h=t==l,u=this.GetNextInAEL(t,o);null!==u&&!(u.Curr.X==t.Top.X&&null!==t.NextInLML&&u.Dx<t.NextInLML.Dx);){var a=this.GetNextInAEL(u,o);if(o==e.Direction.dLeftToRight&&u.Curr.X<=s||o==e.Direction.dRightToLeft&&u.Curr.X>=r){if(u==p&&h){if(t.OutIdx>=0){for(var f=this.AddOutPt(t,t.Top),d=this.m_SortedEdges;null!==d;){if(d.OutIdx>=0&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,d.Bot.X,d.Top.X)){var P=this.AddOutPt(d,d.Bot);this.AddJoin(P,f,d.Top)}d=d.NextInSEL}this.AddGhostJoin(f,t.Bot),this.AddLocalMaxPoly(t,p,t.Top)}return this.DeleteFromAEL(t),void this.DeleteFromAEL(p)}if(o==e.Direction.dLeftToRight){var m=new e.IntPoint(u.Curr.X,t.Curr.Y);this.IntersectEdges(t,u,m)}else{m=new e.IntPoint(u.Curr.X,t.Curr.Y);this.IntersectEdges(u,t,m)}this.SwapPositionsInAEL(t,u)}else if(o==e.Direction.dLeftToRight&&u.Curr.X>=s||o==e.Direction.dRightToLeft&&u.Curr.X<=r)break;u=a}if(null===t.NextInLML||!e.ClipperBase.IsHorizontal(t.NextInLML))break;(t=this.UpdateEdgeIntoAEL(t)).OutIdx>=0&&this.AddOutPt(t,t.Bot);n={Dir:o,Left:r,Right:s};this.GetHorzDirection(t,n),o=n.Dir,r=n.Left,s=n.Right}if(null!==t.NextInLML)if(t.OutIdx>=0){f=this.AddOutPt(t,t.Top);if(i&&this.AddGhostJoin(f,t.Bot),0===(t=this.UpdateEdgeIntoAEL(t)).WindDelta)return;var y=t.PrevInAEL;a=t.NextInAEL;if(null!==y&&y.Curr.X==t.Bot.X&&y.Curr.Y==t.Bot.Y&&0!==y.WindDelta&&y.OutIdx>=0&&y.Curr.Y>y.Top.Y&&e.ClipperBase.SlopesEqual(t,y,this.m_UseFullRange)){P=this.AddOutPt(y,t.Bot);this.AddJoin(f,P,t.Top)}else if(null!==a&&a.Curr.X==t.Bot.X&&a.Curr.Y==t.Bot.Y&&0!==a.WindDelta&&a.OutIdx>=0&&a.Curr.Y>a.Top.Y&&e.ClipperBase.SlopesEqual(t,a,this.m_UseFullRange)){P=this.AddOutPt(a,t.Bot);this.AddJoin(f,P,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t)},e.Clipper.prototype.GetNextInAEL=function(t,i){return i==e.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},e.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},e.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y==e&&null===t.NextInLML},e.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&null!==t.NextInLML},e.Clipper.prototype.GetMaximaPair=function(t){var i=null;return e.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?i=t.Next:e.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(i=t.Prev),null===i||-2!=i.OutIdx&&(i.NextInAEL!=i.PrevInAEL||e.ClipperBase.IsHorizontal(i))?i:null},e.Clipper.prototype.ProcessIntersections=function(t){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(t){this.m_SortedEdges=null,this.m_IntersectList.length=0,e.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},e.Clipper.prototype.BuildIntersectList=function(t){if(null!==this.m_ActiveEdges){var i=this.m_ActiveEdges;for(this.m_SortedEdges=i;null!==i;)i.PrevInSEL=i.PrevInAEL,i.NextInSEL=i.NextInAEL,i.Curr.X=e.Clipper.TopX(i,t),i=i.NextInAEL;for(var n=!0;n&&null!==this.m_SortedEdges;){for(n=!1,i=this.m_SortedEdges;null!==i.NextInSEL;){var o=i.NextInSEL,r=new e.IntPoint;if(i.Curr.X>o.Curr.X){this.IntersectPoint(i,o,r);var s=new e.IntersectNode;s.Edge1=i,s.Edge2=o,s.Pt.X=r.X,s.Pt.Y=r.Y,e.use_xyz&&(s.Pt.Z=r.Z),this.m_IntersectList.push(s),this.SwapPositionsInSEL(i,o),n=!0}else i=o}if(null===i.PrevInSEL)break;i.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},e.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},e.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},e.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var i=e+1;i<t&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i==t)return!1;var n=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[i],this.m_IntersectList[i]=n}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},e.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var i=this.m_IntersectList[t];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0};r.msie?e.Clipper.Round=function(t){return t<0?Math.ceil(t-.5):Math.round(t)}:r.chromium?e.Clipper.Round=function(t){return t<0?-Math.round(Math.abs(t)):Math.round(t)}:r.safari?e.Clipper.Round=function(t){return t<0?(t-=.5)<-2147483648?Math.ceil(t):0|t:(t+=.5)>2147483647?Math.floor(t):0|t}:e.Clipper.Round=function(t){return t<0?Math.ceil(t-.5):Math.floor(t+.5)},e.Clipper.TopX=function(t,i){return i==t.Top.Y?t.Top.X:t.Bot.X+e.Clipper.Round(t.Dx*(i-t.Bot.Y))},e.Clipper.prototype.IntersectPoint=function(t,i,n){var o,r;if(n.X=0,n.Y=0,t.Dx==i.Dx)return n.Y=t.Curr.Y,void(n.X=e.Clipper.TopX(t,n.Y));if(0===t.Delta.X)n.X=t.Bot.X,e.ClipperBase.IsHorizontal(i)?n.Y=i.Bot.Y:(r=i.Bot.Y-i.Bot.X/i.Dx,n.Y=e.Clipper.Round(n.X/i.Dx+r));else if(0===i.Delta.X)n.X=i.Bot.X,e.ClipperBase.IsHorizontal(t)?n.Y=t.Bot.Y:(o=t.Bot.Y-t.Bot.X/t.Dx,n.Y=e.Clipper.Round(n.X/t.Dx+o));else{o=t.Bot.X-t.Bot.Y*t.Dx;var s=((r=i.Bot.X-i.Bot.Y*i.Dx)-o)/(t.Dx-i.Dx);n.Y=e.Clipper.Round(s),Math.abs(t.Dx)<Math.abs(i.Dx)?n.X=e.Clipper.Round(t.Dx*s+o):n.X=e.Clipper.Round(i.Dx*s+r)}if(n.Y<t.Top.Y||n.Y<i.Top.Y){if(t.Top.Y>i.Top.Y)return n.Y=t.Top.Y,n.X=e.Clipper.TopX(i,t.Top.Y),n.X<t.Top.X;n.Y=i.Top.Y,Math.abs(t.Dx)<Math.abs(i.Dx)?n.X=e.Clipper.TopX(t,n.Y):n.X=e.Clipper.TopX(i,n.Y)}n.Y>t.Curr.Y&&(n.Y=t.Curr.Y,Math.abs(t.Dx)>Math.abs(i.Dx)?n.X=e.Clipper.TopX(i,n.Y):n.X=e.Clipper.TopX(t,n.Y))},e.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var i=this.m_ActiveEdges;null!==i;){var n=this.IsMaxima(i,t);if(n){var o=this.GetMaximaPair(i);n=null===o||!e.ClipperBase.IsHorizontal(o)}if(n){var r=i.PrevInAEL;this.DoMaxima(i),i=null===r?this.m_ActiveEdges:r.NextInAEL}else{if(this.IsIntermediate(i,t)&&e.ClipperBase.IsHorizontal(i.NextInLML)?((i=this.UpdateEdgeIntoAEL(i)).OutIdx>=0&&this.AddOutPt(i,i.Bot),this.AddEdgeToSEL(i)):(i.Curr.X=e.Clipper.TopX(i,t),i.Curr.Y=t),this.StrictlySimple){r=i.PrevInAEL;if(i.OutIdx>=0&&0!==i.WindDelta&&null!==r&&r.OutIdx>=0&&r.Curr.X==i.Curr.X&&0!==r.WindDelta){var s=new e.IntPoint(i.Curr);e.use_xyz&&this.SetZ(s,r,i);var l=this.AddOutPt(r,s),p=this.AddOutPt(i,s);this.AddJoin(l,p,s)}}i=i.NextInAEL}}for(this.ProcessHorizontals(!0),i=this.m_ActiveEdges;null!==i;){if(this.IsIntermediate(i,t)){l=null;i.OutIdx>=0&&(l=this.AddOutPt(i,i.Top));r=(i=this.UpdateEdgeIntoAEL(i)).PrevInAEL;var h=i.NextInAEL;if(null!==r&&r.Curr.X==i.Bot.X&&r.Curr.Y==i.Bot.Y&&null!==l&&r.OutIdx>=0&&r.Curr.Y>r.Top.Y&&e.ClipperBase.SlopesEqual(i,r,this.m_UseFullRange)&&0!==i.WindDelta&&0!==r.WindDelta){p=this.AddOutPt(r,i.Bot);this.AddJoin(l,p,i.Top)}else if(null!==h&&h.Curr.X==i.Bot.X&&h.Curr.Y==i.Bot.Y&&null!==l&&h.OutIdx>=0&&h.Curr.Y>h.Top.Y&&e.ClipperBase.SlopesEqual(i,h,this.m_UseFullRange)&&0!==i.WindDelta&&0!==h.WindDelta){p=this.AddOutPt(h,i.Bot);this.AddJoin(l,p,i.Top)}}i=i.NextInAEL}},e.Clipper.prototype.DoMaxima=function(t){var i=this.GetMaximaPair(t);if(null===i)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var n=t.NextInAEL;null!==n&&n!=i;)this.IntersectEdges(t,n,t.Top),this.SwapPositionsInAEL(t,n),n=t.NextInAEL;-1==t.OutIdx&&-1==i.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(i)):t.OutIdx>=0&&i.OutIdx>=0?(t.OutIdx>=0&&this.AddLocalMaxPoly(t,i,t.Top),this.DeleteFromAEL(t),this.DeleteFromAEL(i)):e.use_lines&&0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),i.OutIdx>=0&&(this.AddOutPt(i,t.Top),i.OutIdx=-1),this.DeleteFromAEL(i)):e.Error("DoMaxima error")},e.Clipper.ReversePaths=function(t){for(var e=0,i=t.length;e<i;e++)t[e].reverse()},e.Clipper.Orientation=function(t){return e.Clipper.Area(t)>=0},e.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,i=t;do{e++,i=i.Next}while(i!=t);return e},e.Clipper.prototype.BuildResult=function(t){e.Clear(t);for(var i=0,n=this.m_PolyOuts.length;i<n;i++){var o=this.m_PolyOuts[i];if(null!==o.Pts){var r=o.Pts.Prev,s=this.PointCount(r);if(!(s<2)){for(var l=new Array(s),p=0;p<s;p++)l[p]=r.Pt,r=r.Prev;t.push(l)}}}},e.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var i=0,n=this.m_PolyOuts.length;i<n;i++){var o=this.m_PolyOuts[i],r=this.PointCount(o.Pts);if(!(o.IsOpen&&r<2||!o.IsOpen&&r<3)){this.FixHoleLinkage(o);var s=new e.PolyNode;t.m_AllPolys.push(s),o.PolyNode=s,s.m_polygon.length=r;for(var l=o.Pts.Prev,p=0;p<r;p++)s.m_polygon[p]=l.Pt,l=l.Prev}}for(i=0,n=this.m_PolyOuts.length;i<n;i++){null!==(o=this.m_PolyOuts[i]).PolyNode&&(o.IsOpen?(o.PolyNode.IsOpen=!0,t.AddChild(o.PolyNode)):null!==o.FirstLeft&&null!=o.FirstLeft.PolyNode?o.FirstLeft.PolyNode.AddChild(o.PolyNode):t.AddChild(o.PolyNode))}},e.Clipper.prototype.FixupOutPolygon=function(t){var i=null;t.BottomPt=null;for(var n=t.Pts;;){if(n.Prev==n||n.Prev==n.Next)return void(t.Pts=null);if(e.IntPoint.op_Equality(n.Pt,n.Next.Pt)||e.IntPoint.op_Equality(n.Pt,n.Prev.Pt)||e.ClipperBase.SlopesEqual(n.Prev.Pt,n.Pt,n.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(n.Prev.Pt,n.Pt,n.Next.Pt)))i=null,n.Prev.Next=n.Next,n.Next.Prev=n.Prev,n=n.Prev;else{if(n==i)break;null===i&&(i=n),n=n.Next}}t.Pts=n},e.Clipper.prototype.DupOutPt=function(t,i){var n=new e.OutPt;return n.Pt.X=t.Pt.X,n.Pt.Y=t.Pt.Y,e.use_xyz&&(n.Pt.Z=t.Pt.Z),n.Idx=t.Idx,i?(n.Next=t.Next,n.Prev=t,t.Next.Prev=n,t.Next=n):(n.Prev=t.Prev,n.Next=t,t.Prev.Next=n,t.Prev=n),n},e.Clipper.prototype.GetOverlap=function(t,e,i,n,o){return t<e?i<n?(o.Left=Math.max(t,i),o.Right=Math.min(e,n)):(o.Left=Math.max(t,n),o.Right=Math.min(e,i)):i<n?(o.Left=Math.max(e,i),o.Right=Math.min(t,n)):(o.Left=Math.max(e,n),o.Right=Math.min(t,i)),o.Left<o.Right},e.Clipper.prototype.JoinHorz=function(t,i,n,o,r,s){var l=t.Pt.X>i.Pt.X?e.Direction.dRightToLeft:e.Direction.dLeftToRight,p=n.Pt.X>o.Pt.X?e.Direction.dRightToLeft:e.Direction.dLeftToRight;if(l==p)return!1;if(l==e.Direction.dLeftToRight){for(;t.Next.Pt.X<=r.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==r.Y;)t=t.Next;s&&t.Pt.X!=r.X&&(t=t.Next),i=this.DupOutPt(t,!s),e.IntPoint.op_Inequality(i.Pt,r)&&((t=i).Pt.X=r.X,t.Pt.Y=r.Y,e.use_xyz&&(t.Pt.Z=r.Z),i=this.DupOutPt(t,!s))}else{for(;t.Next.Pt.X>=r.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==r.Y;)t=t.Next;s||t.Pt.X==r.X||(t=t.Next),i=this.DupOutPt(t,s),e.IntPoint.op_Inequality(i.Pt,r)&&((t=i).Pt.X=r.X,t.Pt.Y=r.Y,e.use_xyz&&(t.Pt.Z=r.Z),i=this.DupOutPt(t,s))}if(p==e.Direction.dLeftToRight){for(;n.Next.Pt.X<=r.X&&n.Next.Pt.X>=n.Pt.X&&n.Next.Pt.Y==r.Y;)n=n.Next;s&&n.Pt.X!=r.X&&(n=n.Next),o=this.DupOutPt(n,!s),e.IntPoint.op_Inequality(o.Pt,r)&&((n=o).Pt.X=r.X,n.Pt.Y=r.Y,e.use_xyz&&(n.Pt.Z=r.Z),o=this.DupOutPt(n,!s))}else{for(;n.Next.Pt.X>=r.X&&n.Next.Pt.X<=n.Pt.X&&n.Next.Pt.Y==r.Y;)n=n.Next;s||n.Pt.X==r.X||(n=n.Next),o=this.DupOutPt(n,s),e.IntPoint.op_Inequality(o.Pt,r)&&((n=o).Pt.X=r.X,n.Pt.Y=r.Y,e.use_xyz&&(n.Pt.Z=r.Z),o=this.DupOutPt(n,s))}return l==e.Direction.dLeftToRight==s?(t.Prev=n,n.Next=t,i.Next=o,o.Prev=i):(t.Next=n,n.Prev=t,i.Prev=o,o.Next=i),!0},e.Clipper.prototype.JoinPoints=function(t,i,n){var o=t.OutPt1,r=new e.OutPt,s=t.OutPt2,l=new e.OutPt,p=t.OutPt1.Pt.Y==t.OffPt.Y;if(p&&e.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&e.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){if(i!=n)return!1;for(r=t.OutPt1.Next;r!=o&&e.IntPoint.op_Equality(r.Pt,t.OffPt);)r=r.Next;var h=r.Pt.Y>t.OffPt.Y;for(l=t.OutPt2.Next;l!=s&&e.IntPoint.op_Equality(l.Pt,t.OffPt);)l=l.Next;return h!=l.Pt.Y>t.OffPt.Y&&(h?(r=this.DupOutPt(o,!1),l=this.DupOutPt(s,!0),o.Prev=s,s.Next=o,r.Next=l,l.Prev=r,t.OutPt1=o,t.OutPt2=r,!0):(r=this.DupOutPt(o,!0),l=this.DupOutPt(s,!1),o.Next=s,s.Prev=o,r.Prev=l,l.Next=r,t.OutPt1=o,t.OutPt2=r,!0))}if(p){for(r=o;o.Prev.Pt.Y==o.Pt.Y&&o.Prev!=r&&o.Prev!=s;)o=o.Prev;for(;r.Next.Pt.Y==r.Pt.Y&&r.Next!=o&&r.Next!=s;)r=r.Next;if(r.Next==o||r.Next==s)return!1;for(l=s;s.Prev.Pt.Y==s.Pt.Y&&s.Prev!=l&&s.Prev!=r;)s=s.Prev;for(;l.Next.Pt.Y==l.Pt.Y&&l.Next!=s&&l.Next!=o;)l=l.Next;if(l.Next==s||l.Next==o)return!1;var u={Left:null,Right:null};if(!this.GetOverlap(o.Pt.X,r.Pt.X,s.Pt.X,l.Pt.X,u))return!1;var a,f=u.Left,d=u.Right,P=new e.IntPoint;return o.Pt.X>=f&&o.Pt.X<=d?(P.X=o.Pt.X,P.Y=o.Pt.Y,e.use_xyz&&(P.Z=o.Pt.Z),a=o.Pt.X>r.Pt.X):s.Pt.X>=f&&s.Pt.X<=d?(P.X=s.Pt.X,P.Y=s.Pt.Y,e.use_xyz&&(P.Z=s.Pt.Z),a=s.Pt.X>l.Pt.X):r.Pt.X>=f&&r.Pt.X<=d?(P.X=r.Pt.X,P.Y=r.Pt.Y,e.use_xyz&&(P.Z=r.Pt.Z),a=r.Pt.X>o.Pt.X):(P.X=l.Pt.X,P.Y=l.Pt.Y,e.use_xyz&&(P.Z=l.Pt.Z),a=l.Pt.X>s.Pt.X),t.OutPt1=o,t.OutPt2=s,this.JoinHorz(o,r,s,l,P,a)}for(r=o.Next;e.IntPoint.op_Equality(r.Pt,o.Pt)&&r!=o;)r=r.Next;var m=r.Pt.Y>o.Pt.Y||!e.ClipperBase.SlopesEqual(o.Pt,r.Pt,t.OffPt,this.m_UseFullRange);if(m){for(r=o.Prev;e.IntPoint.op_Equality(r.Pt,o.Pt)&&r!=o;)r=r.Prev;if(r.Pt.Y>o.Pt.Y||!e.ClipperBase.SlopesEqual(o.Pt,r.Pt,t.OffPt,this.m_UseFullRange))return!1}for(l=s.Next;e.IntPoint.op_Equality(l.Pt,s.Pt)&&l!=s;)l=l.Next;var y=l.Pt.Y>s.Pt.Y||!e.ClipperBase.SlopesEqual(s.Pt,l.Pt,t.OffPt,this.m_UseFullRange);if(y){for(l=s.Prev;e.IntPoint.op_Equality(l.Pt,s.Pt)&&l!=s;)l=l.Prev;if(l.Pt.Y>s.Pt.Y||!e.ClipperBase.SlopesEqual(s.Pt,l.Pt,t.OffPt,this.m_UseFullRange))return!1}return r!=o&&l!=s&&r!=l&&(i!=n||m!=y)&&(m?(r=this.DupOutPt(o,!1),l=this.DupOutPt(s,!0),o.Prev=s,s.Next=o,r.Next=l,l.Prev=r,t.OutPt1=o,t.OutPt2=r,!0):(r=this.DupOutPt(o,!0),l=this.DupOutPt(s,!1),o.Next=s,s.Prev=o,r.Prev=l,l.Next=r,t.OutPt1=o,t.OutPt2=r,!0))},e.Clipper.GetBounds=function(t){for(var i=0,n=t.length;i<n&&0==t[i].length;)i++;if(i==n)return new e.IntRect(0,0,0,0);var o=new e.IntRect;for(o.left=t[i][0].X,o.right=o.left,o.top=t[i][0].Y,o.bottom=o.top;i<n;i++)for(var r=0,s=t[i].length;r<s;r++)t[i][r].X<o.left?o.left=t[i][r].X:t[i][r].X>o.right&&(o.right=t[i][r].X),t[i][r].Y<o.top?o.top=t[i][r].Y:t[i][r].Y>o.bottom&&(o.bottom=t[i][r].Y);return o},e.Clipper.prototype.GetBounds2=function(t){var i=t,n=new e.IntRect;for(n.left=t.Pt.X,n.right=t.Pt.X,n.top=t.Pt.Y,n.bottom=t.Pt.Y,t=t.Next;t!=i;)t.Pt.X<n.left&&(n.left=t.Pt.X),t.Pt.X>n.right&&(n.right=t.Pt.X),t.Pt.Y<n.top&&(n.top=t.Pt.Y),t.Pt.Y>n.bottom&&(n.bottom=t.Pt.Y),t=t.Next;return n},e.Clipper.PointInPolygon=function(t,e){var i=0,n=e.length;if(n<3)return 0;for(var o=e[0],r=1;r<=n;++r){var s=r==n?e[0]:e[r];if(s.Y==t.Y&&(s.X==t.X||o.Y==t.Y&&s.X>t.X==o.X<t.X))return-1;if(o.Y<t.Y!=s.Y<t.Y)if(o.X>=t.X)if(s.X>t.X)i=1-i;else{if(0==(l=(o.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(o.Y-t.Y)))return-1;l>0==s.Y>o.Y&&(i=1-i)}else if(s.X>t.X){var l;if(0==(l=(o.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(o.Y-t.Y)))return-1;l>0==s.Y>o.Y&&(i=1-i)}o=s}return i},e.Clipper.prototype.PointInPolygon=function(t,e){var i=0,n=e,o=t.X,r=t.Y,s=e.Pt.X,l=e.Pt.Y;do{var p=(e=e.Next).Pt.X,h=e.Pt.Y;if(h==r&&(p==o||l==r&&p>o==s<o))return-1;if(l<r!=h<r)if(s>=o)if(p>o)i=1-i;else{if(0==(u=(s-o)*(h-r)-(p-o)*(l-r)))return-1;u>0==h>l&&(i=1-i)}else if(p>o){var u;if(0==(u=(s-o)*(h-r)-(p-o)*(l-r)))return-1;u>0==h>l&&(i=1-i)}s=p,l=h}while(n!=e);return i},e.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var i=t;do{var n=this.PointInPolygon(i.Pt,e);if(n>=0)return n>0;i=i.Next}while(i!=t);return!0},e.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var i=0,n=this.m_PolyOuts.length;i<n;i++){var o=this.m_PolyOuts[i];if(null!=o.Pts&&null!=o.FirstLeft)this.ParseFirstLeft(o.FirstLeft)==t&&this.Poly2ContainsPoly1(o.Pts,e.Pts)&&(o.FirstLeft=e)}},e.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var i=0,n=this.m_PolyOuts,o=n.length,r=n[i];i<o;r=n[++i])r.FirstLeft==t&&(r.FirstLeft=e)},e.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},e.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,i=this.m_Joins.length;t<i;t++){var n,o=this.m_Joins[t],r=this.GetOutRec(o.OutPt1.Idx),s=this.GetOutRec(o.OutPt2.Idx);if(null!=r.Pts&&null!=s.Pts)if(n=r==s?r:this.Param1RightOfParam2(r,s)?s:this.Param1RightOfParam2(s,r)?r:this.GetLowermostRec(r,s),this.JoinPoints(o,r,s))if(r==s){if(r.Pts=o.OutPt1,r.BottomPt=null,(s=this.CreateOutRec()).Pts=o.OutPt2,this.UpdateOutPtIdxs(s),this.m_UsingPolyTree)for(var l=0,p=this.m_PolyOuts.length;l<p-1;l++){var h=this.m_PolyOuts[l];null!=h.Pts&&e.Clipper.ParseFirstLeft(h.FirstLeft)==r&&h.IsHole!=r.IsHole&&(this.Poly2ContainsPoly1(h.Pts,o.OutPt2)&&(h.FirstLeft=s))}this.Poly2ContainsPoly1(s.Pts,r.Pts)?(s.IsHole=!r.IsHole,s.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,r),(s.IsHole^this.ReverseSolution)==this.Area(s)>0&&this.ReversePolyPtLinks(s.Pts)):this.Poly2ContainsPoly1(r.Pts,s.Pts)?(s.IsHole=r.IsHole,r.IsHole=!s.IsHole,s.FirstLeft=r.FirstLeft,r.FirstLeft=s,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,s),(r.IsHole^this.ReverseSolution)==this.Area(r)>0&&this.ReversePolyPtLinks(r.Pts)):(s.IsHole=r.IsHole,s.FirstLeft=r.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(r,s))}else s.Pts=null,s.BottomPt=null,s.Idx=r.Idx,r.IsHole=n.IsHole,n==s&&(r.FirstLeft=s.FirstLeft),s.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,r)}},e.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do{e.Idx=t.Idx,e=e.Prev}while(e!=t.Pts)},e.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var i=this.m_PolyOuts[t++],n=i.Pts;if(null!=n&&!i.IsOpen)do{for(var o=n.Next;o!=i.Pts;){if(e.IntPoint.op_Equality(n.Pt,o.Pt)&&o.Next!=n&&o.Prev!=n){var r=n.Prev,s=o.Prev;n.Prev=s,s.Next=n,o.Prev=r,r.Next=o,i.Pts=n;var l=this.CreateOutRec();l.Pts=o,this.UpdateOutPtIdxs(l),this.Poly2ContainsPoly1(l.Pts,i.Pts)?(l.IsHole=!i.IsHole,l.FirstLeft=i,this.m_UsingPolyTree&&this.FixupFirstLefts2(l,i)):this.Poly2ContainsPoly1(i.Pts,l.Pts)?(l.IsHole=i.IsHole,i.IsHole=!l.IsHole,l.FirstLeft=i.FirstLeft,i.FirstLeft=l,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,l)):(l.IsHole=i.IsHole,l.FirstLeft=i.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(i,l)),o=n}o=o.Next}n=n.Next}while(n!=i.Pts)}},e.Clipper.Area=function(t){var e=t.length;if(e<3)return 0;for(var i=0,n=0,o=e-1;n<e;++n)i+=(t[o].X+t[n].X)*(t[o].Y-t[n].Y),o=n;return.5*-i},e.Clipper.prototype.Area=function(t){var e=t.Pts;if(null==e)return 0;var i=0;do{i+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next}while(e!=t.Pts);return.5*i},e.Clipper.SimplifyPolygon=function(t,i){var n=new Array,o=new e.Clipper(0);return o.StrictlySimple=!0,o.AddPath(t,e.PolyType.ptSubject,!0),o.Execute(e.ClipType.ctUnion,n,i,i),n},e.Clipper.SimplifyPolygons=function(t,i){void 0===i&&(i=e.PolyFillType.pftEvenOdd);var n=new Array,o=new e.Clipper(0);return o.StrictlySimple=!0,o.AddPaths(t,e.PolyType.ptSubject,!0),o.Execute(e.ClipType.ctUnion,n,i,i),n},e.Clipper.DistanceSqrd=function(t,e){var i=t.X-e.X,n=t.Y-e.Y;return i*i+n*n},e.Clipper.DistanceFromLineSqrd=function(t,e,i){var n=e.Y-i.Y,o=i.X-e.X,r=n*e.X+o*e.Y;return(r=n*t.X+o*t.Y-r)*r/(n*n+o*o)},e.Clipper.SlopesNearCollinear=function(t,i,n,o){return Math.abs(t.X-i.X)>Math.abs(t.Y-i.Y)?t.X>i.X==t.X<n.X?e.Clipper.DistanceFromLineSqrd(t,i,n)<o:i.X>t.X==i.X<n.X?e.Clipper.DistanceFromLineSqrd(i,t,n)<o:e.Clipper.DistanceFromLineSqrd(n,t,i)<o:t.Y>i.Y==t.Y<n.Y?e.Clipper.DistanceFromLineSqrd(t,i,n)<o:i.Y>t.Y==i.Y<n.Y?e.Clipper.DistanceFromLineSqrd(i,t,n)<o:e.Clipper.DistanceFromLineSqrd(n,t,i)<o},e.Clipper.PointsAreClose=function(t,e,i){var n=t.X-e.X,o=t.Y-e.Y;return n*n+o*o<=i},e.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},e.Clipper.CleanPolygon=function(t,i){void 0===i&&(i=1.415);var n=t.length;if(0==n)return new Array;for(var o=new Array(n),r=0;r<n;++r)o[r]=new e.OutPt;for(r=0;r<n;++r)o[r].Pt=t[r],o[r].Next=o[(r+1)%n],o[r].Next.Prev=o[r],o[r].Idx=0;for(var s=i*i,l=o[0];0==l.Idx&&l.Next!=l.Prev;)e.Clipper.PointsAreClose(l.Pt,l.Prev.Pt,s)?(l=e.Clipper.ExcludeOp(l),n--):e.Clipper.PointsAreClose(l.Prev.Pt,l.Next.Pt,s)?(e.Clipper.ExcludeOp(l.Next),l=e.Clipper.ExcludeOp(l),n-=2):e.Clipper.SlopesNearCollinear(l.Prev.Pt,l.Pt,l.Next.Pt,s)?(l=e.Clipper.ExcludeOp(l),n--):(l.Idx=1,l=l.Next);n<3&&(n=0);var p=new Array(n);for(r=0;r<n;++r)p[r]=new e.IntPoint(l.Pt),l=l.Next;return o=null,p},e.Clipper.CleanPolygons=function(t,i){for(var n=new Array(t.length),o=0,r=t.length;o<r;o++)n[o]=e.Clipper.CleanPolygon(t[o],i);return n},e.Clipper.Minkowski=function(t,i,n,o){var r=o?1:0,s=t.length,l=i.length,p=new Array;if(n)for(var h=0;h<l;h++){for(var u=new Array(s),a=0,f=t.length,d=t[a];a<f;d=t[++a])u[a]=new e.IntPoint(i[h].X+d.X,i[h].Y+d.Y);p.push(u)}else for(h=0;h<l;h++){for(u=new Array(s),a=0,f=t.length,d=t[a];a<f;d=t[++a])u[a]=new e.IntPoint(i[h].X-d.X,i[h].Y-d.Y);p.push(u)}var P=new Array;for(h=0;h<l-1+r;h++)for(a=0;a<s;a++){var m=new Array;m.push(p[h%l][a%s]),m.push(p[(h+1)%l][a%s]),m.push(p[(h+1)%l][(a+1)%s]),m.push(p[h%l][(a+1)%s]),e.Clipper.Orientation(m)||m.reverse(),P.push(m)}return P},e.Clipper.MinkowskiSum=function(t,i,n){if(i[0]instanceof Array){h=i;for(var o=new e.Paths,r=(l=new e.Clipper,0);r<h.length;++r){var s=e.Clipper.Minkowski(t,h[r],!0,n);if(l.AddPaths(s,e.PolyType.ptSubject,!0),n){p=e.Clipper.TranslatePath(h[r],t[0]);l.AddPath(p,e.PolyType.ptClip,!0)}}return l.Execute(e.ClipType.ctUnion,o,e.PolyFillType.pftNonZero,e.PolyFillType.pftNonZero),o}var l,p=i,h=e.Clipper.Minkowski(t,p,!0,n);return(l=new e.Clipper).AddPaths(h,e.PolyType.ptSubject,!0),l.Execute(e.ClipType.ctUnion,h,e.PolyFillType.pftNonZero,e.PolyFillType.pftNonZero),h},e.Clipper.TranslatePath=function(t,i){for(var n=new e.Path,o=0;o<t.length;o++)n.push(new e.IntPoint(t[o].X+i.X,t[o].Y+i.Y));return n},e.Clipper.MinkowskiDiff=function(t,i){var n=e.Clipper.Minkowski(t,i,!1,!0),o=new e.Clipper;return o.AddPaths(n,e.PolyType.ptSubject,!0),o.Execute(e.ClipType.ctUnion,n,e.PolyFillType.pftNonZero,e.PolyFillType.pftNonZero),n},e.Clipper.PolyTreeToPaths=function(t){var i=new Array;return e.Clipper.AddPolyNodeToPaths(t,e.Clipper.NodeType.ntAny,i),i},e.Clipper.AddPolyNodeToPaths=function(t,i,n){var o=!0;switch(i){case e.Clipper.NodeType.ntOpen:return;case e.Clipper.NodeType.ntClosed:o=!t.IsOpen}t.m_polygon.length>0&&o&&n.push(t.m_polygon);for(var r=0,s=t.Childs(),l=s.length,p=s[r];r<l;p=s[++r])e.Clipper.AddPolyNodeToPaths(p,i,n)},e.Clipper.OpenPathsFromPolyTree=function(t){for(var i=new e.Paths,n=0,o=t.ChildCount();n<o;n++)t.Childs()[n].IsOpen&&i.push(t.Childs()[n].m_polygon);return i},e.Clipper.ClosedPathsFromPolyTree=function(t){var i=new e.Paths;return e.Clipper.AddPolyNodeToPaths(t,e.Clipper.NodeType.ntClosed,i),i},O(e.Clipper,e.ClipperBase),e.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},e.ClipperOffset=function(t,i){void 0===t&&(t=2),void 0===i&&(i=e.ClipperOffset.def_arc_tolerance),this.m_destPolys=new e.Paths,this.m_srcPoly=new e.Path,this.m_destPoly=new e.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new e.IntPoint,this.m_polyNodes=new e.PolyNode,this.MiterLimit=t,this.ArcTolerance=i,this.m_lowest.X=-1},e.ClipperOffset.two_pi=6.28318530717959,e.ClipperOffset.def_arc_tolerance=.25,e.ClipperOffset.prototype.Clear=function(){e.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},e.ClipperOffset.Round=e.Clipper.Round,e.ClipperOffset.prototype.AddPath=function(t,i,n){var o=t.length-1;if(!(o<0)){var r=new e.PolyNode;if(r.m_jointype=i,r.m_endtype=n,n==e.EndType.etClosedLine||n==e.EndType.etClosedPolygon)for(;o>0&&e.IntPoint.op_Equality(t[0],t[o]);)o--;r.m_polygon.push(t[0]);for(var s=0,l=0,p=1;p<=o;p++)e.IntPoint.op_Inequality(r.m_polygon[s],t[p])&&(s++,r.m_polygon.push(t[p]),(t[p].Y>r.m_polygon[l].Y||t[p].Y==r.m_polygon[l].Y&&t[p].X<r.m_polygon[l].X)&&(l=s));if(!(n==e.EndType.etClosedPolygon&&s<2)&&(this.m_polyNodes.AddChild(r),n==e.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new e.IntPoint(this.m_polyNodes.ChildCount()-1,l);else{var h=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(r.m_polygon[l].Y>h.Y||r.m_polygon[l].Y==h.Y&&r.m_polygon[l].X<h.X)&&(this.m_lowest=new e.IntPoint(this.m_polyNodes.ChildCount()-1,l))}}},e.ClipperOffset.prototype.AddPaths=function(t,e,i){for(var n=0,o=t.length;n<o;n++)this.AddPath(t[n],e,i)},e.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!e.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){((i=this.m_polyNodes.Childs()[t]).m_endtype==e.EndType.etClosedPolygon||i.m_endtype==e.EndType.etClosedLine&&e.Clipper.Orientation(i.m_polygon))&&i.m_polygon.reverse()}else for(t=0;t<this.m_polyNodes.ChildCount();t++){var i;(i=this.m_polyNodes.Childs()[t]).m_endtype!=e.EndType.etClosedLine||e.Clipper.Orientation(i.m_polygon)||i.m_polygon.reverse()}},e.ClipperOffset.GetUnitNormal=function(t,i){var n=i.X-t.X,o=i.Y-t.Y;if(0==n&&0==o)return new e.DoublePoint(0,0);var r=1/Math.sqrt(n*n+o*o);return n*=r,o*=r,new e.DoublePoint(o,-n)},e.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,e.ClipperBase.near_zero(t))for(var i=0;i<this.m_polyNodes.ChildCount();i++){(r=this.m_polyNodes.Childs()[i]).m_endtype==e.EndType.etClosedPolygon&&this.m_destPolys.push(r.m_polygon)}else{var n;this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5,n=this.ArcTolerance<=0?e.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*e.ClipperOffset.def_arc_tolerance?Math.abs(t)*e.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var o=3.14159265358979/Math.acos(1-n/Math.abs(t));this.m_sin=Math.sin(e.ClipperOffset.two_pi/o),this.m_cos=Math.cos(e.ClipperOffset.two_pi/o),this.m_StepsPerRad=o/e.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin);for(i=0;i<this.m_polyNodes.ChildCount();i++){var r=this.m_polyNodes.Childs()[i];this.m_srcPoly=r.m_polygon;var s=this.m_srcPoly.length;if(!(0==s||t<=0&&(s<3||r.m_endtype!=e.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!=s){this.m_normals.length=0;for(f=0;f<s-1;f++)this.m_normals.push(e.ClipperOffset.GetUnitNormal(this.m_srcPoly[f],this.m_srcPoly[f+1]));if(r.m_endtype==e.EndType.etClosedLine||r.m_endtype==e.EndType.etClosedPolygon?this.m_normals.push(e.ClipperOffset.GetUnitNormal(this.m_srcPoly[s-1],this.m_srcPoly[0])):this.m_normals.push(new e.DoublePoint(this.m_normals[s-2])),r.m_endtype==e.EndType.etClosedPolygon){var l=s-1;for(f=0;f<s;f++)l=this.OffsetPoint(f,l,r.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(r.m_endtype==e.EndType.etClosedLine){for(l=s-1,f=0;f<s;f++)l=this.OffsetPoint(f,l,r.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;var p=this.m_normals[s-1];for(f=s-1;f>0;f--)this.m_normals[f]=new e.DoublePoint(-this.m_normals[f-1].X,-this.m_normals[f-1].Y);this.m_normals[0]=new e.DoublePoint(-p.X,-p.Y),l=0;for(f=s-1;f>=0;f--)l=this.OffsetPoint(f,l,r.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{var h;for(l=0,f=1;f<s-1;++f)l=this.OffsetPoint(f,l,r.m_jointype);if(r.m_endtype==e.EndType.etOpenButt){f=s-1;h=new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[f].X+this.m_normals[f].X*t),e.ClipperOffset.Round(this.m_srcPoly[f].Y+this.m_normals[f].Y*t)),this.m_destPoly.push(h),h=new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[f].X-this.m_normals[f].X*t),e.ClipperOffset.Round(this.m_srcPoly[f].Y-this.m_normals[f].Y*t)),this.m_destPoly.push(h)}else{f=s-1;l=s-2,this.m_sinA=0,this.m_normals[f]=new e.DoublePoint(-this.m_normals[f].X,-this.m_normals[f].Y),r.m_endtype==e.EndType.etOpenSquare?this.DoSquare(f,l):this.DoRound(f,l)}for(f=s-1;f>0;f--)this.m_normals[f]=new e.DoublePoint(-this.m_normals[f-1].X,-this.m_normals[f-1].Y);this.m_normals[0]=new e.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y);for(f=(l=s-1)-1;f>0;--f)l=this.OffsetPoint(f,l,r.m_jointype);r.m_endtype==e.EndType.etOpenButt?(h=new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),e.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(h),h=new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),e.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(h)):(l=1,this.m_sinA=0,r.m_endtype==e.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(r.m_jointype==e.JoinType.jtRound)for(var u=1,a=0,f=1;f<=o;f++){this.m_destPoly.push(new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[0].X+u*t),e.ClipperOffset.Round(this.m_srcPoly[0].Y+a*t)));var d=u;u=u*this.m_cos-this.m_sin*a,a=d*this.m_sin+a*this.m_cos}else{u=-1,a=-1;for(var f=0;f<4;++f)this.m_destPoly.push(new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[0].X+u*t),e.ClipperOffset.Round(this.m_srcPoly[0].Y+a*t))),u<0?u=1:a<0?a=1:u=-1}this.m_destPolys.push(this.m_destPoly)}}}},e.ClipperOffset.prototype.Execute=function(){var t=arguments;if(t[0]instanceof e.PolyTree){r=t[0],s=t[1];if(r.Clear(),this.FixOrientations(),this.DoOffset(s),(o=new e.Clipper(0)).AddPaths(this.m_destPolys,e.PolyType.ptSubject,!0),s>0)o.Execute(e.ClipType.ctUnion,r,e.PolyFillType.pftPositive,e.PolyFillType.pftPositive);else{p=e.Clipper.GetBounds(this.m_destPolys);if((l=new e.Path).push(new e.IntPoint(p.left-10,p.bottom+10)),l.push(new e.IntPoint(p.right+10,p.bottom+10)),l.push(new e.IntPoint(p.right+10,p.top-10)),l.push(new e.IntPoint(p.left-10,p.top-10)),o.AddPath(l,e.PolyType.ptSubject,!0),o.ReverseSolution=!0,o.Execute(e.ClipType.ctUnion,r,e.PolyFillType.pftNegative,e.PolyFillType.pftNegative),1==r.ChildCount()&&r.Childs()[0].ChildCount()>0){var i=r.Childs()[0];r.Childs()[0]=i.Childs()[0],r.Childs()[0].m_Parent=r;for(var n=1;n<i.ChildCount();n++)r.AddChild(i.Childs()[n])}else r.Clear()}}else{var o,r=t[0],s=t[1];if(e.Clear(r),this.FixOrientations(),this.DoOffset(s),(o=new e.Clipper(0)).AddPaths(this.m_destPolys,e.PolyType.ptSubject,!0),s>0)o.Execute(e.ClipType.ctUnion,r,e.PolyFillType.pftPositive,e.PolyFillType.pftPositive);else{var l,p=e.Clipper.GetBounds(this.m_destPolys);(l=new e.Path).push(new e.IntPoint(p.left-10,p.bottom+10)),l.push(new e.IntPoint(p.right+10,p.bottom+10)),l.push(new e.IntPoint(p.right+10,p.top-10)),l.push(new e.IntPoint(p.left-10,p.top-10)),o.AddPath(l,e.PolyType.ptSubject,!0),o.ReverseSolution=!0,o.Execute(e.ClipType.ctUnion,r,e.PolyFillType.pftNegative,e.PolyFillType.pftNegative),r.length>0&&r.splice(0,1)}}},e.ClipperOffset.prototype.OffsetPoint=function(t,i,n){if(this.m_sinA=this.m_normals[i].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[i].Y,Math.abs(this.m_sinA*this.m_delta)<1){if(this.m_normals[i].X*this.m_normals[t].X+this.m_normals[t].Y*this.m_normals[i].Y>0)return this.m_destPoly.push(new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[i].X*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[i].Y*this.m_delta))),i}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[i].X*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[i].Y*this.m_delta))),this.m_destPoly.push(new e.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(n){case e.JoinType.jtMiter:var o=this.m_normals[t].X*this.m_normals[i].X+this.m_normals[t].Y*this.m_normals[i].Y+1;o>=this.m_miterLim?this.DoMiter(t,i,o):this.DoSquare(t,i);break;case e.JoinType.jtSquare:this.DoSquare(t,i);break;case e.JoinType.jtRound:this.DoRound(t,i)}return i=t},e.ClipperOffset.prototype.DoSquare=function(t,i){var n=Math.tan(Math.atan2(this.m_sinA,this.m_normals[i].X*this.m_normals[t].X+this.m_normals[i].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[i].X-this.m_normals[i].Y*n)),e.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[i].Y+this.m_normals[i].X*n)))),this.m_destPoly.push(new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*n)),e.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*n))))},e.ClipperOffset.prototype.DoMiter=function(t,i,n){var o=this.m_delta/n;this.m_destPoly.push(new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[i].X+this.m_normals[t].X)*o),e.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[i].Y+this.m_normals[t].Y)*o)))},e.ClipperOffset.prototype.DoRound=function(t,i){for(var n,o=Math.atan2(this.m_sinA,this.m_normals[i].X*this.m_normals[t].X+this.m_normals[i].Y*this.m_normals[t].Y),r=Math.max(e.Cast_Int32(e.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(o))),1),s=this.m_normals[i].X,l=this.m_normals[i].Y,p=0;p<r;++p)this.m_destPoly.push(new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[t].X+s*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[t].Y+l*this.m_delta))),n=s,s=s*this.m_cos-this.m_sin*l,l=n*this.m_sin+l*this.m_cos;this.m_destPoly.push(new e.IntPoint(e.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},e.Error=function(t){throw new Error(t)},e.JS={},e.JS.AreaOfPolygon=function(t,i){return i||(i=1),e.Clipper.Area(t)/(i*i)},e.JS.AreaOfPolygons=function(t,i){i||(i=1);for(var n=0,o=0;o<t.length;o++)n+=e.Clipper.Area(t[o]);return n/(i*i)},e.JS.BoundsOfPath=function(t,i){return e.JS.BoundsOfPaths([t],i)},e.JS.BoundsOfPaths=function(t,i){i||(i=1);var n=e.Clipper.GetBounds(t);return n.left/=i,n.bottom/=i,n.right/=i,n.top/=i,n},e.JS.Clean=function(t,i){if(!(t instanceof Array))return[];var n=t[0]instanceof Array;t=e.JS.Clone(t);if("number"!=typeof i||null===i)return e.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||i<0)return t;n||(t=[t]);for(var o,r,s,l,p,h,u,a=t.length,f=[],d=0;d<a;d++)if(0!==(o=(r=t[d]).length))if(o<3)s=r,f.push(s);else{for(s=r,l=i*i,p=r[0],h=1,u=1;u<o;u++)(r[u].X-p.X)*(r[u].X-p.X)+(r[u].Y-p.Y)*(r[u].Y-p.Y)<=l||(s[h]=r[u],p=r[u],h++);p=r[h-1],(r[0].X-p.X)*(r[0].X-p.X)+(r[0].Y-p.Y)*(r[0].Y-p.Y)<=l&&h--,h<o&&s.splice(h,o-h),s.length&&f.push(s)}return!n&&f.length?f=f[0]:n||0!==f.length?n&&0===f.length&&(f=[[]]):f=[],f},e.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var i,n,o,r,s=t.length,l=new Array(s);for(n=0;n<s;n++){for(i=t[n].length,r=new Array(i),o=0;o<i;o++)r[o]={X:t[n][o].X,Y:t[n][o].Y};l[n]=r}return e||(l=l[0]),l},e.JS.Lighten=function(t,i){if(!(t instanceof Array))return[];if("number"!=typeof i||null===i)return e.Error("Tolerance is not a number in Lighten()."),e.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||i<0)return e.JS.Clone(t);var n,o,r,s,l,p,h,u,a,f,d,P,m,y,c,v;t[0]instanceof Array||(t=[t]);var C=t.length,I=i*i,_=[];for(n=0;n<C;n++)if(0!=(p=(r=t[n]).length)){for(s=0;s<1e6;s++){for(l=[],r[(p=r.length)-1].X!=r[0].X||r[p-1].Y!=r[0].Y?(d=1,r.push({X:r[0].X,Y:r[0].Y}),p=r.length):d=0,f=[],o=0;o<p-2;o++)h=r[o],a=r[o+1],u=r[o+2],c=h.X,v=h.Y,P=u.X-c,m=u.Y-v,0===P&&0===m||((y=((a.X-c)*P+(a.Y-v)*m)/(P*P+m*m))>1?(c=u.X,v=u.Y):y>0&&(c+=P*y,v+=m*y)),(P=a.X-c)*P+(m=a.Y-v)*m<=I&&(f[o+1]=1,o++);for(l.push({X:r[0].X,Y:r[0].Y}),o=1;o<p-1;o++)f[o]||l.push({X:r[o].X,Y:r[o].Y});if(l.push({X:r[p-1].X,Y:r[p-1].Y}),d&&r.pop(),!f.length)break;r=l}l[(p=l.length)-1].X==l[0].X&&l[p-1].Y==l[0].Y&&l.pop(),l.length>2&&_.push(l)}return t[0]instanceof Array||(_=_[0]),void 0===_&&(_=[[]]),_},e.JS.PerimeterOfPath=function(t,e,i){if(void 0===t)return 0;var n,o,r=Math.sqrt,s=0,l=0,p=0,h=0,u=0,a=t.length;if(a<2)return 0;for(e&&(t[a]=t[0],a++);--a;)l=(n=t[a]).X,p=n.Y,s+=r((l-(h=(o=t[a-1]).X))*(l-h)+(p-(u=o.Y))*(p-u));return e&&t.pop(),s/i},e.JS.PerimeterOfPaths=function(t,i,n){n||(n=1);for(var o=0,r=0;r<t.length;r++)o+=e.JS.PerimeterOfPath(t[r],i,n);return o},e.JS.ScaleDownPath=function(t,e){var i,n;for(e||(e=1),i=t.length;i--;)(n=t[i]).X=n.X/e,n.Y=n.Y/e},e.JS.ScaleDownPaths=function(t,e){var i,n,o;for(e||(e=1),i=t.length;i--;)for(n=t[i].length;n--;)(o=t[i][n]).X=o.X/e,o.Y=o.Y/e},e.JS.ScaleUpPath=function(t,e){var i,n,o=Math.round;for(e||(e=1),i=t.length;i--;)(n=t[i]).X=o(n.X*e),n.Y=o(n.Y*e)},e.JS.ScaleUpPaths=function(t,e){var i,n,o,r=Math.round;for(e||(e=1),i=t.length;i--;)for(n=t[i].length;n--;)(o=t[i][n]).X=r(o.X*e),o.Y=r(o.Y*e)},e.ExPolygons=function(){return[]},e.ExPolygon=function(){this.outer=null,this.holes=null},e.JS.AddOuterPolyNodeToExPolygons=function(t,i){var n=new e.ExPolygon;n.outer=t.Contour();var o,r,s,l,p,h,u=t.Childs(),a=u.length;for(n.holes=new Array(a),s=0;s<a;s++)for(o=u[s],n.holes[s]=o.Contour(),l=0,h=(p=o.Childs()).length;l<h;l++)r=p[l],e.JS.AddOuterPolyNodeToExPolygons(r,i);i.push(n)},e.JS.ExPolygonsToPaths=function(t){var i,n,o,r,s=new e.Paths;for(i=0,o=t.length;i<o;i++)for(s.push(t[i].outer),n=0,r=t[i].holes.length;n<r;n++)s.push(t[i].holes[n]);return s},e.JS.PolyTreeToExPolygons=function(t){var i,n,o,r,s=new e.ExPolygons;for(n=0,r=(o=t.Childs()).length;n<r;n++)i=o[n],e.JS.AddOuterPolyNodeToExPolygons(i,s);return s}}();

},{}]},{},[14])(14)
});
