{
  "version": 3,
  "sources": ["../../node_modules/@xmldom/xmldom/lib/conventions.js", "../../node_modules/@xmldom/xmldom/lib/dom.js", "../../node_modules/@xmldom/xmldom/lib/entities.js", "../../node_modules/@xmldom/xmldom/lib/sax.js", "../../node_modules/@xmldom/xmldom/lib/dom-parser.js", "../../node_modules/@xmldom/xmldom/lib/index.js", "../../node_modules/js-clipper/clipper.js", "../../node_modules/lodash.values/index.js", "../../node_modules/lodash.groupby/index.js", "../../node_modules/stackblur/index.js", "../../src/libraries/vg/index.mjs", "../../src/libraries/vg/util/math.mjs", "../../src/libraries/vg/objects/point.mjs", "../../src/libraries/vg/objects/rect.mjs", "../../src/libraries/vg/util/bezier.mjs", "../../src/libraries/vg/util/color.mjs", "../../src/libraries/vg/util/geo.mjs", "../../src/libraries/vg/util/svg.mjs", "../../src/libraries/math.mjs", "../../src/libraries/random.mjs", "../../src/libraries/vg/util/js.mjs", "../../src/libraries/vg/objects/color.mjs", "../../src/libraries/util.mjs", "../../src/libraries/vg/objects/path.mjs", "../../src/libraries/vg/objects/group.mjs", "../../src/libraries/vg/objects/transform.mjs", "../../src/libraries/vg/objects/vec3.mjs", "../../src/libraries/vg/objects/matrix4.mjs", "../../src/libraries/vg/objects/text.mjs", "../../src/libraries/vg/objects/transformable.mjs", "../../src/libraries/vg/commands/draw.mjs", "../../src/libraries/vg/commands/filters.mjs", "../../src/libraries/vg/commands/shapes.mjs", "../../src/libraries/string.mjs", "../../src/libraries/list.mjs", "../../src/libraries/deepequal.mjs", "../../src/libraries/data.mjs", "../../src/libraries/graphics.mjs", "../../node_modules/async-es/internal/initialParams.js", "../../node_modules/async-es/internal/setImmediate.js", "../../node_modules/async-es/asyncify.js", "../../node_modules/async-es/internal/wrapAsync.js", "../../node_modules/async-es/internal/awaitify.js", "../../node_modules/async-es/internal/map.js", "../../node_modules/async-es/internal/isArrayLike.js", "../../node_modules/async-es/internal/breakLoop.js", "../../node_modules/async-es/internal/once.js", "../../node_modules/async-es/internal/getIterator.js", "../../node_modules/async-es/internal/iterator.js", "../../node_modules/async-es/internal/onlyOnce.js", "../../node_modules/async-es/internal/asyncEachOfLimit.js", "../../node_modules/async-es/internal/eachOfLimit.js", "../../node_modules/async-es/eachOfLimit.js", "../../node_modules/async-es/eachOf.js", "../../node_modules/async-es/map.js", "../../node_modules/async-es/eachOfSeries.js", "../../node_modules/async-es/internal/promiseCallback.js", "../../node_modules/async-es/reduce.js", "../../node_modules/async-es/seq.js", "../../node_modules/async-es/compose.js", "../../src/libraries/img/util.mjs", "../../src/libraries/img/blend.mjs", "../../src/libraries/img/process.mjs", "../../src/libraries/img/canvasrenderer.mjs", "../../src/libraries/img/asyncrenderer.mjs", "../../src/libraries/img/index.mjs", "../../src/libraries/easing.mjs", "../../src/g.mjs"],
  "sourcesContent": ["'use strict'\n\n/**\n * Ponyfill for `Array.prototype.find` which is only available in ES6 runtimes.\n *\n * Works with anything that has a `length` property and index access properties, including NodeList.\n *\n * @template {unknown} T\n * @param {Array<T> | ({length:number, [number]: T})} list\n * @param {function (item: T, index: number, list:Array<T> | ({length:number, [number]: T})):boolean} predicate\n * @param {Partial<Pick<ArrayConstructor['prototype'], 'find'>>?} ac `Array.prototype` by default,\n * \t\t\t\tallows injecting a custom implementation in tests\n * @returns {T | undefined}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n * @see https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.find\n */\nfunction find(list, predicate, ac) {\n\tif (ac === undefined) {\n\t\tac = Array.prototype;\n\t}\n\tif (list && typeof ac.find === 'function') {\n\t\treturn ac.find.call(list, predicate);\n\t}\n\tfor (var i = 0; i < list.length; i++) {\n\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\tvar item = list[i];\n\t\t\tif (predicate.call(undefined, item, i, list)) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * @template T\n * @param {T} object the object to freeze\n * @param {Pick<ObjectConstructor, 'freeze'> = Object} oc `Object` by default,\n * \t\t\t\tallows to inject custom object constructor for tests\n * @returns {Readonly<T>}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\nfunction freeze(object, oc) {\n\tif (oc === undefined) {\n\t\toc = Object\n\t}\n\treturn oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object\n}\n\n/**\n * Since we can not rely on `Object.assign` we provide a simplified version\n * that is sufficient for our needs.\n *\n * @param {Object} target\n * @param {Object | null | undefined} source\n *\n * @returns {Object} target\n * @throws TypeError if target is not an object\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @see https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.assign\n */\nfunction assign(target, source) {\n\tif (target === null || typeof target !== 'object') {\n\t\tthrow new TypeError('target is not an object')\n\t}\n\tfor (var key in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t\ttarget[key] = source[key]\n\t\t}\n\t}\n\treturn target\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02 MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype WHATWG HTML Spec\n * @see DOMParser.prototype.parseFromString\n */\nvar MIME_TYPE = freeze({\n\t/**\n\t * `text/html`, the only mime type that triggers treating an XML document as HTML.\n\t *\n\t * @see DOMParser.SupportedType.isHTML\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec\n\t */\n\tHTML: 'text/html',\n\n\t/**\n\t * Helper method to check a mime type if it indicates an HTML document\n\t *\n\t * @param {string} [value]\n\t * @returns {boolean}\n\t *\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring \t */\n\tisHTML: function (value) {\n\t\treturn value === MIME_TYPE.HTML\n\t},\n\n\t/**\n\t * `application/xml`, the standard mime type for XML documents.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_APPLICATION: 'application/xml',\n\n\t/**\n\t * `text/html`, an alias for `application/xml`.\n\t *\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n\t * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_TEXT: 'text/xml',\n\n\t/**\n\t * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n\t * but is parsed as an XML document.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n\t * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n\t */\n\tXML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n\t/**\n\t * `image/svg+xml`,\n\t *\n\t * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n\t * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n\t * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n\t */\n\tXML_SVG_IMAGE: 'image/svg+xml',\n})\n\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE = freeze({\n\t/**\n\t * The XHTML namespace.\n\t *\n\t * @see http://www.w3.org/1999/xhtml\n\t */\n\tHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * Checks if `uri` equals `NAMESPACE.HTML`.\n\t *\n\t * @param {string} [uri]\n\t *\n\t * @see NAMESPACE.HTML\n\t */\n\tisHTML: function (uri) {\n\t\treturn uri === NAMESPACE.HTML\n\t},\n\n\t/**\n\t * The SVG namespace.\n\t *\n\t * @see http://www.w3.org/2000/svg\n\t */\n\tSVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * The `xml:` namespace.\n\t *\n\t * @see http://www.w3.org/XML/1998/namespace\n\t */\n\tXML: 'http://www.w3.org/XML/1998/namespace',\n\n\t/**\n\t * The `xmlns:` namespace\n\t *\n\t * @see https://www.w3.org/2000/xmlns/\n\t */\n\tXMLNS: 'http://www.w3.org/2000/xmlns/',\n})\n\nexports.assign = assign;\nexports.find = find;\nexports.freeze = freeze;\nexports.MIME_TYPE = MIME_TYPE;\nexports.NAMESPACE = NAMESPACE;\n", "var conventions = require(\"./conventions\");\n\nvar find = conventions.find;\nvar NAMESPACE = conventions.NAMESPACE;\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty\n * @param {string} input\n * @returns {boolean}\n */\nfunction notEmptyString (input) {\n\treturn input !== ''\n}\n/**\n * @see https://infra.spec.whatwg.org/#split-on-ascii-whitespace\n * @see https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * @param {string} input\n * @returns {string[]} (can be empty)\n */\nfunction splitOnASCIIWhitespace(input) {\n\t// U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n\treturn input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : []\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * @param {string} element\n * @returns {Record<string, boolean | undefined>}\n */\nfunction orderedSetReducer (current, element) {\n\tif (!current.hasOwnProperty(element)) {\n\t\tcurrent[element] = true;\n\t}\n\treturn current;\n}\n\n/**\n * @see https://infra.spec.whatwg.org/#ordered-set\n * @param {string} input\n * @returns {string[]}\n */\nfunction toOrderedSet(input) {\n\tif (!input) return [];\n\tvar list = splitOnASCIIWhitespace(input);\n\treturn Object.keys(list.reduce(orderedSetReducer, {}))\n}\n\n/**\n * Uses `list.indexOf` to implement something like `Array.prototype.includes`,\n * which we can not rely on being available.\n *\n * @param {any[]} list\n * @returns {function(any): boolean}\n */\nfunction arrayIncludes (list) {\n\treturn function(element) {\n\t\treturn list && list.indexOf(element) !== -1;\n\t}\n}\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tif (Object.prototype.hasOwnProperty.call(src, p)) {\n\t\t\tdest[p] = src[p];\n\t\t}\n\t}\n}\n\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknown Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\n\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n/**\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0,\n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long\n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index.\n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t},\n\t/**\n\t * @private\n\t * @param {function (Node):boolean} predicate\n\t * @returns {Node[]}\n\t */\n\tfilter: function (predicate) {\n\t\treturn Array.prototype.filter.call(this, predicate);\n\t},\n\t/**\n\t * @private\n\t * @param {Node} item\n\t * @returns {number}\n\t */\n\tindexOf: function (item) {\n\t\treturn Array.prototype.indexOf.call(this, item);\n\t},\n};\n\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n}\n\n_extends(LiveNodeList,NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used\n * to represent collections of nodes that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities\n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow new DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\n\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n\n/**\n * The DOMImplementation interface represents an object providing methods\n * which are not dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * __The individual methods describe the differences compared to the specs.__\n *\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n */\nfunction DOMImplementation() {\n}\n\nDOMImplementation.prototype = {\n\t/**\n\t * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.\n\t * The different implementations fairly diverged in what kind of features were reported.\n\t * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.\n\t *\n\t * @deprecated It is deprecated and modern browsers return true in all cases.\n\t *\n\t * @param {string} feature\n\t * @param {string} [version]\n\t * @returns {boolean} always true\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n\t * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n\t */\n\thasFeature: function(feature, version) {\n\t\t\treturn true;\n\t},\n\t/**\n\t * Creates an XML Document object of the specified type with its document element.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - There is no interface/class `XMLDocument`, it returns a `Document` instance.\n\t * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string|null} namespaceURI\n\t * @param {string} qualifiedName\n\t * @param {DocumentType=null} doctype\n\t * @returns {Document}\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocument: function(namespaceURI,  qualifiedName, doctype){\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype || null;\n\t\tif (doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif (qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI, qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t/**\n\t * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.\n\t *\n\t * __This behavior is slightly different from the in the specs__:\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string} qualifiedName\n\t * @param {string} [publicId]\n\t * @param {string} [systemId]\n\t * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation\n\t * \t\t\t\t  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocumentType: function(qualifiedName, publicId, systemId){\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId || '';\n\t\tnode.systemId = systemId || '';\n\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises\n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises\n\t\t_insertBefore(this, newChild,oldChild, assertPreReplacementValidityInDocument);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n\t/**\n\t * Look up the prefix associated to the given namespace URI, starting from this node.\n\t * **The default namespace declarations are ignored by this method.**\n\t * See Namespace Prefix Lookup for details on the algorithm used by this method.\n\t *\n\t * _Note: The implementation seems to be incomplete when compared to the algorithm described in the specs._\n\t *\n\t * @param {string | null} namespaceURI\n\t * @returns {string | null}\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix\n\t * @see https://github.com/xmldom/xmldom/issues/322\n\t */\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(map, n) && map[n] === namespaceURI) {\n\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(Object.prototype.hasOwnProperty.call(map, prefix)){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n\tthis.ownerDocument = this;\n}\n\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\n\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\n\n/**\n * Updates `el.childNodes`, updating the indexed items and it's `length`.\n * Passing `newChild` means it will be appended.\n * Otherwise it's assumed that an item has been removed,\n * and `el.firstNode` and it's `.nextSibling` are used\n * to walk the current list of child nodes.\n *\n * @param {Document} doc\n * @param {Node} el\n * @param {Node} [newChild]\n * @private\n */\nfunction _onUpdateChild (doc, el, newChild) {\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif (newChild) {\n\t\t\tcs[cs.length++] = newChild;\n\t\t} else {\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile (child) {\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t\tdelete cs[cs.length];\n\t\t}\n\t}\n}\n\n/**\n * Removes the connections between `parentNode` and `child`\n * and any existing `child.previousSibling` or `child.nextSibling`.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n *\n * @param {Node} parentNode\n * @param {Node} child\n * @returns {Node} the child that was removed.\n * @private\n */\nfunction _removeChild (parentNode, child) {\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif (previous) {\n\t\tprevious.nextSibling = next;\n\t} else {\n\t\tparentNode.firstChild = next;\n\t}\n\tif (next) {\n\t\tnext.previousSibling = previous;\n\t} else {\n\t\tparentNode.lastChild = previous;\n\t}\n\tchild.parentNode = null;\n\tchild.previousSibling = null;\n\tchild.nextSibling = null;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode);\n\treturn child;\n}\n\n/**\n * Returns `true` if `node` can be a parent for insertion.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasValidParentNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.ELEMENT_NODE)\n\t);\n}\n\n/**\n * Returns `true` if `node` can be inserted according to it's `nodeType`.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasInsertableNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(isElementNode(node) ||\n\t\t\tisTextNode(node) ||\n\t\t\tisDocTypeNode(node) ||\n\t\t\tnode.nodeType === Node.DOCUMENT_FRAGMENT_NODE ||\n\t\t\tnode.nodeType === Node.COMMENT_NODE ||\n\t\t\tnode.nodeType === Node.PROCESSING_INSTRUCTION_NODE)\n\t);\n}\n\n/**\n * Returns true if `node` is a DOCTYPE node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isDocTypeNode(node) {\n\treturn node && node.nodeType === Node.DOCUMENT_TYPE_NODE;\n}\n\n/**\n * Returns true if the node is an element\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isElementNode(node) {\n\treturn node && node.nodeType === Node.ELEMENT_NODE;\n}\n/**\n * Returns true if `node` is a text node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isTextNode(node) {\n\treturn node && node.nodeType === Node.TEXT_NODE;\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Document} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementInsertionPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\tif (find(parentChildNodes, isElementNode) || isDocTypeNode(child)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Node} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementReplacementPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\n\tfunction hasElementChildThatIsNotChild(node) {\n\t\treturn isElementNode(node) && node !== child;\n\t}\n\n\tif (find(parentChildNodes, hasElementChildThatIsNotChild)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * @private\n * Steps 1-5 of the checks before inserting and before replacing a child are the same.\n *\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidity1to5(parent, node, child) {\n\t// 1. If `parent` is not a Document, DocumentFragment, or Element node, then throw a \"HierarchyRequestError\" DOMException.\n\tif (!hasValidParentNodeType(parent)) {\n\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Unexpected parent node type ' + parent.nodeType);\n\t}\n\t// 2. If `node` is a host-including inclusive ancestor of `parent`, then throw a \"HierarchyRequestError\" DOMException.\n\t// not implemented!\n\t// 3. If `child` is non-null and its parent is not `parent`, then throw a \"NotFoundError\" DOMException.\n\tif (child && child.parentNode !== parent) {\n\t\tthrow new DOMException(NOT_FOUND_ERR, 'child not in parent');\n\t}\n\tif (\n\t\t// 4. If `node` is not a DocumentFragment, DocumentType, Element, or CharacterData node, then throw a \"HierarchyRequestError\" DOMException.\n\t\t!hasInsertableNodeType(node) ||\n\t\t// 5. If either `node` is a Text node and `parent` is a document,\n\t\t// the sax parser currently adds top level text nodes, this will be fixed in 0.9.0\n\t\t// || (node.nodeType === Node.TEXT_NODE && parent.nodeType === Node.DOCUMENT_NODE)\n\t\t// or `node` is a doctype and `parent` is not a document, then throw a \"HierarchyRequestError\" DOMException.\n\t\t(isDocTypeNode(node) && parent.nodeType !== Node.DOCUMENT_NODE)\n\t) {\n\t\tthrow new DOMException(\n\t\t\tHIERARCHY_REQUEST_ERR,\n\t\t\t'Unexpected node type ' + node.nodeType + ' for parent node type ' + parent.nodeType\n\t\t);\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If node has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child,\n\t\t// `child` is a doctype, or `child` is non-null and a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child, `child` is a doctype,\n\t\t// or `child` is non-null and a doctype is following `child`.\n\t\tif (!isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\t// `parent` has a doctype child,\n\t\tif (find(parentChildNodes, isDocTypeNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// `child` is non-null and an element is preceding `child`,\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t\t// or `child` is null and `parent` has an element child.\n\t\tif (!child && parentElementChild) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can not be appended since element is present');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreReplacementValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If `node` has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (!isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\tfunction hasDoctypeChildThatIsNotChild(node) {\n\t\t\treturn isDocTypeNode(node) && node !== child;\n\t\t}\n\n\t\t// `parent` has a doctype child that is not `child`,\n\t\tif (find(parentChildNodes, hasDoctypeChildThatIsNotChild)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// or an element is preceding `child`.\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction _insertBefore(parent, node, child, _inDocumentAssertion) {\n\t// To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\tassertPreInsertionValidity1to5(parent, node, child);\n\n\t// If parent is a document, and any of the statements below, switched on the interface node implements,\n\t// are true, then throw a \"HierarchyRequestError\" DOMException.\n\tif (parent.nodeType === Node.DOCUMENT_NODE) {\n\t\t(_inDocumentAssertion || assertPreInsertionValidityInDocument)(parent, node, child);\n\t}\n\n\tvar cp = node.parentNode;\n\tif(cp){\n\t\tcp.removeChild(node);//remove and update\n\t}\n\tif(node.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = node.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn node;\n\t\t}\n\t\tvar newLast = node.lastChild;\n\t}else{\n\t\tnewFirst = newLast = node;\n\t}\n\tvar pre = child ? child.previousSibling : parent.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = child;\n\n\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparent.firstChild = newFirst;\n\t}\n\tif(child == null){\n\t\tparent.lastChild = newLast;\n\t}else{\n\t\tchild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parent;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parent.ownerDocument||parent, parent);\n\t//console.log(parent.lastChild.nextSibling == null)\n\tif (node.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnode.firstChild = node.lastChild = null;\n\t}\n\treturn node;\n}\n\n/**\n * Appends `newChild` to `parentNode`.\n * If `newChild` is already connected to a `parentNode` it is first removed from it.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n * @param {Node} parentNode\n * @param {Node} newChild\n * @returns {Node}\n * @private\n */\nfunction _appendSingleChild (parentNode, newChild) {\n\tif (newChild.parentNode) {\n\t\tnewChild.parentNode.removeChild(newChild);\n\t}\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = parentNode.lastChild;\n\tnewChild.nextSibling = null;\n\tif (newChild.previousSibling) {\n\t\tnewChild.previousSibling.nextSibling = newChild;\n\t} else {\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode, newChild);\n\treturn newChild;\n}\n\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\t/**\n\t * The DocumentType node of the document.\n\t *\n\t * @readonly\n\t * @type DocumentType\n\t */\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\n\tinsertBefore :  function(newChild, refChild){//raises\n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\t_insertBefore(this, newChild, refChild);\n\t\tnewChild.ownerDocument = this;\n\t\tif (this.documentElement === null && newChild.nodeType === ELEMENT_NODE) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\n\t\treturn newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\treplaceChild: function (newChild, oldChild) {\n\t\t//raises\n\t\t_insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\t\tnewChild.ownerDocument = this;\n\t\tif (oldChild) {\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t\tif (isElementNode(newChild)) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\n\t/**\n\t * The `getElementsByClassName` method of `Document` interface returns an array-like object\n\t * of all child elements which have **all** of the given class name(s).\n\t *\n\t * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.\n\t *\n\t *\n\t * Warning: This is a live LiveNodeList.\n\t * Changes in the DOM will reflect in the array as the changes occur.\n\t * If an element selected by this array no longer qualifies for the selector,\n\t * it will automatically be removed. Be aware of this for iteration purposes.\n\t *\n\t * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n\t */\n\tgetElementsByClassName: function(classNames) {\n\t\tvar classNamesSet = toOrderedSet(classNames)\n\t\treturn new LiveNodeList(this, function(base) {\n\t\t\tvar ls = [];\n\t\t\tif (classNamesSet.length > 0) {\n\t\t\t\t_visitNode(base.documentElement, function(node) {\n\t\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tvar nodeClassNames = node.getAttribute('class')\n\t\t\t\t\t\t// can be null if the attribute does not exist\n\t\t\t\t\t\tif (nodeClassNames) {\n\t\t\t\t\t\t\t// before splitting and iterating just compare them for the most common case\n\t\t\t\t\t\t\tvar matches = classNames === nodeClassNames;\n\t\t\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\t\t\tvar nodeClassNamesSet = toOrderedSet(nodeClassNames)\n\t\t\t\t\t\t\t\tmatches = classNamesSet.every(arrayIncludes(nodeClassNamesSet))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(matches) {\n\t\t\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn ls;\n\t\t});\n\t},\n\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.localName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9 && this.documentElement || this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix || '';\n\tvar uri = node.namespaceURI;\n\t// According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n\t// and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n\t// > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n\t// in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n\t// and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n\t// > [...] Furthermore, the attribute value [...] must not be an empty string.\n\t// so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\tif (!uri) {\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === NAMESPACE.XML || uri === NAMESPACE.XMLNS) {\n\t\treturn false;\n\t}\n\n\tvar i = visibleNamespaces.length\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\tif (ns.prefix === prefix) {\n\t\t\treturn ns.namespace !== uri;\n\t\t}\n\t}\n\treturn true;\n}\n/**\n * Well-formed constraint: No < in Attribute Values\n * > The replacement text of any entity referred to directly or indirectly\n * > in an attribute value must not contain a <.\n * @see https://www.w3.org/TR/xml11/#CleanAttrVals\n * @see https://www.w3.org/TR/xml11/#NT-AttValue\n *\n * Literal whitespace other than space that appear in attribute values\n * are serialized as their entity references, so they will be preserved.\n * (In contrast to whitespace literals in the input which are normalized to spaces)\n * @see https://www.w3.org/TR/xml11/#AVNormalize\n * @see https://w3c.github.io/DOM-Parsing/#serializing-an-element-s-attributes\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n\tbuf.push(' ', qualifiedName, '=\"', value.replace(/[<>&\"\\t\\n\\r]/g, _xmlEncoder), '\"')\n}\n\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif (!visibleNamespaces) {\n\t\tvisibleNamespaces = [];\n\t}\n\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\n\t\tisHTML = NAMESPACE.isHTML(node.namespaceURI) || isHTML\n\n\t\tvar prefixedNodeName = nodeName\n\t\tif (!isHTML && !node.prefix && node.namespaceURI) {\n\t\t\tvar defaultNS\n\t\t\t// lookup current default ns from `xmlns` attribute\n\t\t\tfor (var ai = 0; ai < attrs.length; ai++) {\n\t\t\t\tif (attrs.item(ai).name === 'xmlns') {\n\t\t\t\t\tdefaultNS = attrs.item(ai).value\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!defaultNS) {\n\t\t\t\t// lookup current default ns in visibleNamespaces\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.prefix === '' && namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tdefaultNS = namespace.namespace\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (defaultNS !== node.namespaceURI) {\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tif (namespace.prefix) {\n\t\t\t\t\t\t\tprefixedNodeName = namespace.prefix + ':' + nodeName\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbuf.push('<', prefixedNodeName);\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\n\t\t// add namespace for current node\n\t\tif (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',prefixedNodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn addSerializedAttribute(buf, node.name, node.value);\n\tcase TEXT_NODE:\n\t\t/**\n\t\t * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n\t\t * except when used as markup delimiters, or within a comment, a processing instruction, or a CDATA section.\n\t\t * If they are needed elsewhere, they must be escaped using either numeric character references or the strings\n\t\t * `&amp;` and `&lt;` respectively.\n\t\t * The right angle bracket (>) may be represented using the string \" &gt; \", and must, for compatibility,\n\t\t * be escaped using either `&gt;` or a character reference when it appears in the string `]]>` in content,\n\t\t * when that string is not marking the end of a CDATA section.\n\t\t *\n\t\t * In the content of elements, character data is any string of characters\n\t\t * which does not contain the start-delimiter of any markup\n\t\t * and does not include the CDATA-section-close delimiter, `]]>`.\n\t\t *\n\t\t * @see https://www.w3.org/TR/xml/#NT-CharData\n\t\t * @see https://w3c.github.io/DOM-Parsing/#xml-serializing-a-text-node\n\t\t */\n\t\treturn buf.push(node.data\n\t\t\t.replace(/[<&>]/g,_xmlEncoder)\n\t\t);\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC ', pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push(' ', sysid);\n\t\t\t}\n\t\t\tbuf.push('>');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM ', sysid, '>');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE\uFF1A\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor (var n in node) {\n\t\tif (Object.prototype.hasOwnProperty.call(node, n)) {\n\t\t\tvar v = node[n];\n\t\t\tif (typeof v != \"object\") {\n\t\t\t\tif (v != node2[n]) {\n\t\t\t\t\tnode2[n] = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DocumentType = DocumentType;\n\texports.DOMException = DOMException;\n\texports.DOMImplementation = DOMImplementation;\n\texports.Element = Element;\n\texports.Node = Node;\n\texports.NodeList = NodeList;\n\texports.XMLSerializer = XMLSerializer;\n//}\n", "var freeze = require('./conventions').freeze;\n\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML Wikipedia\n */\nexports.XML_ENTITIES = freeze({amp:'&', apos:\"'\", gt:'>', lt:'<', quot:'\"'})\n\n/**\n * A map of currently 241 entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see XML_ENTITIES\n * @see DOMParser.parseFromString\n * @see DOMImplementation.prototype.createHTMLDocument\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5) Spec\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML Wikpedia (XHTML)\n */\nexports.HTML_ENTITIES = freeze({\n       lt: '<',\n       gt: '>',\n       amp: '&',\n       quot: '\"',\n       apos: \"'\",\n       Agrave: \"\u00C0\",\n       Aacute: \"\u00C1\",\n       Acirc: \"\u00C2\",\n       Atilde: \"\u00C3\",\n       Auml: \"\u00C4\",\n       Aring: \"\u00C5\",\n       AElig: \"\u00C6\",\n       Ccedil: \"\u00C7\",\n       Egrave: \"\u00C8\",\n       Eacute: \"\u00C9\",\n       Ecirc: \"\u00CA\",\n       Euml: \"\u00CB\",\n       Igrave: \"\u00CC\",\n       Iacute: \"\u00CD\",\n       Icirc: \"\u00CE\",\n       Iuml: \"\u00CF\",\n       ETH: \"\u00D0\",\n       Ntilde: \"\u00D1\",\n       Ograve: \"\u00D2\",\n       Oacute: \"\u00D3\",\n       Ocirc: \"\u00D4\",\n       Otilde: \"\u00D5\",\n       Ouml: \"\u00D6\",\n       Oslash: \"\u00D8\",\n       Ugrave: \"\u00D9\",\n       Uacute: \"\u00DA\",\n       Ucirc: \"\u00DB\",\n       Uuml: \"\u00DC\",\n       Yacute: \"\u00DD\",\n       THORN: \"\u00DE\",\n       szlig: \"\u00DF\",\n       agrave: \"\u00E0\",\n       aacute: \"\u00E1\",\n       acirc: \"\u00E2\",\n       atilde: \"\u00E3\",\n       auml: \"\u00E4\",\n       aring: \"\u00E5\",\n       aelig: \"\u00E6\",\n       ccedil: \"\u00E7\",\n       egrave: \"\u00E8\",\n       eacute: \"\u00E9\",\n       ecirc: \"\u00EA\",\n       euml: \"\u00EB\",\n       igrave: \"\u00EC\",\n       iacute: \"\u00ED\",\n       icirc: \"\u00EE\",\n       iuml: \"\u00EF\",\n       eth: \"\u00F0\",\n       ntilde: \"\u00F1\",\n       ograve: \"\u00F2\",\n       oacute: \"\u00F3\",\n       ocirc: \"\u00F4\",\n       otilde: \"\u00F5\",\n       ouml: \"\u00F6\",\n       oslash: \"\u00F8\",\n       ugrave: \"\u00F9\",\n       uacute: \"\u00FA\",\n       ucirc: \"\u00FB\",\n       uuml: \"\u00FC\",\n       yacute: \"\u00FD\",\n       thorn: \"\u00FE\",\n       yuml: \"\u00FF\",\n       nbsp: \"\\u00a0\",\n       iexcl: \"\u00A1\",\n       cent: \"\u00A2\",\n       pound: \"\u00A3\",\n       curren: \"\u00A4\",\n       yen: \"\u00A5\",\n       brvbar: \"\u00A6\",\n       sect: \"\u00A7\",\n       uml: \"\u00A8\",\n       copy: \"\u00A9\",\n       ordf: \"\u00AA\",\n       laquo: \"\u00AB\",\n       not: \"\u00AC\",\n       shy: \"\u00AD\u00AD\",\n       reg: \"\u00AE\",\n       macr: \"\u00AF\",\n       deg: \"\u00B0\",\n       plusmn: \"\u00B1\",\n       sup2: \"\u00B2\",\n       sup3: \"\u00B3\",\n       acute: \"\u00B4\",\n       micro: \"\u00B5\",\n       para: \"\u00B6\",\n       middot: \"\u00B7\",\n       cedil: \"\u00B8\",\n       sup1: \"\u00B9\",\n       ordm: \"\u00BA\",\n       raquo: \"\u00BB\",\n       frac14: \"\u00BC\",\n       frac12: \"\u00BD\",\n       frac34: \"\u00BE\",\n       iquest: \"\u00BF\",\n       times: \"\u00D7\",\n       divide: \"\u00F7\",\n       forall: \"\u2200\",\n       part: \"\u2202\",\n       exist: \"\u2203\",\n       empty: \"\u2205\",\n       nabla: \"\u2207\",\n       isin: \"\u2208\",\n       notin: \"\u2209\",\n       ni: \"\u220B\",\n       prod: \"\u220F\",\n       sum: \"\u2211\",\n       minus: \"\u2212\",\n       lowast: \"\u2217\",\n       radic: \"\u221A\",\n       prop: \"\u221D\",\n       infin: \"\u221E\",\n       ang: \"\u2220\",\n       and: \"\u2227\",\n       or: \"\u2228\",\n       cap: \"\u2229\",\n       cup: \"\u222A\",\n       'int': \"\u222B\",\n       there4: \"\u2234\",\n       sim: \"\u223C\",\n       cong: \"\u2245\",\n       asymp: \"\u2248\",\n       ne: \"\u2260\",\n       equiv: \"\u2261\",\n       le: \"\u2264\",\n       ge: \"\u2265\",\n       sub: \"\u2282\",\n       sup: \"\u2283\",\n       nsub: \"\u2284\",\n       sube: \"\u2286\",\n       supe: \"\u2287\",\n       oplus: \"\u2295\",\n       otimes: \"\u2297\",\n       perp: \"\u22A5\",\n       sdot: \"\u22C5\",\n       Alpha: \"\u0391\",\n       Beta: \"\u0392\",\n       Gamma: \"\u0393\",\n       Delta: \"\u0394\",\n       Epsilon: \"\u0395\",\n       Zeta: \"\u0396\",\n       Eta: \"\u0397\",\n       Theta: \"\u0398\",\n       Iota: \"\u0399\",\n       Kappa: \"\u039A\",\n       Lambda: \"\u039B\",\n       Mu: \"\u039C\",\n       Nu: \"\u039D\",\n       Xi: \"\u039E\",\n       Omicron: \"\u039F\",\n       Pi: \"\u03A0\",\n       Rho: \"\u03A1\",\n       Sigma: \"\u03A3\",\n       Tau: \"\u03A4\",\n       Upsilon: \"\u03A5\",\n       Phi: \"\u03A6\",\n       Chi: \"\u03A7\",\n       Psi: \"\u03A8\",\n       Omega: \"\u03A9\",\n       alpha: \"\u03B1\",\n       beta: \"\u03B2\",\n       gamma: \"\u03B3\",\n       delta: \"\u03B4\",\n       epsilon: \"\u03B5\",\n       zeta: \"\u03B6\",\n       eta: \"\u03B7\",\n       theta: \"\u03B8\",\n       iota: \"\u03B9\",\n       kappa: \"\u03BA\",\n       lambda: \"\u03BB\",\n       mu: \"\u03BC\",\n       nu: \"\u03BD\",\n       xi: \"\u03BE\",\n       omicron: \"\u03BF\",\n       pi: \"\u03C0\",\n       rho: \"\u03C1\",\n       sigmaf: \"\u03C2\",\n       sigma: \"\u03C3\",\n       tau: \"\u03C4\",\n       upsilon: \"\u03C5\",\n       phi: \"\u03C6\",\n       chi: \"\u03C7\",\n       psi: \"\u03C8\",\n       omega: \"\u03C9\",\n       thetasym: \"\u03D1\",\n       upsih: \"\u03D2\",\n       piv: \"\u03D6\",\n       OElig: \"\u0152\",\n       oelig: \"\u0153\",\n       Scaron: \"\u0160\",\n       scaron: \"\u0161\",\n       Yuml: \"\u0178\",\n       fnof: \"\u0192\",\n       circ: \"\u02C6\",\n       tilde: \"\u02DC\",\n       ensp: \"\u2002\",\n       emsp: \"\u2003\",\n       thinsp: \"\u2009\",\n       zwnj: \"\u200C\",\n       zwj: \"\u200D\",\n       lrm: \"\u200E\",\n       rlm: \"\u200F\",\n       ndash: \"\u2013\",\n       mdash: \"\u2014\",\n       lsquo: \"\u2018\",\n       rsquo: \"\u2019\",\n       sbquo: \"\u201A\",\n       ldquo: \"\u201C\",\n       rdquo: \"\u201D\",\n       bdquo: \"\u201E\",\n       dagger: \"\u2020\",\n       Dagger: \"\u2021\",\n       bull: \"\u2022\",\n       hellip: \"\u2026\",\n       permil: \"\u2030\",\n       prime: \"\u2032\",\n       Prime: \"\u2033\",\n       lsaquo: \"\u2039\",\n       rsaquo: \"\u203A\",\n       oline: \"\u203E\",\n       euro: \"\u20AC\",\n       trade: \"\u2122\",\n       larr: \"\u2190\",\n       uarr: \"\u2191\",\n       rarr: \"\u2192\",\n       darr: \"\u2193\",\n       harr: \"\u2194\",\n       crarr: \"\u21B5\",\n       lceil: \"\u2308\",\n       rceil: \"\u2309\",\n       lfloor: \"\u230A\",\n       rfloor: \"\u230B\",\n       loz: \"\u25CA\",\n       spades: \"\u2660\",\n       clubs: \"\u2663\",\n       hearts: \"\u2665\",\n       diams: \"\u2666\"\n});\n\n/**\n * @deprecated use `HTML_ENTITIES` instead\n * @see HTML_ENTITIES\n */\nexports.entityMap = exports.HTML_ENTITIES\n", "var NAMESPACE = require(\"./conventions\").NAMESPACE;\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0;//tag name offerring\nvar S_ATTR = 1;//attr name offerring\nvar S_ATTR_SPACE=2;//attr name end and space offer\nvar S_EQ = 3;//=space?\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7;//closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\nfunction ParseError(message, locator) {\n\tthis.message = message\n\tthis.locator = locator\n\tif(Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\nParseError.prototype = new Error();\nParseError.prototype.name = ParseError.name\n\nfunction XMLReader(){\n\n}\n\nXMLReader.prototype = {\n\tparse:function(source,defaultNSMap,entityMap){\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\n\t\tparse(source,defaultNSMap,entityMap,\n\t\t\t\tdomBuilder,this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t}\n}\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\tfunction entityReplacer(a){\n\t\tvar k = a.slice(1,-1);\n\t\tif (Object.hasOwnProperty.call(entityMap, k)) {\n\t\t\treturn entityMap[k];\n\t\t}else if(k.charAt(0) === '#'){\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\n\t\t}else{\n\t\t\terrorHandler.error('entity not found:'+a);\n\t\t\treturn a;\n\t\t}\n\t}\n\tfunction appendText(end){//has some bugs\n\t\tif(end>start){\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\tlocator&&position(start);\n\t\t\tdomBuilder.characters(xt,0,end-start);\n\t\t\tstart = end\n\t\t}\n\t}\n\tfunction position(p,m){\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\n\t\t\tlineStart = m.index;\n\t\t\tlineEnd = lineStart + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t\t//console.log('line++:',locator,startPos,endPos)\n\t\t}\n\t\tlocator.columnNumber = p-lineStart+1;\n\t}\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\n\tvar locator = domBuilder.locator;\n\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\n\tvar closeMap = {};\n\tvar start = 0;\n\twhile(true){\n\t\ttry{\n\t\t\tvar tagStart = source.indexOf('<',start);\n\t\t\tif(tagStart<0){\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\n\t    \t\t\tdoc.appendChild(text);\n\t    \t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(tagStart>start){\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch(source.charAt(tagStart+1)){\n\t\t\tcase '/':\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\n\t\t\t\tvar tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n\t\t\t\tvar config = parseStack.pop();\n\t\t\t\tif(end<0){\n\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\n\t        \t\tend = tagStart+1+tagName.length;\n\t        \t}else if(tagName.match(/\\s</)){\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\n\t        \t\tend = tagStart+1+tagName.length;\n\t\t\t\t}\n\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\tvar endMatch = config.tagName == tagName;\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\n\t\t        if(endIgnoreCaseMach){\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\n\t\t\t\t\tif(localNSMap){\n\t\t\t\t\t\tfor (var prefix in localNSMap) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!endMatch){\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName ); // No known test case\n\t\t\t\t\t}\n\t\t        }else{\n\t\t        \tparseStack.push(config)\n\t\t        }\n\n\t\t\t\tend++;\n\t\t\t\tbreak;\n\t\t\t\t// end elment\n\t\t\tcase '?':// <?...?>\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\n\t\t\t\tbreak;\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\t\t\t\t//elStartEnd\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\n\t\t\t\tvar len = el.length;\n\n\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\n\t\t\t\t\tel.closed = true;\n\t\t\t\t\tif(!entityMap.nbsp){\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(locator && len){\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\n\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\tfor(var i = 0;i<len;i++){\n\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator2\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t}else{\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (NAMESPACE.isHTML(el.uri) && !el.closed) {\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\n\t\t\t\t} else {\n\t\t\t\t\tend++;\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tif (e instanceof ParseError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: '+e)\n\t\t\tend = -1;\n\t\t}\n\t\tif(end>start){\n\t\t\tstart = end;\n\t\t}else{\n\t\t\t//TODO: \u8FD9\u91CC\u6709\u53EF\u80FDsax\u56DE\u9000\uFF0C\u6709\u4F4D\u7F6E\u9519\u8BEF\u98CE\u9669\n\t\t\tappendText(Math.max(tagStart,start)+1);\n\t\t}\n\t}\n}\nfunction copyLocator(f,t){\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\n\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (el.attributeNames.hasOwnProperty(qname)) {\n\t\t\terrorHandler.fatalError('Attribute ' + qname + ' redefined')\n\t\t}\n\t\tel.addValue(\n\t\t\tqname,\n\t\t\t// @see https://www.w3.org/TR/xml/#AVNormalize\n\t\t\t// since the xmldom sax parser does not \"interpret\" DTD the following is not implemented:\n\t\t\t// - recursive replacement of (DTD) entity references\n\t\t\t// - trimming and collapsing multiple spaces into a single one for attributes that are not of type CDATA\n\t\t\tvalue.replace(/[\\t\\n\\r]/g, ' ').replace(/&#?\\w+;/g, entityReplacer),\n\t\t\tstartIndex\n\t\t)\n\t}\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG;//status\n\twhile(true){\n\t\tvar c = source.charAt(p);\n\t\tswitch(c){\n\t\tcase '=':\n\t\t\tif(s === S_ATTR){//attrName\n\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\ts = S_EQ;\n\t\t\t}else if(s === S_ATTR_SPACE){\n\t\t\t\ts = S_EQ;\n\t\t\t}else{\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '\\'':\n\t\tcase '\"':\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t){//equal\n\t\t\t\tif(s === S_ATTR){\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t}\n\t\t\t\tstart = p+1;\n\t\t\t\tp = source.indexOf(c,start)\n\t\t\t\tif(p>0){\n\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\taddAttribute(attrName, value, start-1);\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t}else{\n\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\n\t\t\t\t}\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\n\t\t\t\tstart = p+1;\n\t\t\t\ts = S_ATTR_END\n\t\t\t}else{\n\t\t\t\t//fatalError: no equal before\n\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '/':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\ts =S_TAG_CLOSE;\n\t\t\t\tel.closed = true;\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\tcase S_ATTR:\n\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tel.closed = true;\n\t\t\t\tbreak;\n\t\t\t//case S_EQ:\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\") // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ''://end document\n\t\t\terrorHandler.error('unexpected end of input');\n\t\t\tif(s == S_TAG){\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\t}\n\t\t\treturn p;\n\t\tcase '>':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\tbreak;//normal\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\n\t\t\tcase S_ATTR:\n\t\t\t\tvalue = source.slice(start,p);\n\t\t\t\tif(value.slice(-1) === '/'){\n\t\t\t\t\tel.closed  = true;\n\t\t\t\t\tvalue = value.slice(0,-1)\n\t\t\t\t}\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tif(s === S_ATTR_SPACE){\n\t\t\t\t\tvalue = attrName;\n\t\t\t\t}\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\t}else{\n\t\t\t\t\tif(!NAMESPACE.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)){\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(value, value, start)\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase S_EQ:\n\t\t\t\tthrow new Error('attribute value missed!!');\n\t\t\t}\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\t\t\treturn p;\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\tcase '\\u0080':\n\t\t\tc = ' ';\n\t\tdefault:\n\t\t\tif(c<= ' '){//space\n\t\t\t\tswitch(s){\n\t\t\t\tcase S_TAG:\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR:\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tvar value = source.slice(start, p);\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t//case S_EQ:\n\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t//\tvoid();break;\n\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t//ignore warning\n\t\t\t\t}\n\t\t\t}else{//not space\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\tswitch(s){\n\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tvar tagName =  el.tagName;\n\t\t\t\t\tif (!NAMESPACE.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\tstart = p;\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\n\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_EQ:\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t}\n\t\t\t}\n\t\t}//end outer switch\n\t\t//console.log('p++',p)\n\t\tp++;\n\t}\n}\n/**\n * @return true if has new namespace define\n */\nfunction appendElement(el,domBuilder,currentNSMap){\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\tvar i = el.length;\n\twhile(i--){\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif(nsp>0){\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\n\t\t\tvar localName = qName.slice(nsp+1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\n\t\t}else{\n\t\t\tlocalName = qName;\n\t\t\tprefix = null\n\t\t\tnsPrefix = qName === 'xmlns' && ''\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName ;\n\t\t//prefix == null for no ns prefix attribute\n\t\tif(nsPrefix !== false){//hack!!\n\t\t\tif(localNSMap == null){\n\t\t\t\tlocalNSMap = {}\n\t\t\t\t//console.log(currentNSMap,0)\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\n\t\t\t\t//console.log(currentNSMap,1)\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE.XMLNS\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value)\n\t\t}\n\t}\n\tvar i = el.length;\n\twhile(i--){\n\t\ta = el[i];\n\t\tvar prefix = a.prefix;\n\t\tif(prefix){//no prefix attribute has no namespace\n\t\t\tif(prefix === 'xml'){\n\t\t\t\ta.uri = NAMESPACE.XML;\n\t\t\t}if(prefix !== 'xmlns'){\n\t\t\t\ta.uri = currentNSMap[prefix || '']\n\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif(nsp>0){\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\n\t}else{\n\t\tprefix = null;//important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = el.uri = currentNSMap[prefix || ''];\n\tdomBuilder.startElement(ns,localName,tagName,el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif(el.closed){\n\t\tdomBuilder.endElement(ns,localName,tagName);\n\t\tif(localNSMap){\n\t\t\tfor (prefix in localNSMap) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else{\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\n\tif(/^(?:script|textarea)$/i.test(tagName)){\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\n\t\tif(/[&<]/.test(text)){\n\t\t\tif(/^script$/i.test(tagName)){\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\n\t\t\t\t\t//lexHandler.startCDATA();\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\t\t//lexHandler.endCDATA();\n\t\t\t\t\treturn elEndStart;\n\t\t\t\t//}\n\t\t\t}//}else{//text area\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\treturn elEndStart;\n\t\t\t//}\n\n\t\t}\n\t}\n\treturn elStartEnd+1;\n}\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\n\t//if(tagName in closeMap){\n\tvar pos = closeMap[tagName];\n\tif(pos == null){\n\t\t//console.log(tagName)\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\n\t\tif(pos<elStartEnd){//\u5FD8\u8BB0\u95ED\u5408\n\t\t\tpos = source.lastIndexOf('</'+tagName)\n\t\t}\n\t\tcloseMap[tagName] =pos\n\t}\n\treturn pos<elStartEnd;\n\t//}\n}\n\nfunction _copy (source, target) {\n\tfor (var n in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, n)) {\n\t\t\ttarget[n] = source[n];\n\t\t}\n\t}\n}\n\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\n\tvar next= source.charAt(start+2)\n\tswitch(next){\n\tcase '-':\n\t\tif(source.charAt(start + 3) === '-'){\n\t\t\tvar end = source.indexOf('-->',start+4);\n\t\t\t//append comment source.substring(4,end)//<!--\n\t\t\tif(end>start){\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\n\t\t\t\treturn end+3;\n\t\t\t}else{\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}else{\n\t\t\t//error\n\t\t\treturn -1;\n\t\t}\n\tdefault:\n\t\tif(source.substr(start+3,6) == 'CDATA['){\n\t\t\tvar end = source.indexOf(']]>',start+9);\n\t\t\tdomBuilder.startCDATA();\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\n\t\t\tdomBuilder.endCDATA()\n\t\t\treturn end+3;\n\t\t}\n\t\t//<!DOCTYPE\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId)\n\t\tvar matchs = split(source,start);\n\t\tvar len = matchs.length;\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\n\t\t\tvar name = matchs[1][0];\n\t\t\tvar pubid = false;\n\t\t\tvar sysid = false;\n\t\t\tif(len>3){\n\t\t\t\tif(/^public$/i.test(matchs[2][0])){\n\t\t\t\t\tpubid = matchs[3][0];\n\t\t\t\t\tsysid = len>4 && matchs[4][0];\n\t\t\t\t}else if(/^system$/i.test(matchs[2][0])){\n\t\t\t\t\tsysid = matchs[3][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar lastMatch = matchs[len-1]\n\t\t\tdomBuilder.startDTD(name, pubid, sysid);\n\t\t\tdomBuilder.endDTD();\n\n\t\t\treturn lastMatch.index+lastMatch[0].length\n\t\t}\n\t}\n\treturn -1;\n}\n\n\n\nfunction parseInstruction(source,start,domBuilder){\n\tvar end = source.indexOf('?>',start);\n\tif(end){\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\t\tif(match){\n\t\t\tvar len = match[0].length;\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\n\t\t\treturn end+2;\n\t\t}else{//error\n\t\t\treturn -1;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction ElementAttributes(){\n\tthis.attributeNames = {}\n}\nElementAttributes.prototype = {\n\tsetTagName:function(tagName){\n\t\tif(!tagNamePattern.test(tagName)){\n\t\t\tthrow new Error('invalid tagName:'+tagName)\n\t\t}\n\t\tthis.tagName = tagName\n\t},\n\taddValue:function(qName, value, offset) {\n\t\tif(!tagNamePattern.test(qName)){\n\t\t\tthrow new Error('invalid attribute:'+qName)\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\n\t},\n\tlength:0,\n\tgetLocalName:function(i){return this[i].localName},\n\tgetLocator:function(i){return this[i].locator},\n\tgetQName:function(i){return this[i].qName},\n\tgetURI:function(i){return this[i].uri},\n\tgetValue:function(i){return this[i].value}\n//\t,getIndex:function(uri, localName)){\n//\t\tif(localName){\n//\n//\t\t}else{\n//\t\t\tvar qName = uri\n//\t\t}\n//\t},\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n//\tgetType:function(uri,localName){}\n//\tgetType:function(i){},\n}\n\n\n\nfunction split(source,start){\n\tvar match;\n\tvar buf = [];\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n\treg.lastIndex = start;\n\treg.exec(source);//skip <\n\twhile(match = reg.exec(source)){\n\t\tbuf.push(match);\n\t\tif(match[1])return buf;\n\t}\n}\n\nexports.XMLReader = XMLReader;\nexports.ParseError = ParseError;\n", "var conventions = require(\"./conventions\");\nvar dom = require('./dom')\nvar entities = require('./entities');\nvar sax = require('./sax');\n\nvar DOMImplementation = dom.DOMImplementation;\n\nvar NAMESPACE = conventions.NAMESPACE;\n\nvar ParseError = sax.ParseError;\nvar XMLReader = sax.XMLReader;\n\n/**\n * Normalizes line ending according to https://www.w3.org/TR/xml11/#sec-line-ends:\n *\n * > XML parsed entities are often stored in computer files which,\n * > for editing convenience, are organized into lines.\n * > These lines are typically separated by some combination\n * > of the characters CARRIAGE RETURN (#xD) and LINE FEED (#xA).\n * >\n * > To simplify the tasks of applications, the XML processor must behave\n * > as if it normalized all line breaks in external parsed entities (including the document entity)\n * > on input, before parsing, by translating all of the following to a single #xA character:\n * >\n * > 1. the two-character sequence #xD #xA\n * > 2. the two-character sequence #xD #x85\n * > 3. the single character #x85\n * > 4. the single character #x2028\n * > 5. any #xD character that is not immediately followed by #xA or #x85.\n *\n * @param {string} input\n * @returns {string}\n */\nfunction normalizeLineEndings(input) {\n\treturn input\n\t\t.replace(/\\r[\\n\\u0085]/g, '\\n')\n\t\t.replace(/[\\r\\u0085\\u2028]/g, '\\n')\n}\n\n/**\n * @typedef Locator\n * @property {number} [columnNumber]\n * @property {number} [lineNumber]\n */\n\n/**\n * @typedef DOMParserOptions\n * @property {DOMHandler} [domBuilder]\n * @property {Function} [errorHandler]\n * @property {(string) => string} [normalizeLineEndings] used to replace line endings before parsing\n * \t\t\t\t\t\tdefaults to `normalizeLineEndings`\n * @property {Locator} [locator]\n * @property {Record<string, string>} [xmlns]\n *\n * @see normalizeLineEndings\n */\n\n/**\n * The DOMParser interface provides the ability to parse XML or HTML source code\n * from a string into a DOM `Document`.\n *\n * _xmldom is different from the spec in that it allows an `options` parameter,\n * to override the default behavior._\n *\n * @param {DOMParserOptions} [options]\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-parsing-and-serialization\n */\nfunction DOMParser(options){\n\tthis.options = options ||{locator:{}};\n}\n\nDOMParser.prototype.parseFromString = function(source,mimeType){\n\tvar options = this.options;\n\tvar sax =  new XMLReader();\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\n\tvar errorHandler = options.errorHandler;\n\tvar locator = options.locator;\n\tvar defaultNSMap = options.xmlns||{};\n\tvar isHTML = /\\/x?html?$/.test(mimeType);//mimeType.toLowerCase().indexOf('html') > -1;\n  \tvar entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;\n\tif(locator){\n\t\tdomBuilder.setDocumentLocator(locator)\n\t}\n\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\n\tsax.domBuilder = options.domBuilder || domBuilder;\n\tif(isHTML){\n\t\tdefaultNSMap[''] = NAMESPACE.HTML;\n\t}\n\tdefaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\tvar normalize = options.normalizeLineEndings || normalizeLineEndings;\n\tif (source && typeof source === 'string') {\n\t\tsax.parse(\n\t\t\tnormalize(source),\n\t\t\tdefaultNSMap,\n\t\t\tentityMap\n\t\t)\n\t} else {\n\t\tsax.errorHandler.error('invalid doc source')\n\t}\n\treturn domBuilder.doc;\n}\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\n\tif(!errorImpl){\n\t\tif(domBuilder instanceof DOMHandler){\n\t\t\treturn domBuilder;\n\t\t}\n\t\terrorImpl = domBuilder ;\n\t}\n\tvar errorHandler = {}\n\tvar isCallback = errorImpl instanceof Function;\n\tlocator = locator||{}\n\tfunction build(key){\n\t\tvar fn = errorImpl[key];\n\t\tif(!fn && isCallback){\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\n\t\t}\n\t\terrorHandler[key] = fn && function(msg){\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\n\t\t}||function(){};\n\t}\n\tbuild('warning');\n\tbuild('error');\n\tbuild('fatalError');\n\treturn errorHandler;\n}\n\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n/**\n * +ContentHandler+ErrorHandler\n * +LexicalHandler+EntityResolver2\n * -DeclHandler-DTDHandler\n *\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\n */\nfunction DOMHandler() {\n    this.cdata = false;\n}\nfunction position(locator,node){\n\tnode.lineNumber = locator.lineNumber;\n\tnode.columnNumber = locator.columnNumber;\n}\n/**\n * @see org.xml.sax.ContentHandler#startDocument\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n */\nDOMHandler.prototype = {\n\tstartDocument : function() {\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\n    \tif (this.locator) {\n        \tthis.doc.documentURI = this.locator.systemId;\n    \t}\n\t},\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\n\t\tvar doc = this.doc;\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\n\t    var len = attrs.length;\n\t    appendElement(this, el);\n\t    this.currentElement = el;\n\n\t\tthis.locator && position(this.locator,el)\n\t    for (var i = 0 ; i < len; i++) {\n\t        var namespaceURI = attrs.getURI(i);\n\t        var value = attrs.getValue(i);\n\t        var qName = attrs.getQName(i);\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\n\t\t\tattr.value = attr.nodeValue = value;\n\t\t\tel.setAttributeNode(attr)\n\t    }\n\t},\n\tendElement:function(namespaceURI, localName, qName) {\n\t\tvar current = this.currentElement\n\t\tvar tagName = current.tagName;\n\t\tthis.currentElement = current.parentNode;\n\t},\n\tstartPrefixMapping:function(prefix, uri) {\n\t},\n\tendPrefixMapping:function(prefix) {\n\t},\n\tprocessingInstruction:function(target, data) {\n\t    var ins = this.doc.createProcessingInstruction(target, data);\n\t    this.locator && position(this.locator,ins)\n\t    appendElement(this, ins);\n\t},\n\tignorableWhitespace:function(ch, start, length) {\n\t},\n\tcharacters:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t\t//console.log(chars)\n\t\tif(chars){\n\t\t\tif (this.cdata) {\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\n\t\t\t} else {\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\n\t\t\t}\n\t\t\tif(this.currentElement){\n\t\t\t\tthis.currentElement.appendChild(charNode);\n\t\t\t}else if(/^\\s*$/.test(chars)){\n\t\t\t\tthis.doc.appendChild(charNode);\n\t\t\t\t//process xml\n\t\t\t}\n\t\t\tthis.locator && position(this.locator,charNode)\n\t\t}\n\t},\n\tskippedEntity:function(name) {\n\t},\n\tendDocument:function() {\n\t\tthis.doc.normalize();\n\t},\n\tsetDocumentLocator:function (locator) {\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\n\t    \tlocator.lineNumber = 0;\n\t    }\n\t},\n\t//LexicalHandler\n\tcomment:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t    var comm = this.doc.createComment(chars);\n\t    this.locator && position(this.locator,comm)\n\t    appendElement(this, comm);\n\t},\n\n\tstartCDATA:function() {\n\t    //used in characters() methods\n\t    this.cdata = true;\n\t},\n\tendCDATA:function() {\n\t    this.cdata = false;\n\t},\n\n\tstartDTD:function(name, publicId, systemId) {\n\t\tvar impl = this.doc.implementation;\n\t    if (impl && impl.createDocumentType) {\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\n\t        this.locator && position(this.locator,dt)\n\t        appendElement(this, dt);\n\t\t\t\t\tthis.doc.doctype = dt;\n\t    }\n\t},\n\t/**\n\t * @see org.xml.sax.ErrorHandler\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n\t */\n\twarning:function(error) {\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\n\t},\n\terror:function(error) {\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\n\t},\n\tfatalError:function(error) {\n\t\tthrow new ParseError(error, this.locator);\n\t}\n}\nfunction _locator(l){\n\tif(l){\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\n\t}\n}\nfunction _toString(chars,start,length){\n\tif(typeof chars == 'string'){\n\t\treturn chars.substr(start,length)\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n\t\tif(chars.length >= start+length || start){\n\t\t\treturn new java.lang.String(chars,start,length)+'';\n\t\t}\n\t\treturn chars;\n\t}\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\n\tDOMHandler.prototype[key] = function(){return null}\n})\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement (hander,node) {\n    if (!hander.currentElement) {\n        hander.doc.appendChild(node);\n    } else {\n        hander.currentElement.appendChild(node);\n    }\n}//appendChild and setAttributeNS are preformance key\n\nexports.__DOMHandler = DOMHandler;\nexports.normalizeLineEndings = normalizeLineEndings;\nexports.DOMParser = DOMParser;\n", "var dom = require('./dom')\nexports.DOMImplementation = dom.DOMImplementation\nexports.XMLSerializer = dom.XMLSerializer\nexports.DOMParser = require('./dom-parser').DOMParser\n", "// rev 452\n/********************************************************************************\n*                                                                              *\n* Author    :  Angus Johnson                                                   *\n* Version   :  6.1.3a                                                          *\n* Date      :  22 January 2014                                                 *\n* Website   :  http://www.angusj.com                                           *\n* Copyright :  Angus Johnson 2010-2014                                         *\n*                                                                              *\n* License:                                                                     *\n* Use, modification & distribution is subject to Boost Software License Ver 1. *\n* http://www.boost.org/LICENSE_1_0.txt                                         *\n*                                                                              *\n* Attributions:                                                                *\n* The code in this library is an extension of Bala Vatti's clipping algorithm: *\n* \"A generic solution to polygon clipping\"                                     *\n* Communications of the ACM, Vol 35, Issue 7 (July 1992) pp 56-63.             *\n* http://portal.acm.org/citation.cfm?id=129906                                 *\n*                                                                              *\n* Computer graphics and geometric modeling: implementation and algorithms      *\n* By Max K. Agoston                                                            *\n* Springer; 1 edition (January 4, 2005)                                        *\n* http://books.google.com/books?q=vatti+clipping+agoston                       *\n*                                                                              *\n* See also:                                                                    *\n* \"Polygon Offsetting by Computing Winding Numbers\"                            *\n* Paper no. DETC2005-85513 pp. 565-575                                         *\n* ASME 2005 International Design Engineering Technical Conferences             *\n* and Computers and Information in Engineering Conference (IDETC/CIE2005)      *\n* September 24-28, 2005 , Long Beach, California, USA                          *\n* http://www.me.berkeley.edu/~mcmains/pubs/DAC05OffsetPolygon.pdf              *\n*                                                                              *\n*******************************************************************************/\n/*******************************************************************************\n*                                                                              *\n* Author    :  Timo                                                            *\n* Version   :  6.1.3.2                                                         *\n* Date      :  1 February 2014                                                 *\n*                                                                              *\n* This is a translation of the C# Clipper library to Javascript.               *\n* Int128 struct of C# is implemented using JSBN of Tom Wu.                     *\n* Because Javascript lacks support for 64-bit integers, the space              *\n* is a little more restricted than in C# version.                              *\n*                                                                              *\n* C# version has support for coordinate space:                                 *\n* +-4611686018427387903 ( sqrt(2^127 -1)/2 )                                   *\n* while Javascript version has support for space:                              *\n* +-4503599627370495 ( sqrt(2^106 -1)/2 )                                      *\n*                                                                              *\n* Tom Wu's JSBN proved to be the fastest big integer library:                  *\n* http://jsperf.com/big-integer-library-test                                   *\n*                                                                              *\n* This class can be made simpler when (if ever) 64-bit integer support comes.  *\n*                                                                              *\n*******************************************************************************/\n/*******************************************************************************\n*                                                                              *\n* Basic JavaScript BN library - subset useful for RSA encryption.              *\n* http://www-cs-students.stanford.edu/~tjw/jsbn/                               *\n* Copyright (c) 2005  Tom Wu                                                   *\n* All Rights Reserved.                                                         *\n* See \"LICENSE\" for details:                                                   *\n* http://www-cs-students.stanford.edu/~tjw/jsbn/LICENSE                        *\n*                                                                              *\n*******************************************************************************/\n\n\"use strict\";\n//use_int32: When enabled 32bit ints are used instead of 64bit ints. This\n//improve performance but coordinate values are limited to the range +/- 46340\nvar use_int32 = false;\n//use_xyz: adds a Z member to IntPoint. Adds a minor cost to performance.\nvar use_xyz = false;\n//UseLines: Enables line clipping. Adds a very minor cost to performance.\nvar use_lines = true;\n//use_deprecated: Enables support for the obsolete OffsetPaths() function\n//which has been replace with the ClipperOffset class.\nvar use_deprecated = false;\n\nvar ClipperLib = {};\nvar isNode = false;\nif (typeof module !== 'undefined' && module.exports)\n{\n  module.exports = ClipperLib;\n  isNode = true;\n}\nelse\n{\n  if (typeof (document) !== \"undefined\") window.ClipperLib = ClipperLib;\n  else self['ClipperLib'] = ClipperLib;\n}\nvar navigator_appName;\nif (!isNode)\n{\n  var nav = navigator.userAgent.toString().toLowerCase();\n  navigator_appName = navigator.appName;\n}\nelse\n{\n  var nav = \"chrome\"; // Node.js uses Chrome's V8 engine\n  navigator_appName = \"Netscape\"; // Firefox, Chrome and Safari returns \"Netscape\", so Node.js should also\n}\n// Browser test to speedup performance critical functions\nvar browser = {};\nif (nav.indexOf(\"chrome\") != -1 && nav.indexOf(\"chromium\") == -1) browser.chrome = 1;\nelse browser.chrome = 0;\nif (nav.indexOf(\"chromium\") != -1) browser.chromium = 1;\nelse browser.chromium = 0;\nif (nav.indexOf(\"safari\") != -1 && nav.indexOf(\"chrome\") == -1 && nav.indexOf(\"chromium\") == -1) browser.safari = 1;\nelse browser.safari = 0;\nif (nav.indexOf(\"firefox\") != -1) browser.firefox = 1;\nelse browser.firefox = 0;\nif (nav.indexOf(\"firefox/17\") != -1) browser.firefox17 = 1;\nelse browser.firefox17 = 0;\nif (nav.indexOf(\"firefox/15\") != -1) browser.firefox15 = 1;\nelse browser.firefox15 = 0;\nif (nav.indexOf(\"firefox/3\") != -1) browser.firefox3 = 1;\nelse browser.firefox3 = 0;\nif (nav.indexOf(\"opera\") != -1) browser.opera = 1;\nelse browser.opera = 0;\nif (nav.indexOf(\"msie 10\") != -1) browser.msie10 = 1;\nelse browser.msie10 = 0;\nif (nav.indexOf(\"msie 9\") != -1) browser.msie9 = 1;\nelse browser.msie9 = 0;\nif (nav.indexOf(\"msie 8\") != -1) browser.msie8 = 1;\nelse browser.msie8 = 0;\nif (nav.indexOf(\"msie 7\") != -1) browser.msie7 = 1;\nelse browser.msie7 = 0;\nif (nav.indexOf(\"msie \") != -1) browser.msie = 1;\nelse browser.msie = 0;\nClipperLib.biginteger_used = null;\n// Copyright (c) 2005  Tom Wu\n// All Rights Reserved.\n// See \"LICENSE\" for details.\n// Basic JavaScript BN library - subset useful for RSA encryption.\n// Bits per digit\nvar dbits;\n// JavaScript engine analysis\nvar canary = 0xdeadbeefcafe;\nvar j_lm = ((canary & 0xffffff) == 0xefcafe);\n// (public) Constructor\nfunction BigInteger(a, b, c)\n{\n  // This test variable can be removed,\n  // but at least for performance tests it is useful piece of knowledge\n  // This is the only ClipperLib related variable in BigInteger library\n  ClipperLib.biginteger_used = 1;\n  if (a != null)\n    if (\"number\" == typeof a && \"undefined\" == typeof (b)) this.fromInt(a); // faster conversion\n    else if (\"number\" == typeof a) this.fromNumber(a, b, c);\n  else if (b == null && \"string\" != typeof a) this.fromString(a, 256);\n  else this.fromString(a, b);\n}\n// return new, unset BigInteger\nfunction nbi()\n{\n  return new BigInteger(null);\n}\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\nfunction am1(i, x, w, j, c, n)\n{\n  while (--n >= 0)\n  {\n    var v = x * this[i++] + w[j] + c;\n    c = Math.floor(v / 0x4000000);\n    w[j++] = v & 0x3ffffff;\n  }\n  return c;\n}\n// am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\nfunction am2(i, x, w, j, c, n)\n{\n  var xl = x & 0x7fff,\n    xh = x >> 15;\n  while (--n >= 0)\n  {\n    var l = this[i] & 0x7fff;\n    var h = this[i++] >> 15;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n    c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n    w[j++] = l & 0x3fffffff;\n  }\n  return c;\n}\n// Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\nfunction am3(i, x, w, j, c, n)\n{\n  var xl = x & 0x3fff,\n    xh = x >> 14;\n  while (--n >= 0)\n  {\n    var l = this[i] & 0x3fff;\n    var h = this[i++] >> 14;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n    c = (l >> 28) + (m >> 14) + xh * h;\n    w[j++] = l & 0xfffffff;\n  }\n  return c;\n}\nif (j_lm && (navigator_appName == \"Microsoft Internet Explorer\"))\n{\n  BigInteger.prototype.am = am2;\n  dbits = 30;\n}\nelse if (j_lm && (navigator_appName != \"Netscape\"))\n{\n  BigInteger.prototype.am = am1;\n  dbits = 26;\n}\nelse\n{ // Mozilla/Netscape seems to prefer am3\n  BigInteger.prototype.am = am3;\n  dbits = 28;\n}\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = ((1 << dbits) - 1);\nBigInteger.prototype.DV = (1 << dbits);\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2, BI_FP);\nBigInteger.prototype.F1 = BI_FP - dbits;\nBigInteger.prototype.F2 = 2 * dbits - BI_FP;\n// Digit conversions\nvar BI_RM = \"0123456789abcdefghijklmnopqrstuvwxyz\";\nvar BI_RC = new Array();\nvar rr, vv;\nrr = \"0\".charCodeAt(0);\nfor (vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;\nrr = \"a\".charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\nrr = \"A\".charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\n\nfunction int2char(n)\n{\n  return BI_RM.charAt(n);\n}\n\nfunction intAt(s, i)\n{\n  var c = BI_RC[s.charCodeAt(i)];\n  return (c == null) ? -1 : c;\n}\n// (protected) copy this to r\nfunction bnpCopyTo(r)\n{\n  for (var i = this.t - 1; i >= 0; --i) r[i] = this[i];\n  r.t = this.t;\n  r.s = this.s;\n}\n// (protected) set from integer value x, -DV <= x < DV\nfunction bnpFromInt(x)\n{\n  this.t = 1;\n  this.s = (x < 0) ? -1 : 0;\n  if (x > 0) this[0] = x;\n  else if (x < -1) this[0] = x + this.DV;\n  else this.t = 0;\n}\n// return bigint initialized to value\nfunction nbv(i)\n{\n  var r = nbi();\n  r.fromInt(i);\n  return r;\n}\n// (protected) set from string and radix\nfunction bnpFromString(s, b)\n{\n  var k;\n  if (b == 16) k = 4;\n  else if (b == 8) k = 3;\n  else if (b == 256) k = 8; // byte array\n  else if (b == 2) k = 1;\n  else if (b == 32) k = 5;\n  else if (b == 4) k = 2;\n  else\n  {\n    this.fromRadix(s, b);\n    return;\n  }\n  this.t = 0;\n  this.s = 0;\n  var i = s.length,\n    mi = false,\n    sh = 0;\n  while (--i >= 0)\n  {\n    var x = (k == 8) ? s[i] & 0xff : intAt(s, i);\n    if (x < 0)\n    {\n      if (s.charAt(i) == \"-\") mi = true;\n      continue;\n    }\n    mi = false;\n    if (sh == 0)\n      this[this.t++] = x;\n    else if (sh + k > this.DB)\n    {\n      this[this.t - 1] |= (x & ((1 << (this.DB - sh)) - 1)) << sh;\n      this[this.t++] = (x >> (this.DB - sh));\n    }\n    else\n      this[this.t - 1] |= x << sh;\n    sh += k;\n    if (sh >= this.DB) sh -= this.DB;\n  }\n  if (k == 8 && (s[0] & 0x80) != 0)\n  {\n    this.s = -1;\n    if (sh > 0) this[this.t - 1] |= ((1 << (this.DB - sh)) - 1) << sh;\n  }\n  this.clamp();\n  if (mi) BigInteger.ZERO.subTo(this, this);\n}\n// (protected) clamp off excess high words\nfunction bnpClamp()\n{\n  var c = this.s & this.DM;\n  while (this.t > 0 && this[this.t - 1] == c)--this.t;\n}\n// (public) return string representation in given radix\nfunction bnToString(b)\n{\n  if (this.s < 0) return \"-\" + this.negate().toString(b);\n  var k;\n  if (b == 16) k = 4;\n  else if (b == 8) k = 3;\n  else if (b == 2) k = 1;\n  else if (b == 32) k = 5;\n  else if (b == 4) k = 2;\n  else return this.toRadix(b);\n  var km = (1 << k) - 1,\n    d, m = false,\n    r = \"\",\n    i = this.t;\n  var p = this.DB - (i * this.DB) % k;\n  if (i-- > 0)\n  {\n    if (p < this.DB && (d = this[i] >> p) > 0)\n    {\n      m = true;\n      r = int2char(d);\n    }\n    while (i >= 0)\n    {\n      if (p < k)\n      {\n        d = (this[i] & ((1 << p) - 1)) << (k - p);\n        d |= this[--i] >> (p += this.DB - k);\n      }\n      else\n      {\n        d = (this[i] >> (p -= k)) & km;\n        if (p <= 0)\n        {\n          p += this.DB;\n          --i;\n        }\n      }\n      if (d > 0) m = true;\n      if (m) r += int2char(d);\n    }\n  }\n  return m ? r : \"0\";\n}\n// (public) -this\nfunction bnNegate()\n{\n  var r = nbi();\n  BigInteger.ZERO.subTo(this, r);\n  return r;\n}\n// (public) |this|\nfunction bnAbs()\n{\n  return (this.s < 0) ? this.negate() : this;\n}\n// (public) return + if this > a, - if this < a, 0 if equal\nfunction bnCompareTo(a)\n{\n  var r = this.s - a.s;\n  if (r != 0) return r;\n  var i = this.t;\n  r = i - a.t;\n  if (r != 0) return (this.s < 0) ? -r : r;\n  while (--i >= 0)\n    if ((r = this[i] - a[i]) != 0) return r;\n  return 0;\n}\n// returns bit length of the integer x\nfunction nbits(x)\n{\n  var r = 1,\n    t;\n  if ((t = x >>> 16) != 0)\n  {\n    x = t;\n    r += 16;\n  }\n  if ((t = x >> 8) != 0)\n  {\n    x = t;\n    r += 8;\n  }\n  if ((t = x >> 4) != 0)\n  {\n    x = t;\n    r += 4;\n  }\n  if ((t = x >> 2) != 0)\n  {\n    x = t;\n    r += 2;\n  }\n  if ((t = x >> 1) != 0)\n  {\n    x = t;\n    r += 1;\n  }\n  return r;\n}\n// (public) return the number of bits in \"this\"\nfunction bnBitLength()\n{\n  if (this.t <= 0) return 0;\n  return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ (this.s & this.DM));\n}\n// (protected) r = this << n*DB\nfunction bnpDLShiftTo(n, r)\n{\n  var i;\n  for (i = this.t - 1; i >= 0; --i) r[i + n] = this[i];\n  for (i = n - 1; i >= 0; --i) r[i] = 0;\n  r.t = this.t + n;\n  r.s = this.s;\n}\n// (protected) r = this >> n*DB\nfunction bnpDRShiftTo(n, r)\n{\n  for (var i = n; i < this.t; ++i) r[i - n] = this[i];\n  r.t = Math.max(this.t - n, 0);\n  r.s = this.s;\n}\n// (protected) r = this << n\nfunction bnpLShiftTo(n, r)\n{\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << cbs) - 1;\n  var ds = Math.floor(n / this.DB),\n    c = (this.s << bs) & this.DM,\n    i;\n  for (i = this.t - 1; i >= 0; --i)\n  {\n    r[i + ds + 1] = (this[i] >> cbs) | c;\n    c = (this[i] & bm) << bs;\n  }\n  for (i = ds - 1; i >= 0; --i) r[i] = 0;\n  r[ds] = c;\n  r.t = this.t + ds + 1;\n  r.s = this.s;\n  r.clamp();\n}\n// (protected) r = this >> n\nfunction bnpRShiftTo(n, r)\n{\n  r.s = this.s;\n  var ds = Math.floor(n / this.DB);\n  if (ds >= this.t)\n  {\n    r.t = 0;\n    return;\n  }\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << bs) - 1;\n  r[0] = this[ds] >> bs;\n  for (var i = ds + 1; i < this.t; ++i)\n  {\n    r[i - ds - 1] |= (this[i] & bm) << cbs;\n    r[i - ds] = this[i] >> bs;\n  }\n  if (bs > 0) r[this.t - ds - 1] |= (this.s & bm) << cbs;\n  r.t = this.t - ds;\n  r.clamp();\n}\n// (protected) r = this - a\nfunction bnpSubTo(a, r)\n{\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m)\n  {\n    c += this[i] - a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t)\n  {\n    c -= a.s;\n    while (i < this.t)\n    {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  }\n  else\n  {\n    c += this.s;\n    while (i < a.t)\n    {\n      c -= a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c -= a.s;\n  }\n  r.s = (c < 0) ? -1 : 0;\n  if (c < -1) r[i++] = this.DV + c;\n  else if (c > 0) r[i++] = c;\n  r.t = i;\n  r.clamp();\n}\n// (protected) r = this * a, r != this,a (HAC 14.12)\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyTo(a, r)\n{\n  var x = this.abs(),\n    y = a.abs();\n  var i = x.t;\n  r.t = i + y.t;\n  while (--i >= 0) r[i] = 0;\n  for (i = 0; i < y.t; ++i) r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n  r.s = 0;\n  r.clamp();\n  if (this.s != a.s) BigInteger.ZERO.subTo(r, r);\n}\n// (protected) r = this^2, r != this (HAC 14.16)\nfunction bnpSquareTo(r)\n{\n  var x = this.abs();\n  var i = r.t = 2 * x.t;\n  while (--i >= 0) r[i] = 0;\n  for (i = 0; i < x.t - 1; ++i)\n  {\n    var c = x.am(i, x[i], r, 2 * i, 0, 1);\n    if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV)\n    {\n      r[i + x.t] -= x.DV;\n      r[i + x.t + 1] = 1;\n    }\n  }\n  if (r.t > 0) r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n  r.s = 0;\n  r.clamp();\n}\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n// r != q, this != m.  q or r may be null.\nfunction bnpDivRemTo(m, q, r)\n{\n  var pm = m.abs();\n  if (pm.t <= 0) return;\n  var pt = this.abs();\n  if (pt.t < pm.t)\n  {\n    if (q != null) q.fromInt(0);\n    if (r != null) this.copyTo(r);\n    return;\n  }\n  if (r == null) r = nbi();\n  var y = nbi(),\n    ts = this.s,\n    ms = m.s;\n  var nsh = this.DB - nbits(pm[pm.t - 1]); // normalize modulus\n  if (nsh > 0)\n  {\n    pm.lShiftTo(nsh, y);\n    pt.lShiftTo(nsh, r);\n  }\n  else\n  {\n    pm.copyTo(y);\n    pt.copyTo(r);\n  }\n  var ys = y.t;\n  var y0 = y[ys - 1];\n  if (y0 == 0) return;\n  var yt = y0 * (1 << this.F1) + ((ys > 1) ? y[ys - 2] >> this.F2 : 0);\n  var d1 = this.FV / yt,\n    d2 = (1 << this.F1) / yt,\n    e = 1 << this.F2;\n  var i = r.t,\n    j = i - ys,\n    t = (q == null) ? nbi() : q;\n  y.dlShiftTo(j, t);\n  if (r.compareTo(t) >= 0)\n  {\n    r[r.t++] = 1;\n    r.subTo(t, r);\n  }\n  BigInteger.ONE.dlShiftTo(ys, t);\n  t.subTo(y, y); // \"negative\" y so we can replace sub with am later\n  while (y.t < ys) y[y.t++] = 0;\n  while (--j >= 0)\n  {\n    // Estimate quotient digit\n    var qd = (r[--i] == y0) ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n    if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd)\n    { // Try it out\n      y.dlShiftTo(j, t);\n      r.subTo(t, r);\n      while (r[i] < --qd) r.subTo(t, r);\n    }\n  }\n  if (q != null)\n  {\n    r.drShiftTo(ys, q);\n    if (ts != ms) BigInteger.ZERO.subTo(q, q);\n  }\n  r.t = ys;\n  r.clamp();\n  if (nsh > 0) r.rShiftTo(nsh, r); // Denormalize remainder\n  if (ts < 0) BigInteger.ZERO.subTo(r, r);\n}\n// (public) this mod a\nfunction bnMod(a)\n{\n  var r = nbi();\n  this.abs().divRemTo(a, null, r);\n  if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r, r);\n  return r;\n}\n// Modular reduction using \"classic\" algorithm\nfunction Classic(m)\n{\n  this.m = m;\n}\n\nfunction cConvert(x)\n{\n  if (x.s < 0 || x.compareTo(this.m) >= 0) return x.mod(this.m);\n  else return x;\n}\n\nfunction cRevert(x)\n{\n  return x;\n}\n\nfunction cReduce(x)\n{\n  x.divRemTo(this.m, null, x);\n}\n\nfunction cMulTo(x, y, r)\n{\n  x.multiplyTo(y, r);\n  this.reduce(r);\n}\n\nfunction cSqrTo(x, r)\n{\n  x.squareTo(r);\n  this.reduce(r);\n}\nClassic.prototype.convert = cConvert;\nClassic.prototype.revert = cRevert;\nClassic.prototype.reduce = cReduce;\nClassic.prototype.mulTo = cMulTo;\nClassic.prototype.sqrTo = cSqrTo;\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n// justification:\n//         xy == 1 (mod m)\n//         xy =  1+km\n//   xy(2-xy) = (1+km)(1-km)\n// x[y(2-xy)] = 1-k^2m^2\n// x[y(2-xy)] == 1 (mod m^2)\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\nfunction bnpInvDigit()\n{\n  if (this.t < 1) return 0;\n  var x = this[0];\n  if ((x & 1) == 0) return 0;\n  var y = x & 3; // y == 1/x mod 2^2\n  y = (y * (2 - (x & 0xf) * y)) & 0xf; // y == 1/x mod 2^4\n  y = (y * (2 - (x & 0xff) * y)) & 0xff; // y == 1/x mod 2^8\n  y = (y * (2 - (((x & 0xffff) * y) & 0xffff))) & 0xffff; // y == 1/x mod 2^16\n  // last step - calculate inverse mod DV directly;\n  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n  y = (y * (2 - x * y % this.DV)) % this.DV; // y == 1/x mod 2^dbits\n  // we really want the negative inverse, and -DV < y < DV\n  return (y > 0) ? this.DV - y : -y;\n}\n// Montgomery reduction\nfunction Montgomery(m)\n{\n  this.m = m;\n  this.mp = m.invDigit();\n  this.mpl = this.mp & 0x7fff;\n  this.mph = this.mp >> 15;\n  this.um = (1 << (m.DB - 15)) - 1;\n  this.mt2 = 2 * m.t;\n}\n// xR mod m\nfunction montConvert(x)\n{\n  var r = nbi();\n  x.abs().dlShiftTo(this.m.t, r);\n  r.divRemTo(this.m, null, r);\n  if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r, r);\n  return r;\n}\n// x/R mod m\nfunction montRevert(x)\n{\n  var r = nbi();\n  x.copyTo(r);\n  this.reduce(r);\n  return r;\n}\n// x = x/R mod m (HAC 14.32)\nfunction montReduce(x)\n{\n  while (x.t <= this.mt2) // pad x so am has enough room later\n    x[x.t++] = 0;\n  for (var i = 0; i < this.m.t; ++i)\n  {\n    // faster way of calculating u0 = x[i]*mp mod DV\n    var j = x[i] & 0x7fff;\n    var u0 = (j * this.mpl + (((j * this.mph + (x[i] >> 15) * this.mpl) & this.um) << 15)) & x.DM;\n    // use am to combine the multiply-shift-add into one call\n    j = i + this.m.t;\n    x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\n    // propagate carry\n    while (x[j] >= x.DV)\n    {\n      x[j] -= x.DV;\n      x[++j]++;\n    }\n  }\n  x.clamp();\n  x.drShiftTo(this.m.t, x);\n  if (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\n}\n// r = \"x^2/R mod m\"; x != r\nfunction montSqrTo(x, r)\n{\n  x.squareTo(r);\n  this.reduce(r);\n}\n// r = \"xy/R mod m\"; x,y != r\nfunction montMulTo(x, y, r)\n{\n  x.multiplyTo(y, r);\n  this.reduce(r);\n}\nMontgomery.prototype.convert = montConvert;\nMontgomery.prototype.revert = montRevert;\nMontgomery.prototype.reduce = montReduce;\nMontgomery.prototype.mulTo = montMulTo;\nMontgomery.prototype.sqrTo = montSqrTo;\n// (protected) true iff this is even\nfunction bnpIsEven()\n{\n  return ((this.t > 0) ? (this[0] & 1) : this.s) == 0;\n}\n// (protected) this^e, e < 2^32, doing sqr and mul with \"r\" (HAC 14.79)\nfunction bnpExp(e, z)\n{\n  if (e > 0xffffffff || e < 1) return BigInteger.ONE;\n  var r = nbi(),\n    r2 = nbi(),\n    g = z.convert(this),\n    i = nbits(e) - 1;\n  g.copyTo(r);\n  while (--i >= 0)\n  {\n    z.sqrTo(r, r2);\n    if ((e & (1 << i)) > 0) z.mulTo(r2, g, r);\n    else\n    {\n      var t = r;\n      r = r2;\n      r2 = t;\n    }\n  }\n  return z.revert(r);\n}\n// (public) this^e % m, 0 <= e < 2^32\nfunction bnModPowInt(e, m)\n{\n  var z;\n  if (e < 256 || m.isEven()) z = new Classic(m);\n  else z = new Montgomery(m);\n  return this.exp(e, z);\n}\n// protected\nBigInteger.prototype.copyTo = bnpCopyTo;\nBigInteger.prototype.fromInt = bnpFromInt;\nBigInteger.prototype.fromString = bnpFromString;\nBigInteger.prototype.clamp = bnpClamp;\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\nBigInteger.prototype.subTo = bnpSubTo;\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\nBigInteger.prototype.squareTo = bnpSquareTo;\nBigInteger.prototype.divRemTo = bnpDivRemTo;\nBigInteger.prototype.invDigit = bnpInvDigit;\nBigInteger.prototype.isEven = bnpIsEven;\nBigInteger.prototype.exp = bnpExp;\n// public\nBigInteger.prototype.toString = bnToString;\nBigInteger.prototype.negate = bnNegate;\nBigInteger.prototype.abs = bnAbs;\nBigInteger.prototype.compareTo = bnCompareTo;\nBigInteger.prototype.bitLength = bnBitLength;\nBigInteger.prototype.mod = bnMod;\nBigInteger.prototype.modPowInt = bnModPowInt;\n// \"constants\"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);\n// Copyright (c) 2005-2009  Tom Wu\n// All Rights Reserved.\n// See \"LICENSE\" for details.\n// Extended JavaScript BN functions, required for RSA private ops.\n// Version 1.1: new BigInteger(\"0\", 10) returns \"proper\" zero\n// Version 1.2: square() API, isProbablePrime fix\n// (public)\nfunction bnClone()\n{\n  var r = nbi();\n  this.copyTo(r);\n  return r;\n}\n// (public) return value as integer\nfunction bnIntValue()\n{\n  if (this.s < 0)\n  {\n    if (this.t == 1) return this[0] - this.DV;\n    else if (this.t == 0) return -1;\n  }\n  else if (this.t == 1) return this[0];\n  else if (this.t == 0) return 0;\n  // assumes 16 < DB < 32\n  return ((this[1] & ((1 << (32 - this.DB)) - 1)) << this.DB) | this[0];\n}\n// (public) return value as byte\nfunction bnByteValue()\n{\n  return (this.t == 0) ? this.s : (this[0] << 24) >> 24;\n}\n// (public) return value as short (assumes DB>=16)\nfunction bnShortValue()\n{\n  return (this.t == 0) ? this.s : (this[0] << 16) >> 16;\n}\n// (protected) return x s.t. r^x < DV\nfunction bnpChunkSize(r)\n{\n  return Math.floor(Math.LN2 * this.DB / Math.log(r));\n}\n// (public) 0 if this == 0, 1 if this > 0\nfunction bnSigNum()\n{\n  if (this.s < 0) return -1;\n  else if (this.t <= 0 || (this.t == 1 && this[0] <= 0)) return 0;\n  else return 1;\n}\n// (protected) convert to radix string\nfunction bnpToRadix(b)\n{\n  if (b == null) b = 10;\n  if (this.signum() == 0 || b < 2 || b > 36) return \"0\";\n  var cs = this.chunkSize(b);\n  var a = Math.pow(b, cs);\n  var d = nbv(a),\n    y = nbi(),\n    z = nbi(),\n    r = \"\";\n  this.divRemTo(d, y, z);\n  while (y.signum() > 0)\n  {\n    r = (a + z.intValue()).toString(b).substr(1) + r;\n    y.divRemTo(d, y, z);\n  }\n  return z.intValue().toString(b) + r;\n}\n// (protected) convert from radix string\nfunction bnpFromRadix(s, b)\n{\n  this.fromInt(0);\n  if (b == null) b = 10;\n  var cs = this.chunkSize(b);\n  var d = Math.pow(b, cs),\n    mi = false,\n    j = 0,\n    w = 0;\n  for (var i = 0; i < s.length; ++i)\n  {\n    var x = intAt(s, i);\n    if (x < 0)\n    {\n      if (s.charAt(i) == \"-\" && this.signum() == 0) mi = true;\n      continue;\n    }\n    w = b * w + x;\n    if (++j >= cs)\n    {\n      this.dMultiply(d);\n      this.dAddOffset(w, 0);\n      j = 0;\n      w = 0;\n    }\n  }\n  if (j > 0)\n  {\n    this.dMultiply(Math.pow(b, j));\n    this.dAddOffset(w, 0);\n  }\n  if (mi) BigInteger.ZERO.subTo(this, this);\n}\n// (protected) alternate constructor\nfunction bnpFromNumber(a, b, c)\n{\n  if (\"number\" == typeof b)\n  {\n    // new BigInteger(int,int,RNG)\n    if (a < 2) this.fromInt(1);\n    else\n    {\n      this.fromNumber(a, c);\n      if (!this.testBit(a - 1)) // force MSB set\n        this.bitwiseTo(BigInteger.ONE.shiftLeft(a - 1), op_or, this);\n      if (this.isEven()) this.dAddOffset(1, 0); // force odd\n      while (!this.isProbablePrime(b))\n      {\n        this.dAddOffset(2, 0);\n        if (this.bitLength() > a) this.subTo(BigInteger.ONE.shiftLeft(a - 1), this);\n      }\n    }\n  }\n  else\n  {\n    // new BigInteger(int,RNG)\n    var x = new Array(),\n      t = a & 7;\n    x.length = (a >> 3) + 1;\n    b.nextBytes(x);\n    if (t > 0) x[0] &= ((1 << t) - 1);\n    else x[0] = 0;\n    this.fromString(x, 256);\n  }\n}\n// (public) convert to bigendian byte array\nfunction bnToByteArray()\n{\n  var i = this.t,\n    r = new Array();\n  r[0] = this.s;\n  var p = this.DB - (i * this.DB) % 8,\n    d, k = 0;\n  if (i-- > 0)\n  {\n    if (p < this.DB && (d = this[i] >> p) != (this.s & this.DM) >> p)\n      r[k++] = d | (this.s << (this.DB - p));\n    while (i >= 0)\n    {\n      if (p < 8)\n      {\n        d = (this[i] & ((1 << p) - 1)) << (8 - p);\n        d |= this[--i] >> (p += this.DB - 8);\n      }\n      else\n      {\n        d = (this[i] >> (p -= 8)) & 0xff;\n        if (p <= 0)\n        {\n          p += this.DB;\n          --i;\n        }\n      }\n      if ((d & 0x80) != 0) d |= -256;\n      if (k == 0 && (this.s & 0x80) != (d & 0x80))++k;\n      if (k > 0 || d != this.s) r[k++] = d;\n    }\n  }\n  return r;\n}\n\nfunction bnEquals(a)\n{\n  return (this.compareTo(a) == 0);\n}\n\nfunction bnMin(a)\n{\n  return (this.compareTo(a) < 0) ? this : a;\n}\n\nfunction bnMax(a)\n{\n  return (this.compareTo(a) > 0) ? this : a;\n}\n// (protected) r = this op a (bitwise)\nfunction bnpBitwiseTo(a, op, r)\n{\n  var i, f, m = Math.min(a.t, this.t);\n  for (i = 0; i < m; ++i) r[i] = op(this[i], a[i]);\n  if (a.t < this.t)\n  {\n    f = a.s & this.DM;\n    for (i = m; i < this.t; ++i) r[i] = op(this[i], f);\n    r.t = this.t;\n  }\n  else\n  {\n    f = this.s & this.DM;\n    for (i = m; i < a.t; ++i) r[i] = op(f, a[i]);\n    r.t = a.t;\n  }\n  r.s = op(this.s, a.s);\n  r.clamp();\n}\n// (public) this & a\nfunction op_and(x, y)\n{\n  return x & y;\n}\n\nfunction bnAnd(a)\n{\n  var r = nbi();\n  this.bitwiseTo(a, op_and, r);\n  return r;\n}\n// (public) this | a\nfunction op_or(x, y)\n{\n  return x | y;\n}\n\nfunction bnOr(a)\n{\n  var r = nbi();\n  this.bitwiseTo(a, op_or, r);\n  return r;\n}\n// (public) this ^ a\nfunction op_xor(x, y)\n{\n  return x ^ y;\n}\n\nfunction bnXor(a)\n{\n  var r = nbi();\n  this.bitwiseTo(a, op_xor, r);\n  return r;\n}\n// (public) this & ~a\nfunction op_andnot(x, y)\n{\n  return x & ~y;\n}\n\nfunction bnAndNot(a)\n{\n  var r = nbi();\n  this.bitwiseTo(a, op_andnot, r);\n  return r;\n}\n// (public) ~this\nfunction bnNot()\n{\n  var r = nbi();\n  for (var i = 0; i < this.t; ++i) r[i] = this.DM & ~this[i];\n  r.t = this.t;\n  r.s = ~this.s;\n  return r;\n}\n// (public) this << n\nfunction bnShiftLeft(n)\n{\n  var r = nbi();\n  if (n < 0) this.rShiftTo(-n, r);\n  else this.lShiftTo(n, r);\n  return r;\n}\n// (public) this >> n\nfunction bnShiftRight(n)\n{\n  var r = nbi();\n  if (n < 0) this.lShiftTo(-n, r);\n  else this.rShiftTo(n, r);\n  return r;\n}\n// return index of lowest 1-bit in x, x < 2^31\nfunction lbit(x)\n{\n  if (x == 0) return -1;\n  var r = 0;\n  if ((x & 0xffff) == 0)\n  {\n    x >>= 16;\n    r += 16;\n  }\n  if ((x & 0xff) == 0)\n  {\n    x >>= 8;\n    r += 8;\n  }\n  if ((x & 0xf) == 0)\n  {\n    x >>= 4;\n    r += 4;\n  }\n  if ((x & 3) == 0)\n  {\n    x >>= 2;\n    r += 2;\n  }\n  if ((x & 1) == 0)++r;\n  return r;\n}\n// (public) returns index of lowest 1-bit (or -1 if none)\nfunction bnGetLowestSetBit()\n{\n  for (var i = 0; i < this.t; ++i)\n    if (this[i] != 0) return i * this.DB + lbit(this[i]);\n  if (this.s < 0) return this.t * this.DB;\n  return -1;\n}\n// return number of 1 bits in x\nfunction cbit(x)\n{\n  var r = 0;\n  while (x != 0)\n  {\n    x &= x - 1;\n    ++r;\n  }\n  return r;\n}\n// (public) return number of set bits\nfunction bnBitCount()\n{\n  var r = 0,\n    x = this.s & this.DM;\n  for (var i = 0; i < this.t; ++i) r += cbit(this[i] ^ x);\n  return r;\n}\n// (public) true iff nth bit is set\nfunction bnTestBit(n)\n{\n  var j = Math.floor(n / this.DB);\n  if (j >= this.t) return (this.s != 0);\n  return ((this[j] & (1 << (n % this.DB))) != 0);\n}\n// (protected) this op (1<<n)\nfunction bnpChangeBit(n, op)\n{\n  var r = BigInteger.ONE.shiftLeft(n);\n  this.bitwiseTo(r, op, r);\n  return r;\n}\n// (public) this | (1<<n)\nfunction bnSetBit(n)\n{\n  return this.changeBit(n, op_or);\n}\n// (public) this & ~(1<<n)\nfunction bnClearBit(n)\n{\n  return this.changeBit(n, op_andnot);\n}\n// (public) this ^ (1<<n)\nfunction bnFlipBit(n)\n{\n  return this.changeBit(n, op_xor);\n}\n// (protected) r = this + a\nfunction bnpAddTo(a, r)\n{\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m)\n  {\n    c += this[i] + a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t)\n  {\n    c += a.s;\n    while (i < this.t)\n    {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  }\n  else\n  {\n    c += this.s;\n    while (i < a.t)\n    {\n      c += a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += a.s;\n  }\n  r.s = (c < 0) ? -1 : 0;\n  if (c > 0) r[i++] = c;\n  else if (c < -1) r[i++] = this.DV + c;\n  r.t = i;\n  r.clamp();\n}\n// (public) this + a\nfunction bnAdd(a)\n{\n  var r = nbi();\n  this.addTo(a, r);\n  return r;\n}\n// (public) this - a\nfunction bnSubtract(a)\n{\n  var r = nbi();\n  this.subTo(a, r);\n  return r;\n}\n// (public) this * a\nfunction bnMultiply(a)\n{\n  var r = nbi();\n  this.multiplyTo(a, r);\n  return r;\n}\n// (public) this^2\nfunction bnSquare()\n{\n  var r = nbi();\n  this.squareTo(r);\n  return r;\n}\n// (public) this / a\nfunction bnDivide(a)\n{\n  var r = nbi();\n  this.divRemTo(a, r, null);\n  return r;\n}\n// (public) this % a\nfunction bnRemainder(a)\n{\n  var r = nbi();\n  this.divRemTo(a, null, r);\n  return r;\n}\n// (public) [this/a,this%a]\nfunction bnDivideAndRemainder(a)\n{\n  var q = nbi(),\n    r = nbi();\n  this.divRemTo(a, q, r);\n  return new Array(q, r);\n}\n// (protected) this *= n, this >= 0, 1 < n < DV\nfunction bnpDMultiply(n)\n{\n  this[this.t] = this.am(0, n - 1, this, 0, 0, this.t);\n  ++this.t;\n  this.clamp();\n}\n// (protected) this += n << w words, this >= 0\nfunction bnpDAddOffset(n, w)\n{\n  if (n == 0) return;\n  while (this.t <= w) this[this.t++] = 0;\n  this[w] += n;\n  while (this[w] >= this.DV)\n  {\n    this[w] -= this.DV;\n    if (++w >= this.t) this[this.t++] = 0;\n    ++this[w];\n  }\n}\n// A \"null\" reducer\nfunction NullExp()\n{}\n\nfunction nNop(x)\n{\n  return x;\n}\n\nfunction nMulTo(x, y, r)\n{\n  x.multiplyTo(y, r);\n}\n\nfunction nSqrTo(x, r)\n{\n  x.squareTo(r);\n}\nNullExp.prototype.convert = nNop;\nNullExp.prototype.revert = nNop;\nNullExp.prototype.mulTo = nMulTo;\nNullExp.prototype.sqrTo = nSqrTo;\n// (public) this^e\nfunction bnPow(e)\n{\n  return this.exp(e, new NullExp());\n}\n// (protected) r = lower n words of \"this * a\", a.t <= n\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyLowerTo(a, n, r)\n{\n  var i = Math.min(this.t + a.t, n);\n  r.s = 0; // assumes a,this >= 0\n  r.t = i;\n  while (i > 0) r[--i] = 0;\n  var j;\n  for (j = r.t - this.t; i < j; ++i) r[i + this.t] = this.am(0, a[i], r, i, 0, this.t);\n  for (j = Math.min(a.t, n); i < j; ++i) this.am(0, a[i], r, i, 0, n - i);\n  r.clamp();\n}\n// (protected) r = \"this * a\" without lower n words, n > 0\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyUpperTo(a, n, r)\n{\n  --n;\n  var i = r.t = this.t + a.t - n;\n  r.s = 0; // assumes a,this >= 0\n  while (--i >= 0) r[i] = 0;\n  for (i = Math.max(n - this.t, 0); i < a.t; ++i)\n    r[this.t + i - n] = this.am(n - i, a[i], r, 0, 0, this.t + i - n);\n  r.clamp();\n  r.drShiftTo(1, r);\n}\n// Barrett modular reduction\nfunction Barrett(m)\n{\n  // setup Barrett\n  this.r2 = nbi();\n  this.q3 = nbi();\n  BigInteger.ONE.dlShiftTo(2 * m.t, this.r2);\n  this.mu = this.r2.divide(m);\n  this.m = m;\n}\n\nfunction barrettConvert(x)\n{\n  if (x.s < 0 || x.t > 2 * this.m.t) return x.mod(this.m);\n  else if (x.compareTo(this.m) < 0) return x;\n  else\n  {\n    var r = nbi();\n    x.copyTo(r);\n    this.reduce(r);\n    return r;\n  }\n}\n\nfunction barrettRevert(x)\n{\n  return x;\n}\n// x = x mod m (HAC 14.42)\nfunction barrettReduce(x)\n{\n  x.drShiftTo(this.m.t - 1, this.r2);\n  if (x.t > this.m.t + 1)\n  {\n    x.t = this.m.t + 1;\n    x.clamp();\n  }\n  this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3);\n  this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2);\n  while (x.compareTo(this.r2) < 0) x.dAddOffset(1, this.m.t + 1);\n  x.subTo(this.r2, x);\n  while (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\n}\n// r = x^2 mod m; x != r\nfunction barrettSqrTo(x, r)\n{\n  x.squareTo(r);\n  this.reduce(r);\n}\n// r = x*y mod m; x,y != r\nfunction barrettMulTo(x, y, r)\n{\n  x.multiplyTo(y, r);\n  this.reduce(r);\n}\nBarrett.prototype.convert = barrettConvert;\nBarrett.prototype.revert = barrettRevert;\nBarrett.prototype.reduce = barrettReduce;\nBarrett.prototype.mulTo = barrettMulTo;\nBarrett.prototype.sqrTo = barrettSqrTo;\n// (public) this^e % m (HAC 14.85)\nfunction bnModPow(e, m)\n{\n  var i = e.bitLength(),\n    k, r = nbv(1),\n    z;\n  if (i <= 0) return r;\n  else if (i < 18) k = 1;\n  else if (i < 48) k = 3;\n  else if (i < 144) k = 4;\n  else if (i < 768) k = 5;\n  else k = 6;\n  if (i < 8)\n    z = new Classic(m);\n  else if (m.isEven())\n    z = new Barrett(m);\n  else\n    z = new Montgomery(m);\n  // precomputation\n  var g = new Array(),\n    n = 3,\n    k1 = k - 1,\n    km = (1 << k) - 1;\n  g[1] = z.convert(this);\n  if (k > 1)\n  {\n    var g2 = nbi();\n    z.sqrTo(g[1], g2);\n    while (n <= km)\n    {\n      g[n] = nbi();\n      z.mulTo(g2, g[n - 2], g[n]);\n      n += 2;\n    }\n  }\n  var j = e.t - 1,\n    w, is1 = true,\n    r2 = nbi(),\n    t;\n  i = nbits(e[j]) - 1;\n  while (j >= 0)\n  {\n    if (i >= k1) w = (e[j] >> (i - k1)) & km;\n    else\n    {\n      w = (e[j] & ((1 << (i + 1)) - 1)) << (k1 - i);\n      if (j > 0) w |= e[j - 1] >> (this.DB + i - k1);\n    }\n    n = k;\n    while ((w & 1) == 0)\n    {\n      w >>= 1;\n      --n;\n    }\n    if ((i -= n) < 0)\n    {\n      i += this.DB;\n      --j;\n    }\n    if (is1)\n    { // ret == 1, don't bother squaring or multiplying it\n      g[w].copyTo(r);\n      is1 = false;\n    }\n    else\n    {\n      while (n > 1)\n      {\n        z.sqrTo(r, r2);\n        z.sqrTo(r2, r);\n        n -= 2;\n      }\n      if (n > 0) z.sqrTo(r, r2);\n      else\n      {\n        t = r;\n        r = r2;\n        r2 = t;\n      }\n      z.mulTo(r2, g[w], r);\n    }\n    while (j >= 0 && (e[j] & (1 << i)) == 0)\n    {\n      z.sqrTo(r, r2);\n      t = r;\n      r = r2;\n      r2 = t;\n      if (--i < 0)\n      {\n        i = this.DB - 1;\n        --j;\n      }\n    }\n  }\n  return z.revert(r);\n}\n// (public) gcd(this,a) (HAC 14.54)\nfunction bnGCD(a)\n{\n  var x = (this.s < 0) ? this.negate() : this.clone();\n  var y = (a.s < 0) ? a.negate() : a.clone();\n  if (x.compareTo(y) < 0)\n  {\n    var t = x;\n    x = y;\n    y = t;\n  }\n  var i = x.getLowestSetBit(),\n    g = y.getLowestSetBit();\n  if (g < 0) return x;\n  if (i < g) g = i;\n  if (g > 0)\n  {\n    x.rShiftTo(g, x);\n    y.rShiftTo(g, y);\n  }\n  while (x.signum() > 0)\n  {\n    if ((i = x.getLowestSetBit()) > 0) x.rShiftTo(i, x);\n    if ((i = y.getLowestSetBit()) > 0) y.rShiftTo(i, y);\n    if (x.compareTo(y) >= 0)\n    {\n      x.subTo(y, x);\n      x.rShiftTo(1, x);\n    }\n    else\n    {\n      y.subTo(x, y);\n      y.rShiftTo(1, y);\n    }\n  }\n  if (g > 0) y.lShiftTo(g, y);\n  return y;\n}\n// (protected) this % n, n < 2^26\nfunction bnpModInt(n)\n{\n  if (n <= 0) return 0;\n  var d = this.DV % n,\n    r = (this.s < 0) ? n - 1 : 0;\n  if (this.t > 0)\n    if (d == 0) r = this[0] % n;\n    else\n      for (var i = this.t - 1; i >= 0; --i) r = (d * r + this[i]) % n;\n  return r;\n}\n// (public) 1/this % m (HAC 14.61)\nfunction bnModInverse(m)\n{\n  var ac = m.isEven();\n  if ((this.isEven() && ac) || m.signum() == 0) return BigInteger.ZERO;\n  var u = m.clone(),\n    v = this.clone();\n  var a = nbv(1),\n    b = nbv(0),\n    c = nbv(0),\n    d = nbv(1);\n  while (u.signum() != 0)\n  {\n    while (u.isEven())\n    {\n      u.rShiftTo(1, u);\n      if (ac)\n      {\n        if (!a.isEven() || !b.isEven())\n        {\n          a.addTo(this, a);\n          b.subTo(m, b);\n        }\n        a.rShiftTo(1, a);\n      }\n      else if (!b.isEven()) b.subTo(m, b);\n      b.rShiftTo(1, b);\n    }\n    while (v.isEven())\n    {\n      v.rShiftTo(1, v);\n      if (ac)\n      {\n        if (!c.isEven() || !d.isEven())\n        {\n          c.addTo(this, c);\n          d.subTo(m, d);\n        }\n        c.rShiftTo(1, c);\n      }\n      else if (!d.isEven()) d.subTo(m, d);\n      d.rShiftTo(1, d);\n    }\n    if (u.compareTo(v) >= 0)\n    {\n      u.subTo(v, u);\n      if (ac) a.subTo(c, a);\n      b.subTo(d, b);\n    }\n    else\n    {\n      v.subTo(u, v);\n      if (ac) c.subTo(a, c);\n      d.subTo(b, d);\n    }\n  }\n  if (v.compareTo(BigInteger.ONE) != 0) return BigInteger.ZERO;\n  if (d.compareTo(m) >= 0) return d.subtract(m);\n  if (d.signum() < 0) d.addTo(m, d);\n  else return d;\n  if (d.signum() < 0) return d.add(m);\n  else return d;\n}\nvar lowprimes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997];\nvar lplim = (1 << 26) / lowprimes[lowprimes.length - 1];\n// (public) test primality with certainty >= 1-.5^t\nfunction bnIsProbablePrime(t)\n{\n  var i, x = this.abs();\n  if (x.t == 1 && x[0] <= lowprimes[lowprimes.length - 1])\n  {\n    for (i = 0; i < lowprimes.length; ++i)\n      if (x[0] == lowprimes[i]) return true;\n    return false;\n  }\n  if (x.isEven()) return false;\n  i = 1;\n  while (i < lowprimes.length)\n  {\n    var m = lowprimes[i],\n      j = i + 1;\n    while (j < lowprimes.length && m < lplim) m *= lowprimes[j++];\n    m = x.modInt(m);\n    while (i < j)\n      if (m % lowprimes[i++] == 0) return false;\n  }\n  return x.millerRabin(t);\n}\n// (protected) true if probably prime (HAC 4.24, Miller-Rabin)\nfunction bnpMillerRabin(t)\n{\n  var n1 = this.subtract(BigInteger.ONE);\n  var k = n1.getLowestSetBit();\n  if (k <= 0) return false;\n  var r = n1.shiftRight(k);\n  t = (t + 1) >> 1;\n  if (t > lowprimes.length) t = lowprimes.length;\n  var a = nbi();\n  for (var i = 0; i < t; ++i)\n  {\n    //Pick bases at random, instead of starting at 2\n    a.fromInt(lowprimes[Math.floor(Math.random() * lowprimes.length)]);\n    var y = a.modPow(r, this);\n    if (y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0)\n    {\n      var j = 1;\n      while (j++ < k && y.compareTo(n1) != 0)\n      {\n        y = y.modPowInt(2, this);\n        if (y.compareTo(BigInteger.ONE) == 0) return false;\n      }\n      if (y.compareTo(n1) != 0) return false;\n    }\n  }\n  return true;\n}\n// protected\nBigInteger.prototype.chunkSize = bnpChunkSize;\nBigInteger.prototype.toRadix = bnpToRadix;\nBigInteger.prototype.fromRadix = bnpFromRadix;\nBigInteger.prototype.fromNumber = bnpFromNumber;\nBigInteger.prototype.bitwiseTo = bnpBitwiseTo;\nBigInteger.prototype.changeBit = bnpChangeBit;\nBigInteger.prototype.addTo = bnpAddTo;\nBigInteger.prototype.dMultiply = bnpDMultiply;\nBigInteger.prototype.dAddOffset = bnpDAddOffset;\nBigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;\nBigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;\nBigInteger.prototype.modInt = bnpModInt;\nBigInteger.prototype.millerRabin = bnpMillerRabin;\n// public\nBigInteger.prototype.clone = bnClone;\nBigInteger.prototype.intValue = bnIntValue;\nBigInteger.prototype.byteValue = bnByteValue;\nBigInteger.prototype.shortValue = bnShortValue;\nBigInteger.prototype.signum = bnSigNum;\nBigInteger.prototype.toByteArray = bnToByteArray;\nBigInteger.prototype.equals = bnEquals;\nBigInteger.prototype.min = bnMin;\nBigInteger.prototype.max = bnMax;\nBigInteger.prototype.and = bnAnd;\nBigInteger.prototype.or = bnOr;\nBigInteger.prototype.xor = bnXor;\nBigInteger.prototype.andNot = bnAndNot;\nBigInteger.prototype.not = bnNot;\nBigInteger.prototype.shiftLeft = bnShiftLeft;\nBigInteger.prototype.shiftRight = bnShiftRight;\nBigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;\nBigInteger.prototype.bitCount = bnBitCount;\nBigInteger.prototype.testBit = bnTestBit;\nBigInteger.prototype.setBit = bnSetBit;\nBigInteger.prototype.clearBit = bnClearBit;\nBigInteger.prototype.flipBit = bnFlipBit;\nBigInteger.prototype.add = bnAdd;\nBigInteger.prototype.subtract = bnSubtract;\nBigInteger.prototype.multiply = bnMultiply;\nBigInteger.prototype.divide = bnDivide;\nBigInteger.prototype.remainder = bnRemainder;\nBigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;\nBigInteger.prototype.modPow = bnModPow;\nBigInteger.prototype.modInverse = bnModInverse;\nBigInteger.prototype.pow = bnPow;\nBigInteger.prototype.gcd = bnGCD;\nBigInteger.prototype.isProbablePrime = bnIsProbablePrime;\n// JSBN-specific extension\nBigInteger.prototype.square = bnSquare;\nvar Int128 = BigInteger;\n// BigInteger interfaces not implemented in jsbn:\n// BigInteger(int signum, byte[] magnitude)\n// double doubleValue()\n// float floatValue()\n// int hashCode()\n// long longValue()\n// static BigInteger valueOf(long val)\n// Helper functions to make BigInteger functions callable with two parameters\n// as in original C# Clipper\nInt128.prototype.IsNegative = function ()\n{\n  if (this.compareTo(Int128.ZERO) == -1) return true;\n  else return false;\n};\nInt128.op_Equality = function (val1, val2)\n{\n  if (val1.compareTo(val2) == 0) return true;\n  else return false;\n};\nInt128.op_Inequality = function (val1, val2)\n{\n  if (val1.compareTo(val2) != 0) return true;\n  else return false;\n};\nInt128.op_GreaterThan = function (val1, val2)\n{\n  if (val1.compareTo(val2) > 0) return true;\n  else return false;\n};\nInt128.op_LessThan = function (val1, val2)\n{\n  if (val1.compareTo(val2) < 0) return true;\n  else return false;\n};\nInt128.op_Addition = function (lhs, rhs)\n{\n  return new Int128(lhs).add(new Int128(rhs));\n};\nInt128.op_Subtraction = function (lhs, rhs)\n{\n  return new Int128(lhs).subtract(new Int128(rhs));\n};\nInt128.Int128Mul = function (lhs, rhs)\n{\n  return new Int128(lhs).multiply(new Int128(rhs));\n};\nInt128.op_Division = function (lhs, rhs)\n{\n  return lhs.divide(rhs);\n};\nInt128.prototype.ToDouble = function ()\n{\n  return parseFloat(this.toString()); // This could be something faster\n};\n// end of Int128 section\n/*\n// Uncomment the following two lines if you want to use Int128 outside ClipperLib\nif (typeof(document) !== \"undefined\") window.Int128 = Int128;\nelse self.Int128 = Int128;\n*/\n// ---------------------------------------------  \n// Here starts the actual Clipper library:\n// Helper function to support Inheritance in Javascript\nif (typeof (Inherit) == 'undefined')\n{\n  var Inherit = function (ce, ce2)\n  {\n    var p;\n    if (typeof (Object.getOwnPropertyNames) == 'undefined')\n    {\n      for (p in ce2.prototype)\n        if (typeof (ce.prototype[p]) == 'undefined' || ce.prototype[p] == Object.prototype[p]) ce.prototype[p] = ce2.prototype[p];\n      for (p in ce2)\n        if (typeof (ce[p]) == 'undefined') ce[p] = ce2[p];\n      ce.$baseCtor = ce2;\n    }\n    else\n    {\n      var props = Object.getOwnPropertyNames(ce2.prototype);\n      for (var i = 0; i < props.length; i++)\n        if (typeof (Object.getOwnPropertyDescriptor(ce.prototype, props[i])) == 'undefined') Object.defineProperty(ce.prototype, props[i], Object.getOwnPropertyDescriptor(ce2.prototype, props[i]));\n      for (p in ce2)\n        if (typeof (ce[p]) == 'undefined') ce[p] = ce2[p];\n      ce.$baseCtor = ce2;\n    }\n  };\n}\nClipperLib.Path = function ()\n{\n  return [];\n};\nClipperLib.Paths = function ()\n{\n  return []; // Was previously [[]], but caused problems when pushed\n};\n// Preserves the calling way of original C# Clipper\n// Is essential due to compatibility, because DoublePoint is public class in original C# version\nClipperLib.DoublePoint = function ()\n{\n  var a = arguments;\n  this.X = 0;\n  this.Y = 0;\n  // public DoublePoint(DoublePoint dp)\n  // public DoublePoint(IntPoint ip)\n  if (a.length == 1)\n  {\n    this.X = a[0].X;\n    this.Y = a[0].Y;\n  }\n  else if (a.length == 2)\n  {\n    this.X = a[0];\n    this.Y = a[1];\n  }\n}; // This is internal faster function when called without arguments\nClipperLib.DoublePoint0 = function ()\n{\n  this.X = 0;\n  this.Y = 0;\n};\n// This is internal faster function when called with 1 argument (dp or ip)\nClipperLib.DoublePoint1 = function (dp)\n{\n  this.X = dp.X;\n  this.Y = dp.Y;\n};\n// This is internal faster function when called with 2 arguments (x and y)\nClipperLib.DoublePoint2 = function (x, y)\n{\n  this.X = x;\n  this.Y = y;\n};\n// PolyTree & PolyNode start\n// -------------------------------\nClipperLib.PolyNode = function ()\n{\n  this.m_Parent = null;\n  this.m_polygon = new ClipperLib.Path();\n  this.m_Index = 0;\n  this.m_jointype = 0;\n  this.m_endtype = 0;\n  this.m_Childs = [];\n  this.IsOpen = false;\n};\nClipperLib.PolyNode.prototype.IsHoleNode = function ()\n{\n  var result = true;\n  var node = this.m_Parent;\n  while (node !== null)\n  {\n    result = !result;\n    node = node.m_Parent;\n  }\n  return result;\n};\nClipperLib.PolyNode.prototype.ChildCount = function ()\n{\n  return this.m_Childs.length;\n};\nClipperLib.PolyNode.prototype.Contour = function ()\n{\n  return this.m_polygon;\n};\nClipperLib.PolyNode.prototype.AddChild = function (Child)\n{\n  var cnt = this.m_Childs.length;\n  this.m_Childs.push(Child);\n  Child.m_Parent = this;\n  Child.m_Index = cnt;\n};\nClipperLib.PolyNode.prototype.GetNext = function ()\n{\n  if (this.m_Childs.length > 0)\n    return this.m_Childs[0];\n  else\n    return this.GetNextSiblingUp();\n};\nClipperLib.PolyNode.prototype.GetNextSiblingUp = function ()\n{\n  if (this.m_Parent === null)\n    return null;\n  else if (this.m_Index == this.m_Parent.m_Childs.length - 1)\n    return this.m_Parent.GetNextSiblingUp();\n  else\n    return this.m_Parent.m_Childs[this.m_Index + 1];\n};\nClipperLib.PolyNode.prototype.Childs = function ()\n{\n  return this.m_Childs;\n};\nClipperLib.PolyNode.prototype.Parent = function ()\n{\n  return this.m_Parent;\n};\nClipperLib.PolyNode.prototype.IsHole = function ()\n{\n  return this.IsHoleNode();\n};\n// PolyTree : PolyNode\nClipperLib.PolyTree = function ()\n{\n  this.m_AllPolys = [];\n  ClipperLib.PolyNode.call(this);\n};\nClipperLib.PolyTree.prototype.Clear = function ()\n{\n  for (var i = 0, ilen = this.m_AllPolys.length; i < ilen; i++)\n    this.m_AllPolys[i] = null;\n  this.m_AllPolys.length = 0;\n  this.m_Childs.length = 0;\n};\nClipperLib.PolyTree.prototype.GetFirst = function ()\n{\n  if (this.m_Childs.length > 0)\n    return this.m_Childs[0];\n  else\n    return null;\n};\nClipperLib.PolyTree.prototype.Total = function ()\n{\n  return this.m_AllPolys.length;\n};\nInherit(ClipperLib.PolyTree, ClipperLib.PolyNode);\n// -------------------------------\n// PolyTree & PolyNode end\nClipperLib.Math_Abs_Int64 = ClipperLib.Math_Abs_Int32 = ClipperLib.Math_Abs_Double = function (a)\n{\n  return Math.abs(a);\n};\nClipperLib.Math_Max_Int32_Int32 = function (a, b)\n{\n  return Math.max(a, b);\n};\n/*\n-----------------------------------\ncast_32 speedtest: http://jsperf.com/truncate-float-to-integer/2\n-----------------------------------\n*/\nif (browser.msie || browser.opera || browser.safari) ClipperLib.Cast_Int32 = function (a)\n{\n  return a | 0;\n};\nelse ClipperLib.Cast_Int32 = function (a)\n{ // eg. browser.chrome || browser.chromium || browser.firefox\n  return~~ a;\n};\n/*\n--------------------------\ncast_64 speedtests: http://jsperf.com/truncate-float-to-integer\nChrome: bitwise_not_floor\nFirefox17: toInteger (typeof test)\nIE9: bitwise_or_floor\nIE7 and IE8: to_parseint\nChromium: to_floor_or_ceil\nFirefox3: to_floor_or_ceil\nFirefox15: to_floor_or_ceil\nOpera: to_floor_or_ceil\nSafari: to_floor_or_ceil\n--------------------------\n*/\nif (browser.chrome) ClipperLib.Cast_Int64 = function (a)\n{\n  if (a < -2147483648 || a > 2147483647)\n    return a < 0 ? Math.ceil(a) : Math.floor(a);\n  else return~~ a;\n};\nelse if (browser.firefox && typeof (Number.toInteger) == \"function\") ClipperLib.Cast_Int64 = function (a)\n{\n  return Number.toInteger(a);\n};\nelse if (browser.msie7 || browser.msie8) ClipperLib.Cast_Int64 = function (a)\n{\n  return parseInt(a, 10);\n};\nelse if (browser.msie) ClipperLib.Cast_Int64 = function (a)\n{\n  if (a < -2147483648 || a > 2147483647)\n    return a < 0 ? Math.ceil(a) : Math.floor(a);\n  return a | 0;\n};\n// eg. browser.chromium || browser.firefox || browser.opera || browser.safari\nelse ClipperLib.Cast_Int64 = function (a)\n{\n  return a < 0 ? Math.ceil(a) : Math.floor(a);\n};\nClipperLib.Clear = function (a)\n{\n  a.length = 0;\n};\n//ClipperLib.MaxSteps = 64; // How many steps at maximum in arc in BuildArc() function\nClipperLib.PI = 3.141592653589793;\nClipperLib.PI2 = 2 * 3.141592653589793;\nClipperLib.IntPoint = function ()\n{\n  var a = arguments,\n    alen = a.length;\n  this.X = 0;\n  this.Y = 0;\n  if (use_xyz)\n  {\n    this.Z = 0;\n    if (alen == 3) // public IntPoint(cInt x, cInt y, cInt z = 0)\n    {\n      this.X = a[0];\n      this.Y = a[1];\n      this.Z = a[2];\n    }\n    else if (alen == 2) // public IntPoint(cInt x, cInt y)\n    {\n      this.X = a[0];\n      this.Y = a[1];\n      this.Z = 0;\n    }\n    else if (alen == 1)\n    {\n      if (a[0] instanceof ClipperLib.DoublePoint) // public IntPoint(DoublePoint dp)\n      {\n        var dp = a[0];\n        this.X = ClipperLib.Clipper.Round(dp.X);\n        this.Y = ClipperLib.Clipper.Round(dp.Y);\n        this.Z = 0;\n      }\n      else // public IntPoint(IntPoint pt)\n      {\n        var pt = a[0];\n        if (typeof (pt.Z) == \"undefined\") pt.Z = 0;\n        this.X = pt.X;\n        this.Y = pt.Y;\n        this.Z = pt.Z;\n      }\n    }\n    else // public IntPoint()\n    {\n      this.X = 0;\n      this.Y = 0;\n      this.Z = 0;\n    }\n  }\n  else // if (!use_xyz)\n  {\n    if (alen == 2) // public IntPoint(cInt X, cInt Y)\n    {\n      this.X = a[0];\n      this.Y = a[1];\n    }\n    else if (alen == 1)\n    {\n      if (a[0] instanceof ClipperLib.DoublePoint) // public IntPoint(DoublePoint dp)\n      {\n        var dp = a[0];\n        this.X = ClipperLib.Clipper.Round(dp.X);\n        this.Y = ClipperLib.Clipper.Round(dp.Y);\n      }\n      else // public IntPoint(IntPoint pt)\n      {\n        var pt = a[0];\n        this.X = pt.X;\n        this.Y = pt.Y;\n      }\n    }\n    else // public IntPoint(IntPoint pt)\n    {\n      this.X = 0;\n      this.Y = 0;\n    }\n  }\n};\nClipperLib.IntPoint.op_Equality = function (a, b)\n{\n  //return a == b;\n  return a.X == b.X && a.Y == b.Y;\n};\nClipperLib.IntPoint.op_Inequality = function (a, b)\n{\n  //return a != b;\n  return a.X != b.X || a.Y != b.Y;\n};\n/*\nClipperLib.IntPoint.prototype.Equals = function (obj)\n{\n  if (obj === null)\n      return false;\n  if (obj instanceof ClipperLib.IntPoint)\n  {\n      var a = Cast(obj, ClipperLib.IntPoint);\n      return (this.X == a.X) && (this.Y == a.Y);\n  }\n  else\n      return false;\n};\n*/\nif (use_xyz)\n{\n  ClipperLib.IntPoint0 = function ()\n  {\n    this.X = 0;\n    this.Y = 0;\n    this.Z = 0;\n  };\n  ClipperLib.IntPoint1 = function (pt)\n  {\n    this.X = pt.X;\n    this.Y = pt.Y;\n    this.Z = pt.Z;\n  };\n  ClipperLib.IntPoint1dp = function (dp)\n  {\n    this.X = ClipperLib.Clipper.Round(dp.X);\n    this.Y = ClipperLib.Clipper.Round(dp.Y);\n    this.Z = 0;\n  };\n  ClipperLib.IntPoint2 = function (x, y)\n  {\n    this.X = x;\n    this.Y = y;\n    this.Z = 0;\n  };\n  ClipperLib.IntPoint3 = function (x, y, z)\n  {\n    this.X = x;\n    this.Y = y;\n    this.Z = z;\n  };\n}\nelse // if (!use_xyz)\n{\n  ClipperLib.IntPoint0 = function ()\n  {\n    this.X = 0;\n    this.Y = 0;\n  };\n  ClipperLib.IntPoint1 = function (pt)\n  {\n    this.X = pt.X;\n    this.Y = pt.Y;\n  };\n  ClipperLib.IntPoint1dp = function (dp)\n  {\n    this.X = ClipperLib.Clipper.Round(dp.X);\n    this.Y = ClipperLib.Clipper.Round(dp.Y);\n  };\n  ClipperLib.IntPoint2 = function (x, y)\n  {\n    this.X = x;\n    this.Y = y;\n  };\n}\nClipperLib.IntRect = function ()\n{\n  var a = arguments,\n    alen = a.length;\n  if (alen == 4) // function (l, t, r, b)\n  {\n    this.left = a[0];\n    this.top = a[1];\n    this.right = a[2];\n    this.bottom = a[3];\n  }\n  else if (alen == 1) // function (ir)\n  {\n    this.left = ir.left;\n    this.top = ir.top;\n    this.right = ir.right;\n    this.bottom = ir.bottom;\n  }\n  else // function ()\n  {\n    this.left = 0;\n    this.top = 0;\n    this.right = 0;\n    this.bottom = 0;\n  }\n};\nClipperLib.IntRect0 = function ()\n{\n  this.left = 0;\n  this.top = 0;\n  this.right = 0;\n  this.bottom = 0;\n};\nClipperLib.IntRect1 = function (ir)\n{\n  this.left = ir.left;\n  this.top = ir.top;\n  this.right = ir.right;\n  this.bottom = ir.bottom;\n};\nClipperLib.IntRect4 = function (l, t, r, b)\n{\n  this.left = l;\n  this.top = t;\n  this.right = r;\n  this.bottom = b;\n};\nClipperLib.ClipType = {\n  ctIntersection: 0,\n  ctUnion: 1,\n  ctDifference: 2,\n  ctXor: 3\n};\nClipperLib.PolyType = {\n  ptSubject: 0,\n  ptClip: 1\n};\nClipperLib.PolyFillType = {\n  pftEvenOdd: 0,\n  pftNonZero: 1,\n  pftPositive: 2,\n  pftNegative: 3\n};\nClipperLib.JoinType = {\n  jtSquare: 0,\n  jtRound: 1,\n  jtMiter: 2\n};\nClipperLib.EndType = {\n  etOpenSquare: 0,\n  etOpenRound: 1,\n  etOpenButt: 2,\n  etClosedLine: 3,\n  etClosedPolygon: 4\n};\nif (use_deprecated)\n  ClipperLib.EndType_ = {\n    etSquare: 0,\n    etRound: 1,\n    etButt: 2,\n    etClosed: 3\n  };\nClipperLib.EdgeSide = {\n  esLeft: 0,\n  esRight: 1\n};\nClipperLib.Direction = {\n  dRightToLeft: 0,\n  dLeftToRight: 1\n};\nClipperLib.TEdge = function ()\n{\n  this.Bot = new ClipperLib.IntPoint();\n  this.Curr = new ClipperLib.IntPoint();\n  this.Top = new ClipperLib.IntPoint();\n  this.Delta = new ClipperLib.IntPoint();\n  this.Dx = 0;\n  this.PolyTyp = ClipperLib.PolyType.ptSubject;\n  this.Side = ClipperLib.EdgeSide.esLeft;\n  this.WindDelta = 0;\n  this.WindCnt = 0;\n  this.WindCnt2 = 0;\n  this.OutIdx = 0;\n  this.Next = null;\n  this.Prev = null;\n  this.NextInLML = null;\n  this.NextInAEL = null;\n  this.PrevInAEL = null;\n  this.NextInSEL = null;\n  this.PrevInSEL = null;\n};\nClipperLib.IntersectNode = function ()\n{\n  this.Edge1 = null;\n  this.Edge2 = null;\n  this.Pt = new ClipperLib.IntPoint();\n};\nClipperLib.MyIntersectNodeSort = function () {};\nClipperLib.MyIntersectNodeSort.Compare = function (node1, node2)\n{\n  return (node2.Pt.Y - node1.Pt.Y);\n};\nClipperLib.LocalMinima = function ()\n{\n  this.Y = 0;\n  this.LeftBound = null;\n  this.RightBound = null;\n  this.Next = null;\n};\nClipperLib.Scanbeam = function ()\n{\n  this.Y = 0;\n  this.Next = null;\n};\nClipperLib.OutRec = function ()\n{\n  this.Idx = 0;\n  this.IsHole = false;\n  this.IsOpen = false;\n  this.FirstLeft = null;\n  this.Pts = null;\n  this.BottomPt = null;\n  this.PolyNode = null;\n};\nClipperLib.OutPt = function ()\n{\n  this.Idx = 0;\n  this.Pt = new ClipperLib.IntPoint();\n  this.Next = null;\n  this.Prev = null;\n};\nClipperLib.Join = function ()\n{\n  this.OutPt1 = null;\n  this.OutPt2 = null;\n  this.OffPt = new ClipperLib.IntPoint();\n};\nClipperLib.ClipperBase = function ()\n{\n  this.m_MinimaList = null;\n  this.m_CurrentLM = null;\n  this.m_edges = new Array();\n  this.m_UseFullRange = false;\n  this.m_HasOpenPaths = false;\n  this.PreserveCollinear = false;\n  this.m_MinimaList = null;\n  this.m_CurrentLM = null;\n  this.m_UseFullRange = false;\n  this.m_HasOpenPaths = false;\n};\n// Ranges are in original C# too high for Javascript (in current state 2013 september):\n// protected const double horizontal = -3.4E+38;\n// internal const cInt loRange = 0x3FFFFFFF; // = 1073741823 = sqrt(2^63 -1)/2\n// internal const cInt hiRange = 0x3FFFFFFFFFFFFFFFL; // = 4611686018427387903 = sqrt(2^127 -1)/2\n// So had to adjust them to more suitable for Javascript.\n// If JS some day supports truly 64-bit integers, then these ranges can be as in C#\n// and biginteger library can be more simpler (as then 128bit can be represented as two 64bit numbers)\nClipperLib.ClipperBase.horizontal = -9007199254740992; //-2^53\nClipperLib.ClipperBase.Skip = -2;\nClipperLib.ClipperBase.Unassigned = -1;\nClipperLib.ClipperBase.tolerance = 1E-20;\nif (use_int32)\n{\n  ClipperLib.ClipperBase.loRange = 46340;\n  ClipperLib.ClipperBase.hiRange = 46340;\n}\nelse\n{\n  ClipperLib.ClipperBase.loRange = 47453132; // sqrt(2^53 -1)/2\n  ClipperLib.ClipperBase.hiRange = 4503599627370495; // sqrt(2^106 -1)/2\n}\nClipperLib.ClipperBase.near_zero = function (val)\n{\n  return (val > -ClipperLib.ClipperBase.tolerance) && (val < ClipperLib.ClipperBase.tolerance);\n};\nClipperLib.ClipperBase.IsHorizontal = function (e)\n{\n  return e.Delta.Y === 0;\n};\nClipperLib.ClipperBase.prototype.PointIsVertex = function (pt, pp)\n{\n  var pp2 = pp;\n  do {\n    if (ClipperLib.IntPoint.op_Equality(pp2.Pt, pt))\n      return true;\n    pp2 = pp2.Next;\n  }\n  while (pp2 != pp)\n  return false;\n};\nClipperLib.ClipperBase.prototype.PointOnLineSegment = function (pt, linePt1, linePt2, UseFullRange)\n{\n  if (UseFullRange)\n    return ((pt.X == linePt1.X) && (pt.Y == linePt1.Y)) ||\n      ((pt.X == linePt2.X) && (pt.Y == linePt2.Y)) ||\n      (((pt.X > linePt1.X) == (pt.X < linePt2.X)) &&\n      ((pt.Y > linePt1.Y) == (pt.Y < linePt2.Y)) &&\n      (Int128.op_Equality(Int128.Int128Mul((pt.X - linePt1.X), (linePt2.Y - linePt1.Y)),\n        Int128.Int128Mul((linePt2.X - linePt1.X), (pt.Y - linePt1.Y)))));\n  else\n    return ((pt.X == linePt1.X) && (pt.Y == linePt1.Y)) || ((pt.X == linePt2.X) && (pt.Y == linePt2.Y)) || (((pt.X > linePt1.X) == (pt.X < linePt2.X)) && ((pt.Y > linePt1.Y) == (pt.Y < linePt2.Y)) && ((pt.X - linePt1.X) * (linePt2.Y - linePt1.Y) == (linePt2.X - linePt1.X) * (pt.Y - linePt1.Y)));\n};\nClipperLib.ClipperBase.prototype.PointOnPolygon = function (pt, pp, UseFullRange)\n{\n  var pp2 = pp;\n  while (true)\n  {\n    if (this.PointOnLineSegment(pt, pp2.Pt, pp2.Next.Pt, UseFullRange))\n      return true;\n    pp2 = pp2.Next;\n    if (pp2 == pp)\n      break;\n  }\n  return false;\n};\nClipperLib.ClipperBase.prototype.SlopesEqual = ClipperLib.ClipperBase.SlopesEqual = function ()\n{\n  var a = arguments,\n    alen = a.length;\n  var e1, e2, pt1, pt2, pt3, pt4, UseFullRange;\n  if (alen == 3) // function (e1, e2, UseFullRange)\n  {\n    e1 = a[0];\n    e2 = a[1];\n    UseFullRange = a[2];\n    if (UseFullRange)\n      return Int128.op_Equality(Int128.Int128Mul(e1.Delta.Y, e2.Delta.X), Int128.Int128Mul(e1.Delta.X, e2.Delta.Y));\n    else\n      return ClipperLib.Cast_Int64((e1.Delta.Y) * (e2.Delta.X)) == ClipperLib.Cast_Int64((e1.Delta.X) * (e2.Delta.Y));\n  }\n  else if (alen == 4) // function (pt1, pt2, pt3, UseFullRange)\n  {\n    pt1 = a[0];\n    pt2 = a[1];\n    pt3 = a[2];\n    UseFullRange = a[3];\n    if (UseFullRange)\n      return Int128.op_Equality(Int128.Int128Mul(pt1.Y - pt2.Y, pt2.X - pt3.X), Int128.Int128Mul(pt1.X - pt2.X, pt2.Y - pt3.Y));\n    else\n      return ClipperLib.Cast_Int64((pt1.Y - pt2.Y) * (pt2.X - pt3.X)) - ClipperLib.Cast_Int64((pt1.X - pt2.X) * (pt2.Y - pt3.Y)) === 0;\n  }\n  else // function (pt1, pt2, pt3, pt4, UseFullRange)\n  {\n    pt1 = a[0];\n    pt2 = a[1];\n    pt3 = a[2];\n    pt4 = a[3];\n    UseFullRange = a[4];\n    if (UseFullRange)\n      return Int128.op_Equality(Int128.Int128Mul(pt1.Y - pt2.Y, pt3.X - pt4.X), Int128.Int128Mul(pt1.X - pt2.X, pt3.Y - pt4.Y));\n    else\n      return ClipperLib.Cast_Int64((pt1.Y - pt2.Y) * (pt3.X - pt4.X)) - ClipperLib.Cast_Int64((pt1.X - pt2.X) * (pt3.Y - pt4.Y)) === 0;\n  }\n};\nClipperLib.ClipperBase.SlopesEqual3 = function (e1, e2, UseFullRange)\n{\n  if (UseFullRange)\n    return Int128.op_Equality(Int128.Int128Mul(e1.Delta.Y, e2.Delta.X), Int128.Int128Mul(e1.Delta.X, e2.Delta.Y));\n  else\n    return ClipperLib.Cast_Int64((e1.Delta.Y) * (e2.Delta.X)) == ClipperLib.Cast_Int64((e1.Delta.X) * (e2.Delta.Y));\n};\nClipperLib.ClipperBase.SlopesEqual4 = function (pt1, pt2, pt3, UseFullRange)\n{\n  if (UseFullRange)\n    return Int128.op_Equality(Int128.Int128Mul(pt1.Y - pt2.Y, pt2.X - pt3.X), Int128.Int128Mul(pt1.X - pt2.X, pt2.Y - pt3.Y));\n  else\n    return ClipperLib.Cast_Int64((pt1.Y - pt2.Y) * (pt2.X - pt3.X)) - ClipperLib.Cast_Int64((pt1.X - pt2.X) * (pt2.Y - pt3.Y)) === 0;\n};\nClipperLib.ClipperBase.SlopesEqual5 = function (pt1, pt2, pt3, pt4, UseFullRange)\n{\n  if (UseFullRange)\n    return Int128.op_Equality(Int128.Int128Mul(pt1.Y - pt2.Y, pt3.X - pt4.X), Int128.Int128Mul(pt1.X - pt2.X, pt3.Y - pt4.Y));\n  else\n    return ClipperLib.Cast_Int64((pt1.Y - pt2.Y) * (pt3.X - pt4.X)) - ClipperLib.Cast_Int64((pt1.X - pt2.X) * (pt3.Y - pt4.Y)) === 0;\n};\nClipperLib.ClipperBase.prototype.Clear = function ()\n{\n  this.DisposeLocalMinimaList();\n  for (var i = 0, ilen = this.m_edges.length; i < ilen; ++i)\n  {\n    for (var j = 0, jlen = this.m_edges[i].length; j < jlen; ++j)\n      this.m_edges[i][j] = null;\n    ClipperLib.Clear(this.m_edges[i]);\n  }\n  ClipperLib.Clear(this.m_edges);\n  this.m_UseFullRange = false;\n  this.m_HasOpenPaths = false;\n};\nClipperLib.ClipperBase.prototype.DisposeLocalMinimaList = function ()\n{\n  while (this.m_MinimaList !== null)\n  {\n    var tmpLm = this.m_MinimaList.Next;\n    this.m_MinimaList = null;\n    this.m_MinimaList = tmpLm;\n  }\n  this.m_CurrentLM = null;\n};\nClipperLib.ClipperBase.prototype.RangeTest = function (Pt, useFullRange)\n{\n  if (useFullRange.Value)\n  {\n    if (Pt.X > ClipperLib.ClipperBase.hiRange || Pt.Y > ClipperLib.ClipperBase.hiRange || -Pt.X > ClipperLib.ClipperBase.hiRange || -Pt.Y > ClipperLib.ClipperBase.hiRange)\n      ClipperLib.Error(\"Coordinate outside allowed range in RangeTest().\");\n  }\n  else if (Pt.X > ClipperLib.ClipperBase.loRange || Pt.Y > ClipperLib.ClipperBase.loRange || -Pt.X > ClipperLib.ClipperBase.loRange || -Pt.Y > ClipperLib.ClipperBase.loRange)\n  {\n    useFullRange.Value = true;\n    this.RangeTest(Pt, useFullRange);\n  }\n};\nClipperLib.ClipperBase.prototype.InitEdge = function (e, eNext, ePrev, pt)\n{\n  e.Next = eNext;\n  e.Prev = ePrev;\n  //e.Curr = pt;\n  e.Curr.X = pt.X;\n  e.Curr.Y = pt.Y;\n  e.OutIdx = -1;\n};\nClipperLib.ClipperBase.prototype.InitEdge2 = function (e, polyType)\n{\n  if (e.Curr.Y >= e.Next.Curr.Y)\n  {\n    //e.Bot = e.Curr;\n    e.Bot.X = e.Curr.X;\n    e.Bot.Y = e.Curr.Y;\n    //e.Top = e.Next.Curr;\n    e.Top.X = e.Next.Curr.X;\n    e.Top.Y = e.Next.Curr.Y;\n  }\n  else\n  {\n    //e.Top = e.Curr;\n    e.Top.X = e.Curr.X;\n    e.Top.Y = e.Curr.Y;\n    //e.Bot = e.Next.Curr;\n    e.Bot.X = e.Next.Curr.X;\n    e.Bot.Y = e.Next.Curr.Y;\n  }\n  this.SetDx(e);\n  e.PolyTyp = polyType;\n};\nClipperLib.ClipperBase.prototype.FindNextLocMin = function (E)\n{\n  var E2;\n  for (;;)\n  {\n    while (ClipperLib.IntPoint.op_Inequality(E.Bot, E.Prev.Bot) || ClipperLib.IntPoint.op_Equality(E.Curr, E.Top))\n      E = E.Next;\n    if (E.Dx != ClipperLib.ClipperBase.horizontal && E.Prev.Dx != ClipperLib.ClipperBase.horizontal)\n      break;\n    while (E.Prev.Dx == ClipperLib.ClipperBase.horizontal)\n      E = E.Prev;\n    E2 = E;\n    while (E.Dx == ClipperLib.ClipperBase.horizontal)\n      E = E.Next;\n    if (E.Top.Y == E.Prev.Bot.Y)\n      continue;\n    //ie just an intermediate horz.\n    if (E2.Prev.Bot.X < E.Bot.X)\n      E = E2;\n    break;\n  }\n  return E;\n};\nClipperLib.ClipperBase.prototype.ProcessBound = function (E, IsClockwise)\n{\n  var EStart = E,\n    Result = E;\n  var Horz;\n  var StartX;\n  if (E.Dx == ClipperLib.ClipperBase.horizontal)\n  {\n    //it's possible for adjacent overlapping horz edges to start heading left\n    //before finishing right, so ...\n    if (IsClockwise)\n      StartX = E.Prev.Bot.X;\n    else\n      StartX = E.Next.Bot.X;\n    if (E.Bot.X != StartX)\n      this.ReverseHorizontal(E);\n  }\n  if (Result.OutIdx != ClipperLib.ClipperBase.Skip)\n  {\n    if (IsClockwise)\n    {\n      while (Result.Top.Y == Result.Next.Bot.Y && Result.Next.OutIdx != ClipperLib.ClipperBase.Skip)\n        Result = Result.Next;\n      if (Result.Dx == ClipperLib.ClipperBase.horizontal && Result.Next.OutIdx != ClipperLib.ClipperBase.Skip)\n      {\n        //nb: at the top of a bound, horizontals are added to the bound\n        //only when the preceding edge attaches to the horizontal's left vertex\n        //unless a Skip edge is encountered when that becomes the top divide\n        Horz = Result;\n        while (Horz.Prev.Dx == ClipperLib.ClipperBase.horizontal)\n          Horz = Horz.Prev;\n        if (Horz.Prev.Top.X == Result.Next.Top.X)\n        {\n          if (!IsClockwise)\n            Result = Horz.Prev;\n        }\n        else if (Horz.Prev.Top.X > Result.Next.Top.X)\n          Result = Horz.Prev;\n      }\n      while (E != Result)\n      {\n        E.NextInLML = E.Next;\n        if (E.Dx == ClipperLib.ClipperBase.horizontal && E != EStart && E.Bot.X != E.Prev.Top.X)\n          this.ReverseHorizontal(E);\n        E = E.Next;\n      }\n      if (E.Dx == ClipperLib.ClipperBase.horizontal && E != EStart && E.Bot.X != E.Prev.Top.X)\n        this.ReverseHorizontal(E);\n      Result = Result.Next;\n      //move to the edge just beyond current bound\n    }\n    else\n    {\n      while (Result.Top.Y == Result.Prev.Bot.Y && Result.Prev.OutIdx != ClipperLib.ClipperBase.Skip)\n        Result = Result.Prev;\n      if (Result.Dx == ClipperLib.ClipperBase.horizontal && Result.Prev.OutIdx != ClipperLib.ClipperBase.Skip)\n      {\n        Horz = Result;\n        while (Horz.Next.Dx == ClipperLib.ClipperBase.horizontal)\n          Horz = Horz.Next;\n        if (Horz.Next.Top.X == Result.Prev.Top.X)\n        {\n          if (!IsClockwise)\n            Result = Horz.Next;\n        }\n        else if (Horz.Next.Top.X > Result.Prev.Top.X)\n          Result = Horz.Next;\n      }\n      while (E != Result)\n      {\n        E.NextInLML = E.Prev;\n        if (E.Dx == ClipperLib.ClipperBase.horizontal && E != EStart && E.Bot.X != E.Next.Top.X)\n          this.ReverseHorizontal(E);\n        E = E.Prev;\n      }\n      if (E.Dx == ClipperLib.ClipperBase.horizontal && E != EStart && E.Bot.X != E.Next.Top.X)\n        this.ReverseHorizontal(E);\n      Result = Result.Prev;\n      //move to the edge just beyond current bound\n    }\n  }\n  if (Result.OutIdx == ClipperLib.ClipperBase.Skip)\n  {\n    //if edges still remain in the current bound beyond the skip edge then\n    //create another LocMin and call ProcessBound once more\n    E = Result;\n    if (IsClockwise)\n    {\n      while (E.Top.Y == E.Next.Bot.Y)\n        E = E.Next;\n      //don't include top horizontals when parsing a bound a second time,\n      //they will be contained in the opposite bound ...\n      while (E != Result && E.Dx == ClipperLib.ClipperBase.horizontal)\n        E = E.Prev;\n    }\n    else\n    {\n      while (E.Top.Y == E.Prev.Bot.Y)\n        E = E.Prev;\n      while (E != Result && E.Dx == ClipperLib.ClipperBase.horizontal)\n        E = E.Next;\n    }\n    if (E == Result)\n    {\n      if (IsClockwise)\n        Result = E.Next;\n      else\n        Result = E.Prev;\n    }\n    else\n    {\n      //there are more edges in the bound beyond result starting with E\n      if (IsClockwise)\n        E = Result.Next;\n      else\n        E = Result.Prev;\n      var locMin = new ClipperLib.LocalMinima();\n      locMin.Next = null;\n      locMin.Y = E.Bot.Y;\n      locMin.LeftBound = null;\n      locMin.RightBound = E;\n      locMin.RightBound.WindDelta = 0;\n      Result = this.ProcessBound(locMin.RightBound, IsClockwise);\n      this.InsertLocalMinima(locMin);\n    }\n  }\n  return Result;\n};\nClipperLib.ClipperBase.prototype.AddPath = function (pg, polyType, Closed)\n{\n  if (use_lines)\n  {\n    if (!Closed && polyType == ClipperLib.PolyType.ptClip)\n      ClipperLib.Error(\"AddPath: Open paths must be subject.\");\n  }\n  else\n  {\n    if (!Closed)\n      ClipperLib.Error(\"AddPath: Open paths have been disabled.\");\n  }\n  var highI = pg.length - 1;\n  if (Closed)\n    while (highI > 0 && (ClipperLib.IntPoint.op_Equality(pg[highI], pg[0])))\n  --highI;\n  while (highI > 0 && (ClipperLib.IntPoint.op_Equality(pg[highI], pg[highI - 1])))\n  --highI;\n  if ((Closed && highI < 2) || (!Closed && highI < 1))\n    return false;\n  //create a new edge array ...\n  var edges = new Array();\n  for (var i = 0; i <= highI; i++)\n    edges.push(new ClipperLib.TEdge());\n  var IsFlat = true;\n  //1. Basic (first) edge initialization ...\n\n  //edges[1].Curr = pg[1];\n  edges[1].Curr.X = pg[1].X;\n  edges[1].Curr.Y = pg[1].Y;\n\n  var $1 = {Value: this.m_UseFullRange};\n  this.RangeTest(pg[0], $1);\n  this.m_UseFullRange = $1.Value;\n\n  $1.Value = this.m_UseFullRange;\n  this.RangeTest(pg[highI], $1);\n  this.m_UseFullRange = $1.Value;\n\n  this.InitEdge(edges[0], edges[1], edges[highI], pg[0]);\n  this.InitEdge(edges[highI], edges[0], edges[highI - 1], pg[highI]);\n  for (var i = highI - 1; i >= 1; --i)\n  {\n    $1.Value = this.m_UseFullRange;\n    this.RangeTest(pg[i], $1);\n    this.m_UseFullRange = $1.Value;\n\n    this.InitEdge(edges[i], edges[i + 1], edges[i - 1], pg[i]);\n  }\n\n  var eStart = edges[0];\n  //2. Remove duplicate vertices, and (when closed) collinear edges ...\n  var E = eStart,\n    eLoopStop = eStart;\n  for (;;)\n  {\n    if (ClipperLib.IntPoint.op_Equality(E.Curr, E.Next.Curr))\n    {\n      if (E == E.Next)\n        break;\n      if (E == eStart)\n        eStart = E.Next;\n      E = this.RemoveEdge(E);\n      eLoopStop = E;\n      continue;\n    }\n    if (E.Prev == E.Next)\n      break;\n    else if (Closed && ClipperLib.ClipperBase.SlopesEqual(E.Prev.Curr, E.Curr, E.Next.Curr, this.m_UseFullRange) && (!this.PreserveCollinear || !this.Pt2IsBetweenPt1AndPt3(E.Prev.Curr, E.Curr, E.Next.Curr)))\n    {\n      //Collinear edges are allowed for open paths but in closed paths\n      //the default is to merge adjacent collinear edges into a single edge.\n      //However, if the PreserveCollinear property is enabled, only overlapping\n      //collinear edges (ie spikes) will be removed from closed paths.\n      if (E == eStart)\n        eStart = E.Next;\n      E = this.RemoveEdge(E);\n      E = E.Prev;\n      eLoopStop = E;\n      continue;\n    }\n    E = E.Next;\n    if (E == eLoopStop)\n      break;\n  }\n  if ((!Closed && (E == E.Next)) || (Closed && (E.Prev == E.Next)))\n    return false;\n  if (!Closed)\n  {\n    this.m_HasOpenPaths = true;\n    eStart.Prev.OutIdx = ClipperLib.ClipperBase.Skip;\n  }\n  //3. Do second stage of edge initialization ...\n  var eHighest = eStart;\n  E = eStart;\n  do {\n    this.InitEdge2(E, polyType);\n    E = E.Next;\n    if (IsFlat && E.Curr.Y != eStart.Curr.Y)\n      IsFlat = false;\n  }\n  while (E != eStart)\n  //4. Finally, add edge bounds to LocalMinima list ...\n  //Totally flat paths must be handled differently when adding them\n  //to LocalMinima list to avoid endless loops etc ...\n  if (IsFlat)\n  {\n    if (Closed)\n      return false;\n    E.Prev.OutIdx = ClipperLib.ClipperBase.Skip;\n    if (E.Prev.Bot.X < E.Prev.Top.X)\n      this.ReverseHorizontal(E.Prev);\n    var locMin = new ClipperLib.LocalMinima();\n    locMin.Next = null;\n    locMin.Y = E.Bot.Y;\n    locMin.LeftBound = null;\n    locMin.RightBound = E;\n    locMin.RightBound.Side = ClipperLib.EdgeSide.esRight;\n    locMin.RightBound.WindDelta = 0;\n    while (E.Next.OutIdx != ClipperLib.ClipperBase.Skip)\n    {\n      E.NextInLML = E.Next;\n      if (E.Bot.X != E.Prev.Top.X)\n        this.ReverseHorizontal(E);\n      E = E.Next;\n    }\n    this.InsertLocalMinima(locMin);\n    this.m_edges.push(edges);\n    return true;\n  }\n  this.m_edges.push(edges);\n  var clockwise;\n  var EMin = null;\n  for (;;)\n  {\n    E = this.FindNextLocMin(E);\n    if (E == EMin)\n      break;\n    else if (EMin == null)\n      EMin = E;\n    //E and E.Prev now share a local minima (left aligned if horizontal).\n    //Compare their slopes to find which starts which bound ...\n    var locMin = new ClipperLib.LocalMinima();\n    locMin.Next = null;\n    locMin.Y = E.Bot.Y;\n    if (E.Dx < E.Prev.Dx)\n    {\n      locMin.LeftBound = E.Prev;\n      locMin.RightBound = E;\n      clockwise = false;\n      //Q.nextInLML = Q.prev\n    }\n    else\n    {\n      locMin.LeftBound = E;\n      locMin.RightBound = E.Prev;\n      clockwise = true;\n      //Q.nextInLML = Q.next\n    }\n    locMin.LeftBound.Side = ClipperLib.EdgeSide.esLeft;\n    locMin.RightBound.Side = ClipperLib.EdgeSide.esRight;\n    if (!Closed)\n      locMin.LeftBound.WindDelta = 0;\n    else if (locMin.LeftBound.Next == locMin.RightBound)\n      locMin.LeftBound.WindDelta = -1;\n    else\n      locMin.LeftBound.WindDelta = 1;\n    locMin.RightBound.WindDelta = -locMin.LeftBound.WindDelta;\n    E = this.ProcessBound(locMin.LeftBound, clockwise);\n    var E2 = this.ProcessBound(locMin.RightBound, !clockwise);\n    if (locMin.LeftBound.OutIdx == ClipperLib.ClipperBase.Skip)\n      locMin.LeftBound = null;\n    else if (locMin.RightBound.OutIdx == ClipperLib.ClipperBase.Skip)\n      locMin.RightBound = null;\n    this.InsertLocalMinima(locMin);\n    if (!clockwise)\n      E = E2;\n  }\n  return true;\n};\nClipperLib.ClipperBase.prototype.AddPaths = function (ppg, polyType, closed)\n{\n  //  console.log(\"-------------------------------------------\");\n  //  console.log(JSON.stringify(ppg));\n  var result = false;\n  for (var i = 0, ilen = ppg.length; i < ilen; ++i)\n    if (this.AddPath(ppg[i], polyType, closed))\n      result = true;\n  return result;\n};\n//------------------------------------------------------------------------------\nClipperLib.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3 = function (pt1, pt2, pt3)\n{\n  if ((ClipperLib.IntPoint.op_Equality(pt1, pt3)) || (ClipperLib.IntPoint.op_Equality(pt1, pt2)) ||\n    (ClipperLib.IntPoint.op_Equality(pt3, pt2)))\n    return false;\n  else if (pt1.X != pt3.X)\n    return (pt2.X > pt1.X) == (pt2.X < pt3.X);\n  else\n    return (pt2.Y > pt1.Y) == (pt2.Y < pt3.Y);\n};\nClipperLib.ClipperBase.prototype.RemoveEdge = function (e)\n{\n  //removes e from double_linked_list (but without removing from memory)\n  e.Prev.Next = e.Next;\n  e.Next.Prev = e.Prev;\n  var result = e.Next;\n  e.Prev = null; //flag as removed (see ClipperBase.Clear)\n  return result;\n};\nClipperLib.ClipperBase.prototype.SetDx = function (e)\n{\n  e.Delta.X = (e.Top.X - e.Bot.X);\n  e.Delta.Y = (e.Top.Y - e.Bot.Y);\n  if (e.Delta.Y === 0) e.Dx = ClipperLib.ClipperBase.horizontal;\n  else e.Dx = (e.Delta.X) / (e.Delta.Y);\n};\nClipperLib.ClipperBase.prototype.InsertLocalMinima = function (newLm)\n{\n  if (this.m_MinimaList === null)\n  {\n    this.m_MinimaList = newLm;\n  }\n  else if (newLm.Y >= this.m_MinimaList.Y)\n  {\n    newLm.Next = this.m_MinimaList;\n    this.m_MinimaList = newLm;\n  }\n  else\n  {\n    var tmpLm = this.m_MinimaList;\n    while (tmpLm.Next !== null && (newLm.Y < tmpLm.Next.Y))\n      tmpLm = tmpLm.Next;\n    newLm.Next = tmpLm.Next;\n    tmpLm.Next = newLm;\n  }\n};\nClipperLib.ClipperBase.prototype.PopLocalMinima = function ()\n{\n  if (this.m_CurrentLM === null)\n    return;\n  this.m_CurrentLM = this.m_CurrentLM.Next;\n};\nClipperLib.ClipperBase.prototype.ReverseHorizontal = function (e)\n{\n  //swap horizontal edges' top and bottom x's so they follow the natural\n  //progression of the bounds - ie so their xbots will align with the\n  //adjoining lower edge. [Helpful in the ProcessHorizontal() method.]\n  var tmp = e.Top.X;\n  e.Top.X = e.Bot.X;\n  e.Bot.X = tmp;\n  if (use_xyz)\n  {\n    tmp = e.Top.Z;\n    e.Top.Z = e.Bot.Z;\n    e.Bot.Z = tmp;\n  }\n};\nClipperLib.ClipperBase.prototype.Reset = function ()\n{\n  this.m_CurrentLM = this.m_MinimaList;\n  if (this.m_CurrentLM == null)\n    return;\n  //ie nothing to process\n  //reset all edges ...\n  var lm = this.m_MinimaList;\n  while (lm != null)\n  {\n    var e = lm.LeftBound;\n    if (e != null)\n    {\n      //e.Curr = e.Bot;\n      e.Curr.X = e.Bot.X;\n      e.Curr.Y = e.Bot.Y;\n      e.Side = ClipperLib.EdgeSide.esLeft;\n      e.OutIdx = ClipperLib.ClipperBase.Unassigned;\n    }\n    e = lm.RightBound;\n    if (e != null)\n    {\n      //e.Curr = e.Bot;\n      e.Curr.X = e.Bot.X;\n      e.Curr.Y = e.Bot.Y;\n      e.Side = ClipperLib.EdgeSide.esRight;\n      e.OutIdx = ClipperLib.ClipperBase.Unassigned;\n    }\n    lm = lm.Next;\n  }\n};\nClipperLib.Clipper = function (InitOptions) // public Clipper(int InitOptions = 0)\n{\n  if (typeof (InitOptions) == \"undefined\") InitOptions = 0;\n  this.m_PolyOuts = null;\n  this.m_ClipType = ClipperLib.ClipType.ctIntersection;\n  this.m_Scanbeam = null;\n  this.m_ActiveEdges = null;\n  this.m_SortedEdges = null;\n  this.m_IntersectList = null;\n  this.m_IntersectNodeComparer = null;\n  this.m_ExecuteLocked = false;\n  this.m_ClipFillType = ClipperLib.PolyFillType.pftEvenOdd;\n  this.m_SubjFillType = ClipperLib.PolyFillType.pftEvenOdd;\n  this.m_Joins = null;\n  this.m_GhostJoins = null;\n  this.m_UsingPolyTree = false;\n  this.ReverseSolution = false;\n  this.StrictlySimple = false;\n  ClipperLib.ClipperBase.call(this);\n  this.m_Scanbeam = null;\n  this.m_ActiveEdges = null;\n  this.m_SortedEdges = null;\n  this.m_IntersectList = new Array();\n  this.m_IntersectNodeComparer = ClipperLib.MyIntersectNodeSort.Compare;\n  this.m_ExecuteLocked = false;\n  this.m_UsingPolyTree = false;\n  this.m_PolyOuts = new Array();\n  this.m_Joins = new Array();\n  this.m_GhostJoins = new Array();\n  this.ReverseSolution = (1 & InitOptions) !== 0;\n  this.StrictlySimple = (2 & InitOptions) !== 0;\n  this.PreserveCollinear = (4 & InitOptions) !== 0;\n  if (use_xyz)\n  {\n    this.ZFillFunction = null; // function (IntPoint vert1, IntPoint vert2, ref IntPoint intersectPt);\n  }\n};\nClipperLib.Clipper.ioReverseSolution = 1;\nClipperLib.Clipper.ioStrictlySimple = 2;\nClipperLib.Clipper.ioPreserveCollinear = 4;\n\nClipperLib.Clipper.prototype.Clear = function ()\n{\n  if (this.m_edges.length === 0)\n    return;\n  //avoids problems with ClipperBase destructor\n  this.DisposeAllPolyPts();\n  ClipperLib.ClipperBase.prototype.Clear.call(this);\n};\n\nClipperLib.Clipper.prototype.DisposeScanbeamList = function ()\n{\n  while (this.m_Scanbeam !== null)\n  {\n    var sb2 = this.m_Scanbeam.Next;\n    this.m_Scanbeam = null;\n    this.m_Scanbeam = sb2;\n  }\n};\nClipperLib.Clipper.prototype.Reset = function ()\n{\n  ClipperLib.ClipperBase.prototype.Reset.call(this);\n  this.m_Scanbeam = null;\n  this.m_ActiveEdges = null;\n  this.m_SortedEdges = null;\n\n  var lm = this.m_MinimaList;\n  while (lm !== null)\n  {\n    this.InsertScanbeam(lm.Y);\n    lm = lm.Next;\n  }\n};\nClipperLib.Clipper.prototype.InsertScanbeam = function (Y)\n{\n  if (this.m_Scanbeam === null)\n  {\n    this.m_Scanbeam = new ClipperLib.Scanbeam();\n    this.m_Scanbeam.Next = null;\n    this.m_Scanbeam.Y = Y;\n  }\n  else if (Y > this.m_Scanbeam.Y)\n  {\n    var newSb = new ClipperLib.Scanbeam();\n    newSb.Y = Y;\n    newSb.Next = this.m_Scanbeam;\n    this.m_Scanbeam = newSb;\n  }\n  else\n  {\n    var sb2 = this.m_Scanbeam;\n    while (sb2.Next !== null && (Y <= sb2.Next.Y))\n      sb2 = sb2.Next;\n    if (Y == sb2.Y)\n      return;\n    //ie ignores duplicates\n    var newSb = new ClipperLib.Scanbeam();\n    newSb.Y = Y;\n    newSb.Next = sb2.Next;\n    sb2.Next = newSb;\n  }\n};\n// ************************************\nClipperLib.Clipper.prototype.Execute = function ()\n{\n  var a = arguments,\n    alen = a.length,\n    ispolytree = a[1] instanceof ClipperLib.PolyTree;\n  if (alen == 4 && !ispolytree) // function (clipType, solution, subjFillType, clipFillType)\n  {\n    var clipType = a[0],\n      solution = a[1],\n      subjFillType = a[2],\n      clipFillType = a[3];\n    if (this.m_ExecuteLocked)\n      return false;\n    if (this.m_HasOpenPaths)\n      ClipperLib.Error(\"Error: PolyTree struct is need for open path clipping.\");\n    this.m_ExecuteLocked = true;\n    ClipperLib.Clear(solution);\n    this.m_SubjFillType = subjFillType;\n    this.m_ClipFillType = clipFillType;\n    this.m_ClipType = clipType;\n    this.m_UsingPolyTree = false;\n    try\n    {\n      var succeeded = this.ExecuteInternal();\n      //build the return polygons ...\n      if (succeeded) this.BuildResult(solution);\n    }\n    finally\n    {\n      this.DisposeAllPolyPts();\n      this.m_ExecuteLocked = false;\n    }\n    return succeeded;\n  }\n  else if (alen == 4 && ispolytree) // function (clipType, polytree, subjFillType, clipFillType)\n  {\n    var clipType = a[0],\n      polytree = a[1],\n      subjFillType = a[2],\n      clipFillType = a[3];\n    if (this.m_ExecuteLocked)\n      return false;\n    this.m_ExecuteLocked = true;\n    this.m_SubjFillType = subjFillType;\n    this.m_ClipFillType = clipFillType;\n    this.m_ClipType = clipType;\n    this.m_UsingPolyTree = true;\n    try\n    {\n      var succeeded = this.ExecuteInternal();\n      //build the return polygons ...\n      if (succeeded) this.BuildResult2(polytree);\n    }\n    finally\n    {\n      this.DisposeAllPolyPts();\n      this.m_ExecuteLocked = false;\n    }\n    return succeeded;\n  }\n  else if (alen == 2 && !ispolytree) // function (clipType, solution)\n  {\n    var clipType = a[0],\n      solution = a[1];\n    return this.Execute(clipType, solution, ClipperLib.PolyFillType.pftEvenOdd, ClipperLib.PolyFillType.pftEvenOdd);\n  }\n  else if (alen == 2 && ispolytree) // function (clipType, polytree)\n  {\n    var clipType = a[0],\n      polytree = a[1];\n    return this.Execute(clipType, polytree, ClipperLib.PolyFillType.pftEvenOdd, ClipperLib.PolyFillType.pftEvenOdd);\n  }\n};\nClipperLib.Clipper.prototype.FixHoleLinkage = function (outRec)\n{\n  //skip if an outermost polygon or\n  //already already points to the correct FirstLeft ...\n  if (outRec.FirstLeft === null || (outRec.IsHole != outRec.FirstLeft.IsHole && outRec.FirstLeft.Pts !== null))\n    return;\n  var orfl = outRec.FirstLeft;\n  while (orfl !== null && ((orfl.IsHole == outRec.IsHole) || orfl.Pts === null))\n    orfl = orfl.FirstLeft;\n  outRec.FirstLeft = orfl;\n};\nClipperLib.Clipper.prototype.ExecuteInternal = function ()\n{\n  try\n  {\n    this.Reset();\n    if (this.m_CurrentLM === null)\n      return false;\n    var botY = this.PopScanbeam();\n    do {\n      this.InsertLocalMinimaIntoAEL(botY);\n      ClipperLib.Clear(this.m_GhostJoins);\n      this.ProcessHorizontals(false);\n      if (this.m_Scanbeam === null)\n        break;\n      var topY = this.PopScanbeam();\n      //console.log(\"botY:\" + botY + \", topY:\" + topY);\n      if (!this.ProcessIntersections(botY, topY))\n        return false;\n      this.ProcessEdgesAtTopOfScanbeam(topY);\n      botY = topY;\n    }\n    while (this.m_Scanbeam !== null || this.m_CurrentLM !== null)\n    //fix orientations ...\n    for (var i = 0, ilen = this.m_PolyOuts.length; i < ilen; i++)\n    {\n      var outRec = this.m_PolyOuts[i];\n      if (outRec.Pts === null || outRec.IsOpen)\n        continue;\n      if ((outRec.IsHole ^ this.ReverseSolution) == (this.Area(outRec) > 0))\n        this.ReversePolyPtLinks(outRec.Pts);\n    }\n    this.JoinCommonEdges();\n    for (var i = 0, ilen = this.m_PolyOuts.length; i < ilen; i++)\n    {\n      var outRec = this.m_PolyOuts[i];\n      if (outRec.Pts !== null && !outRec.IsOpen)\n        this.FixupOutPolygon(outRec);\n    }\n    if (this.StrictlySimple)\n      this.DoSimplePolygons();\n    return true;\n  }\n  finally\n  {\n    ClipperLib.Clear(this.m_Joins);\n    ClipperLib.Clear(this.m_GhostJoins);\n  }\n};\nClipperLib.Clipper.prototype.PopScanbeam = function ()\n{\n  var Y = this.m_Scanbeam.Y;\n  var sb2 = this.m_Scanbeam;\n  this.m_Scanbeam = this.m_Scanbeam.Next;\n  sb2 = null;\n  return Y;\n};\nClipperLib.Clipper.prototype.DisposeAllPolyPts = function ()\n{\n  for (var i = 0, ilen = this.m_PolyOuts.length; i < ilen; ++i)\n    this.DisposeOutRec(i);\n  ClipperLib.Clear(this.m_PolyOuts);\n};\nClipperLib.Clipper.prototype.DisposeOutRec = function (index)\n{\n  var outRec = this.m_PolyOuts[index];\n  if (outRec.Pts !== null)\n    this.DisposeOutPts(outRec.Pts);\n  outRec = null;\n  this.m_PolyOuts[index] = null;\n};\nClipperLib.Clipper.prototype.DisposeOutPts = function (pp)\n{\n  if (pp === null)\n    return;\n  var tmpPp = null;\n  pp.Prev.Next = null;\n  while (pp !== null)\n  {\n    tmpPp = pp;\n    pp = pp.Next;\n    tmpPp = null;\n  }\n};\nClipperLib.Clipper.prototype.AddJoin = function (Op1, Op2, OffPt)\n{\n  var j = new ClipperLib.Join();\n  j.OutPt1 = Op1;\n  j.OutPt2 = Op2;\n  //j.OffPt = OffPt;\n  j.OffPt.X = OffPt.X;\n  j.OffPt.Y = OffPt.Y;\n  this.m_Joins.push(j);\n};\nClipperLib.Clipper.prototype.AddGhostJoin = function (Op, OffPt)\n{\n  var j = new ClipperLib.Join();\n  j.OutPt1 = Op;\n  //j.OffPt = OffPt;\n  j.OffPt.X = OffPt.X;\n  j.OffPt.Y = OffPt.Y;\n  this.m_GhostJoins.push(j);\n};\nif (use_xyz)\n{\n  ClipperLib.Clipper.prototype.SetZ = function (pt, e)\n  {\n    pt.Z = 0;\n    if (this.ZFillFunction !== null)\n    {\n      //put the 'preferred' point as first parameter ...\n      if (e.OutIdx < 0)\n        this.ZFillFunction(e.Bot, e.Top, pt); //outside a path so presume entering\n      else\n        this.ZFillFunction(e.Top, e.Bot, pt); //inside a path so presume exiting\n    }\n  };\n  //------------------------------------------------------------------------------\n}\nClipperLib.Clipper.prototype.InsertLocalMinimaIntoAEL = function (botY)\n{\n  while (this.m_CurrentLM !== null && (this.m_CurrentLM.Y == botY))\n  {\n    var lb = this.m_CurrentLM.LeftBound;\n    var rb = this.m_CurrentLM.RightBound;\n    this.PopLocalMinima();\n    var Op1 = null;\n    if (lb === null)\n    {\n      this.InsertEdgeIntoAEL(rb, null);\n      this.SetWindingCount(rb);\n      if (this.IsContributing(rb))\n        Op1 = this.AddOutPt(rb, rb.Bot);\n    }\n    else if (rb == null)\n    {\n      this.InsertEdgeIntoAEL(lb, null);\n      this.SetWindingCount(lb);\n      if (this.IsContributing(lb))\n        Op1 = this.AddOutPt(lb, lb.Bot);\n      this.InsertScanbeam(lb.Top.Y);\n    }\n    else\n    {\n      this.InsertEdgeIntoAEL(lb, null);\n      this.InsertEdgeIntoAEL(rb, lb);\n      this.SetWindingCount(lb);\n      rb.WindCnt = lb.WindCnt;\n      rb.WindCnt2 = lb.WindCnt2;\n      if (this.IsContributing(lb))\n        Op1 = this.AddLocalMinPoly(lb, rb, lb.Bot);\n      this.InsertScanbeam(lb.Top.Y);\n    }\n    if (rb != null)\n    {\n      if (ClipperLib.ClipperBase.IsHorizontal(rb))\n        this.AddEdgeToSEL(rb);\n      else\n        this.InsertScanbeam(rb.Top.Y);\n    }\n    if (lb == null || rb == null) continue;\n    //if output polygons share an Edge with a horizontal rb, they'll need joining later ...\n    if (Op1 !== null && ClipperLib.ClipperBase.IsHorizontal(rb) && this.m_GhostJoins.length > 0 && rb.WindDelta !== 0)\n    {\n      for (var i = 0, ilen = this.m_GhostJoins.length; i < ilen; i++)\n      {\n        //if the horizontal Rb and a 'ghost' horizontal overlap, then convert\n        //the 'ghost' join to a real join ready for later ...\n        var j = this.m_GhostJoins[i];\n        if (this.HorzSegmentsOverlap(j.OutPt1.Pt, j.OffPt, rb.Bot, rb.Top))\n          this.AddJoin(j.OutPt1, Op1, j.OffPt);\n      }\n    }\n    if (lb.OutIdx >= 0 && lb.PrevInAEL !== null &&\n      lb.PrevInAEL.Curr.X == lb.Bot.X &&\n      lb.PrevInAEL.OutIdx >= 0 &&\n      ClipperLib.ClipperBase.SlopesEqual(lb.PrevInAEL, lb, this.m_UseFullRange) &&\n      lb.WindDelta !== 0 && lb.PrevInAEL.WindDelta !== 0)\n    {\n      var Op2 = this.AddOutPt(lb.PrevInAEL, lb.Bot);\n      this.AddJoin(Op1, Op2, lb.Top);\n    }\n    if (lb.NextInAEL != rb)\n    {\n      if (rb.OutIdx >= 0 && rb.PrevInAEL.OutIdx >= 0 &&\n        ClipperLib.ClipperBase.SlopesEqual(rb.PrevInAEL, rb, this.m_UseFullRange) &&\n        rb.WindDelta !== 0 && rb.PrevInAEL.WindDelta !== 0)\n      {\n        var Op2 = this.AddOutPt(rb.PrevInAEL, rb.Bot);\n        this.AddJoin(Op1, Op2, rb.Top);\n      }\n      var e = lb.NextInAEL;\n      if (e !== null)\n        while (e != rb)\n        {\n          //nb: For calculating winding counts etc, IntersectEdges() assumes\n          //that param1 will be to the right of param2 ABOVE the intersection ...\n          this.IntersectEdges(rb, e, lb.Curr, false);\n          //order important here\n          e = e.NextInAEL;\n        }\n    }\n  }\n};\nClipperLib.Clipper.prototype.InsertEdgeIntoAEL = function (edge, startEdge)\n{\n  if (this.m_ActiveEdges === null)\n  {\n    edge.PrevInAEL = null;\n    edge.NextInAEL = null;\n    this.m_ActiveEdges = edge;\n  }\n  else if (startEdge === null && this.E2InsertsBeforeE1(this.m_ActiveEdges, edge))\n  {\n    edge.PrevInAEL = null;\n    edge.NextInAEL = this.m_ActiveEdges;\n    this.m_ActiveEdges.PrevInAEL = edge;\n    this.m_ActiveEdges = edge;\n  }\n  else\n  {\n    if (startEdge === null)\n      startEdge = this.m_ActiveEdges;\n    while (startEdge.NextInAEL !== null && !this.E2InsertsBeforeE1(startEdge.NextInAEL, edge))\n      startEdge = startEdge.NextInAEL;\n    edge.NextInAEL = startEdge.NextInAEL;\n    if (startEdge.NextInAEL !== null)\n      startEdge.NextInAEL.PrevInAEL = edge;\n    edge.PrevInAEL = startEdge;\n    startEdge.NextInAEL = edge;\n  }\n};\nClipperLib.Clipper.prototype.E2InsertsBeforeE1 = function (e1, e2)\n{\n  if (e2.Curr.X == e1.Curr.X)\n  {\n    if (e2.Top.Y > e1.Top.Y)\n      return e2.Top.X < ClipperLib.Clipper.TopX(e1, e2.Top.Y);\n    else\n      return e1.Top.X > ClipperLib.Clipper.TopX(e2, e1.Top.Y);\n  }\n  else\n    return e2.Curr.X < e1.Curr.X;\n};\nClipperLib.Clipper.prototype.IsEvenOddFillType = function (edge)\n{\n  if (edge.PolyTyp == ClipperLib.PolyType.ptSubject)\n    return this.m_SubjFillType == ClipperLib.PolyFillType.pftEvenOdd;\n  else\n    return this.m_ClipFillType == ClipperLib.PolyFillType.pftEvenOdd;\n};\nClipperLib.Clipper.prototype.IsEvenOddAltFillType = function (edge)\n{\n  if (edge.PolyTyp == ClipperLib.PolyType.ptSubject)\n    return this.m_ClipFillType == ClipperLib.PolyFillType.pftEvenOdd;\n  else\n    return this.m_SubjFillType == ClipperLib.PolyFillType.pftEvenOdd;\n};\nClipperLib.Clipper.prototype.IsContributing = function (edge)\n{\n  var pft, pft2;\n  if (edge.PolyTyp == ClipperLib.PolyType.ptSubject)\n  {\n    pft = this.m_SubjFillType;\n    pft2 = this.m_ClipFillType;\n  }\n  else\n  {\n    pft = this.m_ClipFillType;\n    pft2 = this.m_SubjFillType;\n  }\n  switch (pft)\n  {\n  case ClipperLib.PolyFillType.pftEvenOdd:\n    if (edge.WindDelta === 0 && edge.WindCnt != 1)\n      return false;\n    break;\n  case ClipperLib.PolyFillType.pftNonZero:\n    if (Math.abs(edge.WindCnt) != 1)\n      return false;\n    break;\n  case ClipperLib.PolyFillType.pftPositive:\n    if (edge.WindCnt != 1)\n      return false;\n    break;\n  default:\n    if (edge.WindCnt != -1)\n      return false;\n    break;\n  }\n  switch (this.m_ClipType)\n  {\n  case ClipperLib.ClipType.ctIntersection:\n    switch (pft2)\n    {\n    case ClipperLib.PolyFillType.pftEvenOdd:\n    case ClipperLib.PolyFillType.pftNonZero:\n      return (edge.WindCnt2 !== 0);\n    case ClipperLib.PolyFillType.pftPositive:\n      return (edge.WindCnt2 > 0);\n    default:\n      return (edge.WindCnt2 < 0);\n    }\n  case ClipperLib.ClipType.ctUnion:\n    switch (pft2)\n    {\n    case ClipperLib.PolyFillType.pftEvenOdd:\n    case ClipperLib.PolyFillType.pftNonZero:\n      return (edge.WindCnt2 === 0);\n    case ClipperLib.PolyFillType.pftPositive:\n      return (edge.WindCnt2 <= 0);\n    default:\n      return (edge.WindCnt2 >= 0);\n    }\n  case ClipperLib.ClipType.ctDifference:\n    if (edge.PolyTyp == ClipperLib.PolyType.ptSubject)\n      switch (pft2)\n      {\n      case ClipperLib.PolyFillType.pftEvenOdd:\n      case ClipperLib.PolyFillType.pftNonZero:\n        return (edge.WindCnt2 === 0);\n      case ClipperLib.PolyFillType.pftPositive:\n        return (edge.WindCnt2 <= 0);\n      default:\n        return (edge.WindCnt2 >= 0);\n      }\n    else\n      switch (pft2)\n      {\n      case ClipperLib.PolyFillType.pftEvenOdd:\n      case ClipperLib.PolyFillType.pftNonZero:\n        return (edge.WindCnt2 !== 0);\n      case ClipperLib.PolyFillType.pftPositive:\n        return (edge.WindCnt2 > 0);\n      default:\n        return (edge.WindCnt2 < 0);\n      }\n  case ClipperLib.ClipType.ctXor:\n    if (edge.WindDelta === 0)\n      switch (pft2)\n      {\n      case ClipperLib.PolyFillType.pftEvenOdd:\n      case ClipperLib.PolyFillType.pftNonZero:\n        return (edge.WindCnt2 === 0);\n      case ClipperLib.PolyFillType.pftPositive:\n        return (edge.WindCnt2 <= 0);\n      default:\n        return (edge.WindCnt2 >= 0);\n      }\n    else\n      return true;\n  }\n  return true;\n};\nClipperLib.Clipper.prototype.SetWindingCount = function (edge)\n{\n  var e = edge.PrevInAEL;\n  //find the edge of the same polytype that immediately preceeds 'edge' in AEL\n  while (e !== null && ((e.PolyTyp != edge.PolyTyp) || (e.WindDelta === 0)))\n    e = e.PrevInAEL;\n  if (e === null)\n  {\n    edge.WindCnt = (edge.WindDelta === 0 ? 1 : edge.WindDelta);\n    edge.WindCnt2 = 0;\n    e = this.m_ActiveEdges;\n    //ie get ready to calc WindCnt2\n  }\n  else if (edge.WindDelta === 0 && this.m_ClipType != ClipperLib.ClipType.ctUnion)\n  {\n    edge.WindCnt = 1;\n    edge.WindCnt2 = e.WindCnt2;\n    e = e.NextInAEL;\n    //ie get ready to calc WindCnt2\n  }\n  else if (this.IsEvenOddFillType(edge))\n  {\n    //EvenOdd filling ...\n    if (edge.WindDelta === 0)\n    {\n      //are we inside a subj polygon ...\n      var Inside = true;\n      var e2 = e.PrevInAEL;\n      while (e2 !== null)\n      {\n        if (e2.PolyTyp == e.PolyTyp && e2.WindDelta !== 0)\n          Inside = !Inside;\n        e2 = e2.PrevInAEL;\n      }\n      edge.WindCnt = (Inside ? 0 : 1);\n    }\n    else\n    {\n      edge.WindCnt = edge.WindDelta;\n    }\n    edge.WindCnt2 = e.WindCnt2;\n    e = e.NextInAEL;\n    //ie get ready to calc WindCnt2\n  }\n  else\n  {\n    //nonZero, Positive or Negative filling ...\n    if (e.WindCnt * e.WindDelta < 0)\n    {\n      //prev edge is 'decreasing' WindCount (WC) toward zero\n      //so we're outside the previous polygon ...\n      if (Math.abs(e.WindCnt) > 1)\n      {\n        //outside prev poly but still inside another.\n        //when reversing direction of prev poly use the same WC \n        if (e.WindDelta * edge.WindDelta < 0)\n          edge.WindCnt = e.WindCnt;\n        else\n          edge.WindCnt = e.WindCnt + edge.WindDelta;\n      }\n      else\n        edge.WindCnt = (edge.WindDelta === 0 ? 1 : edge.WindDelta);\n    }\n    else\n    {\n      //prev edge is 'increasing' WindCount (WC) away from zero\n      //so we're inside the previous polygon ...\n      if (edge.WindDelta === 0)\n        edge.WindCnt = (e.WindCnt < 0 ? e.WindCnt - 1 : e.WindCnt + 1);\n      else if (e.WindDelta * edge.WindDelta < 0)\n        edge.WindCnt = e.WindCnt;\n      else\n        edge.WindCnt = e.WindCnt + edge.WindDelta;\n    }\n    edge.WindCnt2 = e.WindCnt2;\n    e = e.NextInAEL;\n    //ie get ready to calc WindCnt2\n  }\n  //update WindCnt2 ...\n  if (this.IsEvenOddAltFillType(edge))\n  {\n    //EvenOdd filling ...\n    while (e != edge)\n    {\n      if (e.WindDelta !== 0)\n        edge.WindCnt2 = (edge.WindCnt2 === 0 ? 1 : 0);\n      e = e.NextInAEL;\n    }\n  }\n  else\n  {\n    //nonZero, Positive or Negative filling ...\n    while (e != edge)\n    {\n      edge.WindCnt2 += e.WindDelta;\n      e = e.NextInAEL;\n    }\n  }\n};\nClipperLib.Clipper.prototype.AddEdgeToSEL = function (edge)\n{\n  //SEL pointers in PEdge are reused to build a list of horizontal edges.\n  //However, we don't need to worry about order with horizontal edge processing.\n  if (this.m_SortedEdges === null)\n  {\n    this.m_SortedEdges = edge;\n    edge.PrevInSEL = null;\n    edge.NextInSEL = null;\n  }\n  else\n  {\n    edge.NextInSEL = this.m_SortedEdges;\n    edge.PrevInSEL = null;\n    this.m_SortedEdges.PrevInSEL = edge;\n    this.m_SortedEdges = edge;\n  }\n};\nClipperLib.Clipper.prototype.CopyAELToSEL = function ()\n{\n  var e = this.m_ActiveEdges;\n  this.m_SortedEdges = e;\n  while (e !== null)\n  {\n    e.PrevInSEL = e.PrevInAEL;\n    e.NextInSEL = e.NextInAEL;\n    e = e.NextInAEL;\n  }\n};\nClipperLib.Clipper.prototype.SwapPositionsInAEL = function (edge1, edge2)\n{\n  //check that one or other edge hasn't already been removed from AEL ...\n  if (edge1.NextInAEL == edge1.PrevInAEL || edge2.NextInAEL == edge2.PrevInAEL)\n    return;\n  if (edge1.NextInAEL == edge2)\n  {\n    var next = edge2.NextInAEL;\n    if (next !== null)\n      next.PrevInAEL = edge1;\n    var prev = edge1.PrevInAEL;\n    if (prev !== null)\n      prev.NextInAEL = edge2;\n    edge2.PrevInAEL = prev;\n    edge2.NextInAEL = edge1;\n    edge1.PrevInAEL = edge2;\n    edge1.NextInAEL = next;\n  }\n  else if (edge2.NextInAEL == edge1)\n  {\n    var next = edge1.NextInAEL;\n    if (next !== null)\n      next.PrevInAEL = edge2;\n    var prev = edge2.PrevInAEL;\n    if (prev !== null)\n      prev.NextInAEL = edge1;\n    edge1.PrevInAEL = prev;\n    edge1.NextInAEL = edge2;\n    edge2.PrevInAEL = edge1;\n    edge2.NextInAEL = next;\n  }\n  else\n  {\n    var next = edge1.NextInAEL;\n    var prev = edge1.PrevInAEL;\n    edge1.NextInAEL = edge2.NextInAEL;\n    if (edge1.NextInAEL !== null)\n      edge1.NextInAEL.PrevInAEL = edge1;\n    edge1.PrevInAEL = edge2.PrevInAEL;\n    if (edge1.PrevInAEL !== null)\n      edge1.PrevInAEL.NextInAEL = edge1;\n    edge2.NextInAEL = next;\n    if (edge2.NextInAEL !== null)\n      edge2.NextInAEL.PrevInAEL = edge2;\n    edge2.PrevInAEL = prev;\n    if (edge2.PrevInAEL !== null)\n      edge2.PrevInAEL.NextInAEL = edge2;\n  }\n  if (edge1.PrevInAEL === null)\n    this.m_ActiveEdges = edge1;\n  else if (edge2.PrevInAEL === null)\n    this.m_ActiveEdges = edge2;\n};\nClipperLib.Clipper.prototype.SwapPositionsInSEL = function (edge1, edge2)\n{\n  if (edge1.NextInSEL === null && edge1.PrevInSEL === null)\n    return;\n  if (edge2.NextInSEL === null && edge2.PrevInSEL === null)\n    return;\n  if (edge1.NextInSEL == edge2)\n  {\n    var next = edge2.NextInSEL;\n    if (next !== null)\n      next.PrevInSEL = edge1;\n    var prev = edge1.PrevInSEL;\n    if (prev !== null)\n      prev.NextInSEL = edge2;\n    edge2.PrevInSEL = prev;\n    edge2.NextInSEL = edge1;\n    edge1.PrevInSEL = edge2;\n    edge1.NextInSEL = next;\n  }\n  else if (edge2.NextInSEL == edge1)\n  {\n    var next = edge1.NextInSEL;\n    if (next !== null)\n      next.PrevInSEL = edge2;\n    var prev = edge2.PrevInSEL;\n    if (prev !== null)\n      prev.NextInSEL = edge1;\n    edge1.PrevInSEL = prev;\n    edge1.NextInSEL = edge2;\n    edge2.PrevInSEL = edge1;\n    edge2.NextInSEL = next;\n  }\n  else\n  {\n    var next = edge1.NextInSEL;\n    var prev = edge1.PrevInSEL;\n    edge1.NextInSEL = edge2.NextInSEL;\n    if (edge1.NextInSEL !== null)\n      edge1.NextInSEL.PrevInSEL = edge1;\n    edge1.PrevInSEL = edge2.PrevInSEL;\n    if (edge1.PrevInSEL !== null)\n      edge1.PrevInSEL.NextInSEL = edge1;\n    edge2.NextInSEL = next;\n    if (edge2.NextInSEL !== null)\n      edge2.NextInSEL.PrevInSEL = edge2;\n    edge2.PrevInSEL = prev;\n    if (edge2.PrevInSEL !== null)\n      edge2.PrevInSEL.NextInSEL = edge2;\n  }\n  if (edge1.PrevInSEL === null)\n    this.m_SortedEdges = edge1;\n  else if (edge2.PrevInSEL === null)\n    this.m_SortedEdges = edge2;\n};\nClipperLib.Clipper.prototype.AddLocalMaxPoly = function (e1, e2, pt)\n{\n  this.AddOutPt(e1, pt);\n  if (e2.WindDelta == 0) this.AddOutPt(e2, pt);\n  if (e1.OutIdx == e2.OutIdx)\n  {\n    e1.OutIdx = -1;\n    e2.OutIdx = -1;\n  }\n  else if (e1.OutIdx < e2.OutIdx)\n    this.AppendPolygon(e1, e2);\n  else\n    this.AppendPolygon(e2, e1);\n};\nClipperLib.Clipper.prototype.AddLocalMinPoly = function (e1, e2, pt)\n{\n  var result;\n  var e, prevE;\n  if (ClipperLib.ClipperBase.IsHorizontal(e2) || (e1.Dx > e2.Dx))\n  {\n    result = this.AddOutPt(e1, pt);\n    e2.OutIdx = e1.OutIdx;\n    e1.Side = ClipperLib.EdgeSide.esLeft;\n    e2.Side = ClipperLib.EdgeSide.esRight;\n    e = e1;\n    if (e.PrevInAEL == e2)\n      prevE = e2.PrevInAEL;\n    else\n      prevE = e.PrevInAEL;\n  }\n  else\n  {\n    result = this.AddOutPt(e2, pt);\n    e1.OutIdx = e2.OutIdx;\n    e1.Side = ClipperLib.EdgeSide.esRight;\n    e2.Side = ClipperLib.EdgeSide.esLeft;\n    e = e2;\n    if (e.PrevInAEL == e1)\n      prevE = e1.PrevInAEL;\n    else\n      prevE = e.PrevInAEL;\n  }\n  if (prevE !== null && prevE.OutIdx >= 0 && (ClipperLib.Clipper.TopX(prevE, pt.Y) == ClipperLib.Clipper.TopX(e, pt.Y)) && ClipperLib.ClipperBase.SlopesEqual(e, prevE, this.m_UseFullRange) && (e.WindDelta !== 0) && (prevE.WindDelta !== 0))\n  {\n    var outPt = this.AddOutPt(prevE, pt);\n    this.AddJoin(result, outPt, e.Top);\n  }\n  return result;\n};\nClipperLib.Clipper.prototype.CreateOutRec = function ()\n{\n  var result = new ClipperLib.OutRec();\n  result.Idx = -1;\n  result.IsHole = false;\n  result.IsOpen = false;\n  result.FirstLeft = null;\n  result.Pts = null;\n  result.BottomPt = null;\n  result.PolyNode = null;\n  this.m_PolyOuts.push(result);\n  result.Idx = this.m_PolyOuts.length - 1;\n  return result;\n};\nClipperLib.Clipper.prototype.AddOutPt = function (e, pt)\n{\n  var ToFront = (e.Side == ClipperLib.EdgeSide.esLeft);\n  if (e.OutIdx < 0)\n  {\n    var outRec = this.CreateOutRec();\n    outRec.IsOpen = (e.WindDelta === 0);\n    var newOp = new ClipperLib.OutPt();\n    outRec.Pts = newOp;\n    newOp.Idx = outRec.Idx;\n    //newOp.Pt = pt;\n    newOp.Pt.X = pt.X;\n    newOp.Pt.Y = pt.Y;\n    newOp.Next = newOp;\n    newOp.Prev = newOp;\n    if (!outRec.IsOpen)\n      this.SetHoleState(e, outRec);\n    if (use_xyz)\n    {\n      if (ClipperLib.IntPoint.op_Equality(pt, e.Bot))\n      {\n        //newOp.Pt = e.Bot;\n        newOp.Pt.X = e.Bot.X;\n        newOp.Pt.Y = e.Bot.Y;\n        newOp.Pt.Z = e.Bot.Z;\n      }\n      else if (ClipperLib.IntPoint.op_Equality(pt, e.Top))\n      {\n        //newOp.Pt = e.Top;\n        newOp.Pt.X = e.Top.X;\n        newOp.Pt.Y = e.Top.Y;\n        newOp.Pt.Z = e.Top.Z;\n      }\n      else\n        this.SetZ(newOp.Pt, e);\n    }\n    e.OutIdx = outRec.Idx;\n    //nb: do this after SetZ !\n    return newOp;\n  }\n  else\n  {\n    var outRec = this.m_PolyOuts[e.OutIdx];\n    //OutRec.Pts is the 'Left-most' point & OutRec.Pts.Prev is the 'Right-most'\n    var op = outRec.Pts;\n    if (ToFront && ClipperLib.IntPoint.op_Equality(pt, op.Pt))\n      return op;\n    else if (!ToFront && ClipperLib.IntPoint.op_Equality(pt, op.Prev.Pt))\n      return op.Prev;\n    var newOp = new ClipperLib.OutPt();\n    newOp.Idx = outRec.Idx;\n    //newOp.Pt = pt;\n    newOp.Pt.X = pt.X;\n    newOp.Pt.Y = pt.Y;\n    newOp.Next = op;\n    newOp.Prev = op.Prev;\n    newOp.Prev.Next = newOp;\n    op.Prev = newOp;\n    if (ToFront)\n      outRec.Pts = newOp;\n    if (use_xyz)\n    {\n      if (ClipperLib.IntPoint.op_Equality(pt, e.Bot))\n      {\n        //newOp.Pt = e.Bot;\n        newOp.Pt.X = e.Bot.X;\n        newOp.Pt.Y = e.Bot.Y;\n        newOp.Pt.Z = e.Bot.Z;\n      }\n      else if (ClipperLib.IntPoint.op_Equality(pt, e.Top))\n      {\n        //newOp.Pt = e.Top;\n        newOp.Pt.X = e.Top.X;\n        newOp.Pt.Y = e.Top.Y;\n        newOp.Pt.Z = e.Top.Z;\n      }\n      else\n        this.SetZ(newOp.Pt, e);\n    }\n    return newOp;\n  }\n};\nClipperLib.Clipper.prototype.SwapPoints = function (pt1, pt2)\n{\n  var tmp = new ClipperLib.IntPoint(pt1.Value);\n  //pt1.Value = pt2.Value;\n  pt1.Value.X = pt2.Value.X;\n  pt1.Value.Y = pt2.Value.Y;\n  //pt2.Value = tmp;\n  pt2.Value.X = tmp.X;\n  pt2.Value.Y = tmp.Y;\n};\nClipperLib.Clipper.prototype.HorzSegmentsOverlap = function (Pt1a, Pt1b, Pt2a, Pt2b)\n{\n  //precondition: both segments are horizontal\n  if ((Pt1a.X > Pt2a.X) == (Pt1a.X < Pt2b.X))\n    return true;\n  else if ((Pt1b.X > Pt2a.X) == (Pt1b.X < Pt2b.X))\n    return true;\n  else if ((Pt2a.X > Pt1a.X) == (Pt2a.X < Pt1b.X))\n    return true;\n  else if ((Pt2b.X > Pt1a.X) == (Pt2b.X < Pt1b.X))\n    return true;\n  else if ((Pt1a.X == Pt2a.X) && (Pt1b.X == Pt2b.X))\n    return true;\n  else if ((Pt1a.X == Pt2b.X) && (Pt1b.X == Pt2a.X))\n    return true;\n  else\n    return false;\n};\nClipperLib.Clipper.prototype.InsertPolyPtBetween = function (p1, p2, pt)\n{\n  var result = new ClipperLib.OutPt();\n  //result.Pt = pt;\n  result.Pt.X = pt.X;\n  result.Pt.Y = pt.Y;\n  if (p2 == p1.Next)\n  {\n    p1.Next = result;\n    p2.Prev = result;\n    result.Next = p2;\n    result.Prev = p1;\n  }\n  else\n  {\n    p2.Next = result;\n    p1.Prev = result;\n    result.Next = p1;\n    result.Prev = p2;\n  }\n  return result;\n};\nClipperLib.Clipper.prototype.SetHoleState = function (e, outRec)\n{\n  var isHole = false;\n  var e2 = e.PrevInAEL;\n  while (e2 !== null)\n  {\n    if (e2.OutIdx >= 0 && e2.WindDelta != 0)\n    {\n      isHole = !isHole;\n      if (outRec.FirstLeft === null)\n        outRec.FirstLeft = this.m_PolyOuts[e2.OutIdx];\n    }\n    e2 = e2.PrevInAEL;\n  }\n  if (isHole)\n    outRec.IsHole = true;\n};\nClipperLib.Clipper.prototype.GetDx = function (pt1, pt2)\n{\n  if (pt1.Y == pt2.Y)\n    return ClipperLib.ClipperBase.horizontal;\n  else\n    return (pt2.X - pt1.X) / (pt2.Y - pt1.Y);\n};\nClipperLib.Clipper.prototype.FirstIsBottomPt = function (btmPt1, btmPt2)\n{\n  var p = btmPt1.Prev;\n  while ((ClipperLib.IntPoint.op_Equality(p.Pt, btmPt1.Pt)) && (p != btmPt1))\n    p = p.Prev;\n  var dx1p = Math.abs(this.GetDx(btmPt1.Pt, p.Pt));\n  p = btmPt1.Next;\n  while ((ClipperLib.IntPoint.op_Equality(p.Pt, btmPt1.Pt)) && (p != btmPt1))\n    p = p.Next;\n  var dx1n = Math.abs(this.GetDx(btmPt1.Pt, p.Pt));\n  p = btmPt2.Prev;\n  while ((ClipperLib.IntPoint.op_Equality(p.Pt, btmPt2.Pt)) && (p != btmPt2))\n    p = p.Prev;\n  var dx2p = Math.abs(this.GetDx(btmPt2.Pt, p.Pt));\n  p = btmPt2.Next;\n  while ((ClipperLib.IntPoint.op_Equality(p.Pt, btmPt2.Pt)) && (p != btmPt2))\n    p = p.Next;\n  var dx2n = Math.abs(this.GetDx(btmPt2.Pt, p.Pt));\n  return (dx1p >= dx2p && dx1p >= dx2n) || (dx1n >= dx2p && dx1n >= dx2n);\n};\nClipperLib.Clipper.prototype.GetBottomPt = function (pp)\n{\n  var dups = null;\n  var p = pp.Next;\n  while (p != pp)\n  {\n    if (p.Pt.Y > pp.Pt.Y)\n    {\n      pp = p;\n      dups = null;\n    }\n    else if (p.Pt.Y == pp.Pt.Y && p.Pt.X <= pp.Pt.X)\n    {\n      if (p.Pt.X < pp.Pt.X)\n      {\n        dups = null;\n        pp = p;\n      }\n      else\n      {\n        if (p.Next != pp && p.Prev != pp)\n          dups = p;\n      }\n    }\n    p = p.Next;\n  }\n  if (dups !== null)\n  {\n    //there appears to be at least 2 vertices at bottomPt so ...\n    while (dups != p)\n    {\n      if (!this.FirstIsBottomPt(p, dups))\n        pp = dups;\n      dups = dups.Next;\n      while (ClipperLib.IntPoint.op_Inequality(dups.Pt, pp.Pt))\n        dups = dups.Next;\n    }\n  }\n  return pp;\n};\nClipperLib.Clipper.prototype.GetLowermostRec = function (outRec1, outRec2)\n{\n  //work out which polygon fragment has the correct hole state ...\n  if (outRec1.BottomPt === null)\n    outRec1.BottomPt = this.GetBottomPt(outRec1.Pts);\n  if (outRec2.BottomPt === null)\n    outRec2.BottomPt = this.GetBottomPt(outRec2.Pts);\n  var bPt1 = outRec1.BottomPt;\n  var bPt2 = outRec2.BottomPt;\n  if (bPt1.Pt.Y > bPt2.Pt.Y)\n    return outRec1;\n  else if (bPt1.Pt.Y < bPt2.Pt.Y)\n    return outRec2;\n  else if (bPt1.Pt.X < bPt2.Pt.X)\n    return outRec1;\n  else if (bPt1.Pt.X > bPt2.Pt.X)\n    return outRec2;\n  else if (bPt1.Next == bPt1)\n    return outRec2;\n  else if (bPt2.Next == bPt2)\n    return outRec1;\n  else if (this.FirstIsBottomPt(bPt1, bPt2))\n    return outRec1;\n  else\n    return outRec2;\n};\nClipperLib.Clipper.prototype.Param1RightOfParam2 = function (outRec1, outRec2)\n{\n  do {\n    outRec1 = outRec1.FirstLeft;\n    if (outRec1 == outRec2)\n      return true;\n  }\n  while (outRec1 !== null)\n  return false;\n};\nClipperLib.Clipper.prototype.GetOutRec = function (idx)\n{\n  var outrec = this.m_PolyOuts[idx];\n  while (outrec != this.m_PolyOuts[outrec.Idx])\n    outrec = this.m_PolyOuts[outrec.Idx];\n  return outrec;\n};\nClipperLib.Clipper.prototype.AppendPolygon = function (e1, e2)\n{\n  //get the start and ends of both output polygons ...\n  var outRec1 = this.m_PolyOuts[e1.OutIdx];\n  var outRec2 = this.m_PolyOuts[e2.OutIdx];\n  var holeStateRec;\n  if (this.Param1RightOfParam2(outRec1, outRec2))\n    holeStateRec = outRec2;\n  else if (this.Param1RightOfParam2(outRec2, outRec1))\n    holeStateRec = outRec1;\n  else\n    holeStateRec = this.GetLowermostRec(outRec1, outRec2);\n  var p1_lft = outRec1.Pts;\n  var p1_rt = p1_lft.Prev;\n  var p2_lft = outRec2.Pts;\n  var p2_rt = p2_lft.Prev;\n  var side;\n  //join e2 poly onto e1 poly and delete pointers to e2 ...\n  if (e1.Side == ClipperLib.EdgeSide.esLeft)\n  {\n    if (e2.Side == ClipperLib.EdgeSide.esLeft)\n    {\n      //z y x a b c\n      this.ReversePolyPtLinks(p2_lft);\n      p2_lft.Next = p1_lft;\n      p1_lft.Prev = p2_lft;\n      p1_rt.Next = p2_rt;\n      p2_rt.Prev = p1_rt;\n      outRec1.Pts = p2_rt;\n    }\n    else\n    {\n      //x y z a b c\n      p2_rt.Next = p1_lft;\n      p1_lft.Prev = p2_rt;\n      p2_lft.Prev = p1_rt;\n      p1_rt.Next = p2_lft;\n      outRec1.Pts = p2_lft;\n    }\n    side = ClipperLib.EdgeSide.esLeft;\n  }\n  else\n  {\n    if (e2.Side == ClipperLib.EdgeSide.esRight)\n    {\n      //a b c z y x\n      this.ReversePolyPtLinks(p2_lft);\n      p1_rt.Next = p2_rt;\n      p2_rt.Prev = p1_rt;\n      p2_lft.Next = p1_lft;\n      p1_lft.Prev = p2_lft;\n    }\n    else\n    {\n      //a b c x y z\n      p1_rt.Next = p2_lft;\n      p2_lft.Prev = p1_rt;\n      p1_lft.Prev = p2_rt;\n      p2_rt.Next = p1_lft;\n    }\n    side = ClipperLib.EdgeSide.esRight;\n  }\n  outRec1.BottomPt = null;\n  if (holeStateRec == outRec2)\n  {\n    if (outRec2.FirstLeft != outRec1)\n      outRec1.FirstLeft = outRec2.FirstLeft;\n    outRec1.IsHole = outRec2.IsHole;\n  }\n  outRec2.Pts = null;\n  outRec2.BottomPt = null;\n  outRec2.FirstLeft = outRec1;\n  var OKIdx = e1.OutIdx;\n  var ObsoleteIdx = e2.OutIdx;\n  e1.OutIdx = -1;\n  //nb: safe because we only get here via AddLocalMaxPoly\n  e2.OutIdx = -1;\n  var e = this.m_ActiveEdges;\n  while (e !== null)\n  {\n    if (e.OutIdx == ObsoleteIdx)\n    {\n      e.OutIdx = OKIdx;\n      e.Side = side;\n      break;\n    }\n    e = e.NextInAEL;\n  }\n  outRec2.Idx = outRec1.Idx;\n};\nClipperLib.Clipper.prototype.ReversePolyPtLinks = function (pp)\n{\n  if (pp === null)\n    return;\n  var pp1;\n  var pp2;\n  pp1 = pp;\n  do {\n    pp2 = pp1.Next;\n    pp1.Next = pp1.Prev;\n    pp1.Prev = pp2;\n    pp1 = pp2;\n  }\n  while (pp1 != pp)\n};\nClipperLib.Clipper.SwapSides = function (edge1, edge2)\n{\n  var side = edge1.Side;\n  edge1.Side = edge2.Side;\n  edge2.Side = side;\n};\nClipperLib.Clipper.SwapPolyIndexes = function (edge1, edge2)\n{\n  var outIdx = edge1.OutIdx;\n  edge1.OutIdx = edge2.OutIdx;\n  edge2.OutIdx = outIdx;\n};\nClipperLib.Clipper.prototype.IntersectEdges = function (e1, e2, pt, protect)\n{\n  //e1 will be to the left of e2 BELOW the intersection. Therefore e1 is before\n  //e2 in AEL except when e1 is being inserted at the intersection point ...\n  var e1stops = !protect && e1.NextInLML === null &&\n    e1.Top.X == pt.X && e1.Top.Y == pt.Y;\n  var e2stops = !protect && e2.NextInLML === null &&\n    e2.Top.X == pt.X && e2.Top.Y == pt.Y;\n  var e1Contributing = (e1.OutIdx >= 0);\n  var e2Contributing = (e2.OutIdx >= 0);\n  if (use_lines)\n  {\n    //if either edge is on an OPEN path ...\n    if (e1.WindDelta === 0 || e2.WindDelta === 0)\n    {\n      //ignore subject-subject open path intersections UNLESS they\n      //are both open paths, AND they are both 'contributing maximas' ...\n      if (e1.WindDelta === 0 && e2.WindDelta === 0)\n      {\n        if ((e1stops || e2stops) && e1Contributing && e2Contributing)\n          this.AddLocalMaxPoly(e1, e2, pt);\n      }\n      //if intersecting a subj line with a subj poly ...\n      else if (e1.PolyTyp == e2.PolyTyp &&\n        e1.WindDelta != e2.WindDelta && this.m_ClipType == ClipperLib.ClipType.ctUnion)\n      {\n        if (e1.WindDelta === 0)\n        {\n          if (e2Contributing)\n          {\n            this.AddOutPt(e1, pt);\n            if (e1Contributing)\n              e1.OutIdx = -1;\n          }\n        }\n        else\n        {\n          if (e1Contributing)\n          {\n            this.AddOutPt(e2, pt);\n            if (e2Contributing)\n              e2.OutIdx = -1;\n          }\n        }\n      }\n      else if (e1.PolyTyp != e2.PolyTyp)\n      {\n        if ((e1.WindDelta === 0) && Math.abs(e2.WindCnt) == 1 &&\n          (this.m_ClipType != ClipperLib.ClipType.ctUnion || e2.WindCnt2 === 0))\n        {\n          this.AddOutPt(e1, pt);\n          if (e1Contributing)\n            e1.OutIdx = -1;\n        }\n        else if ((e2.WindDelta === 0) && (Math.abs(e1.WindCnt) == 1) &&\n          (this.m_ClipType != ClipperLib.ClipType.ctUnion || e1.WindCnt2 === 0))\n        {\n          this.AddOutPt(e2, pt);\n          if (e2Contributing)\n            e2.OutIdx = -1;\n        }\n      }\n      if (e1stops)\n        if (e1.OutIdx < 0)\n          this.DeleteFromAEL(e1);\n        else\n          ClipperLib.Error(\"Error intersecting polylines\");\n      if (e2stops)\n        if (e2.OutIdx < 0)\n          this.DeleteFromAEL(e2);\n        else\n          ClipperLib.Error(\"Error intersecting polylines\");\n      return;\n    }\n  }\n  //update winding counts...\n  //assumes that e1 will be to the Right of e2 ABOVE the intersection\n  if (e1.PolyTyp == e2.PolyTyp)\n  {\n    if (this.IsEvenOddFillType(e1))\n    {\n      var oldE1WindCnt = e1.WindCnt;\n      e1.WindCnt = e2.WindCnt;\n      e2.WindCnt = oldE1WindCnt;\n    }\n    else\n    {\n      if (e1.WindCnt + e2.WindDelta === 0)\n        e1.WindCnt = -e1.WindCnt;\n      else\n        e1.WindCnt += e2.WindDelta;\n      if (e2.WindCnt - e1.WindDelta === 0)\n        e2.WindCnt = -e2.WindCnt;\n      else\n        e2.WindCnt -= e1.WindDelta;\n    }\n  }\n  else\n  {\n    if (!this.IsEvenOddFillType(e2))\n      e1.WindCnt2 += e2.WindDelta;\n    else\n      e1.WindCnt2 = (e1.WindCnt2 === 0) ? 1 : 0;\n    if (!this.IsEvenOddFillType(e1))\n      e2.WindCnt2 -= e1.WindDelta;\n    else\n      e2.WindCnt2 = (e2.WindCnt2 === 0) ? 1 : 0;\n  }\n  var e1FillType, e2FillType, e1FillType2, e2FillType2;\n  if (e1.PolyTyp == ClipperLib.PolyType.ptSubject)\n  {\n    e1FillType = this.m_SubjFillType;\n    e1FillType2 = this.m_ClipFillType;\n  }\n  else\n  {\n    e1FillType = this.m_ClipFillType;\n    e1FillType2 = this.m_SubjFillType;\n  }\n  if (e2.PolyTyp == ClipperLib.PolyType.ptSubject)\n  {\n    e2FillType = this.m_SubjFillType;\n    e2FillType2 = this.m_ClipFillType;\n  }\n  else\n  {\n    e2FillType = this.m_ClipFillType;\n    e2FillType2 = this.m_SubjFillType;\n  }\n  var e1Wc, e2Wc;\n  switch (e1FillType)\n  {\n  case ClipperLib.PolyFillType.pftPositive:\n    e1Wc = e1.WindCnt;\n    break;\n  case ClipperLib.PolyFillType.pftNegative:\n    e1Wc = -e1.WindCnt;\n    break;\n  default:\n    e1Wc = Math.abs(e1.WindCnt);\n    break;\n  }\n  switch (e2FillType)\n  {\n  case ClipperLib.PolyFillType.pftPositive:\n    e2Wc = e2.WindCnt;\n    break;\n  case ClipperLib.PolyFillType.pftNegative:\n    e2Wc = -e2.WindCnt;\n    break;\n  default:\n    e2Wc = Math.abs(e2.WindCnt);\n    break;\n  }\n  if (e1Contributing && e2Contributing)\n  {\n    if (e1stops || e2stops || (e1Wc !== 0 && e1Wc != 1) || (e2Wc !== 0 && e2Wc != 1) ||\n      (e1.PolyTyp != e2.PolyTyp && this.m_ClipType != ClipperLib.ClipType.ctXor))\n      this.AddLocalMaxPoly(e1, e2, pt);\n    else\n    {\n      this.AddOutPt(e1, pt);\n      this.AddOutPt(e2, pt);\n      ClipperLib.Clipper.SwapSides(e1, e2);\n      ClipperLib.Clipper.SwapPolyIndexes(e1, e2);\n    }\n  }\n  else if (e1Contributing)\n  {\n    if (e2Wc === 0 || e2Wc == 1)\n    {\n      this.AddOutPt(e1, pt);\n      ClipperLib.Clipper.SwapSides(e1, e2);\n      ClipperLib.Clipper.SwapPolyIndexes(e1, e2);\n    }\n  }\n  else if (e2Contributing)\n  {\n    if (e1Wc === 0 || e1Wc == 1)\n    {\n      this.AddOutPt(e2, pt);\n      ClipperLib.Clipper.SwapSides(e1, e2);\n      ClipperLib.Clipper.SwapPolyIndexes(e1, e2);\n    }\n  }\n  else if ((e1Wc === 0 || e1Wc == 1) &&\n    (e2Wc === 0 || e2Wc == 1) && !e1stops && !e2stops)\n  {\n    //neither edge is currently contributing ...\n    var e1Wc2, e2Wc2;\n    switch (e1FillType2)\n    {\n    case ClipperLib.PolyFillType.pftPositive:\n      e1Wc2 = e1.WindCnt2;\n      break;\n    case ClipperLib.PolyFillType.pftNegative:\n      e1Wc2 = -e1.WindCnt2;\n      break;\n    default:\n      e1Wc2 = Math.abs(e1.WindCnt2);\n      break;\n    }\n    switch (e2FillType2)\n    {\n    case ClipperLib.PolyFillType.pftPositive:\n      e2Wc2 = e2.WindCnt2;\n      break;\n    case ClipperLib.PolyFillType.pftNegative:\n      e2Wc2 = -e2.WindCnt2;\n      break;\n    default:\n      e2Wc2 = Math.abs(e2.WindCnt2);\n      break;\n    }\n    if (e1.PolyTyp != e2.PolyTyp)\n      this.AddLocalMinPoly(e1, e2, pt);\n    else if (e1Wc == 1 && e2Wc == 1)\n      switch (this.m_ClipType)\n      {\n      case ClipperLib.ClipType.ctIntersection:\n        if (e1Wc2 > 0 && e2Wc2 > 0)\n          this.AddLocalMinPoly(e1, e2, pt);\n        break;\n      case ClipperLib.ClipType.ctUnion:\n        if (e1Wc2 <= 0 && e2Wc2 <= 0)\n          this.AddLocalMinPoly(e1, e2, pt);\n        break;\n      case ClipperLib.ClipType.ctDifference:\n        if (((e1.PolyTyp == ClipperLib.PolyType.ptClip) && (e1Wc2 > 0) && (e2Wc2 > 0)) ||\n          ((e1.PolyTyp == ClipperLib.PolyType.ptSubject) && (e1Wc2 <= 0) && (e2Wc2 <= 0)))\n          this.AddLocalMinPoly(e1, e2, pt);\n        break;\n      case ClipperLib.ClipType.ctXor:\n        this.AddLocalMinPoly(e1, e2, pt);\n        break;\n      }\n    else\n      ClipperLib.Clipper.SwapSides(e1, e2);\n  }\n  if ((e1stops != e2stops) &&\n    ((e1stops && (e1.OutIdx >= 0)) || (e2stops && (e2.OutIdx >= 0))))\n  {\n    ClipperLib.Clipper.SwapSides(e1, e2);\n    ClipperLib.Clipper.SwapPolyIndexes(e1, e2);\n  }\n  //finally, delete any non-contributing maxima edges  ...\n  if (e1stops)\n    this.DeleteFromAEL(e1);\n  if (e2stops)\n    this.DeleteFromAEL(e2);\n};\nClipperLib.Clipper.prototype.DeleteFromAEL = function (e)\n{\n  var AelPrev = e.PrevInAEL;\n  var AelNext = e.NextInAEL;\n  if (AelPrev === null && AelNext === null && (e != this.m_ActiveEdges))\n    return;\n  //already deleted\n  if (AelPrev !== null)\n    AelPrev.NextInAEL = AelNext;\n  else\n    this.m_ActiveEdges = AelNext;\n  if (AelNext !== null)\n    AelNext.PrevInAEL = AelPrev;\n  e.NextInAEL = null;\n  e.PrevInAEL = null;\n};\nClipperLib.Clipper.prototype.DeleteFromSEL = function (e)\n{\n  var SelPrev = e.PrevInSEL;\n  var SelNext = e.NextInSEL;\n  if (SelPrev === null && SelNext === null && (e != this.m_SortedEdges))\n    return;\n  //already deleted\n  if (SelPrev !== null)\n    SelPrev.NextInSEL = SelNext;\n  else\n    this.m_SortedEdges = SelNext;\n  if (SelNext !== null)\n    SelNext.PrevInSEL = SelPrev;\n  e.NextInSEL = null;\n  e.PrevInSEL = null;\n};\nClipperLib.Clipper.prototype.UpdateEdgeIntoAEL = function (e)\n{\n  if (e.NextInLML === null)\n    ClipperLib.Error(\"UpdateEdgeIntoAEL: invalid call\");\n  var AelPrev = e.PrevInAEL;\n  var AelNext = e.NextInAEL;\n  e.NextInLML.OutIdx = e.OutIdx;\n  if (AelPrev !== null)\n    AelPrev.NextInAEL = e.NextInLML;\n  else\n    this.m_ActiveEdges = e.NextInLML;\n  if (AelNext !== null)\n    AelNext.PrevInAEL = e.NextInLML;\n  e.NextInLML.Side = e.Side;\n  e.NextInLML.WindDelta = e.WindDelta;\n  e.NextInLML.WindCnt = e.WindCnt;\n  e.NextInLML.WindCnt2 = e.WindCnt2;\n  e = e.NextInLML;\n  //    e.Curr = e.Bot;\n  e.Curr.X = e.Bot.X;\n  e.Curr.Y = e.Bot.Y;\n  e.PrevInAEL = AelPrev;\n  e.NextInAEL = AelNext;\n  if (!ClipperLib.ClipperBase.IsHorizontal(e))\n    this.InsertScanbeam(e.Top.Y);\n  return e;\n};\nClipperLib.Clipper.prototype.ProcessHorizontals = function (isTopOfScanbeam)\n{\n  var horzEdge = this.m_SortedEdges;\n  while (horzEdge !== null)\n  {\n    this.DeleteFromSEL(horzEdge);\n    this.ProcessHorizontal(horzEdge, isTopOfScanbeam);\n    horzEdge = this.m_SortedEdges;\n  }\n};\nClipperLib.Clipper.prototype.GetHorzDirection = function (HorzEdge, $var)\n{\n  if (HorzEdge.Bot.X < HorzEdge.Top.X)\n  {\n      $var.Left = HorzEdge.Bot.X;\n      $var.Right = HorzEdge.Top.X;\n      $var.Dir = ClipperLib.Direction.dLeftToRight;\n  }\n  else\n  {\n      $var.Left = HorzEdge.Top.X;\n      $var.Right = HorzEdge.Bot.X;\n      $var.Dir = ClipperLib.Direction.dRightToLeft;\n  }\n};\nClipperLib.Clipper.prototype.PrepareHorzJoins = function (horzEdge, isTopOfScanbeam)\n{\n  //get the last Op for this horizontal edge\n  //the point may be anywhere along the horizontal ...\n  var outPt = this.m_PolyOuts[horzEdge.OutIdx].Pts;\n  if (horzEdge.Side != ClipperLib.EdgeSide.esLeft)\n    outPt = outPt.Prev;\n  //First, match up overlapping horizontal edges (eg when one polygon's\n  //intermediate horz edge overlaps an intermediate horz edge of another, or\n  //when one polygon sits on top of another) ...\n  //for (var i = 0, ilen = this.m_GhostJoins.length; i < ilen; ++i) {\n  //  var j = this.m_GhostJoins[i];\n  //  if (this.HorzSegmentsOverlap(j.OutPt1.Pt, j.OffPt, horzEdge.Bot, horzEdge.Top))\n  //    this.AddJoin(j.OutPt1, outPt, j.OffPt);\n  //}\n\n  //Also, since horizontal edges at the top of one SB are often removed from\n  //the AEL before we process the horizontal edges at the bottom of the next,\n  //we need to create 'ghost' Join records of 'contrubuting' horizontals that\n  //we can compare with horizontals at the bottom of the next SB.\n  if (isTopOfScanbeam)\n    if (ClipperLib.IntPoint.op_Equality(outPt.Pt, horzEdge.Top))\n      this.AddGhostJoin(outPt, horzEdge.Bot);\n    else\n      this.AddGhostJoin(outPt, horzEdge.Top);\n};\nClipperLib.Clipper.prototype.ProcessHorizontal = function (horzEdge, isTopOfScanbeam)\n{\n  var $var = {Dir: null, Left: null, Right: null};\n  this.GetHorzDirection(horzEdge, $var);\n  var dir = $var.Dir;\n  var horzLeft = $var.Left;\n  var horzRight = $var.Right;\n\n  var eLastHorz = horzEdge,\n    eMaxPair = null;\n  while (eLastHorz.NextInLML !== null && ClipperLib.ClipperBase.IsHorizontal(eLastHorz.NextInLML))\n    eLastHorz = eLastHorz.NextInLML;\n  if (eLastHorz.NextInLML === null)\n    eMaxPair = this.GetMaximaPair(eLastHorz);\n  for (;;)\n  {\n    var IsLastHorz = (horzEdge == eLastHorz);\n    var e = this.GetNextInAEL(horzEdge, dir);\n    while (e !== null)\n    {\n      //Break if we've got to the end of an intermediate horizontal edge ...\n      //nb: Smaller Dx's are to the right of larger Dx's ABOVE the horizontal.\n      if (e.Curr.X == horzEdge.Top.X && horzEdge.NextInLML !== null && e.Dx < horzEdge.NextInLML.Dx)\n        break;\n      var eNext = this.GetNextInAEL(e, dir);\n      //saves eNext for later\n      if ((dir == ClipperLib.Direction.dLeftToRight && e.Curr.X <= horzRight) || (dir == ClipperLib.Direction.dRightToLeft && e.Curr.X >= horzLeft))\n      {\n\n        if (horzEdge.OutIdx >= 0 && horzEdge.WindDelta != 0)\n          this.PrepareHorzJoins(horzEdge, isTopOfScanbeam);\n\n        //so far we're still in range of the horizontal Edge  but make sure\n        //we're at the last of consec. horizontals when matching with eMaxPair\n        if (e == eMaxPair && IsLastHorz)\n        {\n          if (dir == ClipperLib.Direction.dLeftToRight)\n            this.IntersectEdges(horzEdge, e, e.Top, false);\n          else\n            this.IntersectEdges(e, horzEdge, e.Top, false);\n          if (eMaxPair.OutIdx >= 0)\n            ClipperLib.Error(\"ProcessHorizontal error\");\n          return;\n        }\n        else if (dir == ClipperLib.Direction.dLeftToRight)\n        {\n          var Pt = new ClipperLib.IntPoint(e.Curr.X, horzEdge.Curr.Y);\n          this.IntersectEdges(horzEdge, e, Pt, true);\n        }\n        else\n        {\n          var Pt = new ClipperLib.IntPoint(e.Curr.X, horzEdge.Curr.Y);\n          this.IntersectEdges(e, horzEdge, Pt, true);\n        }\n        this.SwapPositionsInAEL(horzEdge, e);\n      }\n      else if ((dir == ClipperLib.Direction.dLeftToRight && e.Curr.X >= horzRight) || (dir == ClipperLib.Direction.dRightToLeft && e.Curr.X <= horzLeft))\n        break;\n      e = eNext;\n    }\n    //end while\n    if (horzEdge.OutIdx >= 0 && horzEdge.WindDelta !== 0)\n      this.PrepareHorzJoins(horzEdge, isTopOfScanbeam);\n    if (horzEdge.NextInLML !== null && ClipperLib.ClipperBase.IsHorizontal(horzEdge.NextInLML))\n    {\n      horzEdge = this.UpdateEdgeIntoAEL(horzEdge);\n      if (horzEdge.OutIdx >= 0)\n        this.AddOutPt(horzEdge, horzEdge.Bot);\n        \n        var $var = {Dir: dir, Left: horzLeft, Right: horzRight};\n        this.GetHorzDirection(horzEdge, $var);\n        dir = $var.Dir;\n        horzLeft = $var.Left;\n        horzRight = $var.Right;\n    }\n    else\n      break;\n  }\n  //end for (;;)\n  if (horzEdge.NextInLML !== null)\n  {\n    if (horzEdge.OutIdx >= 0)\n    {\n      var op1 = this.AddOutPt(horzEdge, horzEdge.Top);\n      horzEdge = this.UpdateEdgeIntoAEL(horzEdge);\n      if (horzEdge.WindDelta === 0)\n        return;\n      //nb: HorzEdge is no longer horizontal here\n      var ePrev = horzEdge.PrevInAEL;\n      var eNext = horzEdge.NextInAEL;\n      if (ePrev !== null && ePrev.Curr.X == horzEdge.Bot.X &&\n        ePrev.Curr.Y == horzEdge.Bot.Y && ePrev.WindDelta !== 0 &&\n        (ePrev.OutIdx >= 0 && ePrev.Curr.Y > ePrev.Top.Y &&\n          ClipperLib.ClipperBase.SlopesEqual(horzEdge, ePrev, this.m_UseFullRange)))\n      {\n        var op2 = this.AddOutPt(ePrev, horzEdge.Bot);\n        this.AddJoin(op1, op2, horzEdge.Top);\n      }\n      else if (eNext !== null && eNext.Curr.X == horzEdge.Bot.X &&\n        eNext.Curr.Y == horzEdge.Bot.Y && eNext.WindDelta !== 0 &&\n        eNext.OutIdx >= 0 && eNext.Curr.Y > eNext.Top.Y &&\n        ClipperLib.ClipperBase.SlopesEqual(horzEdge, eNext, this.m_UseFullRange))\n      {\n        var op2 = this.AddOutPt(eNext, horzEdge.Bot);\n        this.AddJoin(op1, op2, horzEdge.Top);\n      }\n    }\n    else horzEdge = this.UpdateEdgeIntoAEL(horzEdge);\n  }\n  else if (eMaxPair !== null)\n  {\n    if (eMaxPair.OutIdx >= 0)\n    {\n      if (dir == ClipperLib.Direction.dLeftToRight)\n        this.IntersectEdges(horzEdge, eMaxPair, horzEdge.Top, false);\n      else\n        this.IntersectEdges(eMaxPair, horzEdge, horzEdge.Top, false);\n      if (eMaxPair.OutIdx >= 0)\n        ClipperLib.Error(\"ProcessHorizontal error\");\n    }\n    else\n    {\n      this.DeleteFromAEL(horzEdge);\n      this.DeleteFromAEL(eMaxPair);\n    }\n  }\n  else\n  {\n    if (horzEdge.OutIdx >= 0)\n      this.AddOutPt(horzEdge, horzEdge.Top);\n    this.DeleteFromAEL(horzEdge);\n  }\n};\nClipperLib.Clipper.prototype.GetNextInAEL = function (e, Direction)\n{\n  return Direction == ClipperLib.Direction.dLeftToRight ? e.NextInAEL : e.PrevInAEL;\n};\nClipperLib.Clipper.prototype.IsMinima = function (e)\n{\n  return e !== null && (e.Prev.NextInLML != e) && (e.Next.NextInLML != e);\n};\nClipperLib.Clipper.prototype.IsMaxima = function (e, Y)\n{\n  return (e !== null && e.Top.Y == Y && e.NextInLML === null);\n};\nClipperLib.Clipper.prototype.IsIntermediate = function (e, Y)\n{\n  return (e.Top.Y == Y && e.NextInLML !== null);\n};\nClipperLib.Clipper.prototype.GetMaximaPair = function (e)\n{\n  var result = null;\n  if ((ClipperLib.IntPoint.op_Equality(e.Next.Top, e.Top)) && e.Next.NextInLML === null)\n    result = e.Next;\n  else if ((ClipperLib.IntPoint.op_Equality(e.Prev.Top, e.Top)) && e.Prev.NextInLML === null)\n    result = e.Prev;\n  if (result !== null && (result.OutIdx == -2 || (result.NextInAEL == result.PrevInAEL && !ClipperLib.ClipperBase.IsHorizontal(result))))\n    return null;\n  return result;\n};\nClipperLib.Clipper.prototype.ProcessIntersections = function (botY, topY)\n{\n  if (this.m_ActiveEdges == null)\n    return true;\n  try\n  {\n    this.BuildIntersectList(botY, topY);\n    if (this.m_IntersectList.length == 0)\n      return true;\n    if (this.m_IntersectList.length == 1 || this.FixupIntersectionOrder())\n      this.ProcessIntersectList();\n    else\n      return false;\n  }\n  catch ($$e2)\n  {\n    this.m_SortedEdges = null;\n    this.m_IntersectList.length = 0;\n    ClipperLib.Error(\"ProcessIntersections error\");\n  }\n  this.m_SortedEdges = null;\n  return true;\n};\nClipperLib.Clipper.prototype.BuildIntersectList = function (botY, topY)\n{\n  if (this.m_ActiveEdges === null)\n    return;\n  //prepare for sorting ...\n  var e = this.m_ActiveEdges;\n  //console.log(JSON.stringify(JSON.decycle( e )));\n  this.m_SortedEdges = e;\n  while (e !== null)\n  {\n    e.PrevInSEL = e.PrevInAEL;\n    e.NextInSEL = e.NextInAEL;\n    e.Curr.X = ClipperLib.Clipper.TopX(e, topY);\n    e = e.NextInAEL;\n  }\n  //bubblesort ...\n  var isModified = true;\n  while (isModified && this.m_SortedEdges !== null)\n  {\n    isModified = false;\n    e = this.m_SortedEdges;\n    while (e.NextInSEL !== null)\n    {\n      var eNext = e.NextInSEL;\n      var pt = new ClipperLib.IntPoint();\n      //console.log(\"e.Curr.X: \" + e.Curr.X + \" eNext.Curr.X\" + eNext.Curr.X);\n      if (e.Curr.X > eNext.Curr.X)\n      {\n        if (!this.IntersectPoint(e, eNext, pt) && e.Curr.X > eNext.Curr.X + 1)\n        {\n          //console.log(\"e.Curr.X: \"+JSON.stringify(JSON.decycle( e.Curr.X )));\n          //console.log(\"eNext.Curr.X+1: \"+JSON.stringify(JSON.decycle( eNext.Curr.X+1)));\n          ClipperLib.Error(\"Intersection error\");\n        }\n        if (pt.Y > botY)\n        {\n          pt.Y = botY;\n          if (Math.abs(e.Dx) > Math.abs(eNext.Dx))\n            pt.X = ClipperLib.Clipper.TopX(eNext, botY);\n          else\n            pt.X = ClipperLib.Clipper.TopX(e, botY);\n        }\n        var newNode = new ClipperLib.IntersectNode();\n        newNode.Edge1 = e;\n        newNode.Edge2 = eNext;\n        //newNode.Pt = pt;\n        newNode.Pt.X = pt.X;\n        newNode.Pt.Y = pt.Y;\n        this.m_IntersectList.push(newNode);\n        this.SwapPositionsInSEL(e, eNext);\n        isModified = true;\n      }\n      else\n        e = eNext;\n    }\n    if (e.PrevInSEL !== null)\n      e.PrevInSEL.NextInSEL = null;\n    else\n      break;\n  }\n  this.m_SortedEdges = null;\n};\nClipperLib.Clipper.prototype.EdgesAdjacent = function (inode)\n{\n  return (inode.Edge1.NextInSEL == inode.Edge2) || (inode.Edge1.PrevInSEL == inode.Edge2);\n};\nClipperLib.Clipper.IntersectNodeSort = function (node1, node2)\n{\n  //the following typecast is safe because the differences in Pt.Y will\n  //be limited to the height of the scanbeam.\n  return (node2.Pt.Y - node1.Pt.Y);\n};\nClipperLib.Clipper.prototype.FixupIntersectionOrder = function ()\n{\n  //pre-condition: intersections are sorted bottom-most first.\n  //Now it's crucial that intersections are made only between adjacent edges,\n  //so to ensure this the order of intersections may need adjusting ...\n  this.m_IntersectList.sort(this.m_IntersectNodeComparer);\n  this.CopyAELToSEL();\n  var cnt = this.m_IntersectList.length;\n  for (var i = 0; i < cnt; i++)\n  {\n    if (!this.EdgesAdjacent(this.m_IntersectList[i]))\n    {\n      var j = i + 1;\n      while (j < cnt && !this.EdgesAdjacent(this.m_IntersectList[j]))\n        j++;\n      if (j == cnt)\n        return false;\n      var tmp = this.m_IntersectList[i];\n      this.m_IntersectList[i] = this.m_IntersectList[j];\n      this.m_IntersectList[j] = tmp;\n    }\n    this.SwapPositionsInSEL(this.m_IntersectList[i].Edge1, this.m_IntersectList[i].Edge2);\n  }\n  return true;\n};\nClipperLib.Clipper.prototype.ProcessIntersectList = function ()\n{\n  for (var i = 0, ilen = this.m_IntersectList.length; i < ilen; i++)\n  {\n    var iNode = this.m_IntersectList[i];\n    this.IntersectEdges(iNode.Edge1, iNode.Edge2, iNode.Pt, true);\n    this.SwapPositionsInAEL(iNode.Edge1, iNode.Edge2);\n  }\n  this.m_IntersectList.length = 0;\n};\n/*\n--------------------------------\nRound speedtest: http://jsperf.com/fastest-round\n--------------------------------\n*/\nvar R1 = function (a)\n{\n  return a < 0 ? Math.ceil(a - 0.5) : Math.round(a)\n};\nvar R2 = function (a)\n{\n  return a < 0 ? Math.ceil(a - 0.5) : Math.floor(a + 0.5)\n};\nvar R3 = function (a)\n{\n  return a < 0 ? -Math.round(Math.abs(a)) : Math.round(a)\n};\nvar R4 = function (a)\n{\n  if (a < 0)\n  {\n    a -= 0.5;\n    return a < -2147483648 ? Math.ceil(a) : a | 0;\n  }\n  else\n  {\n    a += 0.5;\n    return a > 2147483647 ? Math.floor(a) : a | 0;\n  }\n};\nif (browser.msie) ClipperLib.Clipper.Round = R1;\nelse if (browser.chromium) ClipperLib.Clipper.Round = R3;\nelse if (browser.safari) ClipperLib.Clipper.Round = R4;\nelse ClipperLib.Clipper.Round = R2; // eg. browser.chrome || browser.firefox || browser.opera\nClipperLib.Clipper.TopX = function (edge, currentY)\n{\n  //if (edge.Bot == edge.Curr) alert (\"edge.Bot = edge.Curr\");\n  //if (edge.Bot == edge.Top) alert (\"edge.Bot = edge.Top\");\n  if (currentY == edge.Top.Y)\n    return edge.Top.X;\n  return edge.Bot.X + ClipperLib.Clipper.Round(edge.Dx * (currentY - edge.Bot.Y));\n};\nClipperLib.Clipper.prototype.IntersectPoint = function (edge1, edge2, ip)\n{\n  ip.X = 0;\n  ip.Y = 0;\n  var b1, b2;\n  //nb: with very large coordinate values, it's possible for SlopesEqual() to \n  //return false but for the edge.Dx value be equal due to double precision rounding.\n  if (ClipperLib.ClipperBase.SlopesEqual(edge1, edge2, this.m_UseFullRange) || edge1.Dx == edge2.Dx)\n  {\n    if (edge2.Bot.Y > edge1.Bot.Y)\n    {\n      ip.X = edge2.Bot.X;\n      ip.Y = edge2.Bot.Y;\n    }\n    else\n    {\n      ip.X = edge1.Bot.X;\n      ip.Y = edge1.Bot.Y;\n    }\n    return false;\n  }\n  else if (edge1.Delta.X === 0)\n  {\n    ip.X = edge1.Bot.X;\n    if (ClipperLib.ClipperBase.IsHorizontal(edge2))\n    {\n      ip.Y = edge2.Bot.Y;\n    }\n    else\n    {\n      b2 = edge2.Bot.Y - (edge2.Bot.X / edge2.Dx);\n      ip.Y = ClipperLib.Clipper.Round(ip.X / edge2.Dx + b2);\n    }\n  }\n  else if (edge2.Delta.X === 0)\n  {\n    ip.X = edge2.Bot.X;\n    if (ClipperLib.ClipperBase.IsHorizontal(edge1))\n    {\n      ip.Y = edge1.Bot.Y;\n    }\n    else\n    {\n      b1 = edge1.Bot.Y - (edge1.Bot.X / edge1.Dx);\n      ip.Y = ClipperLib.Clipper.Round(ip.X / edge1.Dx + b1);\n    }\n  }\n  else\n  {\n    b1 = edge1.Bot.X - edge1.Bot.Y * edge1.Dx;\n    b2 = edge2.Bot.X - edge2.Bot.Y * edge2.Dx;\n    var q = (b2 - b1) / (edge1.Dx - edge2.Dx);\n    ip.Y = ClipperLib.Clipper.Round(q);\n    if (Math.abs(edge1.Dx) < Math.abs(edge2.Dx))\n      ip.X = ClipperLib.Clipper.Round(edge1.Dx * q + b1);\n    else\n      ip.X = ClipperLib.Clipper.Round(edge2.Dx * q + b2);\n  }\n  if (ip.Y < edge1.Top.Y || ip.Y < edge2.Top.Y)\n  {\n    if (edge1.Top.Y > edge2.Top.Y)\n    {\n      ip.Y = edge1.Top.Y;\n      ip.X = ClipperLib.Clipper.TopX(edge2, edge1.Top.Y);\n      return ip.X < edge1.Top.X;\n    }\n    else\n      ip.Y = edge2.Top.Y;\n    if (Math.abs(edge1.Dx) < Math.abs(edge2.Dx))\n      ip.X = ClipperLib.Clipper.TopX(edge1, ip.Y);\n    else\n      ip.X = ClipperLib.Clipper.TopX(edge2, ip.Y);\n  }\n  return true;\n};\nClipperLib.Clipper.prototype.ProcessEdgesAtTopOfScanbeam = function (topY)\n{\n  var e = this.m_ActiveEdges;\n  while (e !== null)\n  {\n    //1. process maxima, treating them as if they're 'bent' horizontal edges,\n    //   but exclude maxima with horizontal edges. nb: e can't be a horizontal.\n    var IsMaximaEdge = this.IsMaxima(e, topY);\n    if (IsMaximaEdge)\n    {\n      var eMaxPair = this.GetMaximaPair(e);\n      IsMaximaEdge = (eMaxPair === null || !ClipperLib.ClipperBase.IsHorizontal(eMaxPair));\n    }\n    if (IsMaximaEdge)\n    {\n      var ePrev = e.PrevInAEL;\n      this.DoMaxima(e);\n      if (ePrev === null)\n        e = this.m_ActiveEdges;\n      else\n        e = ePrev.NextInAEL;\n    }\n    else\n    {\n      //2. promote horizontal edges, otherwise update Curr.X and Curr.Y ...\n      if (this.IsIntermediate(e, topY) && ClipperLib.ClipperBase.IsHorizontal(e.NextInLML))\n      {\n        e = this.UpdateEdgeIntoAEL(e);\n        if (e.OutIdx >= 0)\n          this.AddOutPt(e, e.Bot);\n        this.AddEdgeToSEL(e);\n      }\n      else\n      {\n        e.Curr.X = ClipperLib.Clipper.TopX(e, topY);\n        e.Curr.Y = topY;\n      }\n      if (this.StrictlySimple)\n      {\n        var ePrev = e.PrevInAEL;\n        if ((e.OutIdx >= 0) && (e.WindDelta !== 0) && ePrev !== null &&\n          (ePrev.OutIdx >= 0) && (ePrev.Curr.X == e.Curr.X) &&\n          (ePrev.WindDelta !== 0))\n        {\n          var op = this.AddOutPt(ePrev, e.Curr);\n          var op2 = this.AddOutPt(e, e.Curr);\n          this.AddJoin(op, op2, e.Curr);\n          //StrictlySimple (type-3) join\n        }\n      }\n      e = e.NextInAEL;\n    }\n  }\n  //3. Process horizontals at the Top of the scanbeam ...\n  this.ProcessHorizontals(true);\n  //4. Promote intermediate vertices ...\n  e = this.m_ActiveEdges;\n  while (e !== null)\n  {\n    if (this.IsIntermediate(e, topY))\n    {\n      var op = null;\n      if (e.OutIdx >= 0)\n        op = this.AddOutPt(e, e.Top);\n      e = this.UpdateEdgeIntoAEL(e);\n      //if output polygons share an edge, they'll need joining later ...\n      var ePrev = e.PrevInAEL;\n      var eNext = e.NextInAEL;\n      if (ePrev !== null && ePrev.Curr.X == e.Bot.X &&\n        ePrev.Curr.Y == e.Bot.Y && op !== null &&\n        ePrev.OutIdx >= 0 && ePrev.Curr.Y > ePrev.Top.Y &&\n        ClipperLib.ClipperBase.SlopesEqual(e, ePrev, this.m_UseFullRange) &&\n        (e.WindDelta !== 0) && (ePrev.WindDelta !== 0))\n      {\n        var op2 = this.AddOutPt(ePrev, e.Bot);\n        this.AddJoin(op, op2, e.Top);\n      }\n      else if (eNext !== null && eNext.Curr.X == e.Bot.X &&\n        eNext.Curr.Y == e.Bot.Y && op !== null &&\n        eNext.OutIdx >= 0 && eNext.Curr.Y > eNext.Top.Y &&\n        ClipperLib.ClipperBase.SlopesEqual(e, eNext, this.m_UseFullRange) &&\n        (e.WindDelta !== 0) && (eNext.WindDelta !== 0))\n      {\n        var op2 = this.AddOutPt(eNext, e.Bot);\n        this.AddJoin(op, op2, e.Top);\n      }\n    }\n    e = e.NextInAEL;\n  }\n};\nClipperLib.Clipper.prototype.DoMaxima = function (e)\n{\n  var eMaxPair = this.GetMaximaPair(e);\n  if (eMaxPair === null)\n  {\n    if (e.OutIdx >= 0)\n      this.AddOutPt(e, e.Top);\n    this.DeleteFromAEL(e);\n    return;\n  }\n  var eNext = e.NextInAEL;\n  var use_lines = true;\n  while (eNext !== null && eNext != eMaxPair)\n  {\n    this.IntersectEdges(e, eNext, e.Top, true);\n    this.SwapPositionsInAEL(e, eNext);\n    eNext = e.NextInAEL;\n  }\n  if (e.OutIdx == -1 && eMaxPair.OutIdx == -1)\n  {\n    this.DeleteFromAEL(e);\n    this.DeleteFromAEL(eMaxPair);\n  }\n  else if (e.OutIdx >= 0 && eMaxPair.OutIdx >= 0)\n  {\n    this.IntersectEdges(e, eMaxPair, e.Top, false);\n  }\n  else if (use_lines && e.WindDelta === 0)\n  {\n    if (e.OutIdx >= 0)\n    {\n      this.AddOutPt(e, e.Top);\n      e.OutIdx = -1;\n    }\n    this.DeleteFromAEL(e);\n    if (eMaxPair.OutIdx >= 0)\n    {\n      this.AddOutPt(eMaxPair, e.Top);\n      eMaxPair.OutIdx = -1;\n    }\n    this.DeleteFromAEL(eMaxPair);\n  }\n  else\n    ClipperLib.Error(\"DoMaxima error\");\n};\nClipperLib.Clipper.ReversePaths = function (polys)\n{\n  for (var i = 0, len = polys.length; i < len; i++)\n    polys[i].reverse();\n};\nClipperLib.Clipper.Orientation = function (poly)\n{\n  return ClipperLib.Clipper.Area(poly) >= 0;\n};\nClipperLib.Clipper.prototype.PointCount = function (pts)\n{\n  if (pts === null)\n    return 0;\n  var result = 0;\n  var p = pts;\n  do {\n    result++;\n    p = p.Next;\n  }\n  while (p != pts)\n  return result;\n};\nClipperLib.Clipper.prototype.BuildResult = function (polyg)\n{\n  ClipperLib.Clear(polyg);\n  for (var i = 0, ilen = this.m_PolyOuts.length; i < ilen; i++)\n  {\n    var outRec = this.m_PolyOuts[i];\n    if (outRec.Pts === null)\n      continue;\n    var p = outRec.Pts.Prev;\n    var cnt = this.PointCount(p);\n    if (cnt < 2)\n      continue;\n    var pg = new Array(cnt);\n    for (var j = 0; j < cnt; j++)\n    {\n      pg[j] = p.Pt;\n      p = p.Prev;\n    }\n    polyg.push(pg);\n  }\n};\nClipperLib.Clipper.prototype.BuildResult2 = function (polytree)\n{\n  polytree.Clear();\n  //add each output polygon/contour to polytree ...\n  //polytree.m_AllPolys.set_Capacity(this.m_PolyOuts.length);\n  for (var i = 0, ilen = this.m_PolyOuts.length; i < ilen; i++)\n  {\n    var outRec = this.m_PolyOuts[i];\n    var cnt = this.PointCount(outRec.Pts);\n    if ((outRec.IsOpen && cnt < 2) || (!outRec.IsOpen && cnt < 3))\n      continue;\n    this.FixHoleLinkage(outRec);\n    var pn = new ClipperLib.PolyNode();\n    polytree.m_AllPolys.push(pn);\n    outRec.PolyNode = pn;\n    pn.m_polygon.length = cnt;\n    var op = outRec.Pts.Prev;\n    for (var j = 0; j < cnt; j++)\n    {\n      pn.m_polygon[j] = op.Pt;\n      op = op.Prev;\n    }\n  }\n  //fixup PolyNode links etc ...\n  //polytree.m_Childs.set_Capacity(this.m_PolyOuts.length);\n  for (var i = 0, ilen = this.m_PolyOuts.length; i < ilen; i++)\n  {\n    var outRec = this.m_PolyOuts[i];\n    if (outRec.PolyNode === null)\n      continue;\n    else if (outRec.IsOpen)\n    {\n      outRec.PolyNode.IsOpen = true;\n      polytree.AddChild(outRec.PolyNode);\n    }\n    else if (outRec.FirstLeft !== null && outRec.FirstLeft.PolyNode != null)\n      outRec.FirstLeft.PolyNode.AddChild(outRec.PolyNode);\n    else\n      polytree.AddChild(outRec.PolyNode);\n  }\n};\nClipperLib.Clipper.prototype.FixupOutPolygon = function (outRec)\n{\n  //FixupOutPolygon() - removes duplicate points and simplifies consecutive\n  //parallel edges by removing the middle vertex.\n  var lastOK = null;\n  outRec.BottomPt = null;\n  var pp = outRec.Pts;\n  for (;;)\n  {\n    if (pp.Prev == pp || pp.Prev == pp.Next)\n    {\n      this.DisposeOutPts(pp);\n      outRec.Pts = null;\n      return;\n    }\n    //test for duplicate points and collinear edges ...\n    if ((ClipperLib.IntPoint.op_Equality(pp.Pt, pp.Next.Pt)) || (ClipperLib.IntPoint.op_Equality(pp.Pt, pp.Prev.Pt)) ||\n      (ClipperLib.ClipperBase.SlopesEqual(pp.Prev.Pt, pp.Pt, pp.Next.Pt, this.m_UseFullRange) &&\n        (!this.PreserveCollinear || !this.Pt2IsBetweenPt1AndPt3(pp.Prev.Pt, pp.Pt, pp.Next.Pt))))\n    {\n      lastOK = null;\n      var tmp = pp;\n      pp.Prev.Next = pp.Next;\n      pp.Next.Prev = pp.Prev;\n      pp = pp.Prev;\n      tmp = null;\n    }\n    else if (pp == lastOK)\n      break;\n    else\n    {\n      if (lastOK === null)\n        lastOK = pp;\n      pp = pp.Next;\n    }\n  }\n  outRec.Pts = pp;\n};\nClipperLib.Clipper.prototype.DupOutPt = function (outPt, InsertAfter)\n{\n  var result = new ClipperLib.OutPt();\n  //result.Pt = outPt.Pt;\n  result.Pt.X = outPt.Pt.X;\n  result.Pt.Y = outPt.Pt.Y;\n  result.Idx = outPt.Idx;\n  if (InsertAfter)\n  {\n    result.Next = outPt.Next;\n    result.Prev = outPt;\n    outPt.Next.Prev = result;\n    outPt.Next = result;\n  }\n  else\n  {\n    result.Prev = outPt.Prev;\n    result.Next = outPt;\n    outPt.Prev.Next = result;\n    outPt.Prev = result;\n  }\n  return result;\n};\nClipperLib.Clipper.prototype.GetOverlap = function (a1, a2, b1, b2, $val)\n{\n  if (a1 < a2)\n  {\n    if (b1 < b2)\n    {\n      $val.Left = Math.max(a1, b1);\n      $val.Right = Math.min(a2, b2);\n    }\n    else\n    {\n      $val.Left = Math.max(a1, b2);\n      $val.Right = Math.min(a2, b1);\n    }\n  }\n  else\n  {\n    if (b1 < b2)\n    {\n      $val.Left = Math.max(a2, b1);\n      $val.Right = Math.min(a1, b2);\n    }\n    else\n    {\n      $val.Left = Math.max(a2, b2);\n      $val.Right = Math.min(a1, b1);\n    }\n  }\n  return $val.Left < $val.Right;\n};\nClipperLib.Clipper.prototype.JoinHorz = function (op1, op1b, op2, op2b, Pt, DiscardLeft)\n{\n  var Dir1 = (op1.Pt.X > op1b.Pt.X ? ClipperLib.Direction.dRightToLeft : ClipperLib.Direction.dLeftToRight);\n  var Dir2 = (op2.Pt.X > op2b.Pt.X ? ClipperLib.Direction.dRightToLeft : ClipperLib.Direction.dLeftToRight);\n  if (Dir1 == Dir2)\n    return false;\n  //When DiscardLeft, we want Op1b to be on the Left of Op1, otherwise we\n  //want Op1b to be on the Right. (And likewise with Op2 and Op2b.)\n  //So, to facilitate this while inserting Op1b and Op2b ...\n  //when DiscardLeft, make sure we're AT or RIGHT of Pt before adding Op1b,\n  //otherwise make sure we're AT or LEFT of Pt. (Likewise with Op2b.)\n  if (Dir1 == ClipperLib.Direction.dLeftToRight)\n  {\n    while (op1.Next.Pt.X <= Pt.X &&\n      op1.Next.Pt.X >= op1.Pt.X && op1.Next.Pt.Y == Pt.Y)\n      op1 = op1.Next;\n    if (DiscardLeft && (op1.Pt.X != Pt.X))\n      op1 = op1.Next;\n    op1b = this.DupOutPt(op1, !DiscardLeft);\n    if (ClipperLib.IntPoint.op_Inequality(op1b.Pt, Pt))\n    {\n      op1 = op1b;\n      //op1.Pt = Pt;\n      op1.Pt.X = Pt.X;\n      op1.Pt.Y = Pt.Y;\n      op1b = this.DupOutPt(op1, !DiscardLeft);\n    }\n  }\n  else\n  {\n    while (op1.Next.Pt.X >= Pt.X &&\n      op1.Next.Pt.X <= op1.Pt.X && op1.Next.Pt.Y == Pt.Y)\n      op1 = op1.Next;\n    if (!DiscardLeft && (op1.Pt.X != Pt.X))\n      op1 = op1.Next;\n    op1b = this.DupOutPt(op1, DiscardLeft);\n    if (ClipperLib.IntPoint.op_Inequality(op1b.Pt, Pt))\n    {\n      op1 = op1b;\n      //op1.Pt = Pt;\n      op1.Pt.X = Pt.X;\n      op1.Pt.Y = Pt.Y;\n      op1b = this.DupOutPt(op1, DiscardLeft);\n    }\n  }\n  if (Dir2 == ClipperLib.Direction.dLeftToRight)\n  {\n    while (op2.Next.Pt.X <= Pt.X &&\n      op2.Next.Pt.X >= op2.Pt.X && op2.Next.Pt.Y == Pt.Y)\n      op2 = op2.Next;\n    if (DiscardLeft && (op2.Pt.X != Pt.X))\n      op2 = op2.Next;\n    op2b = this.DupOutPt(op2, !DiscardLeft);\n    if (ClipperLib.IntPoint.op_Inequality(op2b.Pt, Pt))\n    {\n      op2 = op2b;\n      //op2.Pt = Pt;\n      op2.Pt.X = Pt.X;\n      op2.Pt.Y = Pt.Y;\n      op2b = this.DupOutPt(op2, !DiscardLeft);\n    }\n  }\n  else\n  {\n    while (op2.Next.Pt.X >= Pt.X &&\n      op2.Next.Pt.X <= op2.Pt.X && op2.Next.Pt.Y == Pt.Y)\n      op2 = op2.Next;\n    if (!DiscardLeft && (op2.Pt.X != Pt.X))\n      op2 = op2.Next;\n    op2b = this.DupOutPt(op2, DiscardLeft);\n    if (ClipperLib.IntPoint.op_Inequality(op2b.Pt, Pt))\n    {\n      op2 = op2b;\n      //op2.Pt = Pt;\n      op2.Pt.X = Pt.X;\n      op2.Pt.Y = Pt.Y;\n      op2b = this.DupOutPt(op2, DiscardLeft);\n    }\n  }\n  if ((Dir1 == ClipperLib.Direction.dLeftToRight) == DiscardLeft)\n  {\n    op1.Prev = op2;\n    op2.Next = op1;\n    op1b.Next = op2b;\n    op2b.Prev = op1b;\n  }\n  else\n  {\n    op1.Next = op2;\n    op2.Prev = op1;\n    op1b.Prev = op2b;\n    op2b.Next = op1b;\n  }\n  return true;\n};\nClipperLib.Clipper.prototype.JoinPoints = function (j, outRec1, outRec2)\n{\n  var op1 = j.OutPt1,\n    op1b = new ClipperLib.OutPt();\n  var op2 = j.OutPt2,\n    op2b = new ClipperLib.OutPt();\n  //There are 3 kinds of joins for output polygons ...\n  //1. Horizontal joins where Join.OutPt1 & Join.OutPt2 are a vertices anywhere\n  //along (horizontal) collinear edges (& Join.OffPt is on the same horizontal).\n  //2. Non-horizontal joins where Join.OutPt1 & Join.OutPt2 are at the same\n  //location at the Bottom of the overlapping segment (& Join.OffPt is above).\n  //3. StrictlySimple joins where edges touch but are not collinear and where\n  //Join.OutPt1, Join.OutPt2 & Join.OffPt all share the same point.\n  var isHorizontal = (j.OutPt1.Pt.Y == j.OffPt.Y);\n  if (isHorizontal && (ClipperLib.IntPoint.op_Equality(j.OffPt, j.OutPt1.Pt)) && (ClipperLib.IntPoint.op_Equality(j.OffPt, j.OutPt2.Pt)))\n  {\n    //Strictly Simple join ...\n    op1b = j.OutPt1.Next;\n    while (op1b != op1 && (ClipperLib.IntPoint.op_Equality(op1b.Pt, j.OffPt)))\n      op1b = op1b.Next;\n    var reverse1 = (op1b.Pt.Y > j.OffPt.Y);\n    op2b = j.OutPt2.Next;\n    while (op2b != op2 && (ClipperLib.IntPoint.op_Equality(op2b.Pt, j.OffPt)))\n      op2b = op2b.Next;\n    var reverse2 = (op2b.Pt.Y > j.OffPt.Y);\n    if (reverse1 == reverse2)\n      return false;\n    if (reverse1)\n    {\n      op1b = this.DupOutPt(op1, false);\n      op2b = this.DupOutPt(op2, true);\n      op1.Prev = op2;\n      op2.Next = op1;\n      op1b.Next = op2b;\n      op2b.Prev = op1b;\n      j.OutPt1 = op1;\n      j.OutPt2 = op1b;\n      return true;\n    }\n    else\n    {\n      op1b = this.DupOutPt(op1, true);\n      op2b = this.DupOutPt(op2, false);\n      op1.Next = op2;\n      op2.Prev = op1;\n      op1b.Prev = op2b;\n      op2b.Next = op1b;\n      j.OutPt1 = op1;\n      j.OutPt2 = op1b;\n      return true;\n    }\n  }\n  else if (isHorizontal)\n  {\n    //treat horizontal joins differently to non-horizontal joins since with\n    //them we're not yet sure where the overlapping is. OutPt1.Pt & OutPt2.Pt\n    //may be anywhere along the horizontal edge.\n    op1b = op1;\n    while (op1.Prev.Pt.Y == op1.Pt.Y && op1.Prev != op1b && op1.Prev != op2)\n      op1 = op1.Prev;\n    while (op1b.Next.Pt.Y == op1b.Pt.Y && op1b.Next != op1 && op1b.Next != op2)\n      op1b = op1b.Next;\n    if (op1b.Next == op1 || op1b.Next == op2)\n      return false;\n    //a flat 'polygon'\n    op2b = op2;\n    while (op2.Prev.Pt.Y == op2.Pt.Y && op2.Prev != op2b && op2.Prev != op1b)\n      op2 = op2.Prev;\n    while (op2b.Next.Pt.Y == op2b.Pt.Y && op2b.Next != op2 && op2b.Next != op1)\n      op2b = op2b.Next;\n    if (op2b.Next == op2 || op2b.Next == op1)\n      return false;\n    //a flat 'polygon'\n    //Op1 -. Op1b & Op2 -. Op2b are the extremites of the horizontal edges\n\n    var $val = {Left: null, Right: null};\n    if (!this.GetOverlap(op1.Pt.X, op1b.Pt.X, op2.Pt.X, op2b.Pt.X, $val))\n      return false;\n    var Left = $val.Left;\n    var Right = $val.Right;\n\n    //DiscardLeftSide: when overlapping edges are joined, a spike will created\n    //which needs to be cleaned up. However, we don't want Op1 or Op2 caught up\n    //on the discard Side as either may still be needed for other joins ...\n    var Pt = new ClipperLib.IntPoint();\n    var DiscardLeftSide;\n    if (op1.Pt.X >= Left && op1.Pt.X <= Right)\n    {\n      //Pt = op1.Pt;\n      Pt.X = op1.Pt.X;\n      Pt.Y = op1.Pt.Y;\n      DiscardLeftSide = (op1.Pt.X > op1b.Pt.X);\n    }\n    else if (op2.Pt.X >= Left && op2.Pt.X <= Right)\n    {\n      //Pt = op2.Pt;\n      Pt.X = op2.Pt.X;\n      Pt.Y = op2.Pt.Y;\n      DiscardLeftSide = (op2.Pt.X > op2b.Pt.X);\n    }\n    else if (op1b.Pt.X >= Left && op1b.Pt.X <= Right)\n    {\n      //Pt = op1b.Pt;\n      Pt.X = op1b.Pt.X;\n      Pt.Y = op1b.Pt.Y;\n      DiscardLeftSide = op1b.Pt.X > op1.Pt.X;\n    }\n    else\n    {\n      //Pt = op2b.Pt;\n      Pt.X = op2b.Pt.X;\n      Pt.Y = op2b.Pt.Y;\n      DiscardLeftSide = (op2b.Pt.X > op2.Pt.X);\n    }\n    j.OutPt1 = op1;\n    j.OutPt2 = op2;\n    return this.JoinHorz(op1, op1b, op2, op2b, Pt, DiscardLeftSide);\n  }\n  else\n  {\n    //nb: For non-horizontal joins ...\n    //    1. Jr.OutPt1.Pt.Y == Jr.OutPt2.Pt.Y\n    //    2. Jr.OutPt1.Pt > Jr.OffPt.Y\n    //make sure the polygons are correctly oriented ...\n    op1b = op1.Next;\n    while ((ClipperLib.IntPoint.op_Equality(op1b.Pt, op1.Pt)) && (op1b != op1))\n      op1b = op1b.Next;\n    var Reverse1 = ((op1b.Pt.Y > op1.Pt.Y) || !ClipperLib.ClipperBase.SlopesEqual(op1.Pt, op1b.Pt, j.OffPt, this.m_UseFullRange));\n    if (Reverse1)\n    {\n      op1b = op1.Prev;\n      while ((ClipperLib.IntPoint.op_Equality(op1b.Pt, op1.Pt)) && (op1b != op1))\n        op1b = op1b.Prev;\n      if ((op1b.Pt.Y > op1.Pt.Y) || !ClipperLib.ClipperBase.SlopesEqual(op1.Pt, op1b.Pt, j.OffPt, this.m_UseFullRange))\n        return false;\n    }\n    op2b = op2.Next;\n    while ((ClipperLib.IntPoint.op_Equality(op2b.Pt, op2.Pt)) && (op2b != op2))\n      op2b = op2b.Next;\n    var Reverse2 = ((op2b.Pt.Y > op2.Pt.Y) || !ClipperLib.ClipperBase.SlopesEqual(op2.Pt, op2b.Pt, j.OffPt, this.m_UseFullRange));\n    if (Reverse2)\n    {\n      op2b = op2.Prev;\n      while ((ClipperLib.IntPoint.op_Equality(op2b.Pt, op2.Pt)) && (op2b != op2))\n        op2b = op2b.Prev;\n      if ((op2b.Pt.Y > op2.Pt.Y) || !ClipperLib.ClipperBase.SlopesEqual(op2.Pt, op2b.Pt, j.OffPt, this.m_UseFullRange))\n        return false;\n    }\n    if ((op1b == op1) || (op2b == op2) || (op1b == op2b) ||\n      ((outRec1 == outRec2) && (Reverse1 == Reverse2)))\n      return false;\n    if (Reverse1)\n    {\n      op1b = this.DupOutPt(op1, false);\n      op2b = this.DupOutPt(op2, true);\n      op1.Prev = op2;\n      op2.Next = op1;\n      op1b.Next = op2b;\n      op2b.Prev = op1b;\n      j.OutPt1 = op1;\n      j.OutPt2 = op1b;\n      return true;\n    }\n    else\n    {\n      op1b = this.DupOutPt(op1, true);\n      op2b = this.DupOutPt(op2, false);\n      op1.Next = op2;\n      op2.Prev = op1;\n      op1b.Prev = op2b;\n      op2b.Next = op1b;\n      j.OutPt1 = op1;\n      j.OutPt2 = op1b;\n      return true;\n    }\n  }\n};\nClipperLib.Clipper.GetBounds = function (paths)\n{\n  var i = 0,\n    cnt = paths.length;\n  while (i < cnt && paths[i].length == 0) i++;\n  if (i == cnt) return new ClipperLib.IntRect(0, 0, 0, 0);\n  var result = new ClipperLib.IntRect();\n  result.left = paths[i][0].X;\n  result.right = result.left;\n  result.top = paths[i][0].Y;\n  result.bottom = result.top;\n  for (; i < cnt; i++)\n    for (var j = 0, jlen = paths[i].length; j < jlen; j++)\n    {\n      if (paths[i][j].X < result.left) result.left = paths[i][j].X;\n      else if (paths[i][j].X > result.right) result.right = paths[i][j].X;\n      if (paths[i][j].Y < result.top) result.top = paths[i][j].Y;\n      else if (paths[i][j].Y > result.bottom) result.bottom = paths[i][j].Y;\n    }\n  return result;\n}\nClipperLib.Clipper.prototype.GetBounds2 = function (ops)\n{\n  var opStart = ops;\n  var result = new ClipperLib.IntRect();\n  result.left = ops.Pt.X;\n  result.right = ops.Pt.X;\n  result.top = ops.Pt.Y;\n  result.bottom = ops.Pt.Y;\n  ops = ops.Next;\n  while (ops != opStart)\n  {\n    if (ops.Pt.X < result.left)\n      result.left = ops.Pt.X;\n    if (ops.Pt.X > result.right)\n      result.right = ops.Pt.X;\n    if (ops.Pt.Y < result.top)\n      result.top = ops.Pt.Y;\n    if (ops.Pt.Y > result.bottom)\n      result.bottom = ops.Pt.Y;\n    ops = ops.Next;\n  }\n  return result;\n};\n\nClipperLib.Clipper.PointInPolygon = function (pt, path)\n{\n  //returns 0 if false, +1 if true, -1 if pt ON polygon boundary\n  //http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.88.5498&rep=rep1&type=pdf\n  var result = 0,\n    cnt = path.length;\n  if (cnt < 3)\n    return 0;\n  var ip = path[0];\n  for (var i = 1; i <= cnt; ++i)\n  {\n    var ipNext = (i == cnt ? path[0] : path[i]);\n    if (ipNext.Y == pt.Y)\n    {\n      if ((ipNext.X == pt.X) || (ip.Y == pt.Y && ((ipNext.X > pt.X) == (ip.X < pt.X))))\n        return -1;\n    }\n    if ((ip.Y < pt.Y) != (ipNext.Y < pt.Y))\n    {\n      if (ip.X >= pt.X)\n      {\n        if (ipNext.X > pt.X)\n          result = 1 - result;\n        else\n        {\n          var d = (ip.X - pt.X) * (ipNext.Y - pt.Y) - (ipNext.X - pt.X) * (ip.Y - pt.Y);\n          if (d == 0)\n            return -1;\n          else if ((d > 0) == (ipNext.Y > ip.Y))\n            result = 1 - result;\n        }\n      }\n      else\n      {\n        if (ipNext.X > pt.X)\n        {\n          var d = (ip.X - pt.X) * (ipNext.Y - pt.Y) - (ipNext.X - pt.X) * (ip.Y - pt.Y);\n          if (d == 0)\n            return -1;\n          else if ((d > 0) == (ipNext.Y > ip.Y))\n            result = 1 - result;\n        }\n      }\n    }\n    ip = ipNext;\n  }\n  return result;\n};\n    \nClipperLib.Clipper.prototype.PointInPolygon = function (pt, op)\n{\n  //returns 0 if false, +1 if true, -1 if pt ON polygon boundary\n  //http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.88.5498&rep=rep1&type=pdf\n  var result = 0;\n  var startOp = op;\n  for (;;)\n  {\n    var poly0x = op.Pt.X,\n      poly0y = op.Pt.Y;\n    var poly1x = op.Next.Pt.X,\n      poly1y = op.Next.Pt.Y;\n    if (poly1y == pt.Y)\n    {\n      if ((poly1x == pt.X) || (poly0y == pt.Y && ((poly1x > pt.X) == (poly0x < pt.X))))\n        return -1;\n    }\n    if ((poly0y < pt.Y) != (poly1y < pt.Y))\n    {\n      if (poly0x >= pt.X)\n      {\n        if (poly1x > pt.X)\n          result = 1 - result;\n        else\n        {\n          var d = (poly0x - pt.X) * (poly1y - pt.Y) - (poly1x - pt.X) * (poly0y - pt.Y);\n          if (d == 0)\n            return -1;\n          if ((d > 0) == (poly1y > poly0y))\n            result = 1 - result;\n        }\n      }\n      else\n      {\n        if (poly1x > pt.X)\n        {\n          var d = (poly0x - pt.X) * (poly1y - pt.Y) - (poly1x - pt.X) * (poly0y - pt.Y);\n          if (d == 0)\n            return -1;\n          if ((d > 0) == (poly1y > poly0y))\n            result = 1 - result;\n        }\n      }\n    }\n    op = op.Next;\n    if (startOp == op)\n      break;\n  }\n  return result;\n};\n\nClipperLib.Clipper.prototype.Poly2ContainsPoly1 = function (outPt1, outPt2)\n{\n  var op = outPt1;\n  do {\n    var res = this.PointInPolygon(op.Pt, outPt2);\n    if (res >= 0)\n      return res != 0;\n    op = op.Next;\n  }\n  while (op != outPt1)\n  return true;\n};\nClipperLib.Clipper.prototype.FixupFirstLefts1 = function (OldOutRec, NewOutRec)\n{\n  for (var i = 0, ilen = this.m_PolyOuts.length; i < ilen; i++)\n  {\n    var outRec = this.m_PolyOuts[i];\n    if (outRec.Pts !== null && outRec.FirstLeft == OldOutRec)\n    {\n      if (this.Poly2ContainsPoly1(outRec.Pts, NewOutRec.Pts))\n        outRec.FirstLeft = NewOutRec;\n    }\n  }\n};\nClipperLib.Clipper.prototype.FixupFirstLefts2 = function (OldOutRec, NewOutRec)\n{\n  for (var $i2 = 0, $t2 = this.m_PolyOuts, $l2 = $t2.length, outRec = $t2[$i2]; $i2 < $l2; $i2++, outRec = $t2[$i2])\n    if (outRec.FirstLeft == OldOutRec)\n      outRec.FirstLeft = NewOutRec;\n};\nClipperLib.Clipper.ParseFirstLeft = function (FirstLeft)\n{\n  while (FirstLeft != null && FirstLeft.Pts == null)\n    FirstLeft = FirstLeft.FirstLeft;\n  return FirstLeft;\n};\nClipperLib.Clipper.prototype.JoinCommonEdges = function ()\n{\n  for (var i = 0, ilen = this.m_Joins.length; i < ilen; i++)\n  {\n    var join = this.m_Joins[i];\n    var outRec1 = this.GetOutRec(join.OutPt1.Idx);\n    var outRec2 = this.GetOutRec(join.OutPt2.Idx);\n    if (outRec1.Pts == null || outRec2.Pts == null)\n      continue;\n    //get the polygon fragment with the correct hole state (FirstLeft)\n    //before calling JoinPoints() ...\n    var holeStateRec;\n    if (outRec1 == outRec2)\n      holeStateRec = outRec1;\n    else if (this.Param1RightOfParam2(outRec1, outRec2))\n      holeStateRec = outRec2;\n    else if (this.Param1RightOfParam2(outRec2, outRec1))\n      holeStateRec = outRec1;\n    else\n      holeStateRec = this.GetLowermostRec(outRec1, outRec2);\n\n    if (!this.JoinPoints(join, outRec1, outRec2)) continue;\n\n    if (outRec1 == outRec2)\n    {\n      //instead of joining two polygons, we've just created a new one by\n      //splitting one polygon into two.\n      outRec1.Pts = join.OutPt1;\n      outRec1.BottomPt = null;\n      outRec2 = this.CreateOutRec();\n      outRec2.Pts = join.OutPt2;\n      //update all OutRec2.Pts Idx's ...\n      this.UpdateOutPtIdxs(outRec2);\n      //We now need to check every OutRec.FirstLeft pointer. If it points\n      //to OutRec1 it may need to point to OutRec2 instead ...\n      if (this.m_UsingPolyTree)\n        for (var j = 0, jlen = this.m_PolyOuts.length; j < jlen - 1; j++)\n        {\n          var oRec = this.m_PolyOuts[j];\n          if (oRec.Pts == null || ClipperLib.Clipper.ParseFirstLeft(oRec.FirstLeft) != outRec1 || oRec.IsHole == outRec1.IsHole)\n            continue;\n          if (this.Poly2ContainsPoly1(oRec.Pts, join.OutPt2))\n            oRec.FirstLeft = outRec2;\n        }\n      if (this.Poly2ContainsPoly1(outRec2.Pts, outRec1.Pts))\n      {\n        //outRec2 is contained by outRec1 ...\n        outRec2.IsHole = !outRec1.IsHole;\n        outRec2.FirstLeft = outRec1;\n        //fixup FirstLeft pointers that may need reassigning to OutRec1\n        if (this.m_UsingPolyTree)\n          this.FixupFirstLefts2(outRec2, outRec1);\n        if ((outRec2.IsHole ^ this.ReverseSolution) == (this.Area(outRec2) > 0))\n          this.ReversePolyPtLinks(outRec2.Pts);\n      }\n      else if (this.Poly2ContainsPoly1(outRec1.Pts, outRec2.Pts))\n      {\n        //outRec1 is contained by outRec2 ...\n        outRec2.IsHole = outRec1.IsHole;\n        outRec1.IsHole = !outRec2.IsHole;\n        outRec2.FirstLeft = outRec1.FirstLeft;\n        outRec1.FirstLeft = outRec2;\n        //fixup FirstLeft pointers that may need reassigning to OutRec1\n        if (this.m_UsingPolyTree)\n          this.FixupFirstLefts2(outRec1, outRec2);\n        if ((outRec1.IsHole ^ this.ReverseSolution) == (this.Area(outRec1) > 0))\n          this.ReversePolyPtLinks(outRec1.Pts);\n      }\n      else\n      {\n        //the 2 polygons are completely separate ...\n        outRec2.IsHole = outRec1.IsHole;\n        outRec2.FirstLeft = outRec1.FirstLeft;\n        //fixup FirstLeft pointers that may need reassigning to OutRec2\n        if (this.m_UsingPolyTree)\n          this.FixupFirstLefts1(outRec1, outRec2);\n      }\n    }\n    else\n    {\n      //joined 2 polygons together ...\n      outRec2.Pts = null;\n      outRec2.BottomPt = null;\n      outRec2.Idx = outRec1.Idx;\n      outRec1.IsHole = holeStateRec.IsHole;\n      if (holeStateRec == outRec2)\n        outRec1.FirstLeft = outRec2.FirstLeft;\n      outRec2.FirstLeft = outRec1;\n      //fixup FirstLeft pointers that may need reassigning to OutRec1\n      if (this.m_UsingPolyTree)\n        this.FixupFirstLefts2(outRec2, outRec1);\n    }\n  }\n};\nClipperLib.Clipper.prototype.UpdateOutPtIdxs = function (outrec)\n{\n  var op = outrec.Pts;\n  do {\n    op.Idx = outrec.Idx;\n    op = op.Prev;\n  }\n  while (op != outrec.Pts)\n};\nClipperLib.Clipper.prototype.DoSimplePolygons = function ()\n{\n  var i = 0;\n  while (i < this.m_PolyOuts.length)\n  {\n    var outrec = this.m_PolyOuts[i++];\n    var op = outrec.Pts;\n    if (op === null)\n      continue;\n    do //for each Pt in Polygon until duplicate found do ...\n    {\n      var op2 = op.Next;\n      while (op2 != outrec.Pts)\n      {\n        if ((ClipperLib.IntPoint.op_Equality(op.Pt, op2.Pt)) && op2.Next != op && op2.Prev != op)\n        {\n          //split the polygon into two ...\n          var op3 = op.Prev;\n          var op4 = op2.Prev;\n          op.Prev = op4;\n          op4.Next = op;\n          op2.Prev = op3;\n          op3.Next = op2;\n          outrec.Pts = op;\n          var outrec2 = this.CreateOutRec();\n          outrec2.Pts = op2;\n          this.UpdateOutPtIdxs(outrec2);\n          if (this.Poly2ContainsPoly1(outrec2.Pts, outrec.Pts))\n          {\n            //OutRec2 is contained by OutRec1 ...\n            outrec2.IsHole = !outrec.IsHole;\n            outrec2.FirstLeft = outrec;\n          }\n          else if (this.Poly2ContainsPoly1(outrec.Pts, outrec2.Pts))\n          {\n            //OutRec1 is contained by OutRec2 ...\n            outrec2.IsHole = outrec.IsHole;\n            outrec.IsHole = !outrec2.IsHole;\n            outrec2.FirstLeft = outrec.FirstLeft;\n            outrec.FirstLeft = outrec2;\n          }\n          else\n          {\n            //the 2 polygons are separate ...\n            outrec2.IsHole = outrec.IsHole;\n            outrec2.FirstLeft = outrec.FirstLeft;\n          }\n          op2 = op;\n          //ie get ready for the next iteration\n        }\n        op2 = op2.Next;\n      }\n      op = op.Next;\n    }\n    while (op != outrec.Pts)\n  }\n};\nClipperLib.Clipper.Area = function (poly)\n{\n  var cnt = poly.length;\n  if (cnt < 3)\n    return 0;\n  var a = 0;\n  for (var i = 0, j = cnt - 1; i < cnt; ++i)\n  {\n    a += (poly[j].X + poly[i].X) * (poly[j].Y - poly[i].Y);\n    j = i;\n  }\n  return -a * 0.5;\n};\nClipperLib.Clipper.prototype.Area = function (outRec)\n{\n  var op = outRec.Pts;\n  if (op == null)\n    return 0;\n  var a = 0;\n  do {\n    a = a + (op.Prev.Pt.X + op.Pt.X) * (op.Prev.Pt.Y - op.Pt.Y);\n    op = op.Next;\n  }\n  while (op != outRec.Pts)\n  return a * 0.5;\n};\nif (use_deprecated)\n{\n  ClipperLib.Clipper.OffsetPaths = function (polys, delta, jointype, endtype, MiterLimit)\n  {\n    var result = new ClipperLib.Paths();\n    var co = new ClipperLib.ClipperOffset(MiterLimit, MiterLimit);\n    co.AddPaths(polys, jointype, endtype);\n    co.Execute(result, delta);\n    return result;\n  };\n}\nClipperLib.Clipper.SimplifyPolygon = function (poly, fillType)\n{\n  var result = new Array();\n  var c = new ClipperLib.Clipper(0);\n  c.StrictlySimple = true;\n  c.AddPath(poly, ClipperLib.PolyType.ptSubject, true);\n  c.Execute(ClipperLib.ClipType.ctUnion, result, fillType, fillType);\n  return result;\n};\nClipperLib.Clipper.SimplifyPolygons = function (polys, fillType)\n{\n  if (typeof (fillType) == \"undefined\") fillType = ClipperLib.PolyFillType.pftEvenOdd;\n  var result = new Array();\n  var c = new ClipperLib.Clipper(0);\n  c.StrictlySimple = true;\n  c.AddPaths(polys, ClipperLib.PolyType.ptSubject, true);\n  c.Execute(ClipperLib.ClipType.ctUnion, result, fillType, fillType);\n  return result;\n};\nClipperLib.Clipper.DistanceSqrd = function (pt1, pt2)\n{\n  var dx = (pt1.X - pt2.X);\n  var dy = (pt1.Y - pt2.Y);\n  return (dx * dx + dy * dy);\n};\nClipperLib.Clipper.DistanceFromLineSqrd = function (pt, ln1, ln2)\n{\n  //The equation of a line in general form (Ax + By + C = 0)\n  //given 2 points (x\uFFFD,y\uFFFD) & (x\uFFFD,y\uFFFD) is ...\n  //(y\uFFFD - y\uFFFD)x + (x\uFFFD - x\uFFFD)y + (y\uFFFD - y\uFFFD)x\uFFFD - (x\uFFFD - x\uFFFD)y\uFFFD = 0\n  //A = (y\uFFFD - y\uFFFD); B = (x\uFFFD - x\uFFFD); C = (y\uFFFD - y\uFFFD)x\uFFFD - (x\uFFFD - x\uFFFD)y\uFFFD\n  //perpendicular distance of point (x\uFFFD,y\uFFFD) = (Ax\uFFFD + By\uFFFD + C)/Sqrt(A\uFFFD + B\uFFFD)\n  //see http://en.wikipedia.org/wiki/Perpendicular_distance\n  var A = ln1.Y - ln2.Y;\n  var B = ln2.X - ln1.X;\n  var C = A * ln1.X + B * ln1.Y;\n  C = A * pt.X + B * pt.Y - C;\n  return (C * C) / (A * A + B * B);\n};\nClipperLib.Clipper.SlopesNearCollinear = function (pt1, pt2, pt3, distSqrd)\n{\n  return ClipperLib.Clipper.DistanceFromLineSqrd(pt2, pt1, pt3) < distSqrd;\n};\nClipperLib.Clipper.PointsAreClose = function (pt1, pt2, distSqrd)\n{\n  var dx = pt1.X - pt2.X;\n  var dy = pt1.Y - pt2.Y;\n  return ((dx * dx) + (dy * dy) <= distSqrd);\n};\n//------------------------------------------------------------------------------\nClipperLib.Clipper.ExcludeOp = function (op)\n{\n  var result = op.Prev;\n  result.Next = op.Next;\n  op.Next.Prev = result;\n  result.Idx = 0;\n  return result;\n};\nClipperLib.Clipper.CleanPolygon = function (path, distance)\n{\n  if (typeof (distance) == \"undefined\") distance = 1.415;\n  //distance = proximity in units/pixels below which vertices will be stripped. \n  //Default ~= sqrt(2) so when adjacent vertices or semi-adjacent vertices have \n  //both x & y coords within 1 unit, then the second vertex will be stripped.\n  var cnt = path.length;\n  if (cnt == 0)\n    return new Array();\n  var outPts = new Array(cnt);\n  for (var i = 0; i < cnt; ++i)\n    outPts[i] = new ClipperLib.OutPt();\n  for (var i = 0; i < cnt; ++i)\n  {\n    outPts[i].Pt = path[i];\n    outPts[i].Next = outPts[(i + 1) % cnt];\n    outPts[i].Next.Prev = outPts[i];\n    outPts[i].Idx = 0;\n  }\n  var distSqrd = distance * distance;\n  var op = outPts[0];\n  while (op.Idx == 0 && op.Next != op.Prev)\n  {\n    if (ClipperLib.Clipper.PointsAreClose(op.Pt, op.Prev.Pt, distSqrd))\n    {\n      op = ClipperLib.Clipper.ExcludeOp(op);\n      cnt--;\n    }\n    else if (ClipperLib.Clipper.PointsAreClose(op.Prev.Pt, op.Next.Pt, distSqrd))\n    {\n      ClipperLib.Clipper.ExcludeOp(op.Next);\n      op = ClipperLib.Clipper.ExcludeOp(op);\n      cnt -= 2;\n    }\n    else if (ClipperLib.Clipper.SlopesNearCollinear(op.Prev.Pt, op.Pt, op.Next.Pt, distSqrd))\n    {\n      op = ClipperLib.Clipper.ExcludeOp(op);\n      cnt--;\n    }\n    else\n    {\n      op.Idx = 1;\n      op = op.Next;\n    }\n  }\n  if (cnt < 3)\n    cnt = 0;\n  var result = new Array(cnt);\n  for (var i = 0; i < cnt; ++i)\n  {\n    result[i] = new ClipperLib.IntPoint(op.Pt);\n    op = op.Next;\n  }\n  outPts = null;\n  return result;\n};\nClipperLib.Clipper.CleanPolygons = function (polys, distance)\n{\n  var result = new Array(polys.length);\n  for (var i = 0, ilen = polys.length; i < ilen; i++)\n    result[i] = ClipperLib.Clipper.CleanPolygon(polys[i], distance);\n  return result;\n};\nClipperLib.Clipper.Minkowski = function (pattern, path, IsSum, IsClosed)\n{\n  var delta = (IsClosed ? 1 : 0);\n  var polyCnt = pattern.length;\n  var pathCnt = path.length;\n  var result = new Array();\n  if (IsSum)\n    for (var i = 0; i < pathCnt; i++)\n    {\n      var p = new Array(polyCnt);\n      for (var j = 0, jlen = pattern.length, ip = pattern[j]; j < jlen; j++, ip = pattern[j])\n        p[j] = new ClipperLib.IntPoint(path[i].X + ip.X, path[i].Y + ip.Y);\n      result.push(p);\n    }\n  else\n    for (var i = 0; i < pathCnt; i++)\n    {\n      var p = new Array(polyCnt);\n      for (var j = 0, jlen = pattern.length, ip = pattern[j]; j < jlen; j++, ip = pattern[j])\n        p[j] = new ClipperLib.IntPoint(path[i].X - ip.X, path[i].Y - ip.Y);\n      result.push(p);\n    }\n  var quads = new Array();\n  for (var i = 0; i < pathCnt - 1 + delta; i++)\n    for (var j = 0; j < polyCnt; j++)\n    {\n      var quad = new Array();\n      quad.push(result[i % pathCnt][j % polyCnt]);\n      quad.push(result[(i + 1) % pathCnt][j % polyCnt]);\n      quad.push(result[(i + 1) % pathCnt][(j + 1) % polyCnt]);\n      quad.push(result[i % pathCnt][(j + 1) % polyCnt]);\n      if (!ClipperLib.Clipper.Orientation(quad))\n        quad.reverse();\n      quads.push(quad);\n    }\n  var c = new ClipperLib.Clipper(0);\n  c.AddPaths(quads, ClipperLib.PolyType.ptSubject, true);\n  c.Execute(ClipperLib.ClipType.ctUnion, result, ClipperLib.PolyFillType.pftNonZero, ClipperLib.PolyFillType.pftNonZero);\n  return result;\n};\n\nClipperLib.Clipper.MinkowskiSum = function ()\n{\n  var a = arguments,\n    alen = a.length;\n  if (alen == 3) // MinkowskiSum(Path pattern, path, pathIsClosed)\n  {\n    var pattern = a[0],\n      path = a[1],\n      pathIsClosed = a[2];\n    return ClipperLib.Clipper.Minkowski(pattern, path, true, pathIsClosed);\n  }\n  else if (alen == 4) // MinkowskiSum(pattern, paths, pathFillType, pathIsClosed)\n  {\n    var pattern = a[0],\n      paths = a[1],\n      pathFillType = a[2],\n      pathIsClosed = a[3];\n    var c = new ClipperLib.Clipper(),\n      tmp;\n    for (var i = 0, ilen = paths.length; i < ilen; ++i)\n    {\n      var tmp = ClipperLib.Clipper.Minkowski(pattern, paths[i], true, pathIsClosed);\n      c.AddPaths(tmp, ClipperLib.PolyType.ptSubject, true);\n    }\n    if (pathIsClosed) c.AddPaths(paths, ClipperLib.PolyType.ptClip, true);\n    var solution = new ClipperLib.Paths();\n    c.Execute(ClipperLib.ClipType.ctUnion, solution, pathFillType, pathFillType);\n    return solution;\n  }\n};\n\nClipperLib.Clipper.MinkowskiDiff = function (pattern, path, pathIsClosed)\n{\n  return ClipperLib.Clipper.Minkowski(pattern, path, false, pathIsClosed);\n};\n\nClipperLib.Clipper.PolyTreeToPaths = function (polytree)\n{\n  var result = new Array();\n  //result.set_Capacity(polytree.get_Total());\n  ClipperLib.Clipper.AddPolyNodeToPaths(polytree, ClipperLib.Clipper.NodeType.ntAny, result);\n  return result;\n};\nClipperLib.Clipper.AddPolyNodeToPaths = function (polynode, nt, paths)\n{\n  var match = true;\n  switch (nt)\n  {\n  case ClipperLib.Clipper.NodeType.ntOpen:\n    return;\n  case ClipperLib.Clipper.NodeType.ntClosed:\n    match = !polynode.IsOpen;\n    break;\n  default:\n    break;\n  }\n  if (polynode.m_polygon.length > 0 && match)\n    paths.push(polynode.m_polygon);\n  for (var $i3 = 0, $t3 = polynode.Childs(), $l3 = $t3.length, pn = $t3[$i3]; $i3 < $l3; $i3++, pn = $t3[$i3])\n    ClipperLib.Clipper.AddPolyNodeToPaths(pn, nt, paths);\n};\nClipperLib.Clipper.OpenPathsFromPolyTree = function (polytree)\n{\n  var result = new ClipperLib.Paths();\n  //result.set_Capacity(polytree.ChildCount());\n  for (var i = 0, ilen = polytree.ChildCount(); i < ilen; i++)\n    if (polytree.Childs()[i].IsOpen)\n      result.push(polytree.Childs()[i].m_polygon);\n  return result;\n};\nClipperLib.Clipper.ClosedPathsFromPolyTree = function (polytree)\n{\n  var result = new ClipperLib.Paths();\n  //result.set_Capacity(polytree.Total());\n  ClipperLib.Clipper.AddPolyNodeToPaths(polytree, ClipperLib.Clipper.NodeType.ntClosed, result);\n  return result;\n};\nInherit(ClipperLib.Clipper, ClipperLib.ClipperBase);\nClipperLib.Clipper.NodeType = {\n  ntAny: 0,\n  ntOpen: 1,\n  ntClosed: 2\n};\nClipperLib.ClipperOffset = function (miterLimit, arcTolerance)\n{\n  if (typeof (miterLimit) == \"undefined\") miterLimit = 2;\n  if (typeof (arcTolerance) == \"undefined\") arcTolerance = ClipperLib.ClipperOffset.def_arc_tolerance;\n  this.m_destPolys = new ClipperLib.Paths();\n  this.m_srcPoly = new ClipperLib.Path();\n  this.m_destPoly = new ClipperLib.Path();\n  this.m_normals = new Array();\n  this.m_delta = 0;\n  this.m_sinA = 0;\n  this.m_sin = 0;\n  this.m_cos = 0;\n  this.m_miterLim = 0;\n  this.m_StepsPerRad = 0;\n  this.m_lowest = new ClipperLib.IntPoint();\n  this.m_polyNodes = new ClipperLib.PolyNode();\n  this.MiterLimit = miterLimit;\n  this.ArcTolerance = arcTolerance;\n  this.m_lowest.X = -1;\n};\nClipperLib.ClipperOffset.two_pi = 6.28318530717959;\nClipperLib.ClipperOffset.def_arc_tolerance = 0.25;\nClipperLib.ClipperOffset.prototype.Clear = function ()\n{\n  ClipperLib.Clear(this.m_polyNodes.Childs());\n  this.m_lowest.X = -1;\n};\nClipperLib.ClipperOffset.Round = ClipperLib.Clipper.Round;\nClipperLib.ClipperOffset.prototype.AddPath = function (path, joinType, endType)\n{\n  var highI = path.length - 1;\n  if (highI < 0)\n    return;\n  var newNode = new ClipperLib.PolyNode();\n  newNode.m_jointype = joinType;\n  newNode.m_endtype = endType;\n  //strip duplicate points from path and also get index to the lowest point ...\n  if (endType == ClipperLib.EndType.etClosedLine || endType == ClipperLib.EndType.etClosedPolygon)\n    while (highI > 0 && ClipperLib.IntPoint.op_Equality(path[0], path[highI]))\n      highI--;\n  //newNode.m_polygon.set_Capacity(highI + 1);\n  newNode.m_polygon.push(path[0]);\n  var j = 0,\n    k = 0;\n  for (var i = 1; i <= highI; i++)\n    if (ClipperLib.IntPoint.op_Inequality(newNode.m_polygon[j], path[i]))\n    {\n      j++;\n      newNode.m_polygon.push(path[i]);\n      if (path[i].Y > newNode.m_polygon[k].Y || (path[i].Y == newNode.m_polygon[k].Y && path[i].X < newNode.m_polygon[k].X))\n        k = j;\n    }\n  if ((endType == ClipperLib.EndType.etClosedPolygon && j < 2) || (endType != ClipperLib.EndType.etClosedPolygon && j < 0))\n    return;\n  this.m_polyNodes.AddChild(newNode);\n  //if this path's lowest pt is lower than all the others then update m_lowest\n  if (endType != ClipperLib.EndType.etClosedPolygon)\n    return;\n  if (this.m_lowest.X < 0)\n    this.m_lowest = new ClipperLib.IntPoint(0, k);\n  else\n  {\n    var ip = this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];\n    if (newNode.m_polygon[k].Y > ip.Y || (newNode.m_polygon[k].Y == ip.Y && newNode.m_polygon[k].X < ip.X))\n      this.m_lowest = new ClipperLib.IntPoint(this.m_polyNodes.ChildCount() - 1, k);\n  }\n};\nClipperLib.ClipperOffset.prototype.AddPaths = function (paths, joinType, endType)\n{\n  for (var i = 0, ilen = paths.length; i < ilen; i++)\n    this.AddPath(paths[i], joinType, endType);\n};\nClipperLib.ClipperOffset.prototype.FixOrientations = function ()\n{\n  //fixup orientations of all closed paths if the orientation of the\n  //closed path with the lowermost vertex is wrong ...\n  if (this.m_lowest.X >= 0 && !ClipperLib.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))\n  {\n    for (var i = 0; i < this.m_polyNodes.ChildCount(); i++)\n    {\n      var node = this.m_polyNodes.Childs()[i];\n      if (node.m_endtype == ClipperLib.EndType.etClosedPolygon || (node.m_endtype == ClipperLib.EndType.etClosedLine && ClipperLib.Clipper.Orientation(node.m_polygon)))\n        node.m_polygon.reverse();\n    }\n  }\n  else\n  {\n    for (var i = 0; i < this.m_polyNodes.ChildCount(); i++)\n    {\n      var node = this.m_polyNodes.Childs()[i];\n      if (node.m_endtype == ClipperLib.EndType.etClosedLine && !ClipperLib.Clipper.Orientation(node.m_polygon))\n        node.m_polygon.reverse();\n    }\n  }\n};\nClipperLib.ClipperOffset.GetUnitNormal = function (pt1, pt2)\n{\n  var dx = (pt2.X - pt1.X);\n  var dy = (pt2.Y - pt1.Y);\n  if ((dx == 0) && (dy == 0))\n    return new ClipperLib.DoublePoint(0, 0);\n  var f = 1 / Math.sqrt(dx * dx + dy * dy);\n  dx *= f;\n  dy *= f;\n  return new ClipperLib.DoublePoint(dy, -dx);\n};\nClipperLib.ClipperOffset.prototype.DoOffset = function (delta)\n{\n  this.m_destPolys = new Array();\n  this.m_delta = delta;\n  //if Zero offset, just copy any CLOSED polygons to m_p and return ...\n  if (ClipperLib.ClipperBase.near_zero(delta))\n  {\n    //this.m_destPolys.set_Capacity(this.m_polyNodes.ChildCount);\n    for (var i = 0; i < this.m_polyNodes.ChildCount(); i++)\n    {\n      var node = this.m_polyNodes.Childs()[i];\n      if (node.m_endtype == ClipperLib.EndType.etClosedPolygon)\n        this.m_destPolys.push(node.m_polygon);\n    }\n    return;\n  }\n  //see offset_triginometry3.svg in the documentation folder ...\n  if (this.MiterLimit > 2)\n    this.m_miterLim = 2 / (this.MiterLimit * this.MiterLimit);\n  else\n    this.m_miterLim = 0.5;\n  var y;\n  if (this.ArcTolerance <= 0)\n    y = ClipperLib.ClipperOffset.def_arc_tolerance;\n  else if (this.ArcTolerance > Math.abs(delta) * ClipperLib.ClipperOffset.def_arc_tolerance)\n    y = Math.abs(delta) * ClipperLib.ClipperOffset.def_arc_tolerance;\n  else\n    y = this.ArcTolerance;\n  //see offset_triginometry2.svg in the documentation folder ...\n  var steps = 3.14159265358979 / Math.acos(1 - y / Math.abs(delta));\n  this.m_sin = Math.sin(ClipperLib.ClipperOffset.two_pi / steps);\n  this.m_cos = Math.cos(ClipperLib.ClipperOffset.two_pi / steps);\n  this.m_StepsPerRad = steps / ClipperLib.ClipperOffset.two_pi;\n  if (delta < 0)\n    this.m_sin = -this.m_sin;\n  //this.m_destPolys.set_Capacity(this.m_polyNodes.ChildCount * 2);\n  for (var i = 0; i < this.m_polyNodes.ChildCount(); i++)\n  {\n    var node = this.m_polyNodes.Childs()[i];\n    this.m_srcPoly = node.m_polygon;\n    var len = this.m_srcPoly.length;\n    if (len == 0 || (delta <= 0 && (len < 3 || node.m_endtype != ClipperLib.EndType.etClosedPolygon)))\n      continue;\n    this.m_destPoly = new Array();\n    if (len == 1)\n    {\n      if (node.m_jointype == ClipperLib.JoinType.jtRound)\n      {\n        var X = 1,\n          Y = 0;\n        for (var j = 1; j <= steps; j++)\n        {\n          this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X + X * delta), ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y + Y * delta)));\n          var X2 = X;\n          X = X * this.m_cos - this.m_sin * Y;\n          Y = X2 * this.m_sin + Y * this.m_cos;\n        }\n      }\n      else\n      {\n        var X = -1,\n          Y = -1;\n        for (var j = 0; j < 4; ++j)\n        {\n          this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X + X * delta), ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y + Y * delta)));\n          if (X < 0)\n            X = 1;\n          else if (Y < 0)\n            Y = 1;\n          else\n            X = -1;\n        }\n      }\n      this.m_destPolys.push(this.m_destPoly);\n      continue;\n    }\n    //build m_normals ...\n    this.m_normals.length = 0;\n    //this.m_normals.set_Capacity(len);\n    for (var j = 0; j < len - 1; j++)\n      this.m_normals.push(ClipperLib.ClipperOffset.GetUnitNormal(this.m_srcPoly[j], this.m_srcPoly[j + 1]));\n    if (node.m_endtype == ClipperLib.EndType.etClosedLine || node.m_endtype == ClipperLib.EndType.etClosedPolygon)\n      this.m_normals.push(ClipperLib.ClipperOffset.GetUnitNormal(this.m_srcPoly[len - 1], this.m_srcPoly[0]));\n    else\n      this.m_normals.push(new ClipperLib.DoublePoint(this.m_normals[len - 2]));\n    if (node.m_endtype == ClipperLib.EndType.etClosedPolygon)\n    {\n      var k = len - 1;\n      for (var j = 0; j < len; j++)\n        k = this.OffsetPoint(j, k, node.m_jointype);\n      this.m_destPolys.push(this.m_destPoly);\n    }\n    else if (node.m_endtype == ClipperLib.EndType.etClosedLine)\n    {\n      var k = len - 1;\n      for (var j = 0; j < len; j++)\n        k = this.OffsetPoint(j, k, node.m_jointype);\n      this.m_destPolys.push(this.m_destPoly);\n      this.m_destPoly = new Array();\n      //re-build m_normals ...\n      var n = this.m_normals[len - 1];\n      for (var j = len - 1; j > 0; j--)\n        this.m_normals[j] = new ClipperLib.DoublePoint(-this.m_normals[j - 1].X, -this.m_normals[j - 1].Y);\n      this.m_normals[0] = new ClipperLib.DoublePoint(-n.X, -n.Y);\n      k = 0;\n      for (var j = len - 1; j >= 0; j--)\n        k = this.OffsetPoint(j, k, node.m_jointype);\n      this.m_destPolys.push(this.m_destPoly);\n    }\n    else\n    {\n      var k = 0;\n      for (var j = 1; j < len - 1; ++j)\n        k = this.OffsetPoint(j, k, node.m_jointype);\n      var pt1;\n      if (node.m_endtype == ClipperLib.EndType.etOpenButt)\n      {\n        var j = len - 1;\n        pt1 = new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X + this.m_normals[j].X * delta), ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y + this.m_normals[j].Y * delta));\n        this.m_destPoly.push(pt1);\n        pt1 = new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X - this.m_normals[j].X * delta), ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y - this.m_normals[j].Y * delta));\n        this.m_destPoly.push(pt1);\n      }\n      else\n      {\n        var j = len - 1;\n        k = len - 2;\n        this.m_sinA = 0;\n        this.m_normals[j] = new ClipperLib.DoublePoint(-this.m_normals[j].X, -this.m_normals[j].Y);\n        if (node.m_endtype == ClipperLib.EndType.etOpenSquare)\n          this.DoSquare(j, k);\n        else\n          this.DoRound(j, k);\n      }\n      //re-build m_normals ...\n      for (var j = len - 1; j > 0; j--)\n        this.m_normals[j] = new ClipperLib.DoublePoint(-this.m_normals[j - 1].X, -this.m_normals[j - 1].Y);\n      this.m_normals[0] = new ClipperLib.DoublePoint(-this.m_normals[1].X, -this.m_normals[1].Y);\n      k = len - 1;\n      for (var j = k - 1; j > 0; --j)\n        k = this.OffsetPoint(j, k, node.m_jointype);\n      if (node.m_endtype == ClipperLib.EndType.etOpenButt)\n      {\n        pt1 = new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X - this.m_normals[0].X * delta), ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y - this.m_normals[0].Y * delta));\n        this.m_destPoly.push(pt1);\n        pt1 = new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X + this.m_normals[0].X * delta), ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y + this.m_normals[0].Y * delta));\n        this.m_destPoly.push(pt1);\n      }\n      else\n      {\n        k = 1;\n        this.m_sinA = 0;\n        if (node.m_endtype == ClipperLib.EndType.etOpenSquare)\n          this.DoSquare(0, 1);\n        else\n          this.DoRound(0, 1);\n      }\n      this.m_destPolys.push(this.m_destPoly);\n    }\n  }\n};\nClipperLib.ClipperOffset.prototype.Execute = function ()\n{\n  var a = arguments,\n    ispolytree = a[0] instanceof ClipperLib.PolyTree;\n  if (!ispolytree) // function (solution, delta)\n  {\n    var solution = a[0],\n      delta = a[1];\n    ClipperLib.Clear(solution);\n    this.FixOrientations();\n    this.DoOffset(delta);\n    //now clean up 'corners' ...\n    var clpr = new ClipperLib.Clipper(0);\n    clpr.AddPaths(this.m_destPolys, ClipperLib.PolyType.ptSubject, true);\n    if (delta > 0)\n    {\n      clpr.Execute(ClipperLib.ClipType.ctUnion, solution, ClipperLib.PolyFillType.pftPositive, ClipperLib.PolyFillType.pftPositive);\n    }\n    else\n    {\n      var r = ClipperLib.Clipper.GetBounds(this.m_destPolys);\n      var outer = new ClipperLib.Path();\n      outer.push(new ClipperLib.IntPoint(r.left - 10, r.bottom + 10));\n      outer.push(new ClipperLib.IntPoint(r.right + 10, r.bottom + 10));\n      outer.push(new ClipperLib.IntPoint(r.right + 10, r.top - 10));\n      outer.push(new ClipperLib.IntPoint(r.left - 10, r.top - 10));\n      clpr.AddPath(outer, ClipperLib.PolyType.ptSubject, true);\n      clpr.ReverseSolution = true;\n      clpr.Execute(ClipperLib.ClipType.ctUnion, solution, ClipperLib.PolyFillType.pftNegative, ClipperLib.PolyFillType.pftNegative);\n      if (solution.length > 0)\n        solution.splice(0, 1);\n    }\n    //console.log(JSON.stringify(solution));\n  }\n  else // function (polytree, delta)\n  {\n    var solution = a[0],\n      delta = a[1];\n    solution.Clear();\n    this.FixOrientations();\n    this.DoOffset(delta);\n    //now clean up 'corners' ...\n    var clpr = new ClipperLib.Clipper(0);\n    clpr.AddPaths(this.m_destPolys, ClipperLib.PolyType.ptSubject, true);\n    if (delta > 0)\n    {\n      clpr.Execute(ClipperLib.ClipType.ctUnion, solution, ClipperLib.PolyFillType.pftPositive, ClipperLib.PolyFillType.pftPositive);\n    }\n    else\n    {\n      var r = ClipperLib.Clipper.GetBounds(this.m_destPolys);\n      var outer = new ClipperLib.Path();\n      outer.push(new ClipperLib.IntPoint(r.left - 10, r.bottom + 10));\n      outer.push(new ClipperLib.IntPoint(r.right + 10, r.bottom + 10));\n      outer.push(new ClipperLib.IntPoint(r.right + 10, r.top - 10));\n      outer.push(new ClipperLib.IntPoint(r.left - 10, r.top - 10));\n      clpr.AddPath(outer, ClipperLib.PolyType.ptSubject, true);\n      clpr.ReverseSolution = true;\n      clpr.Execute(ClipperLib.ClipType.ctUnion, solution, ClipperLib.PolyFillType.pftNegative, ClipperLib.PolyFillType.pftNegative);\n      //remove the outer PolyNode rectangle ...\n      if (solution.ChildCount() == 1 && solution.Childs()[0].ChildCount() > 0)\n      {\n        var outerNode = solution.Childs()[0];\n        //solution.Childs.set_Capacity(outerNode.ChildCount);\n        solution.Childs()[0] = outerNode.Childs()[0];\n        for (var i = 1; i < outerNode.ChildCount(); i++)\n          solution.AddChild(outerNode.Childs()[i]);\n      }\n      else\n        solution.Clear();\n    }\n  }\n};\nClipperLib.ClipperOffset.prototype.OffsetPoint = function (j, k, jointype)\n{\n  this.m_sinA = (this.m_normals[k].X * this.m_normals[j].Y - this.m_normals[j].X * this.m_normals[k].Y);\n  if (this.m_sinA < 0.00005 && this.m_sinA > -0.00005)\n    return k;\n  else if (this.m_sinA > 1)\n    this.m_sinA = 1.0;\n  else if (this.m_sinA < -1)\n    this.m_sinA = -1.0;\n  if (this.m_sinA * this.m_delta < 0)\n  {\n    this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X + this.m_normals[k].X * this.m_delta),\n      ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y + this.m_normals[k].Y * this.m_delta)));\n    this.m_destPoly.push(new ClipperLib.IntPoint(this.m_srcPoly[j]));\n    this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X + this.m_normals[j].X * this.m_delta),\n      ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y + this.m_normals[j].Y * this.m_delta)));\n  }\n  else\n    switch (jointype)\n    {\n    case ClipperLib.JoinType.jtMiter:\n      {\n        var r = 1 + (this.m_normals[j].X * this.m_normals[k].X + this.m_normals[j].Y * this.m_normals[k].Y);\n        if (r >= this.m_miterLim)\n          this.DoMiter(j, k, r);\n        else\n          this.DoSquare(j, k);\n        break;\n      }\n    case ClipperLib.JoinType.jtSquare:\n      this.DoSquare(j, k);\n      break;\n    case ClipperLib.JoinType.jtRound:\n      this.DoRound(j, k);\n      break;\n    }\n  k = j;\n  return k;\n};\nClipperLib.ClipperOffset.prototype.DoSquare = function (j, k)\n{\n  var dx = Math.tan(Math.atan2(this.m_sinA,\n    this.m_normals[k].X * this.m_normals[j].X + this.m_normals[k].Y * this.m_normals[j].Y) / 4);\n  this.m_destPoly.push(new ClipperLib.IntPoint(\n    ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X + this.m_delta * (this.m_normals[k].X - this.m_normals[k].Y * dx)),\n    ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y + this.m_delta * (this.m_normals[k].Y + this.m_normals[k].X * dx))));\n  this.m_destPoly.push(new ClipperLib.IntPoint(\n    ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X + this.m_delta * (this.m_normals[j].X + this.m_normals[j].Y * dx)),\n    ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y + this.m_delta * (this.m_normals[j].Y - this.m_normals[j].X * dx))));\n};\nClipperLib.ClipperOffset.prototype.DoMiter = function (j, k, r)\n{\n  var q = this.m_delta / r;\n  this.m_destPoly.push(new ClipperLib.IntPoint(\n    ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X + (this.m_normals[k].X + this.m_normals[j].X) * q),\n    ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y + (this.m_normals[k].Y + this.m_normals[j].Y) * q)));\n};\nClipperLib.ClipperOffset.prototype.DoRound = function (j, k)\n{\n  var a = Math.atan2(this.m_sinA,\n    this.m_normals[k].X * this.m_normals[j].X + this.m_normals[k].Y * this.m_normals[j].Y);\n  var steps = ClipperLib.Cast_Int32(ClipperLib.ClipperOffset.Round(this.m_StepsPerRad * Math.abs(a)));\n  var X = this.m_normals[k].X,\n    Y = this.m_normals[k].Y,\n    X2;\n  for (var i = 0; i < steps; ++i)\n  {\n    this.m_destPoly.push(new ClipperLib.IntPoint(\n      ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X + X * this.m_delta),\n      ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y + Y * this.m_delta)));\n    X2 = X;\n    X = X * this.m_cos - this.m_sin * Y;\n    Y = X2 * this.m_sin + Y * this.m_cos;\n  }\n  this.m_destPoly.push(new ClipperLib.IntPoint(\n    ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X + this.m_normals[j].X * this.m_delta),\n    ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y + this.m_normals[j].Y * this.m_delta)));\n};\nClipperLib.Error = function (message)\n{\n  try\n  {\n    throw new Error(message);\n  }\n  catch (err)\n  {\n    alert(err.message);\n  }\n};\n// ---------------------------------\n// JS extension by Timo 2013\nClipperLib.JS = {};\nClipperLib.JS.AreaOfPolygon = function (poly, scale)\n{\n  if (!scale) scale = 1;\n  return ClipperLib.Clipper.Area(poly) / (scale * scale);\n};\nClipperLib.JS.AreaOfPolygons = function (poly, scale)\n{\n  if (!scale) scale = 1;\n  var area = 0;\n  for (var i = 0; i < poly.length; i++)\n  {\n    area += ClipperLib.Clipper.Area(poly[i]);\n  }\n  return area / (scale * scale);\n};\nClipperLib.JS.BoundsOfPath = function (path, scale)\n{\n  return ClipperLib.JS.BoundsOfPaths([path], scale);\n};\nClipperLib.JS.BoundsOfPaths = function (paths, scale)\n{\n  if (!scale) scale = 1;\n  var bounds = ClipperLib.Clipper.GetBounds(paths);\n  bounds.left /= scale;\n  bounds.bottom /= scale;\n  bounds.right /= scale;\n  bounds.top /= scale;\n  return bounds;\n};\n// Clean() joins vertices that are too near each other\n// and causes distortion to offsetted polygons without cleaning\nClipperLib.JS.Clean = function (polygon, delta)\n{\n  if (!(polygon instanceof Array)) return [];\n  var isPolygons = polygon[0] instanceof Array;\n  var polygon = ClipperLib.JS.Clone(polygon);\n  if (typeof delta != \"number\" || delta === null)\n  {\n    ClipperLib.Error(\"Delta is not a number in Clean().\");\n    return polygon;\n  }\n  if (polygon.length === 0 || (polygon.length == 1 && polygon[0].length === 0) || delta < 0) return polygon;\n  if (!isPolygons) polygon = [polygon];\n  var k_length = polygon.length;\n  var len, poly, result, d, p, j, i;\n  var results = [];\n  for (var k = 0; k < k_length; k++)\n  {\n    poly = polygon[k];\n    len = poly.length;\n    if (len === 0) continue;\n    else if (len < 3)\n    {\n      result = poly;\n      results.push(result);\n      continue;\n    }\n    result = poly;\n    d = delta * delta;\n    //d = Math.floor(c_delta * c_delta);\n    p = poly[0];\n    j = 1;\n    for (i = 1; i < len; i++)\n    {\n      if ((poly[i].X - p.X) * (poly[i].X - p.X) +\n        (poly[i].Y - p.Y) * (poly[i].Y - p.Y) <= d)\n        continue;\n      result[j] = poly[i];\n      p = poly[i];\n      j++;\n    }\n    p = poly[j - 1];\n    if ((poly[0].X - p.X) * (poly[0].X - p.X) +\n      (poly[0].Y - p.Y) * (poly[0].Y - p.Y) <= d)\n      j--;\n    if (j < len)\n      result.splice(j, len - j);\n    if (result.length) results.push(result);\n  }\n  if (!isPolygons && results.length) results = results[0];\n  else if (!isPolygons && results.length === 0) results = [];\n  else if (isPolygons && results.length === 0) results = [\n    []\n  ];\n  return results;\n}\n// Make deep copy of Polygons or Polygon\n// so that also IntPoint objects are cloned and not only referenced\n// This should be the fastest way\nClipperLib.JS.Clone = function (polygon)\n{\n  if (!(polygon instanceof Array)) return [];\n  if (polygon.length === 0) return [];\n  else if (polygon.length == 1 && polygon[0].length === 0) return [[]];\n  var isPolygons = polygon[0] instanceof Array;\n  if (!isPolygons) polygon = [polygon];\n  var len = polygon.length,\n    plen, i, j, result;\n  var results = new Array(len);\n  for (i = 0; i < len; i++)\n  {\n    plen = polygon[i].length;\n    result = new Array(plen);\n    for (j = 0; j < plen; j++)\n    {\n      result[j] = {\n        X: polygon[i][j].X,\n        Y: polygon[i][j].Y\n      };\n    }\n    results[i] = result;\n  }\n  if (!isPolygons) results = results[0];\n  return results;\n};\n// Removes points that doesn't affect much to the visual appearance.\n// If middle point is at or under certain distance (tolerance) of the line segment between \n// start and end point, the middle point is removed.\nClipperLib.JS.Lighten = function (polygon, tolerance)\n{\n  if (!(polygon instanceof Array)) return [];\n  if (typeof tolerance != \"number\" || tolerance === null)\n  {\n    ClipperLib.Error(\"Tolerance is not a number in Lighten().\")\n    return ClipperLib.JS.Clone(polygon);\n  }\n  if (polygon.length === 0 || (polygon.length == 1 && polygon[0].length === 0) || tolerance < 0)\n  {\n    return ClipperLib.JS.Clone(polygon);\n  }\n  if (!(polygon[0] instanceof Array)) polygon = [polygon];\n  var i, j, poly, k, poly2, plen, A, B, P, d, rem, addlast;\n  var bxax, byay, l, ax, ay;\n  var len = polygon.length;\n  var toleranceSq = tolerance * tolerance;\n  var results = [];\n  for (i = 0; i < len; i++)\n  {\n    poly = polygon[i];\n    plen = poly.length;\n    if (plen == 0) continue;\n    for (k = 0; k < 1000000; k++) // could be forever loop, but wiser to restrict max repeat count\n    {\n      poly2 = [];\n      plen = poly.length;\n      // the first have to added to the end, if first and last are not the same\n      // this way we ensure that also the actual last point can be removed if needed\n      if (poly[plen - 1].X != poly[0].X || poly[plen - 1].Y != poly[0].Y)\n      {\n        addlast = 1;\n        poly.push(\n        {\n          X: poly[0].X,\n          Y: poly[0].Y\n        });\n        plen = poly.length;\n      }\n      else addlast = 0;\n      rem = []; // Indexes of removed points\n      for (j = 0; j < plen - 2; j++)\n      {\n        A = poly[j]; // Start point of line segment\n        P = poly[j + 1]; // Middle point. This is the one to be removed.\n        B = poly[j + 2]; // End point of line segment\n        ax = A.X;\n        ay = A.Y;\n        bxax = B.X - ax;\n        byay = B.Y - ay;\n        if (bxax !== 0 || byay !== 0) // To avoid Nan, when A==P && P==B. And to avoid peaks (A==B && A!=P), which have lenght, but not area.\n        {\n          l = ((P.X - ax) * bxax + (P.Y - ay) * byay) / (bxax * bxax + byay * byay);\n          if (l > 1)\n          {\n            ax = B.X;\n            ay = B.Y;\n          }\n          else if (l > 0)\n          {\n            ax += bxax * l;\n            ay += byay * l;\n          }\n        }\n        bxax = P.X - ax;\n        byay = P.Y - ay;\n        d = bxax * bxax + byay * byay;\n        if (d <= toleranceSq)\n        {\n          rem[j + 1] = 1;\n          j++; // when removed, transfer the pointer to the next one\n        }\n      }\n      // add all unremoved points to poly2\n      poly2.push(\n      {\n        X: poly[0].X,\n        Y: poly[0].Y\n      });\n      for (j = 1; j < plen - 1; j++)\n        if (!rem[j]) poly2.push(\n        {\n          X: poly[j].X,\n          Y: poly[j].Y\n        });\n      poly2.push(\n      {\n        X: poly[plen - 1].X,\n        Y: poly[plen - 1].Y\n      });\n      // if the first point was added to the end, remove it\n      if (addlast) poly.pop();\n      // break, if there was not anymore removed points\n      if (!rem.length) break;\n      // else continue looping using poly2, to check if there are points to remove\n      else poly = poly2;\n    }\n    plen = poly2.length;\n    // remove duplicate from end, if needed\n    if (poly2[plen - 1].X == poly2[0].X && poly2[plen - 1].Y == poly2[0].Y)\n    {\n      poly2.pop();\n    }\n    if (poly2.length > 2) // to avoid two-point-polygons\n      results.push(poly2);\n  }\n  if (!polygon[0] instanceof Array) results = results[0];\n  if (typeof (results) == \"undefined\") results = [\n    []\n  ];\n  return results;\n}\nClipperLib.JS.PerimeterOfPath = function (path, closed, scale)\n{\n  if (typeof (path) == \"undefined\") return 0;\n  var sqrt = Math.sqrt;\n  var perimeter = 0.0;\n  var p1, p2, p1x = 0.0,\n    p1y = 0.0,\n    p2x = 0.0,\n    p2y = 0.0;\n  var j = path.length;\n  if (j < 2) return 0;\n  if (closed)\n  {\n    path[j] = path[0];\n    j++;\n  }\n  while (--j)\n  {\n    p1 = path[j];\n    p1x = p1.X;\n    p1y = p1.Y;\n    p2 = path[j - 1];\n    p2x = p2.X;\n    p2y = p2.Y;\n    perimeter += sqrt((p1x - p2x) * (p1x - p2x) + (p1y - p2y) * (p1y - p2y));\n  }\n  if (closed) path.pop();\n  return perimeter / scale;\n};\nClipperLib.JS.PerimeterOfPaths = function (paths, closed, scale)\n{\n  if (!scale) scale = 1;\n  var perimeter = 0;\n  for (var i = 0; i < paths.length; i++)\n  {\n    perimeter += ClipperLib.JS.PerimeterOfPath(paths[i], closed, scale);\n  }\n  return perimeter;\n};\nClipperLib.JS.ScaleDownPath = function (path, scale)\n{\n  var i, p;\n  if (!scale) scale = 1;\n  i = path.length;\n  while (i--)\n  {\n    p = path[i];\n    p.X = p.X / scale;\n    p.Y = p.Y / scale;\n  }\n};\nClipperLib.JS.ScaleDownPaths = function (paths, scale)\n{\n  var i, j, p, round = Math.round;\n  if (!scale) scale = 1;\n  i = paths.length;\n  while (i--)\n  {\n    j = paths[i].length;\n    while (j--)\n    {\n      p = paths[i][j];\n      p.X = p.X / scale;\n      p.Y = p.Y / scale;\n    }\n  }\n};\nClipperLib.JS.ScaleUpPath = function (path, scale)\n{\n  var i, p, round = Math.round;\n  if (!scale) scale = 1;\n  i = path.length;\n  while (i--)\n  {\n    p = path[i];\n    p.X = round(p.X * scale);\n    p.Y = round(p.Y * scale);\n  }\n};\nClipperLib.JS.ScaleUpPaths = function (paths, scale)\n{\n  var i, j, p, round = Math.round;\n  if (!scale) scale = 1;\n  i = paths.length;\n  while (i--)\n  {\n    j = paths[i].length;\n    while (j--)\n    {\n      p = paths[i][j];\n      p.X = round(p.X * scale);\n      p.Y = round(p.Y * scale);\n    }\n  }\n};\nClipperLib.ExPolygons = function ()\n{\n  return [];\n}\nClipperLib.ExPolygon = function ()\n{\n  this.outer = null;\n  this.holes = null;\n};\nClipperLib.JS.AddOuterPolyNodeToExPolygons = function (polynode, expolygons)\n{\n  var ep = new ClipperLib.ExPolygon();\n  ep.outer = polynode.Contour();\n  var childs = polynode.Childs();\n  var ilen = childs.length;\n  ep.holes = new Array(ilen);\n  var node, n, i, j, childs2, jlen;\n  for (i = 0; i < ilen; i++)\n  {\n    node = childs[i];\n    ep.holes[i] = node.Contour();\n    //Add outer polygons contained by (nested within) holes ...\n    for (j = 0, childs2 = node.Childs(), jlen = childs2.length; j < jlen; j++)\n    {\n      n = childs2[j];\n      ClipperLib.JS.AddOuterPolyNodeToExPolygons(n, expolygons);\n    }\n  }\n  expolygons.push(ep);\n};\nClipperLib.JS.ExPolygonsToPaths = function (expolygons)\n{\n  var a, i, alen, ilen;\n  var paths = new ClipperLib.Paths();\n  for (a = 0, alen = expolygons.length; a < alen; a++)\n  {\n    paths.push(expolygons[a].outer);\n    for (i = 0, ilen = expolygons[a].holes.length; i < ilen; i++)\n    {\n      paths.push(expolygons[a].holes[i]);\n    }\n  }\n  return paths;\n}\nClipperLib.JS.PolyTreeToExPolygons = function (polytree)\n{\n  var expolygons = new ClipperLib.ExPolygons();\n  var node, i, childs, ilen;\n  for (i = 0, childs = polytree.Childs(), ilen = childs.length; i < ilen; i++)\n  {\n    node = childs[i];\n    ClipperLib.JS.AddOuterPolyNodeToExPolygons(node, expolygons);\n  }\n  return expolygons;\n};\n\n\nmodule.exports = ClipperLib;", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object ? baseValues(object, keys(object)) : [];\n}\n\nmodule.exports = values;\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {boolean} [bitmask] The bitmask of comparison flags.\n *  The bitmask may be composed of the following flags:\n *     1 - Unordered comparison\n *     2 - Partial comparison\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, customizer, bitmask, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, customizer, bitmask, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {number} [bitmask] The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, equalFunc, customizer, bitmask, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = arrayTag,\n      othTag = arrayTag;\n\n  if (!objIsArr) {\n    objTag = getTag(object);\n    objTag = objTag == argsTag ? objectTag : objTag;\n  }\n  if (!othIsArr) {\n    othTag = getTag(other);\n    othTag = othTag == argsTag ? objectTag : othTag;\n  }\n  var objIsObj = objTag == objectTag && !isHostObject(object),\n      othIsObj = othTag == objectTag && !isHostObject(other),\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, equalFunc, customizer, bitmask, stack)\n      : equalByTag(object, other, objTag, equalFunc, customizer, bitmask, stack);\n  }\n  if (!(bitmask & PARTIAL_COMPARE_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, customizer, bitmask, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, equalFunc, customizer, bitmask, stack);\n}\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, customizer, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[objectToString.call(value)];\n}\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, undefined, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);\n  };\n}\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\n/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & UNORDERED_COMPARE_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!seen.has(othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack))) {\n              return seen.add(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, customizer, bitmask, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, equalFunc, customizer, bitmask, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & PARTIAL_COMPARE_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= UNORDERED_COMPARE_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), equalFunc, customizer, bitmask, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      objProps = keys(object),\n      objLength = objProps.length,\n      othProps = keys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, customizer, bitmask, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var result,\n      index = -1,\n      length = path.length;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result) {\n    return result;\n  }\n  var length = object ? object.length : 0;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\n/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity]\n *  The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    result[key] = [value];\n  }\n});\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = groupBy;\n", "/*\n\nStackBlur - a fast almost Gaussian Blur For Canvas\n\nVersion: \t0.5\nAuthor:\t\tMario Klingemann\nContact: \tmario@quasimondo.com\nWebsite:\thttp://www.quasimondo.com/StackBlurForCanvas\nTwitter:\t@quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr: \nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2010 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nvar mul_table = [\n        512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,\n        454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,\n        482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,\n        437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,\n        497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,\n        320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,\n        446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,\n        329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,\n        505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,\n        399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,\n        324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,\n        268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,\n        451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,\n        385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,\n        332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,\n        289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];\n        \n   \nvar shg_table = [\n\t     9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, \n\t\t17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, \n\t\t19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20,\n\t\t20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21,\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, \n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, \n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, \n\t\t23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, \n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24 ];\n\nfunction blur( pixels, width, height, radius )\n{\n\tif ( isNaN(radius) || radius < 1 ) return;\n\tradius |= 0;\n\n\tvar x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, \n\tr_out_sum, g_out_sum, b_out_sum, a_out_sum,\n\tr_in_sum, g_in_sum, b_in_sum, a_in_sum, \n\tpr, pg, pb, pa, rbs;\n\t\t\t\n\tvar div = radius + radius + 1;\n\tvar w4 = width << 2;\n\tvar widthMinus1  = width - 1;\n\tvar heightMinus1 = height - 1;\n\tvar radiusPlus1  = radius + 1;\n\tvar sumFactor = radiusPlus1 * ( radiusPlus1 + 1 ) / 2;\n\t\n\tvar stackStart = new BlurStack();\n\tvar stack = stackStart;\n\tfor ( i = 1; i < div; i++ )\n\t{\n\t\tstack = stack.next = new BlurStack();\n\t\tif ( i == radiusPlus1 ) var stackEnd = stack;\n\t}\n\tstack.next = stackStart;\n\tvar stackIn = null;\n\tvar stackOut = null;\n\t\n\tyw = yi = 0;\n\t\n\tvar mul_sum = mul_table[radius];\n\tvar shg_sum = shg_table[radius];\n\t\n\tfor ( y = 0; y < height; y++ )\n\t{\n\t\tr_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n\t\t\n\t\tr_out_sum = radiusPlus1 * ( pr = pixels[yi] );\n\t\tg_out_sum = radiusPlus1 * ( pg = pixels[yi+1] );\n\t\tb_out_sum = radiusPlus1 * ( pb = pixels[yi+2] );\n\t\ta_out_sum = radiusPlus1 * ( pa = pixels[yi+3] );\n\t\t\n\t\tr_sum += sumFactor * pr;\n\t\tg_sum += sumFactor * pg;\n\t\tb_sum += sumFactor * pb;\n\t\ta_sum += sumFactor * pa;\n\t\t\n\t\tstack = stackStart;\n\t\t\n\t\tfor( i = 0; i < radiusPlus1; i++ )\n\t\t{\n\t\t\tstack.r = pr;\n\t\t\tstack.g = pg;\n\t\t\tstack.b = pb;\n\t\t\tstack.a = pa;\n\t\t\tstack = stack.next;\n\t\t}\n\t\t\n\t\tfor( i = 1; i < radiusPlus1; i++ )\n\t\t{\n\t\t\tp = yi + (( widthMinus1 < i ? widthMinus1 : i ) << 2 );\n\t\t\tr_sum += ( stack.r = ( pr = pixels[p])) * ( rbs = radiusPlus1 - i );\n\t\t\tg_sum += ( stack.g = ( pg = pixels[p+1])) * rbs;\n\t\t\tb_sum += ( stack.b = ( pb = pixels[p+2])) * rbs;\n\t\t\ta_sum += ( stack.a = ( pa = pixels[p+3])) * rbs;\n\t\t\t\n\t\t\tr_in_sum += pr;\n\t\t\tg_in_sum += pg;\n\t\t\tb_in_sum += pb;\n\t\t\ta_in_sum += pa;\n\t\t\t\n\t\t\tstack = stack.next;\n\t\t}\n\t\t\n\t\t\n\t\tstackIn = stackStart;\n\t\tstackOut = stackEnd;\n\t\tfor ( x = 0; x < width; x++ )\n\t\t{\n\t\t\tpixels[yi+3] = pa = (a_sum * mul_sum) >> shg_sum;\n\t\t\tif ( pa != 0 )\n\t\t\t{\n\t\t\t\tpa = 255 / pa;\n\t\t\t\tpixels[yi]   = ((r_sum * mul_sum) >> shg_sum) * pa;\n\t\t\t\tpixels[yi+1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n\t\t\t\tpixels[yi+2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n\t\t\t} else {\n\t\t\t\tpixels[yi] = pixels[yi+1] = pixels[yi+2] = 0;\n\t\t\t}\n\t\t\t\n\t\t\tr_sum -= r_out_sum;\n\t\t\tg_sum -= g_out_sum;\n\t\t\tb_sum -= b_out_sum;\n\t\t\ta_sum -= a_out_sum;\n\t\t\t\n\t\t\tr_out_sum -= stackIn.r;\n\t\t\tg_out_sum -= stackIn.g;\n\t\t\tb_out_sum -= stackIn.b;\n\t\t\ta_out_sum -= stackIn.a;\n\t\t\t\n\t\t\tp =  ( yw + ( ( p = x + radius + 1 ) < widthMinus1 ? p : widthMinus1 ) ) << 2;\n\t\t\t\n\t\t\tr_in_sum += ( stackIn.r = pixels[p]);\n\t\t\tg_in_sum += ( stackIn.g = pixels[p+1]);\n\t\t\tb_in_sum += ( stackIn.b = pixels[p+2]);\n\t\t\ta_in_sum += ( stackIn.a = pixels[p+3]);\n\t\t\t\n\t\t\tr_sum += r_in_sum;\n\t\t\tg_sum += g_in_sum;\n\t\t\tb_sum += b_in_sum;\n\t\t\ta_sum += a_in_sum;\n\t\t\t\n\t\t\tstackIn = stackIn.next;\n\t\t\t\n\t\t\tr_out_sum += ( pr = stackOut.r );\n\t\t\tg_out_sum += ( pg = stackOut.g );\n\t\t\tb_out_sum += ( pb = stackOut.b );\n\t\t\ta_out_sum += ( pa = stackOut.a );\n\t\t\t\n\t\t\tr_in_sum -= pr;\n\t\t\tg_in_sum -= pg;\n\t\t\tb_in_sum -= pb;\n\t\t\ta_in_sum -= pa;\n\t\t\t\n\t\t\tstackOut = stackOut.next;\n\n\t\t\tyi += 4;\n\t\t}\n\t\tyw += width;\n\t}\n\n\t\n\tfor ( x = 0; x < width; x++ )\n\t{\n\t\tg_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n\t\t\n\t\tyi = x << 2;\n\t\tr_out_sum = radiusPlus1 * ( pr = pixels[yi]);\n\t\tg_out_sum = radiusPlus1 * ( pg = pixels[yi+1]);\n\t\tb_out_sum = radiusPlus1 * ( pb = pixels[yi+2]);\n\t\ta_out_sum = radiusPlus1 * ( pa = pixels[yi+3]);\n\t\t\n\t\tr_sum += sumFactor * pr;\n\t\tg_sum += sumFactor * pg;\n\t\tb_sum += sumFactor * pb;\n\t\ta_sum += sumFactor * pa;\n\t\t\n\t\tstack = stackStart;\n\t\t\n\t\tfor( i = 0; i < radiusPlus1; i++ )\n\t\t{\n\t\t\tstack.r = pr;\n\t\t\tstack.g = pg;\n\t\t\tstack.b = pb;\n\t\t\tstack.a = pa;\n\t\t\tstack = stack.next;\n\t\t}\n\t\t\n\t\typ = width;\n\t\t\n\t\tfor( i = 1; i <= radius; i++ )\n\t\t{\n\t\t\tyi = ( yp + x ) << 2;\n\t\t\t\n\t\t\tr_sum += ( stack.r = ( pr = pixels[yi])) * ( rbs = radiusPlus1 - i );\n\t\t\tg_sum += ( stack.g = ( pg = pixels[yi+1])) * rbs;\n\t\t\tb_sum += ( stack.b = ( pb = pixels[yi+2])) * rbs;\n\t\t\ta_sum += ( stack.a = ( pa = pixels[yi+3])) * rbs;\n\t\t   \n\t\t\tr_in_sum += pr;\n\t\t\tg_in_sum += pg;\n\t\t\tb_in_sum += pb;\n\t\t\ta_in_sum += pa;\n\t\t\t\n\t\t\tstack = stack.next;\n\t\t\n\t\t\tif( i < heightMinus1 )\n\t\t\t{\n\t\t\t\typ += width;\n\t\t\t}\n\t\t}\n\t\t\n\t\tyi = x;\n\t\tstackIn = stackStart;\n\t\tstackOut = stackEnd;\n\t\tfor ( y = 0; y < height; y++ )\n\t\t{\n\t\t\tp = yi << 2;\n\t\t\tpixels[p+3] = pa = (a_sum * mul_sum) >> shg_sum;\n\t\t\tif ( pa > 0 )\n\t\t\t{\n\t\t\t\tpa = 255 / pa;\n\t\t\t\tpixels[p]   = ((r_sum * mul_sum) >> shg_sum ) * pa;\n\t\t\t\tpixels[p+1] = ((g_sum * mul_sum) >> shg_sum ) * pa;\n\t\t\t\tpixels[p+2] = ((b_sum * mul_sum) >> shg_sum ) * pa;\n\t\t\t} else {\n\t\t\t\tpixels[p] = pixels[p+1] = pixels[p+2] = 0;\n\t\t\t}\n\t\t\t\n\t\t\tr_sum -= r_out_sum;\n\t\t\tg_sum -= g_out_sum;\n\t\t\tb_sum -= b_out_sum;\n\t\t\ta_sum -= a_out_sum;\n\t\t   \n\t\t\tr_out_sum -= stackIn.r;\n\t\t\tg_out_sum -= stackIn.g;\n\t\t\tb_out_sum -= stackIn.b;\n\t\t\ta_out_sum -= stackIn.a;\n\t\t\t\n\t\t\tp = ( x + (( ( p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1 ) * width )) << 2;\n\t\t\t\n\t\t\tr_sum += ( r_in_sum += ( stackIn.r = pixels[p]));\n\t\t\tg_sum += ( g_in_sum += ( stackIn.g = pixels[p+1]));\n\t\t\tb_sum += ( b_in_sum += ( stackIn.b = pixels[p+2]));\n\t\t\ta_sum += ( a_in_sum += ( stackIn.a = pixels[p+3]));\n\t\t   \n\t\t\tstackIn = stackIn.next;\n\t\t\t\n\t\t\tr_out_sum += ( pr = stackOut.r );\n\t\t\tg_out_sum += ( pg = stackOut.g );\n\t\t\tb_out_sum += ( pb = stackOut.b );\n\t\t\ta_out_sum += ( pa = stackOut.a );\n\t\t\t\n\t\t\tr_in_sum -= pr;\n\t\t\tg_in_sum -= pg;\n\t\t\tb_in_sum -= pb;\n\t\t\ta_in_sum -= pa;\n\t\t\t\n\t\t\tstackOut = stackOut.next;\n\t\t\t\n\t\t\tyi += width;\n\t\t}\n\t}\n}\n\nfunction BlurStack()\n{\n\tthis.r = 0;\n\tthis.g = 0;\n\tthis.b = 0;\n\tthis.a = 0;\n\tthis.next = null;\n}\n\nmodule.exports = blur;", "// vg.js\r\n// JavaScript library for vector graphics\r\n// https://github.com/nodebox/vg.js\r\n// (c) 2014 EMRG\r\n// vg.js may be freely distributed under the MIT license.\r\n// Based on: canvas.js, https://github.com/clips/pattern/blob/master/pattern/canvas.js (BSD)\r\n// De Smedt T. & Daelemans W. (2012). Pattern for Python. Journal of Machine Learning Research.\r\n\r\n// Utility functions\r\nexport * from \"./util/bezier.mjs\";\r\nexport * from \"./util/color.mjs\";\r\nexport * from \"./util/geo.mjs\";\r\nexport * from \"./util/math.mjs\";\r\nexport * from \"./util/svg.mjs\";\r\n\r\n// Objects\r\nimport Color from \"./objects/color.mjs\";\r\nimport Group from \"./objects/group.mjs\";\r\nimport Matrix4 from \"./objects/matrix4.mjs\";\r\nimport Path from \"./objects/path.mjs\";\r\nimport Point from \"./objects/point.mjs\";\r\nimport Rect from \"./objects/rect.mjs\";\r\nimport Text from \"./objects/text.mjs\";\r\nimport Transform from \"./objects/transform.mjs\";\r\nimport Vec3 from \"./objects/vec3.mjs\";\r\nimport Transformable from \"./objects/transformable.mjs\";\r\nObject.assign(Point.prototype, Transformable);\r\nObject.assign(Path.prototype, Transformable);\r\nObject.assign(Group.prototype, Transformable);\r\nObject.assign(Text.prototype, Transformable);\r\nexport { Color, Group, Matrix4, Path, Point, Rect, Text, Transform, Vec3 };\r\n\r\n// Commands\r\n\r\nexport * from \"./commands/draw.mjs\";\r\nexport * from \"./commands/filters.mjs\";\r\nexport * from \"./commands/shapes.mjs\";\r\n", "// Math Utility functions\r\n\r\nexport function sum(values) {\r\n  var i,\r\n    n = values.length,\r\n    total = 0;\r\n  for (i = 0; i < n; i += 1) {\r\n    total += values[i];\r\n  }\r\n  return total;\r\n}\r\n\r\nexport function round(x, decimals) {\r\n  return !decimals\r\n    ? Math.round(x)\r\n    : Math.round(x * Math.pow(10, decimals)) / Math.pow(10, decimals);\r\n}\r\n\r\nexport function sign(x) {\r\n  if (x < 0) {\r\n    return -1;\r\n  }\r\n  if (x > 0) {\r\n    return +1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nexport function degrees(radians) {\r\n  return (radians * 180) / Math.PI;\r\n}\r\n\r\nexport function radians(degrees) {\r\n  return (degrees / 180) * Math.PI;\r\n}\r\n\r\nexport function clamp(v, min, max) {\r\n  if (min < max) {\r\n    return v < min ? min : v > max ? max : v;\r\n  } else {\r\n    return v < max ? max : v > min ? min : v;\r\n  }\r\n}\r\n\r\n// Snaps a value to a virtual grid. Distance defines the spacing between grid lines.\r\n// Strength defines how strongly the values move to the grid. If 1, the values will always\r\n// be on the grid lines, if 0, the value is unchanged.\r\nexport function snap(v, distance, strength) {\r\n  strength = strength !== undefined ? strength : 1;\r\n  return v * (1.0 - strength) + strength * Math.round(v / distance) * distance;\r\n}\r\n\r\nexport function dot(a, b) {\r\n  var m = Math.min(a.length, b.length),\r\n    n = 0,\r\n    i;\r\n  for (i = 0; i < m; i += 1) {\r\n    n += a[i] * b[i];\r\n  }\r\n  return n;\r\n}\r\n\r\n// Linearly interpolate between from and to for t=0-1.\r\n// If clamp=true, values outside of 0-1 will be clamped.\r\nexport function lerp(from, to, t, clamp) {\r\n  if (clamp) {\r\n    if (t < 0) {\r\n      return from;\r\n    }\r\n    if (t > 1) {\r\n      return to;\r\n    }\r\n  }\r\n  return from + (to - from) * t;\r\n}\r\n\r\nexport const mix = lerp;\r\n\r\n// Compute fade curve for point t.\r\nfunction _fade(t) {\r\n  return t * t * t * (t * (t * 6 - 15) + 10);\r\n}\r\n\r\n// Convert low 4 bits of hash code into 12 gradient directions.\r\nfunction _grad(hash, x, y, z) {\r\n  var h, u, v;\r\n  h = hash & 15;\r\n  u = h < 8 ? x : y;\r\n  v = h < 4 ? y : h === 12 || h === 14 ? x : z;\r\n  return ((h & 1) === 0 ? u : -u) + ((h & 2) === 0 ? v : -v);\r\n}\r\n\r\nfunction _scale(n) {\r\n  return (1 + n) / 2;\r\n}\r\n\r\nvar _permutation = (function () {\r\n  var permutation, p, i;\r\n  permutation = [\r\n    151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140,\r\n    36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120,\r\n    234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,\r\n    88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71,\r\n    134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133,\r\n    230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161,\r\n    1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130,\r\n    116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250,\r\n    124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227,\r\n    47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44,\r\n    154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 19, 98,\r\n    108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34,\r\n    242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14,\r\n    239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121,\r\n    50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243,\r\n    141, 128, 195, 78, 66, 215, 61, 156, 180,\r\n  ];\r\n\r\n  p = new Uint8Array(512);\r\n  for (i = 0; i < 256; i += 1) {\r\n    p[256 + i] = p[i] = permutation[i];\r\n  }\r\n  return p;\r\n})();\r\n\r\n// Calculate Perlin noise\r\nexport function noise(x, y, z) {\r\n  var p = _permutation;\r\n\r\n  // Find unit cube that contains the point.\r\n  var X = Math.floor(x) & 255;\r\n  var Y = Math.floor(y) & 255;\r\n  var Z = Math.floor(z) & 255;\r\n  // Find relative x, y, z point in the cube.\r\n  x -= Math.floor(x);\r\n  y -= Math.floor(y);\r\n  z -= Math.floor(z);\r\n  // Compute fade curves for each x, y, z.\r\n  var u = _fade(x);\r\n  var v = _fade(y);\r\n  var w = _fade(z);\r\n\r\n  // Hash coordinates of the 8 cube corners.\r\n  var A = p[X] + Y;\r\n  var AA = p[A] + Z;\r\n  var AB = p[A + 1] + Z;\r\n  var B = p[X + 1] + Y;\r\n  var BA = p[B] + Z;\r\n  var BB = p[B + 1] + Z;\r\n\r\n  // Add blended results from 8 corners of the cube.\r\n  return _scale(\r\n    lerp(\r\n      lerp(\r\n        lerp(_grad(p[AA], x, y, z), _grad(p[BA], x - 1, y, z), u),\r\n        lerp(_grad(p[AB], x, y - 1, z), _grad(p[BB], x - 1, y - 1, z), u),\r\n        v\r\n      ),\r\n      lerp(\r\n        lerp(\r\n          _grad(p[AA + 1], x, y, z - 1),\r\n          _grad(p[BA + 1], x - 1, y, z - 1),\r\n          u\r\n        ),\r\n        lerp(\r\n          _grad(p[AB + 1], x, y - 1, z - 1),\r\n          _grad(p[BB + 1], x - 1, y - 1, z - 1),\r\n          u\r\n        ),\r\n        v\r\n      ),\r\n      w\r\n    )\r\n  );\r\n}\r\n", "// 2-dimensional point object.\r\n\r\nexport default class Point {\r\n  constructor(x, y) {\r\n    this.x = x !== undefined ? x : 0;\r\n    this.y = y !== undefined ? y : 0;\r\n  }\r\n  static read(x, y) {\r\n    if (arguments.length === 2) {\r\n      return new Point(x, y);\r\n    }\r\n    var arg = x;\r\n    if (arg instanceof Point) {\r\n      return arg;\r\n    } else if (typeof arg === \"number\") {\r\n      return new Point(arg, arg);\r\n    } else if (Array.isArray(arg)) {\r\n      if (arg.length === 0) {\r\n        return Point.ZERO;\r\n      }\r\n      x = arg[0];\r\n      y = arg.length > 1 ? arg[1] : x;\r\n      return new Point(x, y);\r\n    } else if (arg.x !== undefined && arg.y !== undefined) {\r\n      return new Point(arg.x, arg.y);\r\n    } else {\r\n      return Point.ZERO;\r\n    }\r\n  }\r\n  clone() {\r\n    return new Point(this.x, this.y);\r\n  }\r\n  add(v) {\r\n    return new Point(this.x + v.x, this.y + v.y);\r\n  }\r\n  sub(v) {\r\n    return new Point(this.x - v.x, this.y - v.y);\r\n  }\r\n  divide(n) {\r\n    return new Point(this.x / n, this.y / n);\r\n  }\r\n  multiply(n) {\r\n    return new Point(this.x * n, this.y * n);\r\n  }\r\n  magnitude() {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y);\r\n  }\r\n  magnitudeSquared() {\r\n    return this.x * this.x + this.y * this.y;\r\n  }\r\n  heading() {\r\n    return Math.atan2(this.y, this.x);\r\n  }\r\n  distanceTo(v) {\r\n    var dx = this.x - v.x,\r\n      dy = this.y - v.y;\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n  }\r\n  normalize() {\r\n    var m = this.magnitude();\r\n    if (m !== 0) {\r\n      return this.divide(m);\r\n    } else {\r\n      return Point.ZERO;\r\n    }\r\n  }\r\n  limit(speed) {\r\n    if (this.magnitudeSquared() > speed * speed) {\r\n      return this.normalize().multiply(speed);\r\n    }\r\n    return this;\r\n  }\r\n  translate(tx, ty) {\r\n    return new Point(this.x + tx, this.y + ty);\r\n  }\r\n  scale(sx, sy) {\r\n    sy = sy !== undefined ? sy : sx;\r\n    return new Point(this.x * sx, this.y * sy);\r\n  }\r\n  toString() {\r\n    return \"[\" + this.x + \", \" + this.y + \"]\";\r\n  }\r\n}\r\n\r\nObject.defineProperty(Point.prototype, \"xy\", {\r\n  get: function () {\r\n    return [this.x, this.y];\r\n  },\r\n});\r\n\r\nPoint.ZERO = new Point(0, 0);\r\nPoint.prototype.subtract = Point.prototype.sub;\r\n", "// Rectangle object\r\n\r\nimport Point from \"./point.mjs\";\r\n\r\nexport default class Rect {\r\n  constructor(x, y, width, height) {\r\n    this.x = x !== undefined ? x : 0;\r\n    this.y = y !== undefined ? y : 0;\r\n    this.width = width !== undefined ? width : 0;\r\n    this.height = height !== undefined ? height : 0;\r\n  }\r\n  // Returns a new rectangle where width and height are guaranteed to be positive values.\r\n  normalize() {\r\n    var x = this.x,\r\n      y = this.y,\r\n      width = this.width,\r\n      height = this.height;\r\n\r\n    if (width < 0) {\r\n      x += width;\r\n      width = -width;\r\n    }\r\n\r\n    if (height < 0) {\r\n      y += height;\r\n      height = -height;\r\n    }\r\n    return new Rect(x, y, width, height);\r\n  }\r\n  containsPoint(x, y) {\r\n    if (arguments.length === 1) {\r\n      y = x.y;\r\n      x = x.x;\r\n    }\r\n    return (\r\n      x >= this.x &&\r\n      x <= this.x + this.width &&\r\n      y >= this.y &&\r\n      y <= this.y + this.height\r\n    );\r\n  }\r\n  containsRect(r) {\r\n    return (\r\n      r.x >= this.x &&\r\n      r.x + r.width <= this.x + this.width &&\r\n      r.y >= this.y &&\r\n      r.y + r.height <= this.y + this.height\r\n    );\r\n  }\r\n  grow(dx, dy) {\r\n    var x = this.x - dx,\r\n      y = this.y - dy,\r\n      width = this.width + dx * 2,\r\n      height = this.height + dy * 2;\r\n    return new Rect(x, y, width, height);\r\n  }\r\n  unite(r) {\r\n    var x = Math.min(this.x, r.x),\r\n      y = Math.min(this.y, r.y),\r\n      width = Math.max(this.x + this.width, r.x + r.width) - x,\r\n      height = Math.max(this.y + this.height, r.y + r.height) - y;\r\n    return new Rect(x, y, width, height);\r\n  }\r\n  addPoint(x, y) {\r\n    var dx,\r\n      dy,\r\n      _x = this.x,\r\n      _y = this.y,\r\n      width = this.width,\r\n      height = this.height;\r\n\r\n    if (x < this.x) {\r\n      dx = this.x - x;\r\n      _x = x;\r\n      width += dx;\r\n    } else if (x > this.x + this.width) {\r\n      dx = x - (this.x + this.width);\r\n      width += dx;\r\n    }\r\n    if (y < this.y) {\r\n      dy = this.y - y;\r\n      _y = y;\r\n      height += dy;\r\n    } else if (y > this.y + this.height) {\r\n      dy = y - (this.y + this.height);\r\n      height += dy;\r\n    }\r\n    return new Rect(_x, _y, width, height);\r\n  }\r\n  centerPoint() {\r\n    return new Point(this.x + this.width / 2, this.y + this.height / 2);\r\n  }\r\n}\r\n\r\nObject.defineProperty(Rect.prototype, \"xywh\", {\r\n  get: function () {\r\n    return [this.x, this.y, this.width, this.height];\r\n  },\r\n});\r\n", "// B\u00E9zier Math\r\n// Thanks to Prof. F. De Smedt at the Vrije Universiteit Brussel, 2006.\r\n\r\nimport { sum } from \"../util/math.mjs\";\r\nimport Point from \"../objects/point.mjs\";\r\nimport Rect from \"../objects/rect.mjs\";\r\n\r\nexport const MOVETO = \"M\";\r\nexport const LINETO = \"L\";\r\nexport const QUADTO = \"Q\";\r\nexport const CURVETO = \"C\";\r\nexport const CLOSE = \"Z\";\r\n\r\n// BEZIER MATH:\r\n\r\n// Returns coordinates for the point at t (0.0-1.0) on the line.\r\nexport function linePoint(t, x0, y0, x1, y1) {\r\n  var x = x0 + t * (x1 - x0),\r\n    y = y0 + t * (y1 - y0);\r\n  return { type: LINETO, x: x, y: y };\r\n}\r\n\r\n// Returns the length of the line.\r\nexport function lineLength(x0, y0, x1, y1) {\r\n  var a = Math.pow(Math.abs(x0 - x1), 2),\r\n    b = Math.pow(Math.abs(y0 - y1), 2);\r\n  return Math.sqrt(a + b);\r\n}\r\n\r\n// Returns coordinates for the point at t (0.0-1.0) on the curve\r\n// (de Casteljau interpolation algorithm).\r\nexport function curvePoint(t, x0, y0, x1, y1, x2, y2, x3, y3) {\r\n  var dt = 1 - t,\r\n    x01 = x0 * dt + x1 * t,\r\n    y01 = y0 * dt + y1 * t,\r\n    x12 = x1 * dt + x2 * t,\r\n    y12 = y1 * dt + y2 * t,\r\n    x23 = x2 * dt + x3 * t,\r\n    y23 = y2 * dt + y3 * t,\r\n    h1x = x01 * dt + x12 * t,\r\n    h1y = y01 * dt + y12 * t,\r\n    h2x = x12 * dt + x23 * t,\r\n    h2y = y12 * dt + y23 * t,\r\n    x = h1x * dt + h2x * t,\r\n    y = h1y * dt + h2y * t;\r\n  return { type: CURVETO, x1: h1x, y1: h1y, x2: h2x, y2: h2y, x: x, y: y };\r\n}\r\n\r\n// Returns the length of the curve.\r\n// Integrates the estimated length of the cubic bezier spline defined by x0, y0, ... x3, y3,\r\n// by adding up the length of n linear lines along the curve.\r\nexport function curveLength(x0, y0, x1, y1, x2, y2, x3, y3, n) {\r\n  if (n === undefined) {\r\n    n = 20;\r\n  }\r\n  var i,\r\n    t,\r\n    cmd,\r\n    length = 0,\r\n    xi = x0,\r\n    yi = y0;\r\n  for (i = 0; i < n; i += 1) {\r\n    t = (i + 1) / n;\r\n    cmd = curvePoint(t, x0, y0, x1, y1, x2, y2, x3, y3);\r\n    length += Math.sqrt(\r\n      Math.pow(Math.abs(xi - cmd.x), 2) + Math.pow(Math.abs(yi - cmd.y), 2)\r\n    );\r\n    xi = cmd.x;\r\n    yi = cmd.y;\r\n  }\r\n  return length;\r\n}\r\n\r\n// BEZIER PATH LENGTH:\r\n\r\n// Returns an array with the length of each command in the path.\r\n// With relative=true, the total length of all commands is 1.0.\r\nexport function segmentLengths(commands, relative, n) {\r\n  relative = relative !== undefined ? relative : false;\r\n  if (n === undefined) {\r\n    n = 20;\r\n  }\r\n  var i, cmd, type, closeX, closeY, x0, y0, s, lengths, ll;\r\n  lengths = [];\r\n  for (i = 0; i < commands.length; i += 1) {\r\n    cmd = commands[i];\r\n    type = cmd.type;\r\n\r\n    if (i === 0) {\r\n      closeX = cmd.x;\r\n      closeY = cmd.y;\r\n    } else if (type === MOVETO) {\r\n      closeX = cmd.x;\r\n      closeY = cmd.y;\r\n      lengths.push(0.0);\r\n    } else if (type === CLOSE) {\r\n      lengths.push(lineLength(x0, y0, closeX, closeY));\r\n    } else if (type === LINETO) {\r\n      lengths.push(lineLength(x0, y0, cmd.x, cmd.y));\r\n    } else if (type === CURVETO) {\r\n      lengths.push(\r\n        curveLength(x0, y0, cmd.x1, cmd.y1, cmd.x2, cmd.y2, cmd.x, cmd.y, n)\r\n      );\r\n    }\r\n    if (type !== CLOSE) {\r\n      x0 = cmd.x;\r\n      y0 = cmd.y;\r\n    }\r\n  }\r\n  if (relative === true) {\r\n    s = sum(lengths);\r\n    ll = [];\r\n    ll.length = lengths.length;\r\n    if (s > 0) {\r\n      for (i = 0; i < lengths.length; i += 1) {\r\n        ll[i] = lengths[i] / s;\r\n      }\r\n    } else {\r\n      for (i = 0; i < lengths.length; i += 1) {\r\n        ll[i] = 0.0;\r\n      }\r\n    }\r\n    return ll;\r\n  }\r\n  return lengths;\r\n}\r\n\r\n// Returns the approximate length of the path.\r\n// Calculates the length of each curve in the path using n linear samples.\r\nexport function length(path, n) {\r\n  n = n || 20;\r\n  return sum(segmentLengths(path.commands, false, n));\r\n}\r\n\r\n// BEZIER PATH POINT:\r\n\r\n// For a given relative t on the path (0.0-1.0), returns an array [index, t, PathElement],\r\n// with the index of the PathElement before t, the absolute position on this segment,\r\n// the last MOVETO or any subsequent CLOSE commands after i.\r\n// Note: during iteration, supplying segment lengths yourself is 30x faster.\r\nexport function _locate(path, t, segmentLengths) {\r\n  var i, cmd, closeTo;\r\n  if (segmentLengths === undefined) {\r\n    segmentLengths = segmentLengths(path.commands, true);\r\n  }\r\n  for (i = 0; i < path.commands.length; i += 1) {\r\n    cmd = path.commands[i];\r\n    if (i === 0 || cmd.type === MOVETO) {\r\n      closeTo = new Point(cmd.x, cmd.y);\r\n    }\r\n    if (t <= segmentLengths[i] || i === segmentLengths.length - 1) {\r\n      break;\r\n    }\r\n    t -= segmentLengths[i];\r\n  }\r\n  if (segmentLengths[i] !== 0) {\r\n    t /= segmentLengths[i];\r\n  }\r\n  if (i === segmentLengths.length - 1 && segmentLengths[i] === 0) {\r\n    i -= 1;\r\n  }\r\n  return [i, t, closeTo];\r\n}\r\n\r\n// Returns the DynamicPathElement at time t on the path.\r\n// Note: in PathElement, ctrl1 is how the curve started, and ctrl2 how it arrives in this point.\r\n// Here, ctrl1 is how the curve arrives, and ctrl2 how it continues to the next point.\r\nexport function point(path, t, segmentLengths) {\r\n  var loc, i, closeTo, x0, y0, cmd;\r\n  loc = _locate(path, t, segmentLengths);\r\n  i = loc[0];\r\n  t = loc[1];\r\n  closeTo = loc[2];\r\n  x0 = path.commands[i].x;\r\n  y0 = path.commands[i].y;\r\n  cmd = path.commands[i + 1];\r\n  if (cmd.type === LINETO || cmd.type === CLOSE) {\r\n    cmd =\r\n      cmd.type === CLOSE\r\n        ? linePoint(t, x0, y0, closeTo.x, closeTo.y)\r\n        : linePoint(t, x0, y0, cmd.x, cmd.y);\r\n  } else if (cmd.type === CURVETO) {\r\n    cmd = curvePoint(t, x0, y0, cmd.x1, cmd.y1, cmd.x2, cmd.y2, cmd.x, cmd.y);\r\n  }\r\n  return cmd;\r\n}\r\n\r\nfunction fuzzyCompare(p1, p2) {\r\n  return (\r\n    Math.abs(p1 - p2) <= 0.000000000001 * Math.min(Math.abs(p1), Math.abs(p2))\r\n  );\r\n}\r\n\r\nfunction coefficients(t) {\r\n  var mT, a, b, c, d;\r\n  mT = 1 - t;\r\n  b = mT * mT;\r\n  c = t * t;\r\n  d = c * t;\r\n  a = b * mT;\r\n  b *= 3.0 * t;\r\n  c *= 3.0 * mT;\r\n  return [a, b, c, d];\r\n}\r\n\r\nfunction pointAt(x1, y1, x2, y2, x3, y3, x4, y4, t) {\r\n  var a, b, c, d, coeff;\r\n  coeff = coefficients(t);\r\n  a = coeff[0];\r\n  b = coeff[1];\r\n  c = coeff[2];\r\n  d = coeff[3];\r\n  return {\r\n    x: a * x1 + b * x2 + c * x3 + d * x4,\r\n    y: a * y1 + b * y2 + c * y3 + d * y4,\r\n  };\r\n}\r\n\r\nexport function extrema(x1, y1, x2, y2, x3, y3, x4, y4) {\r\n  var minX, maxX, minY, maxY, ax, bx, cx, ay, by, cy, temp, rcp, tx, ty;\r\n\r\n  function bezierCheck(t) {\r\n    if (t >= 0 && t <= 1) {\r\n      var p = pointAt(x1, y1, x2, y2, x3, y3, x4, y4, t);\r\n      if (p.x < minX) {\r\n        minX = p.x;\r\n      } else if (p.x > maxX) {\r\n        maxX = p.x;\r\n      }\r\n      if (p.y < minY) {\r\n        minY = p.y;\r\n      } else if (p.y > maxY) {\r\n        maxY = p.y;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (x1 < x4) {\r\n    minX = x1;\r\n    maxX = x4;\r\n  } else {\r\n    minX = x4;\r\n    maxX = x1;\r\n  }\r\n  if (y1 < y4) {\r\n    minY = y1;\r\n    maxY = y4;\r\n  } else {\r\n    minY = y4;\r\n    maxY = y1;\r\n  }\r\n\r\n  ax = 3 * (-x1 + 3 * x2 - 3 * x3 + x4);\r\n  bx = 6 * (x1 - 2 * x2 + x3);\r\n  cx = 3 * (-x1 + x2);\r\n\r\n  if (fuzzyCompare(ax + 1, 1)) {\r\n    if (!fuzzyCompare(bx + 1, 1)) {\r\n      bezierCheck(-cx / bx);\r\n    }\r\n  } else {\r\n    tx = bx * bx - 4 * ax * cx;\r\n    if (tx >= 0) {\r\n      temp = Math.sqrt(tx);\r\n      rcp = 1 / (2 * ax);\r\n      bezierCheck((-bx + temp) * rcp);\r\n      bezierCheck((-bx - temp) * rcp);\r\n    }\r\n  }\r\n\r\n  ay = 3 * (-y1 + 3 * y2 - 3 * y3 + y4);\r\n  by = 6 * (y1 - 2 * y2 + y3);\r\n  cy = 3 * (-y1 + y2);\r\n\r\n  if (fuzzyCompare(ay + 1, 1)) {\r\n    if (!fuzzyCompare(by + 1, 1)) {\r\n      bezierCheck(-cy / by);\r\n    }\r\n  } else {\r\n    ty = by * by - 4 * ay * cy;\r\n    if (ty > 0) {\r\n      temp = Math.sqrt(ty);\r\n      rcp = 1 / (2 * ay);\r\n      bezierCheck((-by + temp) * rcp);\r\n      bezierCheck((-by - temp) * rcp);\r\n    }\r\n  }\r\n\r\n  return new Rect(minX, minY, maxX - minX, maxY - minY);\r\n}\r\n", "// Color conversion functions\r\n\r\nexport const namedColors = {\r\n  lightpink: [1.0, 0.71, 0.76],\r\n  pink: [1.0, 0.75, 0.8],\r\n  crimson: [0.86, 0.08, 0.24],\r\n  lavenderblush: [1.0, 0.94, 0.96],\r\n  palevioletred: [0.86, 0.44, 0.58],\r\n  hotpink: [1.0, 0.41, 0.71],\r\n  deeppink: [1.0, 0.08, 0.58],\r\n  mediumvioletred: [0.78, 0.08, 0.52],\r\n  orchid: [0.85, 0.44, 0.84],\r\n  thistle: [0.85, 0.75, 0.85],\r\n  plum: [0.87, 0.63, 0.87],\r\n  violet: [0.93, 0.51, 0.93],\r\n  fuchsia: [1.0, 0.0, 1.0],\r\n  darkmagenta: [0.55, 0.0, 0.55],\r\n  purple: [0.5, 0.0, 0.5],\r\n  mediumorchid: [0.73, 0.33, 0.83],\r\n  darkviolet: [0.58, 0.0, 0.83],\r\n  darkorchid: [0.6, 0.2, 0.8],\r\n  indigo: [0.29, 0.0, 0.51],\r\n  blueviolet: [0.54, 0.17, 0.89],\r\n  mediumpurple: [0.58, 0.44, 0.86],\r\n  mediumslateblue: [0.48, 0.41, 0.93],\r\n  slateblue: [0.42, 0.35, 0.8],\r\n  darkslateblue: [0.28, 0.24, 0.55],\r\n  ghostwhite: [0.97, 0.97, 1.0],\r\n  lavender: [0.9, 0.9, 0.98],\r\n  blue: [0.0, 0.0, 1.0],\r\n  mediumblue: [0.0, 0.0, 0.8],\r\n  darkblue: [0.0, 0.0, 0.55],\r\n  navy: [0.0, 0.0, 0.5],\r\n  midnightblue: [0.1, 0.1, 0.44],\r\n  royalblue: [0.25, 0.41, 0.88],\r\n  cornflowerblue: [0.39, 0.58, 0.93],\r\n  lightsteelblue: [0.69, 0.77, 0.87],\r\n  lightslategray: [0.47, 0.53, 0.6],\r\n  slategray: [0.44, 0.5, 0.56],\r\n  dodgerblue: [0.12, 0.56, 1.0],\r\n  aliceblue: [0.94, 0.97, 1.0],\r\n  steelblue: [0.27, 0.51, 0.71],\r\n  lightskyblue: [0.53, 0.81, 0.98],\r\n  skyblue: [0.53, 0.81, 0.92],\r\n  deepskyblue: [0.0, 0.75, 1.0],\r\n  lightblue: [0.68, 0.85, 0.9],\r\n  powderblue: [0.69, 0.88, 0.9],\r\n  cadetblue: [0.37, 0.62, 0.63],\r\n  darkturquoise: [0.0, 0.81, 0.82],\r\n  azure: [0.94, 1.0, 1.0],\r\n  lightcyan: [0.88, 1.0, 1.0],\r\n  paleturquoise: [0.69, 0.93, 0.93],\r\n  aqua: [0.0, 1.0, 1.0],\r\n  darkcyan: [0.0, 0.55, 0.55],\r\n  teal: [0.0, 0.5, 0.5],\r\n  darkslategray: [0.18, 0.31, 0.31],\r\n  mediumturquoise: [0.28, 0.82, 0.8],\r\n  lightseagreen: [0.13, 0.7, 0.67],\r\n  turquoise: [0.25, 0.88, 0.82],\r\n  aquamarine: [0.5, 1.0, 0.83],\r\n  mediumaquamarine: [0.4, 0.8, 0.67],\r\n  mediumspringgreen: [0.0, 0.98, 0.6],\r\n  mintcream: [0.96, 1.0, 0.98],\r\n  springgreen: [0.0, 1.0, 0.5],\r\n  mediumseagreen: [0.24, 0.7, 0.44],\r\n  seagreen: [0.18, 0.55, 0.34],\r\n  honeydew: [0.94, 1.0, 0.94],\r\n  darkseagreen: [0.56, 0.74, 0.56],\r\n  palegreen: [0.6, 0.98, 0.6],\r\n  lightgreen: [0.56, 0.93, 0.56],\r\n  limegreen: [0.2, 0.8, 0.2],\r\n  lime: [0.0, 1.0, 0.0],\r\n  forestgreen: [0.13, 0.55, 0.13],\r\n  green: [0.0, 0.5, 0.0],\r\n  darkgreen: [0.0, 0.39, 0.0],\r\n  lawngreen: [0.49, 0.99, 0.0],\r\n  chartreuse: [0.5, 1.0, 0.0],\r\n  greenyellow: [0.68, 1.0, 0.18],\r\n  darkolivegreen: [0.33, 0.42, 0.18],\r\n  yellowgreen: [0.6, 0.8, 0.2],\r\n  olivedrab: [0.42, 0.56, 0.14],\r\n  ivory: [1.0, 1.0, 0.94],\r\n  beige: [0.96, 0.96, 0.86],\r\n  lightyellow: [1.0, 1.0, 0.88],\r\n  lightgoldenrodyellow: [0.98, 0.98, 0.82],\r\n  yellow: [1.0, 1.0, 0.0],\r\n  olive: [0.5, 0.5, 0.0],\r\n  darkkhaki: [0.74, 0.72, 0.42],\r\n  palegoldenrod: [0.93, 0.91, 0.67],\r\n  lemonchiffon: [1.0, 0.98, 0.8],\r\n  khaki: [0.94, 0.9, 0.55],\r\n  gold: [1.0, 0.84, 0.0],\r\n  cornsilk: [1.0, 0.97, 0.86],\r\n  goldenrod: [0.85, 0.65, 0.13],\r\n  darkgoldenrod: [0.72, 0.53, 0.04],\r\n  floralwhite: [1.0, 0.98, 0.94],\r\n  oldlace: [0.99, 0.96, 0.9],\r\n  wheat: [0.96, 0.87, 0.07],\r\n  orange: [1.0, 0.65, 0.0],\r\n  moccasin: [1.0, 0.89, 0.71],\r\n  papayawhip: [1.0, 0.94, 0.84],\r\n  blanchedalmond: [1.0, 0.92, 0.8],\r\n  navajowhite: [1.0, 0.87, 0.68],\r\n  antiquewhite: [0.98, 0.92, 0.84],\r\n  tan: [0.82, 0.71, 0.55],\r\n  burlywood: [0.87, 0.72, 0.53],\r\n  darkorange: [1.0, 0.55, 0.0],\r\n  bisque: [1.0, 0.89, 0.77],\r\n  linen: [0.98, 0.94, 0.9],\r\n  peru: [0.8, 0.52, 0.25],\r\n  peachpuff: [1.0, 0.85, 0.73],\r\n  sandybrown: [0.96, 0.64, 0.38],\r\n  chocolate: [0.82, 0.41, 0.12],\r\n  saddlebrown: [0.55, 0.27, 0.07],\r\n  seashell: [1.0, 0.96, 0.93],\r\n  sienna: [0.63, 0.32, 0.18],\r\n  lightsalmon: [1.0, 0.63, 0.48],\r\n  coral: [1.0, 0.5, 0.31],\r\n  orangered: [1.0, 0.27, 0.0],\r\n  darksalmon: [0.91, 0.59, 0.48],\r\n  tomato: [1.0, 0.39, 0.28],\r\n  salmon: [0.98, 0.5, 0.45],\r\n  mistyrose: [1.0, 0.89, 0.88],\r\n  lightcoral: [0.94, 0.5, 0.5],\r\n  snow: [1.0, 0.98, 0.98],\r\n  rosybrown: [0.74, 0.56, 0.56],\r\n  indianred: [0.8, 0.36, 0.36],\r\n  red: [1.0, 0.0, 0.0],\r\n  brown: [0.65, 0.16, 0.16],\r\n  firebrick: [0.7, 0.13, 0.13],\r\n  darkred: [0.55, 0.0, 0.0],\r\n  maroon: [0.5, 0.0, 0.0],\r\n  white: [1.0, 1.0, 1.0],\r\n  whitesmoke: [0.96, 0.96, 0.96],\r\n  gainsboro: [0.86, 0.86, 0.86],\r\n  lightgrey: [0.83, 0.83, 0.83],\r\n  silver: [0.75, 0.75, 0.75],\r\n  darkgray: [0.66, 0.66, 0.66],\r\n  gray: [0.5, 0.5, 0.5],\r\n  grey: [0.5, 0.5, 0.5],\r\n  dimgray: [0.41, 0.41, 0.41],\r\n  dimgrey: [0.41, 0.41, 0.41],\r\n  black: [0.0, 0.0, 0.0],\r\n  cyan: [0.0, 0.68, 0.94],\r\n\r\n  transparent: [0.0, 0.0, 0.0, 0.0],\r\n  bark: [0.25, 0.19, 0.13],\r\n};\r\n\r\nfunction toHex(i) {\r\n  var s;\r\n  if (i === 0) {\r\n    return \"00\";\r\n  } else {\r\n    s = i.toString(16).toUpperCase();\r\n    if (s.length < 2) {\r\n      s = \"0\" + s;\r\n    }\r\n    return s;\r\n  }\r\n}\r\n\r\n// Converts the given R,G,B values to a hexadecimal color string.\r\nexport function rgb2hex(r, g, b) {\r\n  return (\r\n    \"#\" +\r\n    toHex(Math.round(r * 255)) +\r\n    toHex(Math.round(g * 255)) +\r\n    toHex(Math.round(b * 255))\r\n  );\r\n}\r\n\r\n// Converts the given R,G,B,A values to a hexadecimal color string.\r\nexport function rgba2hex(r, g, b, a) {\r\n  return (\r\n    \"#\" +\r\n    toHex(Math.round(r * 255)) +\r\n    toHex(Math.round(g * 255)) +\r\n    toHex(Math.round(b * 255)) +\r\n    toHex(Math.round(a * 255))\r\n  );\r\n}\r\n\r\n// Converts the given hexadecimal color string to R,G,B (between 0.0-1.0).\r\nexport function hex2rgb(hex) {\r\n  var r, g, b;\r\n  hex = hex.replace(/^#/, \"\");\r\n  if ((hex.length !== 3 && hex.length !== 6) || !/^[0-9a-fA-F]*$/.test(hex)) {\r\n    throw new Error(\"Invalid hex value: #\" + hex);\r\n  }\r\n  if (hex.length === 3) {\r\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\r\n  }\r\n  r = parseInt(hex.substr(0, 2), 16) / 255;\r\n  g = parseInt(hex.substr(2, 2), 16) / 255;\r\n  b = parseInt(hex.substr(4, 2), 16) / 255;\r\n  return [r, g, b];\r\n}\r\n\r\n// Converts the given R,G,B values to H,S,B (between 0.0-1.0).\r\nexport function rgb2hsb(r, g, b) {\r\n  var h = 0,\r\n    s = 0,\r\n    v = Math.max(r, g, b),\r\n    d = v - Math.min(r, g, b);\r\n  if (v !== 0) {\r\n    s = d / v;\r\n  }\r\n  if (s !== 0) {\r\n    if (r === v) {\r\n      h = 0 + (g - b) / d;\r\n    } else if (g === v) {\r\n      h = 2 + (b - r) / d;\r\n    } else {\r\n      h = 4 + (r - g) / d;\r\n    }\r\n  }\r\n  h = h * (60 / 360);\r\n  if (h < 0) {\r\n    h += 1.0;\r\n  }\r\n  return [h, s, v];\r\n}\r\n\r\n// Converts the given H,S,B color values to R,G,B (between 0.0-1.0).\r\nexport function hsb2rgb(h, s, v) {\r\n  if (s === 0) {\r\n    return [v, v, v];\r\n  }\r\n  h = (h % 1) * 6.0;\r\n  var i = Math.floor(h),\r\n    f = h - i,\r\n    x = v * (1 - s),\r\n    y = v * (1 - s * f),\r\n    z = v * (1 - s * (1 - f));\r\n  if (i > 4) {\r\n    return [v, x, y];\r\n  }\r\n  return [\r\n    [v, z, x],\r\n    [y, v, x],\r\n    [x, v, z],\r\n    [x, y, v],\r\n    [z, x, v],\r\n  ][parseInt(i, 10)];\r\n}\r\n\r\n// Converts the given R,G,B values to H,S,L (between 0.0-1.0).\r\n// Code adapted from http://github.com/mattdesl/float-rgb2hsl\r\nexport function rgb2hsl(r, g, b) {\r\n  var min = Math.min(r, g, b),\r\n    max = Math.max(r, g, b),\r\n    delta = max - min,\r\n    h,\r\n    s,\r\n    l;\r\n\r\n  if (max === min) {\r\n    h = 0;\r\n  } else if (r === max) {\r\n    h = (g - b) / delta;\r\n  } else if (g === max) {\r\n    h = 2 + (b - r) / delta;\r\n  } else if (b === max) {\r\n    h = 4 + (r - g) / delta;\r\n  }\r\n\r\n  h = Math.min(h * 60, 360);\r\n\r\n  if (h < 0) {\r\n    h += 360;\r\n  }\r\n\r\n  l = (min + max) / 2;\r\n\r\n  if (max === min) {\r\n    s = 0;\r\n  } else if (l <= 0.5) {\r\n    s = delta / (max + min);\r\n  } else {\r\n    s = delta / (2 - max - min);\r\n  }\r\n\r\n  return [h / 360, s, l];\r\n}\r\n\r\n// Converts the given H,S,L color values to R,G,B (between 0.0-1.0).\r\n// Code adapted from http://github.com/mattdesl/float-hsl2rgb\r\nexport function hsl2rgb(h, s, l) {\r\n  var t1, t2, t3, rgb, val;\r\n\r\n  if (s === 0) {\r\n    val = l;\r\n    return [val, val, val];\r\n  }\r\n\r\n  if (l < 0.5) {\r\n    t2 = l * (1 + s);\r\n  } else {\r\n    t2 = l + s - l * s;\r\n  }\r\n  t1 = 2 * l - t2;\r\n\r\n  rgb = [0, 0, 0];\r\n  for (var i = 0; i < 3; i++) {\r\n    t3 = h + (1 / 3) * -(i - 1);\r\n    if (t3 < 0) {\r\n      t3 += 1;\r\n    }\r\n    if (t3 > 1) {\r\n      t3 -= 1;\r\n    }\r\n\r\n    if (6 * t3 < 1) {\r\n      val = t1 + (t2 - t1) * 6 * t3;\r\n    } else if (2 * t3 < 1) {\r\n      val = t2;\r\n    } else if (3 * t3 < 2) {\r\n      val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\r\n    } else {\r\n      val = t1;\r\n    }\r\n\r\n    rgb[i] = val;\r\n  }\r\n\r\n  return rgb;\r\n}\r\n", "// Geometry\r\n\r\nimport { radians, degrees } from \"./math.mjs\";\r\nimport Point from \"../objects/point.mjs\";\r\n\r\n// Returns the angle between two points.\r\nexport function angle(x0, y0, x1, y1) {\r\n  return degrees(Math.atan2(y1 - y0, x1 - x0));\r\n}\r\n\r\n// Returns the distance between two points.\r\nexport function distance(x0, y0, x1, y1) {\r\n  return Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\r\n}\r\n\r\n// Returns the location of a point by rotating around origin (x0,y0).\r\nexport function coordinates(x0, y0, angle, distance) {\r\n  var x = x0 + Math.cos(radians(angle)) * distance,\r\n    y = y0 + Math.sin(radians(angle)) * distance;\r\n  return new Point(x, y);\r\n}\r\n\r\n// Determines if the given point is within the polygon, given as a list of points.\r\n\r\n// This function uses a ray casting algorithm to determine how many times\r\n// a horizontal ray starting from the point intersects with the sides of the polygon.\r\n// If it is an even number of times, the point is outside, if odd, inside.\r\n// The algorithm does not always report correctly when the point is very close to the boundary.\r\n// The polygon is passed as an array of Points.\r\n//\r\n// Based on: W. Randolph Franklin, 1970, http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\nexport function pointInPolygon(points, x, y) {\r\n  var i,\r\n    j,\r\n    x0,\r\n    y0,\r\n    x1,\r\n    y1,\r\n    odd = false,\r\n    n = points.length;\r\n\r\n  for (i = 0; i < n; i += 1) {\r\n    j = i < n - 1 ? i + 1 : 0;\r\n    x0 = points[i].x;\r\n    y0 = points[i].y;\r\n    x1 = points[j].x;\r\n    y1 = points[j].y;\r\n    if ((y0 < y && y1 >= y) || (y1 < y && y0 >= y)) {\r\n      if (x0 + ((y - y0) / (y1 - y0)) * (x1 - x0) < x) {\r\n        odd = !odd;\r\n      }\r\n    }\r\n  }\r\n  return odd;\r\n}\r\n", "// SVG Parser\r\n\r\n// The SVG engine uses code from the following libraries:\r\n// - for parsing the main svg tree: two.js - http://jonobr1.github.io/two.js/\r\n// - for constructing individual paths: canvg - https://code.google.com/p/canvg/\r\n// - for constructing arcs: fabric.js - http://fabricjs.com\r\n\r\nimport { DOMParser } from \"@xmldom/xmldom\";\r\n\r\nimport Color from \"../objects/color.mjs\";\r\nimport Group from \"../objects/group.mjs\";\r\nimport Path from \"../objects/path.mjs\";\r\nimport Point from \"../objects/point.mjs\";\r\nimport Transform from \"../objects/transform.mjs\";\r\n\r\n// var getReflection = function (a, b, relative) {\r\n//     var theta,\r\n//         d = geo.distance(a.x, a.y, b.x, b.y);\r\n\r\n//     if (d <= 0.0001) {\r\n//         return relative ? Point.ZERO : a;\r\n//     }\r\n//     theta = geo.angle(a.x, a.y, b.x, b.y);\r\n//     return new Point(\r\n//         d * Math.cos(theta) + (relative ? 0 : a.x),\r\n//         d * Math.sin(theta) + (relative ? 0 : a.y)\r\n//     );\r\n// };\r\n\r\nfunction trim(s) {\r\n  return s.replace(/^\\s+|\\s+$/g, \"\");\r\n}\r\n\r\nfunction compressSpaces(s) {\r\n  return s.replace(/[\\s\\r\\t\\n]+/gm, \" \");\r\n}\r\n\r\nfunction toNumberArray(s) {\r\n  var i,\r\n    a = trim(compressSpaces((s || \"\").replace(/,/g, \" \"))).split(\" \");\r\n  for (i = 0; i < a.length; i += 1) {\r\n    a[i] = parseFloat(a[i]);\r\n  }\r\n  return a;\r\n}\r\n\r\nfunction readSvgAttributes(node, parentAttributes) {\r\n  var fill,\r\n    fillOpacity,\r\n    stroke,\r\n    strokeOpacity,\r\n    strokeWidth,\r\n    opacity,\r\n    color,\r\n    transforms,\r\n    types,\r\n    transform,\r\n    i,\r\n    attributes;\r\n\r\n  if (parentAttributes) {\r\n    attributes = Object.create(parentAttributes);\r\n  } else {\r\n    attributes = {};\r\n  }\r\n\r\n  transforms = [];\r\n  types = {};\r\n\r\n  types.translate = function (s) {\r\n    var a = toNumberArray(s),\r\n      tx = a[0],\r\n      ty = a[1] || 0;\r\n    return new Transform().translate(tx, ty);\r\n  };\r\n\r\n  types.scale = function (s) {\r\n    var a = toNumberArray(s),\r\n      sx = a[0],\r\n      sy = a[1] || sx;\r\n    return new Transform().scale(sx, sy);\r\n  };\r\n\r\n  types.rotate = function (s) {\r\n    var t,\r\n      a = toNumberArray(s),\r\n      r = a[0],\r\n      tx = a[1] || 0,\r\n      ty = a[2] || 0;\r\n    t = new Transform();\r\n    t = t.translate(tx, ty);\r\n    t = t.rotate(r);\r\n    t = t.translate(-tx, -ty);\r\n    return t;\r\n  };\r\n\r\n  types.matrix = function (s) {\r\n    var m = toNumberArray(s);\r\n    return new Transform([m[0], m[1], 0, m[2], m[3], 0, m[4], m[5], 1]);\r\n  };\r\n\r\n  var v, data, type, s, d, elems, el;\r\n  for (var j = 0; j < node.attributes.length; j += 1) {\r\n    v = node.attributes[j];\r\n    switch (v.nodeName) {\r\n      case \"transform\":\r\n        data = trim(compressSpaces(v.nodeValue))\r\n          .replace(/\\)(\\s?,\\s?)/g, \") \")\r\n          .split(/\\s(?=[a-z])/);\r\n        for (i = 0; i < data.length; i += 1) {\r\n          type = trim(data[i].split(\"(\")[0]);\r\n          s = data[i].split(\"(\")[1].replace(\")\", \"\");\r\n          transform = types[type](s);\r\n          transforms.push(transform);\r\n        }\r\n        break;\r\n      case \"visibility\":\r\n        //          elem.visible = !!v.nodeValue;\r\n        break;\r\n      case \"stroke-linecap\":\r\n        //          elem.cap = v.nodeValue;\r\n        break;\r\n      case \"stroke-linejoin\":\r\n        //          elem.join = v.nodeValue;\r\n        break;\r\n      case \"stroke-miterlimit\":\r\n        //          elem.miter = v.nodeValue;\r\n        break;\r\n      case \"stroke-width\":\r\n        strokeWidth = parseFloat(v.nodeValue);\r\n        break;\r\n      case \"stroke-opacity\":\r\n        strokeOpacity = parseFloat(v.nodeValue);\r\n        break;\r\n      case \"fill-opacity\":\r\n        fillOpacity = parseFloat(v.nodeValue);\r\n        break;\r\n      case \"fill\":\r\n        fill = v.nodeValue;\r\n        break;\r\n      case \"stroke\":\r\n        stroke = v.nodeValue;\r\n        break;\r\n      case \"opacity\":\r\n        opacity = parseFloat(v.nodeValue);\r\n        break;\r\n      case \"color\":\r\n        color = v.nodeValue;\r\n        break;\r\n      case \"style\":\r\n        d = {};\r\n        elems = v.nodeValue.split(\";\");\r\n        for (i = 0; i < elems.length; i += 1) {\r\n          el = elems[i].split(\":\");\r\n          d[el[0].trim()] = el[1];\r\n        }\r\n        if (d.fill) {\r\n          fill = d.fill;\r\n        }\r\n        if (d.stroke) {\r\n          stroke = d.stroke;\r\n        }\r\n        if (d[\"stroke-width\"] !== undefined) {\r\n          strokeWidth = parseFloat(d[\"stroke-width\"]);\r\n        }\r\n        if (d[\"stroke-opacity\"] !== undefined) {\r\n          strokeOpacity = parseFloat(d[\"stroke-opacity\"]);\r\n        }\r\n        if (d[\"fill-opacity\"] !== undefined) {\r\n          fillOpacity = parseFloat(d[\"fill-opacity\"]);\r\n        }\r\n        if (d.opacity !== undefined) {\r\n          opacity = parseFloat(d.opacity);\r\n        }\r\n        if (d.color) {\r\n          color = d.color;\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n  if (fill !== undefined) {\r\n    attributes.fill = fill;\r\n  }\r\n  if (stroke !== undefined) {\r\n    attributes.stroke = stroke;\r\n  }\r\n  if (fillOpacity !== undefined) {\r\n    attributes.fillOpacity = fillOpacity;\r\n  }\r\n  if (strokeOpacity !== undefined) {\r\n    attributes.strokeOpacity = strokeOpacity;\r\n  }\r\n  if (strokeWidth !== undefined) {\r\n    attributes.strokeWidth = strokeWidth;\r\n  }\r\n  if (opacity !== undefined) {\r\n    attributes.opacity = opacity;\r\n  }\r\n  if (color !== undefined && color !== \"currentColor\") {\r\n    attributes.color = color;\r\n  }\r\n  if (transforms.length > 0) {\r\n    transform = new Transform();\r\n    for (i = 0; i < transforms.length; i += 1) {\r\n      transform = transform.append(transforms[i]);\r\n    }\r\n    if (!transform.isIdentity()) {\r\n      if (attributes.transform) {\r\n        attributes.transform = attributes.transform.append(transform);\r\n      } else {\r\n        attributes.transform = transform;\r\n      }\r\n    }\r\n  }\r\n  return attributes;\r\n}\r\n\r\nfunction applySvgAttributes(shape, attributes) {\r\n  var fill = attributes.fill;\r\n  if (shape.commands && shape.commands.length > 0 && fill === undefined) {\r\n    fill = \"black\";\r\n  }\r\n  var fillOpacity = attributes.fillOpacity;\r\n  var stroke = attributes.stroke;\r\n  var strokeOpacity = attributes.strokeOpacity;\r\n  var opacity = attributes.opacity;\r\n  var strokeWidth = attributes.strokeWidth;\r\n  var transform = attributes.transform;\r\n  var color = attributes.color;\r\n\r\n  if (fill === \"currentColor\") {\r\n    fill = color === undefined ? \"black\" : color;\r\n  }\r\n  if (fill !== undefined) {\r\n    fill = Color.parse(fill);\r\n    if (fillOpacity !== undefined) {\r\n      fill.a *= fillOpacity;\r\n    }\r\n    if (opacity !== undefined) {\r\n      fill.a *= opacity;\r\n    }\r\n  }\r\n\r\n  if (stroke === \"currentColor\") {\r\n    stroke = color === undefined ? \"black\" : color;\r\n  }\r\n  if (stroke !== undefined) {\r\n    stroke = Color.parse(stroke);\r\n    if (strokeOpacity !== undefined) {\r\n      stroke.a *= strokeOpacity;\r\n    }\r\n    if (opacity !== undefined) {\r\n      stroke.a *= opacity;\r\n    }\r\n  }\r\n\r\n  var commands;\r\n  if (transform) {\r\n    commands = transform.transformShape(shape).commands;\r\n  } else {\r\n    commands = shape.commands;\r\n  }\r\n  var f = fill === undefined ? shape.fill : fill,\r\n    s = stroke === undefined ? shape.stroke : stroke,\r\n    sw = strokeWidth === undefined ? shape.strokeWidth : strokeWidth;\r\n  if (sw !== undefined && transform !== undefined) {\r\n    sw *= transform.m[0];\r\n  }\r\n  return new Path(commands, f, s, sw);\r\n}\r\n\r\nfunction arcToSegments(x, y, rx, ry, large, sweep, rotateX, ox, oy) {\r\n  /*    argsString = _join.call(arguments);\r\n    if (arcToSegmentsCache[argsString]) {\r\n      return arcToSegmentsCache[argsString];\r\n    } */\r\n  var th,\r\n    sinTh,\r\n    cosTh,\r\n    px,\r\n    py,\r\n    pl,\r\n    a00,\r\n    a01,\r\n    a10,\r\n    a11,\r\n    x0,\r\n    y0,\r\n    x1,\r\n    y1,\r\n    d,\r\n    sFactorSq,\r\n    sFactor,\r\n    xc,\r\n    yc,\r\n    th0,\r\n    th1,\r\n    thArc,\r\n    segments,\r\n    result,\r\n    th2,\r\n    th3,\r\n    i;\r\n\r\n  th = rotateX * (Math.PI / 180);\r\n  sinTh = Math.sin(th);\r\n  cosTh = Math.cos(th);\r\n  rx = Math.abs(rx);\r\n  ry = Math.abs(ry);\r\n  px = cosTh * (ox - x) * 0.5 + sinTh * (oy - y) * 0.5;\r\n  py = cosTh * (oy - y) * 0.5 - sinTh * (ox - x) * 0.5;\r\n  pl = (px * px) / (rx * rx) + (py * py) / (ry * ry);\r\n  if (pl > 1) {\r\n    pl = Math.sqrt(pl);\r\n    rx *= pl;\r\n    ry *= pl;\r\n  }\r\n\r\n  a00 = cosTh / rx;\r\n  a01 = sinTh / rx;\r\n  a10 = -sinTh / ry;\r\n  a11 = cosTh / ry;\r\n  x0 = a00 * ox + a01 * oy;\r\n  y0 = a10 * ox + a11 * oy;\r\n  x1 = a00 * x + a01 * y;\r\n  y1 = a10 * x + a11 * y;\r\n\r\n  d = (x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0);\r\n  sFactorSq = 1 / d - 0.25;\r\n  if (sFactorSq < 0) {\r\n    sFactorSq = 0;\r\n  }\r\n  sFactor = Math.sqrt(sFactorSq);\r\n  if (sweep === large) {\r\n    sFactor = -sFactor;\r\n  }\r\n  xc = 0.5 * (x0 + x1) - sFactor * (y1 - y0);\r\n  yc = 0.5 * (y0 + y1) + sFactor * (x1 - x0);\r\n\r\n  th0 = Math.atan2(y0 - yc, x0 - xc);\r\n  th1 = Math.atan2(y1 - yc, x1 - xc);\r\n\r\n  thArc = th1 - th0;\r\n  if (thArc < 0 && sweep === 1) {\r\n    thArc += 2 * Math.PI;\r\n  } else if (thArc > 0 && sweep === 0) {\r\n    thArc -= 2 * Math.PI;\r\n  }\r\n\r\n  segments = Math.ceil(Math.abs(thArc / (Math.PI * 0.5 + 0.001)));\r\n  result = [];\r\n  for (i = 0; i < segments; i += 1) {\r\n    th2 = th0 + (i * thArc) / segments;\r\n    th3 = th0 + ((i + 1) * thArc) / segments;\r\n    result[i] = [xc, yc, th2, th3, rx, ry, sinTh, cosTh];\r\n  }\r\n\r\n  //    arcToSegmentsCache[argsString] = result;\r\n  return result;\r\n}\r\n\r\nfunction segmentToBezier(cx, cy, th0, th1, rx, ry, sinTh, cosTh) {\r\n  //    argsString = _join.call(arguments);\r\n  //    if (segmentToBezierCache[argsString]) {\r\n  //      return segmentToBezierCache[argsString];\r\n  //    }\r\n\r\n  var a00 = cosTh * rx,\r\n    a01 = -sinTh * ry,\r\n    a10 = sinTh * rx,\r\n    a11 = cosTh * ry,\r\n    thHalf = 0.5 * (th1 - th0),\r\n    t =\r\n      ((8 / 3) * Math.sin(thHalf * 0.5) * Math.sin(thHalf * 0.5)) /\r\n      Math.sin(thHalf),\r\n    x1 = cx + Math.cos(th0) - t * Math.sin(th0),\r\n    y1 = cy + Math.sin(th0) + t * Math.cos(th0),\r\n    x3 = cx + Math.cos(th1),\r\n    y3 = cy + Math.sin(th1),\r\n    x2 = x3 + t * Math.sin(th1),\r\n    y2 = y3 - t * Math.cos(th1);\r\n\r\n  //    segmentToBezierCache[argsString] = [\r\n  return [\r\n    a00 * x1 + a01 * y1,\r\n    a10 * x1 + a11 * y1,\r\n    a00 * x2 + a01 * y2,\r\n    a10 * x2 + a11 * y2,\r\n    a00 * x3 + a01 * y3,\r\n    a10 * x3 + a11 * y3,\r\n  ];\r\n\r\n  //    return segmentToBezierCache[argsString];\r\n}\r\n\r\nconst read = {\r\n  svg: function () {\r\n    return read.g.apply(this, arguments);\r\n  },\r\n\r\n  g: function (node, parentAttributes) {\r\n    var shapes = [];\r\n    var attributes = readSvgAttributes(node, parentAttributes);\r\n    var n, tag, tagName, o;\r\n    for (var i = 0; i < node.childNodes.length; i += 1) {\r\n      n = node.childNodes[i];\r\n      tag = n.nodeName;\r\n      if (!tag) {\r\n        return;\r\n      }\r\n      tagName = tag.replace(/svg\\:/gi, \"\").toLowerCase();\r\n      if (read[tagName] !== undefined) {\r\n        o = read[tagName].call(this, n, attributes);\r\n        shapes.push(o);\r\n      }\r\n    }\r\n    return new Group(shapes);\r\n  },\r\n\r\n  _polyline: function (node) {\r\n    var points = node.getAttribute(\"points\");\r\n    var p = new Path();\r\n    points.replace(/([\\d\\.?]+),([\\d\\.?]+)/g, function (match, p1, p2) {\r\n      var x = parseFloat(p1);\r\n      var y = parseFloat(p2);\r\n      if (p.commands.length === 0) {\r\n        p.moveTo(x, y);\r\n      } else {\r\n        p.lineTo(x, y);\r\n      }\r\n    });\r\n    return p;\r\n  },\r\n\r\n  polygon: function (node, parentAttributes) {\r\n    var attributes = readSvgAttributes(node, parentAttributes);\r\n    var p = read._polyline(node);\r\n    p.close();\r\n    return applySvgAttributes(p, attributes);\r\n  },\r\n\r\n  polyline: function (node, parentAttributes) {\r\n    var attributes = readSvgAttributes(node, parentAttributes);\r\n    var p = read._polyline(node);\r\n    return applySvgAttributes(p, attributes);\r\n  },\r\n\r\n  rect: function (node, parentAttributes) {\r\n    var attributes = readSvgAttributes(node, parentAttributes);\r\n    var x = parseFloat(node.getAttribute(\"x\"));\r\n    var y = parseFloat(node.getAttribute(\"y\"));\r\n    if (!x) {\r\n      x = 0;\r\n    }\r\n    if (!y) {\r\n      y = 0;\r\n    }\r\n    var width = parseFloat(node.getAttribute(\"width\"));\r\n    var height = parseFloat(node.getAttribute(\"height\"));\r\n    if (!width) {\r\n      width = 0;\r\n    }\r\n    if (!height) {\r\n      height = 0;\r\n    }\r\n    if (width < 0) {\r\n      console.error(\r\n        'Error: invalid negative value for <rect> attribute width=\"' +\r\n          width +\r\n          '\"'\r\n      );\r\n      width = 0;\r\n    }\r\n    if (height < 0) {\r\n      console.error(\r\n        'Error: invalid negative value for <rect> attribute height=\"' +\r\n          height +\r\n          '\"'\r\n      );\r\n      height = 0;\r\n    }\r\n    var rx = parseFloat(node.getAttribute(\"rx\"));\r\n    var ry = parseFloat(node.getAttribute(\"ry\"));\r\n    if (!rx) {\r\n      rx = 0;\r\n    }\r\n    if (!ry) {\r\n      ry = 0;\r\n    }\r\n    if (rx < 0) {\r\n      console.error(\r\n        'Error: invalid negative value for <rect> attribute rx=\"' + rx + '\"'\r\n      );\r\n      rx = 0;\r\n    }\r\n    if (ry < 0) {\r\n      console.error(\r\n        'Error: invalid negative value for <rect> attribute ry=\"' + ry + '\"'\r\n      );\r\n      ry = 0;\r\n    }\r\n    if (!rx || !ry) {\r\n      rx = ry = Math.max(rx, ry);\r\n    }\r\n    if (rx > width / 2) {\r\n      rx = width / 2;\r\n    }\r\n    if (ry > height / 2) {\r\n      ry = height / 2;\r\n    }\r\n    var p = new Path();\r\n    if (rx && ry) {\r\n      p.addRoundedRect(x, y, width, height, rx, ry);\r\n    } else {\r\n      p.addRect(x, y, width, height);\r\n    }\r\n    return applySvgAttributes(p, attributes);\r\n  },\r\n\r\n  ellipse: function (node, parentAttributes) {\r\n    var attributes = readSvgAttributes(node, parentAttributes);\r\n    var cx = parseFloat(node.getAttribute(\"cx\"));\r\n    var cy = parseFloat(node.getAttribute(\"cy\"));\r\n    if (!cx) {\r\n      cx = 0;\r\n    }\r\n    if (!cy) {\r\n      cy = 0;\r\n    }\r\n    var rx = parseFloat(node.getAttribute(\"rx\"));\r\n    var ry = parseFloat(node.getAttribute(\"ry\"));\r\n    if (!rx) {\r\n      rx = 0;\r\n    }\r\n    if (!ry) {\r\n      ry = 0;\r\n    }\r\n    if (rx < 0) {\r\n      console.error(\r\n        'Error: invalid negative value for <ellipse> attribute rx=\"' + rx + '\"'\r\n      );\r\n      rx = 0;\r\n    }\r\n    if (ry < 0) {\r\n      console.error(\r\n        'Error: invalid negative value for <ellipse> attribute ry=\"' + ry + '\"'\r\n      );\r\n      ry = 0;\r\n    }\r\n    var p = new Path();\r\n    p.addEllipse(cx - rx, cy - ry, rx * 2, ry * 2);\r\n    return applySvgAttributes(p, attributes);\r\n  },\r\n\r\n  circle: function (node, parentAttributes) {\r\n    var attributes = readSvgAttributes(node, parentAttributes);\r\n    var cx = parseFloat(node.getAttribute(\"cx\"));\r\n    var cy = parseFloat(node.getAttribute(\"cy\"));\r\n    if (!cx) {\r\n      cx = 0;\r\n    }\r\n    if (!cy) {\r\n      cy = 0;\r\n    }\r\n    var r = parseFloat(node.getAttribute(\"r\"));\r\n    if (!r) {\r\n      r = 0;\r\n    }\r\n    if (r < 0) {\r\n      console.error(\r\n        'Error: invalid negative value for <circle> attribute r=\"' + r + '\"'\r\n      );\r\n      r = 0;\r\n    }\r\n    var p = new Path();\r\n    p.addEllipse(cx - r, cy - r, r * 2, r * 2);\r\n    return applySvgAttributes(p, attributes);\r\n  },\r\n\r\n  line: function (node, parentAttributes) {\r\n    var attributes = readSvgAttributes(node, parentAttributes);\r\n    var x1 = parseFloat(node.getAttribute(\"x1\"));\r\n    var y1 = parseFloat(node.getAttribute(\"y1\"));\r\n    var x2 = parseFloat(node.getAttribute(\"x2\"));\r\n    var y2 = parseFloat(node.getAttribute(\"y2\"));\r\n    if (!x1) {\r\n      x1 = 0;\r\n    }\r\n    if (!y1) {\r\n      y1 = 0;\r\n    }\r\n    if (!x2) {\r\n      x2 = 0;\r\n    }\r\n    if (!y2) {\r\n      y2 = 0;\r\n    }\r\n    var p = new Path();\r\n    p.addLine(x1, y1, x2, y2);\r\n    return applySvgAttributes(p, attributes);\r\n  },\r\n\r\n  path: function (node, parentAttributes) {\r\n    var attributes = readSvgAttributes(node, parentAttributes);\r\n    var d,\r\n      PathParser,\r\n      pp,\r\n      pt,\r\n      newP,\r\n      curr,\r\n      p1,\r\n      cntrl,\r\n      cp,\r\n      cp1x,\r\n      cp1y,\r\n      cp2x,\r\n      cp2y,\r\n      rx,\r\n      ry,\r\n      rot,\r\n      large,\r\n      sweep,\r\n      ex,\r\n      ey,\r\n      segs,\r\n      i,\r\n      bez;\r\n    // TODO: convert to real lexer based on http://www.w3.org/TR/SVG11/paths.html#PathDataBNF\r\n    d = node.getAttribute(\"d\");\r\n    d = d.replace(/,/gm, \" \"); // get rid of all commas\r\n    d = d.replace(\r\n      /([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,\r\n      \"$1 $2\"\r\n    ); // separate commands from commands\r\n    d = d.replace(\r\n      /([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,\r\n      \"$1 $2\"\r\n    ); // separate commands from commands\r\n    d = d.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\\s])/gm, \"$1 $2\"); // separate commands from points\r\n    d = d.replace(/([^\\s])([MmZzLlHhVvCcSsQqTtAa])/gm, \"$1 $2\"); // separate commands from points\r\n    d = d.replace(/([0-9])([+\\-])/gm, \"$1 $2\"); // separate digits when no comma\r\n    d = d.replace(/(\\.[0-9]*)(\\.)/gm, \"$1 $2\"); // separate digits when no comma\r\n    d = d.replace(/([Aa](\\s+[0-9]+){3})\\s+([01])\\s*([01])/gm, \"$1 $3 $4 \"); // shorthand elliptical arc path syntax\r\n    d = compressSpaces(d); // compress multiple spaces\r\n    d = trim(d);\r\n\r\n    PathParser = function (d) {\r\n      this.tokens = d.split(\" \");\r\n\r\n      this.reset = function () {\r\n        this.i = -1;\r\n        this.command = \"\";\r\n        this.previousCommand = \"\";\r\n        this.start = new Point(0, 0);\r\n        this.control = new Point(0, 0);\r\n        this.current = new Point(0, 0);\r\n        this.points = [];\r\n        this.angles = [];\r\n      };\r\n\r\n      this.isEnd = function () {\r\n        return this.i >= this.tokens.length - 1;\r\n      };\r\n\r\n      this.isCommandOrEnd = function () {\r\n        if (this.isEnd()) {\r\n          return true;\r\n        }\r\n        return this.tokens[this.i + 1].match(/^[A-Za-z]$/) !== null;\r\n      };\r\n\r\n      this.isRelativeCommand = function () {\r\n        switch (this.command) {\r\n          case \"m\":\r\n          case \"l\":\r\n          case \"h\":\r\n          case \"v\":\r\n          case \"c\":\r\n          case \"s\":\r\n          case \"q\":\r\n          case \"t\":\r\n          case \"a\":\r\n          case \"z\":\r\n            return true;\r\n        }\r\n        return false;\r\n      };\r\n\r\n      this.getToken = function () {\r\n        this.i += 1;\r\n        return this.tokens[this.i];\r\n      };\r\n\r\n      this.getScalar = function () {\r\n        return parseFloat(this.getToken());\r\n      };\r\n\r\n      this.nextCommand = function () {\r\n        this.previousCommand = this.command;\r\n        this.command = this.getToken();\r\n      };\r\n\r\n      this.getPoint = function () {\r\n        var pt = new Point(this.getScalar(), this.getScalar());\r\n        return this.makeAbsolute(pt);\r\n      };\r\n\r\n      this.getAsControlPoint = function () {\r\n        var pt = this.getPoint();\r\n        this.control = pt;\r\n        return pt;\r\n      };\r\n\r\n      this.getAsCurrentPoint = function () {\r\n        var pt = this.getPoint();\r\n        this.current = pt;\r\n        return pt;\r\n      };\r\n\r\n      this.getReflectedControlPoint = function () {\r\n        if (\r\n          this.previousCommand.toLowerCase() !== \"c\" &&\r\n          this.previousCommand.toLowerCase() !== \"s\" &&\r\n          this.previousCommand.toLowerCase() !== \"q\" &&\r\n          this.previousCommand.toLowerCase() !== \"t\"\r\n        ) {\r\n          return this.current;\r\n        }\r\n\r\n        // reflect point\r\n        var pt = new Point(\r\n          2 * this.current.x - this.control.x,\r\n          2 * this.current.y - this.control.y\r\n        );\r\n        return pt;\r\n      };\r\n\r\n      this.makeAbsolute = function (pt) {\r\n        if (this.isRelativeCommand()) {\r\n          return new Point(pt.x + this.current.x, pt.y + this.current.y);\r\n        }\r\n        return pt;\r\n      };\r\n    };\r\n\r\n    var p = new Path();\r\n\r\n    pp = new PathParser(d);\r\n    pp.reset();\r\n\r\n    while (!pp.isEnd()) {\r\n      pp.nextCommand();\r\n      switch (pp.command) {\r\n        case \"M\":\r\n        case \"m\":\r\n          pt = pp.getAsCurrentPoint();\r\n          p.moveTo(pt.x, pt.y);\r\n          pp.start = pp.current;\r\n          while (!pp.isCommandOrEnd()) {\r\n            pt = pp.getAsCurrentPoint();\r\n            p.lineTo(pt.x, pt.y);\r\n          }\r\n          break;\r\n        case \"L\":\r\n        case \"l\":\r\n          while (!pp.isCommandOrEnd()) {\r\n            pt = pp.getAsCurrentPoint();\r\n            p.lineTo(pt.x, pt.y);\r\n          }\r\n          break;\r\n        case \"H\":\r\n        case \"h\":\r\n          while (!pp.isCommandOrEnd()) {\r\n            newP = new Point(\r\n              (pp.isRelativeCommand() ? pp.current.x : 0) + pp.getScalar(),\r\n              pp.current.y\r\n            );\r\n            pp.current = newP;\r\n            p.lineTo(pp.current.x, pp.current.y);\r\n          }\r\n          break;\r\n        case \"V\":\r\n        case \"v\":\r\n          while (!pp.isCommandOrEnd()) {\r\n            newP = new Point(\r\n              pp.current.x,\r\n              (pp.isRelativeCommand() ? pp.current.y : 0) + pp.getScalar()\r\n            );\r\n            pp.current = newP;\r\n            p.lineTo(pp.current.x, pp.current.y);\r\n          }\r\n          break;\r\n        case \"C\":\r\n        case \"c\":\r\n          while (!pp.isCommandOrEnd()) {\r\n            curr = pp.current;\r\n            p1 = pp.getPoint();\r\n            cntrl = pp.getAsControlPoint();\r\n            cp = pp.getAsCurrentPoint();\r\n            p.curveTo(p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\r\n          }\r\n          break;\r\n        case \"S\":\r\n        case \"s\":\r\n          while (!pp.isCommandOrEnd()) {\r\n            curr = pp.current;\r\n            p1 = pp.getReflectedControlPoint();\r\n            cntrl = pp.getAsControlPoint();\r\n            cp = pp.getAsCurrentPoint();\r\n            p.curveTo(p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\r\n          }\r\n          break;\r\n        case \"Q\":\r\n        case \"q\":\r\n          while (!pp.isCommandOrEnd()) {\r\n            curr = pp.current;\r\n            cntrl = pp.getAsControlPoint();\r\n            cp = pp.getAsCurrentPoint();\r\n            cp1x = curr.x + (2 / 3) * (cntrl.x - curr.x); // CP1 = QP0 + 2 / 3 *(QP1-QP0)\r\n            cp1y = curr.y + (2 / 3) * (cntrl.y - curr.y); // CP1 = QP0 + 2 / 3 *(QP1-QP0)\r\n            cp2x = cp1x + (1 / 3) * (cp.x - curr.x); // CP2 = CP1 + 1 / 3 *(QP2-QP0)\r\n            cp2y = cp1y + (1 / 3) * (cp.y - curr.y); // CP2 = CP1 + 1 / 3 *(QP2-QP0)\r\n            p.curveTo(cp1x, cp1y, cp2x, cp2y, cp.x, cp.y);\r\n          }\r\n          break;\r\n        case \"T\":\r\n        case \"t\":\r\n          while (!pp.isCommandOrEnd()) {\r\n            curr = pp.current;\r\n            cntrl = pp.getReflectedControlPoint();\r\n            pp.control = cntrl;\r\n            cp = pp.getAsCurrentPoint();\r\n            cp1x = curr.x + (2 / 3) * (cntrl.x - curr.x); // CP1 = QP0 + 2 / 3 *(QP1-QP0)\r\n            cp1y = curr.y + (2 / 3) * (cntrl.y - curr.y); // CP1 = QP0 + 2 / 3 *(QP1-QP0)\r\n            cp2x = cp1x + (1 / 3) * (cp.x - curr.x); // CP2 = CP1 + 1 / 3 *(QP2-QP0)\r\n            cp2y = cp1y + (1 / 3) * (cp.y - curr.y); // CP2 = CP1 + 1 / 3 *(QP2-QP0)\r\n            p.curveTo(cp1x, cp1y, cp2x, cp2y, cp.x, cp.y);\r\n          }\r\n          break;\r\n        case \"A\":\r\n        case \"a\":\r\n          while (!pp.isCommandOrEnd()) {\r\n            curr = pp.current;\r\n            rx = pp.getScalar();\r\n            ry = pp.getScalar();\r\n            rot = pp.getScalar(); // * (Math.PI / 180.0);\r\n            large = pp.getScalar();\r\n            sweep = pp.getScalar();\r\n            cp = pp.getAsCurrentPoint();\r\n            ex = cp.x;\r\n            ey = cp.y;\r\n            segs = arcToSegments(\r\n              ex,\r\n              ey,\r\n              rx,\r\n              ry,\r\n              large,\r\n              sweep,\r\n              rot,\r\n              curr.x,\r\n              curr.y\r\n            );\r\n            for (i = 0; i < segs.length; i += 1) {\r\n              bez = segmentToBezier.apply(this, segs[i]);\r\n              p.curveTo.apply(p, bez);\r\n            }\r\n          }\r\n          break;\r\n        case \"Z\":\r\n        case \"z\":\r\n          p.close();\r\n          pp.current = pp.start;\r\n          break;\r\n      }\r\n    }\r\n    return applySvgAttributes(p, attributes);\r\n  },\r\n};\r\n\r\nexport function interpret(svgNode) {\r\n  var node,\r\n    tag = svgNode.tagName.toLowerCase();\r\n  if (read[tag] === undefined) {\r\n    return null;\r\n  }\r\n\r\n  node = read[tag].call(this, svgNode);\r\n  return node;\r\n}\r\n\r\nexport function parseString(s) {\r\n  var doc = new DOMParser({\r\n    errorHandler: function (key, msg) {\r\n      throw new Error('Could not parse string \"' + String(s) + '\": ' + msg);\r\n    },\r\n  }).parseFromString(s);\r\n  if (doc) {\r\n    return interpret(doc.documentElement);\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n", "\"use strict\";\r\n\r\nimport randomGenerator from \"./random.mjs\";\r\nimport { noise } from \"./vg/index.mjs\";\r\n\r\nconst TWO_PI = Math.PI * 2;\r\n\r\nexport const abs = Math.abs;\r\n\r\nfunction _checkIfFirstArgIsArray(args) {\r\n  if (args.length === 1 && Array.isArray(args[0])) {\r\n    args = args[0];\r\n  }\r\n  return args;\r\n}\r\n\r\nexport function accumulate(...args) {\r\n  args = _checkIfFirstArgIsArray(args);\r\n  const result = [];\r\n  let sum = 0;\r\n  for (let i = 0; i < args.length; i++) {\r\n    sum += args[i];\r\n    result.push(sum);\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function add(...args) {\r\n  if (args.length === 2) {\r\n    return args[0] + args[1];\r\n  }\r\n  return args.reduce((a, b) => a + b);\r\n}\r\n\r\nexport function and(...args) {\r\n  var argLength = args.length;\r\n  if (argLength === 2) {\r\n    return args[0] && args[1];\r\n  } else if (argLength === 1) {\r\n    return !!args[0];\r\n  } else if (argLength === 0) {\r\n    throw new Error(\"Wrong number of arguments\");\r\n  }\r\n  return args.reduce((a, b) => a && b, true);\r\n}\r\n\r\nexport function average(...args) {\r\n  args = _checkIfFirstArgIsArray(args);\r\n  if (args.length === 0) {\r\n    return 0;\r\n  }\r\n  return args.reduce((a, b) => a + b, 0) / args.length;\r\n}\r\n\r\nexport function boolean(v) {\r\n  return !!v;\r\n}\r\n\r\nexport const ceil = Math.ceil;\r\n\r\nexport function clamp(v, min, max) {\r\n  min = typeof min === \"number\" ? min : 0;\r\n  max = typeof max === \"number\" ? max : 1;\r\n  return v < min ? min : v > max ? max : v;\r\n}\r\n\r\nexport function compare(v1, v2, comparator) {\r\n  if (comparator === \"<\") {\r\n    return v1 < v2;\r\n  } else if (comparator === \">\") {\r\n    return v1 > v2;\r\n  } else if (comparator === \"<=\") {\r\n    return v1 <= v2;\r\n  } else if (comparator === \">=\") {\r\n    return v1 >= v2;\r\n  } else if (comparator === \"==\") {\r\n    return v1 === v2;\r\n  } else if (comparator === \"!=\") {\r\n    return v1 !== v2;\r\n  }\r\n  throw new Error(\"Unknown comparison operation \" + comparator);\r\n}\r\n\r\nexport const cos = Math.cos;\r\n\r\nexport function degrees(radians) {\r\n  return (radians * 180) / Math.PI;\r\n}\r\n\r\nexport function divide(...args) {\r\n  var argLength = args.length;\r\n  function checkIfZero(arg) {\r\n    if (arg === 0) {\r\n      throw new Error(\"Divide by zero\");\r\n    }\r\n  }\r\n  if (args === 2) {\r\n    checkIfZero(args[1]);\r\n    return a / args[1];\r\n  } else if (argLength === 1) {\r\n    return a;\r\n  } else if (argLength === 0) {\r\n    throw new Error(\"Wrong number of arguments\");\r\n  }\r\n  return args.reduce((a, b) => {\r\n    checkIfZero(b);\r\n    return a / b;\r\n  });\r\n}\r\n\r\nexport function e() {\r\n  return Math.E;\r\n}\r\n\r\nexport function even(v) {\r\n  return v % 2 === 0;\r\n}\r\n\r\nexport const floor = Math.floor;\r\n\r\nexport function integer(v) {\r\n  return v | 0;\r\n}\r\n\r\nexport function log(v) {\r\n  return v > 0 ? Math.log(v) : -Math.log(-v);\r\n}\r\n\r\nexport function makeNumbers(s, separator) {\r\n  if (!s) {\r\n    return [];\r\n  }\r\n  if (!separator) {\r\n    separator = \"\";\r\n  }\r\n  var i,\r\n    num,\r\n    numbers = [],\r\n    strings = s.split(separator);\r\n  for (i = 0; i < strings.length; i += 1) {\r\n    num = parseFloat(strings[i]);\r\n    if (num === 0 || num) {\r\n      numbers.push(num);\r\n    }\r\n  }\r\n  return numbers;\r\n}\r\n\r\nexport function max(...args) {\r\n  args = _checkIfFirstArgIsArray(args);\r\n  if (args.length === 0) {\r\n    return 0;\r\n  }\r\n  return Math.max.apply(null, args);\r\n}\r\n\r\nexport function min(...args) {\r\n  args = _checkIfFirstArgIsArray(args);\r\n  if (args.length === 0) {\r\n    return 0;\r\n  }\r\n  return Math.min.apply(null, args);\r\n}\r\n\r\nexport function mod(a, b) {\r\n  return a % b;\r\n}\r\n\r\nexport function multiply(...args) {\r\n  var argLength = args.length;\r\n  if (argLength === 2) {\r\n    return args[0] * args[1];\r\n  } else if (argLength === 1) {\r\n    return args[0];\r\n  }\r\n  return args.reduce((a, b) => a * b, 1);\r\n}\r\n\r\nexport function negate(v) {\r\n  return -v;\r\n}\r\n\r\nexport function not(bool) {\r\n  return !bool;\r\n}\r\n\r\nexport function number(v) {\r\n  return v;\r\n}\r\n\r\nexport function odd(v) {\r\n  return v % 2 !== 0;\r\n}\r\n\r\nexport function or(...args) {\r\n  var argLength = args.length;\r\n  if (argLength === 2) {\r\n    return args[0] || args[1];\r\n  } else if (argLength === 1) {\r\n    return !!args[0];\r\n  } else if (argLength === 0) {\r\n    throw new Error(\"Wrong number of arguments\");\r\n  }\r\n  return args.reduce((a, b) => a || b, false);\r\n}\r\n\r\n// Compute Perlin noise\r\nexport function perlinNoise(x, y, z) {\r\n  // Call optimized internal noise function.\r\n  return noise(x, y, z);\r\n}\r\n\r\nexport function pi() {\r\n  return Math.PI;\r\n}\r\n\r\nexport const pow = Math.pow;\r\n\r\nexport function radians(degrees) {\r\n  return (degrees * Math.PI) / 180;\r\n}\r\n\r\nexport function randomNumbers(amount, min, max, seed) {\r\n  var argLength = arguments.length;\r\n  if (argLength < 4 || (!seed && seed !== 0)) {\r\n    seed = Math.random();\r\n  }\r\n  if (argLength === 3 || argLength === 4) {\r\n    min = min || 0;\r\n    max = max || (max === 0 ? 0 : 1);\r\n  } else if (argLength === 2) {\r\n    max = min || (min === 0 ? 0 : 1);\r\n    min = 0;\r\n  } else if (argLength === 1) {\r\n    min = 0;\r\n    max = 1;\r\n  }\r\n  if (max < min) {\r\n    var tmp = max;\r\n    max = min;\r\n    min = tmp;\r\n  }\r\n  var v;\r\n  var delta = max - min;\r\n  var numbers = [];\r\n  var rand = randomGenerator(seed || 0);\r\n  for (var i = 0; i < amount; i += 1) {\r\n    v = min + rand(0, 1) * delta;\r\n    numbers.push(v);\r\n  }\r\n  return numbers;\r\n}\r\n\r\nexport function range(min, max, step, includeMax) {\r\n  if (min === max) {\r\n    return [];\r\n  }\r\n  if (step !== 0) {\r\n    step = step || (min < max ? 1 : -1);\r\n  }\r\n  if (step > 0 && min > max) return [];\r\n  if (step < 0 && min < max) return [];\r\n  if (step === 0) return [];\r\n  var values = [];\r\n  var i;\r\n  if (min < max) {\r\n    if (!!includeMax) {\r\n      for (i = min; i <= max; i += step) {\r\n        values.push(i);\r\n      }\r\n    } else {\r\n      for (i = min; i < max; i += step) {\r\n        values.push(i);\r\n      }\r\n    }\r\n  } else {\r\n    if (!!includeMax) {\r\n      for (i = min; i >= max; i += step) {\r\n        values.push(i);\r\n      }\r\n    } else {\r\n      for (i = min; i > max; i += step) {\r\n        values.push(i);\r\n      }\r\n    }\r\n  }\r\n  return values;\r\n}\r\n\r\nexport function round(v, a) {\r\n  a = a | 0;\r\n  if (!a) {\r\n    return Math.round(v);\r\n  }\r\n  return Math.round(v / a) * a;\r\n}\r\n\r\nexport function sample(amount, min, max, circular) {\r\n  var d,\r\n    values = [],\r\n    i;\r\n  values.length = amount;\r\n  if (circular) {\r\n    d = (max - min) / amount;\r\n  } else {\r\n    d = (max - min) / (amount - 1);\r\n  }\r\n  for (i = 0; i < amount; i += 1) {\r\n    values[i] = min + i * d;\r\n  }\r\n  return values;\r\n}\r\n\r\nexport function sineWave(v, min, max, period, offset) {\r\n  if (min === undefined) min = -1;\r\n  if (max === undefined) max = 1;\r\n  if (period === undefined) period = 1;\r\n  if (offset === undefined) offset = 0;\r\n  var amplitude = (max - min) / 2;\r\n  return (\r\n    min + amplitude + Math.sin(((offset + v) * TWO_PI) / period) * amplitude\r\n  );\r\n}\r\n\r\nexport function squareWave(v, min, max, period, offset) {\r\n  if (min === undefined) min = -1;\r\n  if (max === undefined) max = 1;\r\n  if (period === undefined) period = 1;\r\n  if (offset === undefined) offset = 0;\r\n  var halfPeriod = period / 2;\r\n  var d = (v + offset) % period;\r\n  if (d < halfPeriod) {\r\n    return max;\r\n  } else {\r\n    return min;\r\n  }\r\n}\r\n\r\nexport function triangleWave(v, min, max, period, offset) {\r\n  if (min === undefined) min = -1;\r\n  if (max === undefined) max = 1;\r\n  if (period === undefined) period = 1;\r\n  if (offset === undefined) offset = 0;\r\n  var amplitude = (max - min) / 2,\r\n    frequency = TWO_PI / period,\r\n    phase = 0,\r\n    time = v + offset + period / 4;\r\n  if (time % period !== 0) {\r\n    phase = (time * frequency) % TWO_PI;\r\n  }\r\n  if (phase < 0) {\r\n    phase += TWO_PI;\r\n  }\r\n  return 2 * amplitude * (1 + -Math.abs((phase / TWO_PI) * 2 - 1)) + min;\r\n}\r\n\r\nexport function sawtoothWave(v, min, max, period, offset) {\r\n  if (min === undefined) min = -1;\r\n  if (max === undefined) max = 1;\r\n  if (period === undefined) period = 1;\r\n  if (offset === undefined) offset = 0;\r\n  var amplitude = (max - min) / 2,\r\n    frequency = TWO_PI / period,\r\n    phase = 0,\r\n    time = v + offset;\r\n  if (time % period !== 0) {\r\n    phase = (time * frequency) % TWO_PI;\r\n  }\r\n  if (phase < 0) {\r\n    phase += TWO_PI;\r\n  }\r\n  return 2 * (phase / TWO_PI) * amplitude + min;\r\n}\r\n\r\nexport function sign(v) {\r\n  if (v > 0) {\r\n    return 1;\r\n  } else if (v === 0) {\r\n    return 0;\r\n  } else {\r\n    return -1;\r\n  }\r\n}\r\n\r\nexport const sin = Math.sin;\r\n\r\nexport const sqrt = Math.sqrt;\r\n\r\nexport function subtract(...args) {\r\n  var argLength = args.length;\r\n  if (argLength === 2) {\r\n    return args[0] - args[1];\r\n  } else if (argLength === 1) {\r\n    return -args[0];\r\n  } else if (argLength === 0) {\r\n    throw new Error(\"Wrong number of arguments\");\r\n  }\r\n  return args.reduce((total, n) => total - n);\r\n}\r\n\r\nexport const tan = Math.tan;\r\n\r\nexport function total(...args) {\r\n  args = _checkIfFirstArgIsArray(args);\r\n  return args.reduce((a, b) => a + b, 0);\r\n}\r\n\r\nexport function xor(bool1, bool2) {\r\n  var argLength = arguments.length;\r\n  if (argLength === 2) {\r\n    return !!(bool1 ^ bool2);\r\n  } else {\r\n    throw new Error(\"Wrong number of arguments\");\r\n  }\r\n}\r\n", "// Pseudo-random generator\r\n\r\n// Generate a random function that is seeded with the given value.\r\nexport default function generator(seed) {\r\n  // Note: the generator didn't work with negative seed values, so here we\r\n  // transform our original seed into a new (positive) seed value with which we\r\n  // create a new generator.\r\n  if (seed < 0) {\r\n    var gen = generator(Math.abs(seed));\r\n    for (var i = 0; i < 23; i += 1) {\r\n      gen();\r\n    }\r\n    return generator(gen(0, 10000));\r\n  }\r\n\r\n  // Based on random number generator from\r\n  // http://indiegamr.com/generate-repeatable-random-numbers-in-js/\r\n  return function (min, max) {\r\n    min = min || 0;\r\n    max = max || 1;\r\n    seed = (seed * 9301 + 49297) % 233280;\r\n    var v = seed / 233280;\r\n    return min + v * (max - min);\r\n  };\r\n}\r\n", "// Generic JavaScript utility methods\r\n\r\n// Define a property that serves as an alias for another property.\r\nexport function defineAlias(cls, origProperty, newProperty) {\r\n  Object.defineProperty(cls.prototype, newProperty, {\r\n    get: function () {\r\n      return this[origProperty];\r\n    },\r\n\r\n    set: function (v) {\r\n      this[origProperty] = v;\r\n    },\r\n  });\r\n}\r\n\r\n// Define a property on the class prototype that has a single getter function.\r\nexport function defineGetter(cls, property, getterFn) {\r\n  Object.defineProperty(cls.prototype, property, {\r\n    get: getterFn,\r\n  });\r\n}\r\n", "// Color object\r\n\r\nimport { clamp } from \"../../math.mjs\";\r\nimport * as color from \"../util/color.mjs\";\r\nimport { defineAlias, defineGetter } from \"../util/js.mjs\";\r\n\r\nconst RGB = \"RGB\";\r\nconst HSB = \"HSB\";\r\nconst HSL = \"HSL\";\r\nconst HEX = \"HEX\";\r\n\r\nexport default class Color {\r\n  constructor(v1, v2, v3, v4, v5) {\r\n    var _r, _g, _b, _a, rgb, options;\r\n    if (v1 === undefined) {\r\n      _r = _g = _b = 0;\r\n      _a = 1;\r\n    } else if (Array.isArray(v1)) {\r\n      options = v2 || {};\r\n      _r = v1[0] !== undefined ? v1[0] : 0;\r\n      _g = v1[1] !== undefined ? v1[1] : 0;\r\n      _b = v1[2] !== undefined ? v1[2] : 0;\r\n      _a = v1[3] !== undefined ? v1[3] : options.range || 1;\r\n    } else if (v1.r !== undefined) {\r\n      options = v2 || {};\r\n      _r = v1.r;\r\n      _g = v1.g;\r\n      _b = v1.b;\r\n      _a = v1.a !== undefined ? v1.a : options.range || 1;\r\n    } else if (typeof v1 === \"string\") {\r\n      rgb = color.hex2rgb(v1);\r\n      _r = rgb[0];\r\n      _g = rgb[1];\r\n      _b = rgb[2];\r\n      _a = 1;\r\n    } else if (typeof v1 === \"number\") {\r\n      if (arguments.length === 1) {\r\n        // Grayscale value\r\n        _r = _g = _b = v1;\r\n        _a = 1;\r\n      } else if (arguments.length === 2) {\r\n        // Gray and alpha or options\r\n        _r = _g = _b = v1;\r\n        if (typeof v2 === \"number\") {\r\n          _a = v2;\r\n        } else {\r\n          options = v2;\r\n          _a = options.range || 1;\r\n        }\r\n      } else if (arguments.length === 3) {\r\n        // RGB or gray, alpha and options\r\n        if (typeof v3 === \"number\") {\r\n          _r = v1;\r\n          _g = v2;\r\n          _b = v3;\r\n          _a = 1;\r\n        } else {\r\n          _r = _g = _b = v1;\r\n          _a = v2;\r\n          options = v3;\r\n        }\r\n      } else if (arguments.length === 4) {\r\n        // RGB and alpha or options\r\n        _r = v1;\r\n        _g = v2;\r\n        _b = v3;\r\n        if (typeof v4 === \"number\") {\r\n          _a = v4;\r\n        } else {\r\n          options = v4;\r\n          _a = options.range || 1;\r\n        }\r\n      } else {\r\n        // RGBA + options\r\n        _r = v1;\r\n        _g = v2;\r\n        _b = v3;\r\n        _a = v4;\r\n        options = v5;\r\n      }\r\n    }\r\n    options = options || {};\r\n\r\n    // The range option allows you to specify values in a different range.\r\n    if (options.range !== undefined) {\r\n      _r /= options.range;\r\n      _g /= options.range;\r\n      _b /= options.range;\r\n      _a /= options.range;\r\n      if (options.mode === HSB) {\r\n        v1 /= options.range;\r\n        v2 /= options.range;\r\n        v3 /= options.range;\r\n      }\r\n    }\r\n    // Convert HSB colors to RGB\r\n    if (options.mode === HSB) {\r\n      v1 = clamp(v1, 0, 1);\r\n      v2 = clamp(v2, 0, 1);\r\n      v3 = clamp(v3, 0, 1);\r\n      rgb = color.hsb2rgb(v1, v2, v3);\r\n      _r = rgb[0];\r\n      _g = rgb[1];\r\n      _b = rgb[2];\r\n      // Convert HSL colors to RGB\r\n    } else if (options.mode === HSL) {\r\n      v1 = clamp(v1, 0, 1);\r\n      v2 = clamp(v2, 0, 1);\r\n      v3 = clamp(v3, 0, 1);\r\n      rgb = color.hsl2rgb(v1, v2, v3);\r\n      _r = rgb[0];\r\n      _g = rgb[1];\r\n      _b = rgb[2];\r\n    } else if (options.mode === HEX) {\r\n      rgb = color.hex2rgb(v1);\r\n      _r = rgb[0];\r\n      _g = rgb[1];\r\n      _b = rgb[2];\r\n      _a = 1;\r\n    }\r\n\r\n    this.r = clamp(_r, 0, 1);\r\n    this.g = clamp(_g, 0, 1);\r\n    this.b = clamp(_b, 0, 1);\r\n    this.a = clamp(_a, 0, 1);\r\n  }\r\n  static clone(c) {\r\n    if (c === null || c === undefined) {\r\n      return null;\r\n    } else if (typeof c === \"string\") {\r\n      return c;\r\n    } else {\r\n      return new Color(c.r, c.g, c.b, c.a);\r\n    }\r\n  }\r\n  static toCSS(c) {\r\n    if (c === null) {\r\n      return \"none\";\r\n    } else if (c === undefined) {\r\n      return \"black\";\r\n    } else if (typeof c === \"string\") {\r\n      return c;\r\n    } else if (c instanceof Color) {\r\n      let r255 = Math.round(c.r * 255),\r\n        g255 = Math.round(c.g * 255),\r\n        b255 = Math.round(c.b * 255);\r\n      return \"rgba(\" + r255 + \", \" + g255 + \", \" + b255 + \", \" + c.a + \")\";\r\n    } else if (c.r !== undefined && c.g !== undefined && c.b !== undefined) {\r\n      let r255 = Math.round(c.r * 255),\r\n        g255 = Math.round(c.g * 255),\r\n        b255 = Math.round(c.b * 255);\r\n      if (c.a === undefined) {\r\n        return \"rgb(\" + r255 + \", \" + g255 + \", \" + b255 + \")\";\r\n      } else {\r\n        return \"rgba(\" + r255 + \", \" + g255 + \", \" + b255 + \", \" + c.a + \")\";\r\n      }\r\n    } else {\r\n      throw new Error(\"Don't know how to convert \" + c + \" to CSS.\");\r\n    }\r\n  }\r\n  static toHex(c, ignoreAlpha) {\r\n    return Color.parse(c, ignoreAlpha).toHex();\r\n  }\r\n  static make() {\r\n    var c = Object.create(Color.prototype);\r\n    c.constructor = Color.prototype;\r\n    Color.apply(c, arguments);\r\n    return c;\r\n  }\r\n  static parse(s) {\r\n    function startsWith(s, value) {\r\n      if (!s || !value) {\r\n        return false;\r\n      }\r\n      s = String(s);\r\n      return s.indexOf(value) === 0;\r\n    }\r\n\r\n    var m;\r\n    if (s === undefined || s === null) {\r\n      return new Color(0, 0, 0, 0);\r\n    } else if (s instanceof Color) {\r\n      return s;\r\n    } else if (color.namedColors[s]) {\r\n      return Color.make.apply(null, color.namedColors[s]);\r\n    } else if (s[0] === \"#\") {\r\n      return new Color(s, 0, 0, 0, { mode: HEX });\r\n    } else if (startsWith(s, \"rgba\")) {\r\n      m = s.match(\r\n        /^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+|\\d+.\\d+)\\s*\\)$/i\r\n      );\r\n      if (m) {\r\n        return new Color(\r\n          parseInt(m[1]) / 255,\r\n          parseInt(m[2]) / 255,\r\n          parseInt(m[3]) / 255,\r\n          parseFloat(m[4])\r\n        );\r\n      } else {\r\n        m = s.match(\r\n          /^rgba\\s*\\(\\s*(\\d+|\\d+.\\d+)%\\s*,\\s*(\\d+|\\d+.\\d+)%\\s*,\\s*(\\d+|\\d+.\\d+)%\\s*,\\s*(\\d+|\\d+.\\d+)\\s*\\)$/i\r\n        );\r\n        if (m) {\r\n          return new Color(\r\n            parseFloat(m[1]) / 100,\r\n            parseFloat(m[2]) / 100,\r\n            parseFloat(m[3]) / 100,\r\n            parseFloat(m[4])\r\n          );\r\n        }\r\n      }\r\n      return new Color(0, 0, 0, 0);\r\n    } else if (startsWith(s, \"rgb\")) {\r\n      m = s.match(/^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i);\r\n      if (m) {\r\n        return new Color(\r\n          parseInt(m[1]) / 255,\r\n          parseInt(m[2]) / 255,\r\n          parseInt(m[3]) / 255\r\n        );\r\n      } else {\r\n        m = s.match(\r\n          /^rgb\\s*\\(\\s*(\\d+|\\d+.\\d+)%\\s*,\\s*(\\d+|\\d+.\\d+)%\\s*,\\s*(\\d+|\\d+.\\d+)%\\s*\\)$/i\r\n        );\r\n        if (m) {\r\n          return new Color(\r\n            parseFloat(m[1]) / 100,\r\n            parseFloat(m[2]) / 100,\r\n            parseFloat(m[3]) / 100\r\n          );\r\n        }\r\n      }\r\n      return new Color(0, 0, 0, 0);\r\n    } else if (startsWith(s, \"hsla\")) {\r\n      m = s.match(\r\n        /^hsla\\s*\\(\\s*(\\d+|\\d+.\\d+)\\s*,\\s*(\\d+|\\d+.\\d+)%\\s*,\\s*(\\d+|\\d+.\\d+)%\\s*,\\s*(\\d+|\\d+.\\d+)\\s*\\)$/i\r\n      );\r\n      if (m) {\r\n        return new Color(\r\n          parseFloat(m[1]) / 360,\r\n          parseFloat(m[2]) / 100,\r\n          parseFloat(m[3]) / 100,\r\n          parseFloat(m[4])\r\n        );\r\n      }\r\n      return new Color(0, 0, 0, 0);\r\n    } else if (startsWith(s, \"hsl\")) {\r\n      m = s.match(\r\n        /^hsl\\s*\\(\\s*(\\d+|\\d+.\\d+)\\s*,\\s*(\\d+|\\d+.\\d+)%\\s*,\\s*(\\d+|\\d+.\\d+)%\\s*\\)$/i\r\n      );\r\n      if (m) {\r\n        return new Color(\r\n          parseFloat(m[1]) / 360,\r\n          parseFloat(m[2]) / 100,\r\n          parseFloat(m[3]) / 100\r\n        );\r\n      }\r\n      return new Color(0, 0, 0, 0);\r\n    } else if (s === \"none\" || s === \"null\" || startsWith(s, \"url(\")) {\r\n      return new Color(0, 0, 0, 0);\r\n    } else {\r\n      throw new Error(\"Color \" + s + \"can not be parsed\");\r\n    }\r\n  }\r\n  static gray(gray, alpha, range) {\r\n    range = Math.max(range, 1);\r\n    return new Color(gray / range, gray / range, gray / range, alpha / range);\r\n  }\r\n  static rgb(red, green, blue, alpha, range) {\r\n    range = Math.max(range, 1);\r\n    return new Color(red / range, green / range, blue / range, alpha / range);\r\n  }\r\n  static hsb(hue, saturation, brightness, alpha, range) {\r\n    range = Math.max(range, 1);\r\n    return new Color(\r\n      hue / range,\r\n      saturation / range,\r\n      brightness / range,\r\n      alpha / range,\r\n      { mode: HSB }\r\n    );\r\n  }\r\n  static hsl(hue, saturation, lightness, alpha, range) {\r\n    range = Math.max(range, 1);\r\n    return new Color(\r\n      hue / range,\r\n      saturation / range,\r\n      lightness / range,\r\n      alpha / range,\r\n      { mode: HSL }\r\n    );\r\n  }\r\n  desaturate(options) {\r\n    if (this.r === this.g && this.g === this.b) {\r\n      return this;\r\n    }\r\n    var rCoeff, gCoeff, bCoeff;\r\n    if (\r\n      options === undefined ||\r\n      !options.method ||\r\n      options.method === \"ITU-R BT.601\"\r\n    ) {\r\n      rCoeff = 0.3;\r\n      gCoeff = 0.59;\r\n      bCoeff = 0.11;\r\n    } else if (options.method === \"ITU-R BT.709\") {\r\n      rCoeff = 0.2125;\r\n      gCoeff = 0.7154;\r\n      bCoeff = 0.0721;\r\n    }\r\n    var gray = this.r * rCoeff + this.g * gCoeff + this.b * bCoeff;\r\n    return new Color(gray, gray, gray, this.a);\r\n  }\r\n  invert() {\r\n    return new Color(1 - this.r, 1 - this.g, 1 - this.b, this.a);\r\n  }\r\n}\r\n\r\nColor.BLACK = new Color(0);\r\nColor.WHITE = new Color(1);\r\n\r\ndefineAlias(Color, \"r\", \"red\");\r\ndefineAlias(Color, \"g\", \"green\");\r\ndefineAlias(Color, \"b\", \"blue\");\r\ndefineAlias(Color, \"a\", \"alpha\");\r\n\r\n// The hue of the color, in HSL color mode. (Although hue is the same in HSL and HSB).\r\ndefineGetter(Color, \"h\", function () {\r\n  return color.rgb2hsl(this.r, this.g, this.b)[0];\r\n});\r\n\r\n// The saturation of the color, in HSL color mode. (Saturation is different in HSL and HSB).\r\ndefineGetter(Color, \"s\", function () {\r\n  return color.rgb2hsl(this.r, this.g, this.b)[1];\r\n});\r\n\r\n// The lightness of the color, in HSL color mode. (Lightness in HSL is different from brightness in HSB).\r\ndefineGetter(Color, \"l\", function () {\r\n  return color.rgb2hsl(this.r, this.g, this.b)[2];\r\n});\r\n\r\ndefineAlias(Color, \"h\", \"hue\");\r\ndefineAlias(Color, \"s\", \"saturation\");\r\ndefineAlias(Color, \"l\", \"lightness\");\r\n\r\ndefineGetter(Color, \"rgb\", function () {\r\n  return [this.r, this.g, this.b];\r\n});\r\n\r\ndefineGetter(Color, \"rgba\", function () {\r\n  return [this.r, this.g, this.b, this.a];\r\n});\r\n\r\ndefineGetter(Color, \"hsb\", function () {\r\n  return color.rgb2hsb(this.r, this.g, this.b);\r\n});\r\n\r\ndefineGetter(Color, \"hsba\", function () {\r\n  return color.rgb2hsb(this.r, this.g, this.b).concat([this.a]);\r\n});\r\n\r\ndefineGetter(Color, \"hsl\", function () {\r\n  return color.rgb2hsl(this.r, this.g, this.b);\r\n});\r\n\r\ndefineGetter(Color, \"hsla\", function () {\r\n  return color.rgb2hsl(this.r, this.g, this.b).concat([this.a]);\r\n});\r\n\r\nColor.prototype.toCSS = function () {\r\n  return Color.toCSS(this);\r\n};\r\n\r\nColor.prototype.toHex = function (ignoreAlpha) {\r\n  if (ignoreAlpha || this.a >= 1) {\r\n    return color.rgb2hex(this.r, this.g, this.b);\r\n  } else {\r\n    return color.rgba2hex(this.r, this.g, this.b, this.a);\r\n  }\r\n};\r\n", "export function flatten(arg) {\r\n  var arr = Array.prototype.slice.call(arg);\r\n  var args = [];\r\n  for (var i = 0; i < arr.length; i += 1) {\r\n    var o = arr[i];\r\n    if (Array.isArray(o)) {\r\n      for (var j = 0; j < o.length; j += 1) {\r\n        args.push(o[j]);\r\n      }\r\n    } else {\r\n      args.push(o);\r\n    }\r\n  }\r\n  return args;\r\n}\r\n", "// B\u00E9zier path object\r\n\r\nimport {\r\n  MOVETO,\r\n  LINETO,\r\n  QUADTO,\r\n  CURVETO,\r\n  CLOSE,\r\n  extrema,\r\n  segmentLengths as bezierSegmentLengths,\r\n  length as bezierLength,\r\n  point as bezierPoint,\r\n} from \"../util/bezier.mjs\";\r\nimport Rect from \"../objects/rect.mjs\";\r\nimport Color from \"./color.mjs\";\r\n\r\nimport { flatten } from \"../../util.mjs\";\r\nimport { pointInPolygon } from \"../util/geo.mjs\";\r\nimport { radians, clamp } from \"../util/math.mjs\";\r\n\r\nvar CLOSE_COMMAND = Object.freeze({ type: CLOSE });\r\n\r\nvar KAPPA = 0.5522847498307936; // (-1 + Math.sqrt(2)) / 3 * 4\r\n\r\nfunction _roundCoord(n, fractionDigits = 3) {\r\n  if (n % 1 === 0) return n;\r\n  return n.toFixed(fractionDigits);\r\n}\r\n\r\nfunction _cloneCommand(cmd) {\r\n  var newCmd = { type: cmd.type };\r\n  if (newCmd.type !== CLOSE) {\r\n    newCmd.x = cmd.x;\r\n    newCmd.y = cmd.y;\r\n  }\r\n  if (newCmd.type === QUADTO) {\r\n    newCmd.x1 = cmd.x1;\r\n    newCmd.y1 = cmd.y1;\r\n  } else if (newCmd.type === CURVETO) {\r\n    newCmd.x1 = cmd.x1;\r\n    newCmd.y1 = cmd.y1;\r\n    newCmd.x2 = cmd.x2;\r\n    newCmd.y2 = cmd.y2;\r\n  }\r\n  return newCmd;\r\n}\r\n\r\nexport default class Path {\r\n  constructor(commands, fill, stroke, strokeWidth) {\r\n    this.commands = commands !== undefined ? commands : [];\r\n    this.fill = fill !== undefined ? fill : \"black\";\r\n    this.stroke = stroke !== undefined ? stroke : null;\r\n    this.strokeWidth = strokeWidth !== undefined ? strokeWidth : 1;\r\n  }\r\n  static combine() {\r\n    var shapes = flatten(arguments);\r\n    var shape,\r\n      commands = [];\r\n    for (var i = 0; i < shapes.length; i += 1) {\r\n      shape = shapes[i];\r\n      if (shape.commands) {\r\n        commands = commands.concat(shape.commands);\r\n      } else if (shape.shapes) {\r\n        commands = commands.concat(Path.combine(shape.shapes).commands);\r\n      }\r\n    }\r\n    return new Path(commands);\r\n  }\r\n  clone() {\r\n    var p = new Path(),\r\n      n = this.commands.length,\r\n      i;\r\n    p.commands.length = this.commands.length;\r\n    for (i = 0; i < n; i += 1) {\r\n      p.commands[i] = _cloneCommand(this.commands[i]);\r\n    }\r\n    p.fill = Color.clone(this.fill);\r\n    p.stroke = Color.clone(this.stroke);\r\n    p.strokeWidth = this.strokeWidth;\r\n    return p;\r\n  }\r\n  extend(commandsOrPath) {\r\n    var commands = commandsOrPath.commands || commandsOrPath;\r\n    Array.prototype.push.apply(this.commands, commands);\r\n  }\r\n  moveTo(x, y) {\r\n    this.commands.push({ type: MOVETO, x: x, y: y });\r\n  }\r\n  lineTo(x, y) {\r\n    this.commands.push({ type: LINETO, x: x, y: y });\r\n  }\r\n  curveTo(x1, y1, x2, y2, x, y) {\r\n    this.commands.push({\r\n      type: CURVETO,\r\n      x1: x1,\r\n      y1: y1,\r\n      x2: x2,\r\n      y2: y2,\r\n      x: x,\r\n      y: y,\r\n    });\r\n  }\r\n  quadTo(x1, y1, x, y) {\r\n    var prevX = this.commands[this.commands.length - 1].x,\r\n      prevY = this.commands[this.commands.length - 1].y,\r\n      cp1x = prevX + (2 / 3) * (x1 - prevX),\r\n      cp1y = prevY + (2 / 3) * (y1 - prevY),\r\n      cp2x = cp1x + (1 / 3) * (x - prevX),\r\n      cp2y = cp1y + (1 / 3) * (y - prevY);\r\n    this.curveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n  }\r\n  close() {\r\n    this.commands.push(CLOSE_COMMAND);\r\n  }\r\n  isClosed() {\r\n    if (this.commands.length === 0) {\r\n      return false;\r\n    }\r\n    return this.commands[this.commands.length - 1].type === CLOSE;\r\n  }\r\n  addRect(x, y, width, height) {\r\n    this.moveTo(x, y);\r\n    this.lineTo(x + width, y);\r\n    this.lineTo(x + width, y + height);\r\n    this.lineTo(x, y + height);\r\n    this.close();\r\n  }\r\n  addRoundedRect(cx, cy, width, height, rx, ry) {\r\n    var ONE_MINUS_QUARTER = 1.0 - 0.552,\r\n      dx = rx,\r\n      dy = ry,\r\n      left = cx,\r\n      right = cx + width,\r\n      top = cy,\r\n      bottom = cy + height;\r\n\r\n    // rx/ry cannot be greater than half of the width of the rectangle\r\n    // (required by SVG spec)\r\n    dx = Math.min(dx, width * 0.5);\r\n    dy = Math.min(dy, height * 0.5);\r\n    this.moveTo(left + dx, top);\r\n    if (dx < width * 0.5) {\r\n      this.lineTo(right - rx, top);\r\n    }\r\n    this.curveTo(\r\n      right - dx * ONE_MINUS_QUARTER,\r\n      top,\r\n      right,\r\n      top + dy * ONE_MINUS_QUARTER,\r\n      right,\r\n      top + dy\r\n    );\r\n    if (dy < height * 0.5) {\r\n      this.lineTo(right, bottom - dy);\r\n    }\r\n    this.curveTo(\r\n      right,\r\n      bottom - dy * ONE_MINUS_QUARTER,\r\n      right - dx * ONE_MINUS_QUARTER,\r\n      bottom,\r\n      right - dx,\r\n      bottom\r\n    );\r\n    if (dx < width * 0.5) {\r\n      this.lineTo(left + dx, bottom);\r\n    }\r\n    this.curveTo(\r\n      left + dx * ONE_MINUS_QUARTER,\r\n      bottom,\r\n      left,\r\n      bottom - dy * ONE_MINUS_QUARTER,\r\n      left,\r\n      bottom - dy\r\n    );\r\n    if (dy < height * 0.5) {\r\n      this.lineTo(left, top + dy);\r\n    }\r\n    this.curveTo(\r\n      left,\r\n      top + dy * ONE_MINUS_QUARTER,\r\n      left + dx * ONE_MINUS_QUARTER,\r\n      top,\r\n      left + dx,\r\n      top\r\n    );\r\n    this.close();\r\n  }\r\n  addEllipse(x, y, width, height) {\r\n    var dx = KAPPA * 0.5 * width;\r\n    var dy = KAPPA * 0.5 * height;\r\n    var x0 = x + 0.5 * width;\r\n    var y0 = y + 0.5 * height;\r\n    var x1 = x + width;\r\n    var y1 = y + height;\r\n\r\n    this.moveTo(x, y0);\r\n    this.curveTo(x, y0 - dy, x0 - dx, y, x0, y);\r\n    this.curveTo(x0 + dx, y, x1, y0 - dy, x1, y0);\r\n    this.curveTo(x1, y0 + dy, x0 + dx, y1, x0, y1);\r\n    this.curveTo(x0 - dx, y1, x, y0 + dy, x, y0);\r\n    this.close();\r\n  }\r\n  addLine(x1, y1, x2, y2) {\r\n    this.moveTo(x1, y1);\r\n    this.lineTo(x2, y2);\r\n  }\r\n  addQuad(x1, y1, x2, y2, x3, y3, x4, y4) {\r\n    this.moveTo(x1, y1);\r\n    this.lineTo(x2, y2);\r\n    this.lineTo(x3, y3);\r\n    this.lineTo(x4, y4);\r\n    this.close();\r\n  }\r\n  addArc(x, y, width, height, startAngle, degrees, arcType) {\r\n    arcType = arcType || \"pie\";\r\n    var w,\r\n      h,\r\n      angStRad,\r\n      ext,\r\n      arcSegs,\r\n      increment,\r\n      cv,\r\n      lineSegs,\r\n      index,\r\n      angle,\r\n      relX,\r\n      relY,\r\n      coords;\r\n    w = width / 2;\r\n    h = height / 2;\r\n    angStRad = radians(startAngle);\r\n    ext = degrees;\r\n\r\n    if (ext >= 360.0 || ext <= -360) {\r\n      arcSegs = 4;\r\n      increment = Math.PI / 2;\r\n      cv = 0.5522847498307933;\r\n      if (ext < 0) {\r\n        increment = -increment;\r\n        cv = -cv;\r\n      }\r\n    } else {\r\n      arcSegs = Math.ceil(Math.abs(ext) / 90.0);\r\n      increment = radians(ext / arcSegs);\r\n      cv =\r\n        ((4.0 / 3.0) * Math.sin(increment / 2.0)) /\r\n        (1.0 + Math.cos(increment / 2.0));\r\n      if (cv === 0) {\r\n        arcSegs = 0;\r\n      }\r\n    }\r\n\r\n    if (arcType === \"open\") {\r\n      lineSegs = 0;\r\n    } else if (arcType === \"chord\") {\r\n      lineSegs = 1;\r\n    } else if (arcType === \"pie\") {\r\n      lineSegs = 2;\r\n    }\r\n\r\n    if (w < 0 || h < 0) {\r\n      arcSegs = lineSegs = -1;\r\n    }\r\n\r\n    index = 0;\r\n    while (index <= arcSegs + lineSegs) {\r\n      angle = angStRad;\r\n      if (index === 0) {\r\n        this.moveTo(x + Math.cos(angle) * w, y + Math.sin(angle) * h);\r\n      } else if (index > arcSegs) {\r\n        if (index === arcSegs + lineSegs) {\r\n          this.close();\r\n        } else {\r\n          this.lineTo(x, y);\r\n        }\r\n      } else {\r\n        angle += increment * (index - 1);\r\n        relX = Math.cos(angle);\r\n        relY = Math.sin(angle);\r\n        coords = [];\r\n        coords.push(x + (relX - cv * relY) * w);\r\n        coords.push(y + (relY + cv * relX) * h);\r\n        angle += increment;\r\n        relX = Math.cos(angle);\r\n        relY = Math.sin(angle);\r\n        coords.push(x + (relX + cv * relY) * w);\r\n        coords.push(y + (relY - cv * relX) * h);\r\n        coords.push(x + relX * w);\r\n        coords.push(y + relY * h);\r\n        Path.prototype.curveTo.apply(this, coords);\r\n      }\r\n      index += 1;\r\n    }\r\n  }\r\n  colorize(options) {\r\n    var args = arguments;\r\n    if (typeof options !== \"object\" || options instanceof Color) {\r\n      options = {};\r\n      if (args[0] !== undefined) {\r\n        options.fill = args[0];\r\n      }\r\n      if (args[1] !== undefined) {\r\n        options.stroke = args[1];\r\n      }\r\n      if (args[2] !== undefined) {\r\n        options.strokeWidth = args[2];\r\n      }\r\n    }\r\n    var p = this.clone();\r\n    if (options.fill) {\r\n      p.fill = Color.clone(options.fill);\r\n    }\r\n    if (options.stroke) {\r\n      p.stroke = Color.clone(options.stroke);\r\n    }\r\n    if (options.strokeWidth || options.strokeWidth === 0) {\r\n      p.strokeWidth = options.strokeWidth;\r\n    }\r\n    return p;\r\n  }\r\n  desaturate(options) {\r\n    var p = this.clone();\r\n    var fill = p.fill;\r\n    var stroke = p.stroke;\r\n    if (!(fill instanceof Color)) {\r\n      fill = Color.parse(fill);\r\n    }\r\n    if (!(stroke instanceof Color)) {\r\n      stroke = Color.parse(stroke);\r\n    }\r\n    p.fill = fill.desaturate(options);\r\n    p.stroke = stroke.desaturate(options);\r\n    return p;\r\n  }\r\n  invert() {\r\n    var p = this.clone();\r\n    var fill = p.fill;\r\n    var stroke = p.stroke;\r\n    if (!(fill instanceof Color)) {\r\n      fill = Color.parse(fill);\r\n    }\r\n    if (!(stroke instanceof Color)) {\r\n      stroke = Color.parse(stroke);\r\n    }\r\n    p.fill = fill.invert();\r\n    p.stroke = stroke.invert();\r\n    return p;\r\n  }\r\n  contours() {\r\n    var contours = [],\r\n      currentContour = [];\r\n\r\n    var cmd;\r\n    for (var i = 0; i < this.commands.length; i += 1) {\r\n      cmd = this.commands[i];\r\n      if (cmd.type === MOVETO) {\r\n        if (currentContour.length !== 0) {\r\n          contours.push(currentContour);\r\n        }\r\n        currentContour = [cmd];\r\n      } else {\r\n        currentContour.push(cmd);\r\n      }\r\n    }\r\n\r\n    if (currentContour.length !== 0) {\r\n      contours.push(currentContour);\r\n    }\r\n\r\n    return contours;\r\n  }\r\n  bounds() {\r\n    if (this._bounds) {\r\n      return this._bounds;\r\n    }\r\n    if (this.commands.length === 0) {\r\n      return new Rect(0, 0, 0, 0);\r\n    }\r\n\r\n    var px,\r\n      py,\r\n      prev,\r\n      right,\r\n      bottom,\r\n      minX = Number.MAX_VALUE,\r\n      minY = Number.MAX_VALUE,\r\n      maxX = -Number.MAX_VALUE,\r\n      maxY = -Number.MAX_VALUE;\r\n\r\n    var cmd;\r\n    for (var i = 0; i < this.commands.length; i += 1) {\r\n      cmd = this.commands[i];\r\n      if (cmd.type === MOVETO || cmd.type === LINETO) {\r\n        px = cmd.x;\r\n        py = cmd.y;\r\n        if (px < minX) {\r\n          minX = px;\r\n        }\r\n        if (py < minY) {\r\n          minY = py;\r\n        }\r\n        if (px > maxX) {\r\n          maxX = px;\r\n        }\r\n        if (py > maxY) {\r\n          maxY = py;\r\n        }\r\n        prev = cmd;\r\n      } else if (cmd.type === CURVETO) {\r\n        var r = extrema(\r\n          prev.x,\r\n          prev.y,\r\n          cmd.x1,\r\n          cmd.y1,\r\n          cmd.x2,\r\n          cmd.y2,\r\n          cmd.x,\r\n          cmd.y\r\n        );\r\n        right = r.x + r.width;\r\n        bottom = r.y + r.height;\r\n        if (r.x < minX) {\r\n          minX = r.x;\r\n        }\r\n        if (right > maxX) {\r\n          maxX = right;\r\n        }\r\n        if (r.y < minY) {\r\n          minY = r.y;\r\n        }\r\n        if (bottom > maxY) {\r\n          maxY = bottom;\r\n        }\r\n        prev = cmd;\r\n      }\r\n    }\r\n\r\n    return new Rect(minX, minY, maxX - minX, maxY - minY);\r\n  }\r\n  // Returns the DynamicPathElement at time t (0.0-1.0) on the path.\r\n  point(t, segmentLengths) {\r\n    if (segmentLengths === undefined) {\r\n      // Cache the segment lengths for performance.\r\n      segmentLengths = bezierSegmentLengths(this.commands, true, 10);\r\n    }\r\n    return bezierPoint(this, t, segmentLengths);\r\n  }\r\n  // Returns an array of DynamicPathElements along the path.\r\n  // To omit the last point on closed paths: {end: 1-1.0/amount}\r\n  points(amount, options) {\r\n    var start = options && options.start !== undefined ? options.start : 0.0;\r\n    var end = options && options.end !== undefined ? options.end : 1.0;\r\n    if (this.commands.length === 0) {\r\n      // Otherwise bezier.point() will raise an error for empty paths.\r\n      return [];\r\n    }\r\n    amount = Math.round(amount);\r\n    // \"d\" is the delta value for each point.\r\n    // For closed paths (e.g. a circle), we don't want the last point, because it will equal the first point.\r\n    // For open paths (e.g. a line) we do want the last point, so we use amount - 1.\r\n    // E.g. If amount=4, and path is open, we want the point at t 0.0, 0.33, 0.66 and 1.0.\r\n    // E.g. If amount=2, and path is open, we want the point at t 0.0 and 1.0.\r\n    var d;\r\n    if (options && options.closed) {\r\n      d = amount > 1 ? (end - start) / amount : end - start;\r\n    } else {\r\n      d = amount > 1 ? (end - start) / (amount - 1) : end - start;\r\n    }\r\n    var pts = [];\r\n    var segmentLengths = bezierSegmentLengths(this.commands, true, 10);\r\n    for (var i = 0; i < amount; i += 1) {\r\n      pts.push(this.point(start + d * i, segmentLengths));\r\n    }\r\n    return pts;\r\n  }\r\n  // Returns an approximation of the total length of the path.\r\n  length(precision) {\r\n    if (precision === undefined) {\r\n      precision = 20;\r\n    }\r\n    return bezierLength(this, precision);\r\n  }\r\n  // Returns true when point (x,y) falls within the contours of the path.\r\n  contains(x, y, precision) {\r\n    var points = this.points(precision !== undefined ? precision : 100);\r\n    return pointInPolygon(points, x, y);\r\n  }\r\n  resampleByAmount(points, perContour) {\r\n    var subPaths = perContour ? this.contours() : [this.commands];\r\n    var p = new Path([], this.fill, this.stroke, this.strokeWidth);\r\n    for (var j = 0; j < subPaths.length; j += 1) {\r\n      var subPath = new Path(subPaths[j]);\r\n      var options = {};\r\n      if (subPath.isClosed()) {\r\n        options.closed = true;\r\n      }\r\n      var pts = subPath.points(points, options);\r\n      for (var i = 0; i < pts.length; i += 1) {\r\n        if (i === 0) {\r\n          p.moveTo(pts[i].x, pts[i].y);\r\n        } else {\r\n          p.lineTo(pts[i].x, pts[i].y);\r\n        }\r\n      }\r\n      if (subPath.isClosed()) {\r\n        p.close();\r\n      }\r\n    }\r\n    return p;\r\n  }\r\n  resampleByLength(segmentLength, options) {\r\n    options = options || {};\r\n    var force = options.force || false;\r\n    var subPaths = this.contours();\r\n    var commands = [];\r\n    if (!force) {\r\n      segmentLength = Math.max(segmentLength, 1);\r\n    }\r\n    for (var i = 0; i < subPaths.length; i += 1) {\r\n      var subPath = new Path(subPaths[i]);\r\n      var contourLength = subPath.length();\r\n      var amount = Math.ceil(contourLength / segmentLength);\r\n      commands = commands.concat(subPath.resampleByAmount(amount).commands);\r\n    }\r\n    return new Path(commands, this.fill, this.stroke, this.strokeWidth);\r\n  }\r\n  toPathData(fractionDigits = 3) {\r\n    var i, d, cmd, x, y, x1, y1, x2, y2;\r\n    d = \"\";\r\n    for (i = 0; i < this.commands.length; i += 1) {\r\n      cmd = this.commands[i];\r\n      if (cmd.x !== undefined) {\r\n        x = _roundCoord(clamp(cmd.x, -9999, 9999), fractionDigits);\r\n        y = _roundCoord(clamp(cmd.y, -9999, 9999), fractionDigits);\r\n      }\r\n      if (cmd.x1 !== undefined) {\r\n        x1 = _roundCoord(clamp(cmd.x1, -9999, 9999), fractionDigits);\r\n        y1 = _roundCoord(clamp(cmd.y1, -9999, 9999), fractionDigits);\r\n      }\r\n      if (cmd.x2 !== undefined) {\r\n        x2 = _roundCoord(clamp(cmd.x2, -9999, 9999), fractionDigits);\r\n        y2 = _roundCoord(clamp(cmd.y2, -9999, 9999), fractionDigits);\r\n      }\r\n      if (cmd.type === MOVETO) {\r\n        if (!isNaN(x) && !isNaN(y)) {\r\n          d += \"M\" + x + \" \" + y;\r\n        }\r\n      } else if (cmd.type === LINETO) {\r\n        if (!isNaN(x) && !isNaN(y)) {\r\n          d += \"L\" + x + \" \" + y;\r\n        }\r\n      } else if (cmd.type === QUADTO) {\r\n        if (!isNaN(x) && !isNaN(y) && !isNaN(x1) && !isNaN(y1)) {\r\n          d += \"Q\" + x1 + \" \" + y1 + \" \" + x + \" \" + y;\r\n        }\r\n      } else if (cmd.type === CURVETO) {\r\n        if (\r\n          !isNaN(x) &&\r\n          !isNaN(y) &&\r\n          !isNaN(x1) &&\r\n          !isNaN(y1) &&\r\n          !isNaN(x2) &&\r\n          !isNaN(y2)\r\n        ) {\r\n          d += \"C\" + x1 + \" \" + y1 + \" \" + x2 + \" \" + y2 + \" \" + x + \" \" + y;\r\n        }\r\n      } else if (cmd.type === CLOSE) {\r\n        d += \"Z\";\r\n      }\r\n    }\r\n    return d;\r\n  }\r\n  // Output the path as an SVG string.\r\n  toSVG() {\r\n    var svg = '<path d=\"';\r\n    svg += this.toPathData();\r\n    svg += '\"';\r\n\r\n    var style = \"\";\r\n\r\n    var fill;\r\n    var fillOpacity;\r\n    if (this.fill) {\r\n      fill = Color.parse(this.fill);\r\n      if (fill.a < 1) {\r\n        fillOpacity = fill.a;\r\n      }\r\n      fill = Color.toHex(fill).substring(0, 7);\r\n    }\r\n\r\n    if (fill !== \"black\" && fill !== \"#000000\") {\r\n      if (fill === null || fill === undefined) {\r\n        style += \"fill:none;\";\r\n      } else {\r\n        style += \"fill:\" + fill + \";\";\r\n      }\r\n    }\r\n\r\n    if (fillOpacity !== undefined) {\r\n      style += \"fill-opacity:\" + fillOpacity + \";\";\r\n    }\r\n\r\n    var stroke;\r\n    var strokeOpacity;\r\n\r\n    if (this.stroke) {\r\n      stroke = Color.parse(this.stroke);\r\n      if (stroke.a < 1) {\r\n        strokeOpacity = stroke.a;\r\n      }\r\n      stroke = Color.toHex(stroke).substring(0, 7);\r\n    }\r\n    if (stroke) {\r\n      style += \"stroke:\" + stroke + \";\";\r\n      style += \"stroke-width:\" + this.strokeWidth + \";\";\r\n    }\r\n    if (strokeOpacity !== undefined) {\r\n      style += \"stroke-opacity:\" + strokeOpacity + \";\";\r\n    }\r\n    if (style) {\r\n      svg += ' style=\"' + style + '\"';\r\n    }\r\n    svg += \"/>\";\r\n    return svg;\r\n  }\r\n  // Draw the path to a 2D context.\r\n  draw(ctx) {\r\n    var nCommands, i, cmd;\r\n    ctx.beginPath();\r\n    nCommands = this.commands.length;\r\n    for (i = 0; i < nCommands; i += 1) {\r\n      cmd = this.commands[i];\r\n      if (cmd.type === MOVETO) {\r\n        ctx.moveTo(cmd.x, cmd.y);\r\n      } else if (cmd.type === LINETO) {\r\n        ctx.lineTo(cmd.x, cmd.y);\r\n      } else if (cmd.type === QUADTO) {\r\n        ctx.quadraticCurveTo(cmd.x1, cmd.y1, cmd.x, cmd.y);\r\n      } else if (cmd.type === CURVETO) {\r\n        ctx.bezierCurveTo(cmd.x1, cmd.y1, cmd.x2, cmd.y2, cmd.x, cmd.y);\r\n      } else if (cmd.type === CLOSE) {\r\n        ctx.closePath();\r\n      }\r\n    }\r\n    if (this.fill !== null && this.fill !== undefined) {\r\n      ctx.fillStyle = Color.toCSS(this.fill);\r\n      ctx.fill();\r\n    }\r\n    if (\r\n      this.stroke !== null &&\r\n      this.stroke !== undefined &&\r\n      this.strokeWidth !== null &&\r\n      this.strokeWidth > 0\r\n    ) {\r\n      ctx.strokeStyle = Color.toCSS(this.stroke);\r\n      ctx.lineWidth = this.strokeWidth;\r\n      ctx.stroke();\r\n    }\r\n  }\r\n}\r\n\r\nPath.prototype.closePath = Path.prototype.close;\r\n", "// Shape group object\r\n\r\nimport Path from \"./path.mjs\";\r\nimport Rect from \"./rect.mjs\";\r\nimport Color from \"./color.mjs\";\r\n\r\nexport default class Group {\r\n  constructor(shapes) {\r\n    if (!shapes) {\r\n      this.shapes = [];\r\n    } else if (shapes.shapes || shapes.commands) {\r\n      this.shapes = [shapes];\r\n    } else if (shapes) {\r\n      this.shapes = shapes;\r\n    }\r\n  }\r\n  add(shape) {\r\n    this.shapes.push(shape);\r\n  }\r\n  clone() {\r\n    var newShapes = [],\r\n      n = this.shapes.length,\r\n      i;\r\n    newShapes.length = n;\r\n    for (i = 0; i < n; i += 1) {\r\n      newShapes[i] = this.shapes[i].clone();\r\n    }\r\n    return new Group(newShapes);\r\n  }\r\n  colorize(options) {\r\n    var args = arguments;\r\n    if (typeof options !== \"object\" || options instanceof Color) {\r\n      options = {};\r\n      if (args[0] !== undefined) {\r\n        options.fill = args[0];\r\n      }\r\n      if (args[1] !== undefined) {\r\n        options.stroke = args[1];\r\n      }\r\n      if (args[2] !== undefined) {\r\n        options.strokeWidth = args[2];\r\n      }\r\n    }\r\n    var shapes = [];\r\n    shapes.length = this.shapes.length;\r\n    for (var i = 0; i < this.shapes.length; i += 1) {\r\n      shapes[i] = this.shapes[i].colorize(options);\r\n    }\r\n    return new Group(shapes);\r\n  }\r\n  desaturate(options) {\r\n    var shapes = [];\r\n    shapes.length = this.shapes.length;\r\n    for (var i = 0; i < this.shapes.length; i += 1) {\r\n      shapes[i] = this.shapes[i].desaturate(options);\r\n    }\r\n    return new Group(shapes);\r\n  }\r\n  invert() {\r\n    var shapes = [];\r\n    shapes.length = this.shapes.length;\r\n    for (var i = 0; i < this.shapes.length; i += 1) {\r\n      shapes[i] = this.shapes[i].invert();\r\n    }\r\n    return new Group(shapes);\r\n  }\r\n  bounds() {\r\n    if (this.shapes.length === 0) {\r\n      return new Rect(0, 0, 0, 0);\r\n    }\r\n    var i,\r\n      r,\r\n      shape,\r\n      shapes = this.shapes;\r\n    for (i = 0; i < shapes.length; i += 1) {\r\n      shape = shapes[i];\r\n      if (r === undefined) {\r\n        r = shape.bounds();\r\n      }\r\n      if (\r\n        (shape.shapes && shape.shapes.length !== 0) ||\r\n        (shape.commands && shape.commands.length !== 0)\r\n      ) {\r\n        r = r.unite(shape.bounds());\r\n      }\r\n    }\r\n    return r !== undefined ? r : new Rect(0, 0, 0, 0);\r\n  }\r\n  // Returns true when point (x,y) falls within the contours of the group.\r\n  contains(x, y, precision) {\r\n    if (precision === undefined) {\r\n      precision = 100;\r\n    }\r\n    var i,\r\n      shapes = this.shapes;\r\n    for (i = 0; i < shapes.length; i += 1) {\r\n      if (shapes[i].contains(x, y, precision)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  length(precision) {\r\n    if (precision === undefined) {\r\n      precision = 10;\r\n    }\r\n    var sum = 0;\r\n    var shapes = this.shapes;\r\n    for (var i = 0; i < shapes.length; i += 1) {\r\n      sum += shapes[i].length(precision);\r\n    }\r\n    return sum;\r\n  }\r\n  resampleByAmount(points, perContour) {\r\n    var path;\r\n    if (!perContour) {\r\n      path = new Path.combine(this);\r\n      return path.resampleByAmount(points, perContour);\r\n    }\r\n    var shapes = [];\r\n    shapes.length = this.shapes.length;\r\n    for (var i = 0; i < this.shapes.length; i += 1) {\r\n      shapes[i] = this.shapes[i].resampleByAmount(points, perContour);\r\n    }\r\n    return new Group(shapes);\r\n  }\r\n  resampleByLength(length) {\r\n    var shapes = [];\r\n    shapes.length = this.shapes.length;\r\n    for (var i = 0; i < this.shapes.length; i += 1) {\r\n      shapes[i] = this.shapes[i].resampleByLength(length);\r\n    }\r\n    return new Group(shapes);\r\n  }\r\n  toSVG() {\r\n    var l = [];\r\n    l.length = this.shapes.length;\r\n    for (var i = 0; i < this.shapes.length; i += 1) {\r\n      l[i] = this.shapes[i].toSVG();\r\n    }\r\n    return \"<g>\" + l.join(\"\") + \"</g>\";\r\n  }\r\n  // Draw the group to a 2D context.\r\n  draw(ctx) {\r\n    var i,\r\n      shapes = this.shapes,\r\n      nShapes = shapes.length;\r\n    for (i = 0; i < nShapes; i += 1) {\r\n      shapes[i].draw(ctx);\r\n    }\r\n  }\r\n}\r\n", "// 2-dimensional transformation matrix\r\n\r\n\"use strict\";\r\n\r\nimport { MOVETO, LINETO, QUADTO, CURVETO, CLOSE } from \"../index.mjs\";\r\nimport { radians } from \"../util/math.mjs\";\r\nimport Group from \"./group.mjs\";\r\nimport Path from \"../objects/path.mjs\";\r\nimport Point from \"../objects/point.mjs\";\r\n\r\n// A geometric transformation in Euclidean space (i.e. 2D)\r\n// that preserves collinearity and ratio of distance between points.\r\n// Linear transformations include rotation, translation, scaling, shear.\r\nexport default class Transform {\r\n  constructor(m) {\r\n    if (m !== undefined) {\r\n      this.m = m;\r\n    } else {\r\n      this.m = [1, 0, 0, 1, 0, 0]; // Identity matrix.\r\n    }\r\n  }\r\n  static identity() {\r\n    return new Transform();\r\n  }\r\n  // Returns the 3x3 matrix multiplication of A and B.\r\n  // Note that scale(), translate(), rotate() work with premultiplication,\r\n  // e.g. the matrix A followed by B = BA and not AB.\r\n  static _mmult(a, b) {\r\n    if (a.m !== undefined) {\r\n      a = a.m;\r\n    }\r\n    if (b.m !== undefined) {\r\n      b = b.m;\r\n    }\r\n\r\n    return new Transform([\r\n      a[0] * b[0] + a[1] * b[2],\r\n      a[0] * b[1] + a[1] * b[3],\r\n      a[2] * b[0] + a[3] * b[2],\r\n      a[2] * b[1] + a[3] * b[3],\r\n      a[4] * b[0] + a[5] * b[2] + b[4],\r\n      a[4] * b[1] + a[5] * b[3] + b[5],\r\n    ]);\r\n  }\r\n  isIdentity() {\r\n    var m = this.m;\r\n    return (\r\n      m[0] === 1 &&\r\n      m[1] === 0 &&\r\n      m[2] === 0 &&\r\n      m[3] === 1 &&\r\n      m[4] === 0 &&\r\n      m[5] === 0\r\n    );\r\n  }\r\n  prepend(matrix) {\r\n    return Transform._mmult(this.m, matrix.m);\r\n  }\r\n  append(matrix) {\r\n    return Transform._mmult(matrix.m, this.m);\r\n  }\r\n  inverse() {\r\n    var m = this.m,\r\n      d = m[0] * m[3] - m[1] * m[2];\r\n    return new Transform([\r\n      m[3] / d,\r\n      -m[1] / d,\r\n      -m[2] / d,\r\n      m[0] / d,\r\n      (m[2] * m[5] - m[3] * m[4]) / d,\r\n      -(m[0] * m[5] - m[1] * m[4]) / d,\r\n    ]);\r\n  }\r\n  scale(x, y) {\r\n    if (y === undefined) {\r\n      y = x;\r\n    }\r\n    return Transform._mmult([x, 0, 0, y, 0, 0], this.m);\r\n  }\r\n  translate(x, y) {\r\n    return Transform._mmult([1, 0, 0, 1, x, y], this.m);\r\n  }\r\n  rotate(angle) {\r\n    var c = Math.cos(radians(angle)),\r\n      s = Math.sin(radians(angle));\r\n    return Transform._mmult([c, s, -s, c, 0, 0], this.m);\r\n  }\r\n  skew(x, y) {\r\n    var kx = (Math.PI * x) / 180.0,\r\n      ky = (Math.PI * y) / 180.0;\r\n    return Transform._mmult([1, Math.tan(ky), -Math.tan(kx), 1, 0, 0], this.m);\r\n  }\r\n  // Returns the new coordinates of the given point (x,y) after transformation.\r\n  transformPoint(point) {\r\n    var x = point.x,\r\n      y = point.y,\r\n      m = this.m;\r\n    return new Point(x * m[0] + y * m[2] + m[4], x * m[1] + y * m[3] + m[5]);\r\n  }\r\n  transformPoints(points) {\r\n    var transformedPoints = [];\r\n    for (var i = 0; i < points.length; i += 1) {\r\n      transformedPoints.push(this.transformPoint(points[i]));\r\n    }\r\n    return transformedPoints;\r\n  }\r\n  transformPath(path) {\r\n    var m = this.m;\r\n    var commands = [];\r\n    commands.length = path.commands.length;\r\n    for (var i = 0, l = path.commands.length; i < l; i++) {\r\n      var cmd = path.commands[i];\r\n      switch (cmd.type) {\r\n        case MOVETO:\r\n        case LINETO:\r\n          commands[i] = {\r\n            type: cmd.type,\r\n            x: cmd.x * m[0] + cmd.y * m[2] + m[4],\r\n            y: cmd.x * m[1] + cmd.y * m[3] + m[5],\r\n          };\r\n          break;\r\n        case QUADTO:\r\n          commands[i] = {\r\n            type: QUADTO,\r\n            x: cmd.x * m[0] + cmd.y * m[2] + m[4],\r\n            y: cmd.x * m[1] + cmd.y * m[3] + m[5],\r\n            x1: cmd.x1 * m[0] + cmd.y1 * m[2] + m[4],\r\n            y1: cmd.x1 * m[1] + cmd.y1 * m[3] + m[5],\r\n          };\r\n          break;\r\n        case CURVETO:\r\n          commands[i] = {\r\n            type: CURVETO,\r\n            x: cmd.x * m[0] + cmd.y * m[2] + m[4],\r\n            y: cmd.x * m[1] + cmd.y * m[3] + m[5],\r\n            x1: cmd.x1 * m[0] + cmd.y1 * m[2] + m[4],\r\n            y1: cmd.x1 * m[1] + cmd.y1 * m[3] + m[5],\r\n            x2: cmd.x2 * m[0] + cmd.y2 * m[2] + m[4],\r\n            y2: cmd.x2 * m[1] + cmd.y2 * m[3] + m[5],\r\n          };\r\n          break;\r\n        case CLOSE:\r\n          commands[i] = { type: CLOSE };\r\n          break;\r\n        default:\r\n          throw new Error(\"Unknown command type \" + cmd);\r\n      }\r\n    }\r\n    return new Path(commands, path.fill, path.stroke, path.strokeWidth);\r\n  }\r\n  transformText(text) {\r\n    var t = text.clone();\r\n    t.transform = this.append(t.transform);\r\n    return t;\r\n  }\r\n  transformGroup(group) {\r\n    var transformedShapes = [];\r\n    for (var i = 0; i < group.shapes.length; i += 1) {\r\n      transformedShapes.push(this.transformShape(group.shapes[i]));\r\n    }\r\n    return new Group(transformedShapes);\r\n  }\r\n  transformShape(shape) {\r\n    var fn;\r\n    if (shape.shapes) {\r\n      fn = this.transformGroup;\r\n    } else if (shape.commands) {\r\n      fn = this.transformPath;\r\n    } else if (shape.text) {\r\n      fn = this.transformText;\r\n    } else if (shape.x !== undefined && shape.y !== undefined) {\r\n      fn = this.transformPoint;\r\n    } else if (shape._transform !== undefined) {\r\n      return shape._transform(this.m);\r\n    } else if (Array.isArray(shape) && shape.length > 0) {\r\n      if (shape[0].x !== undefined && shape[0].y !== undefined) {\r\n        fn = this.transformPoints;\r\n      } else {\r\n        var l = [];\r\n        for (var i = 0; i < shape.length; i += 1) {\r\n          l.push(this.transformShape(shape[i]));\r\n        }\r\n        return l;\r\n      }\r\n    } else {\r\n      throw new Error(\"Don't know how to transform \" + shape);\r\n    }\r\n    return fn.call(this, shape);\r\n  }\r\n}\r\n\r\nTransform.IDENTITY = new Transform();\r\n", "//// VECTORS AND MATRICES ///////////////////////////////////////////////\r\n\r\nexport default class Vec3 {\r\n  constructor(x, y, z) {\r\n    this.x = x === undefined ? 0 : x;\r\n    this.y = y === undefined ? 0 : y;\r\n    this.z = z === undefined ? 0 : z;\r\n  }\r\n  static up() {\r\n    return new Vec3(0, 1.0, 0);\r\n  }\r\n  // Generate the dot product of two vectors.\r\n  static dot(a, b) {\r\n    return a.x * b.x + a.y * b.y + a.z * b.z;\r\n  }\r\n  // Generate the cross product of two vectors.\r\n  static cross(a, b) {\r\n    return new Vec3(\r\n      a.y * b.z - a.z * b.y,\r\n      a.z * b.x - a.x * b.z,\r\n      a.x * b.y - a.y * b.x\r\n    );\r\n  }\r\n  // Convert this vector to a string representation.\r\n  toString() {\r\n    return \"[\" + this.x + \", \" + this.y + \", \" + this.z + \"]\";\r\n  }\r\n  // Convert this vector to an array.\r\n  toArray() {\r\n    var array = [];\r\n    array.push(this.x);\r\n    array.push(this.y);\r\n    array.push(this.z);\r\n    return array;\r\n  }\r\n  // Calculate the length of this vector.\r\n  getLength() {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n  }\r\n  // Create a new vector that is this vector, normalized.\r\n  normalize() {\r\n    var len, c;\r\n    len = this.getLength();\r\n    if (len === 0) {\r\n      return this;\r\n    }\r\n    c = 1.0 / len;\r\n    return new Vec3(this.x * c, this.y * c, this.z * c);\r\n  }\r\n  // Create a new vector that is the addition of this vector and the given vector.\r\n  add(o) {\r\n    return new Vec3(this.x + o.x, this.y + o.y, this.z + o.z);\r\n  }\r\n  // Create a new vector that is the subtraction of this vector and the given vector.\r\n  subtract(o) {\r\n    return new Vec3(this.x - o.x, this.y - o.y, this.z - o.z);\r\n  }\r\n  // Transform the vector according to the matrix and return the result.\r\n  // A new vector is created, nothing is modified.\r\n  transform(matrix4) {\r\n    var x, y, z, w, matrix;\r\n\r\n    matrix = matrix4;\r\n    x =\r\n      this.x * matrix.m[0] +\r\n      this.y * matrix.m[4] +\r\n      this.z * matrix.m[8] +\r\n      matrix.m[12];\r\n    y =\r\n      this.x * matrix.m[1] +\r\n      this.y * matrix.m[5] +\r\n      this.z * matrix.m[9] +\r\n      matrix.m[13];\r\n    z =\r\n      this.x * matrix.m[2] +\r\n      this.y * matrix.m[6] +\r\n      this.z * matrix.m[10] +\r\n      matrix.m[14];\r\n    w =\r\n      this.x * matrix.m[3] +\r\n      this.y * matrix.m[7] +\r\n      this.z * matrix.m[11] +\r\n      matrix.m[15];\r\n\r\n    return new Vec3(x / w, y / w, z / w);\r\n  }\r\n}\r\n\r\n// Generate the zero vector.\r\nVec3.ZERO = new Vec3(0, 0, 0);\r\n", "// 3-dimensional matrix\r\n\r\nimport Vec3 from \"../objects/vec3.mjs\";\r\n\r\n// Construct a 4x4 matrix.\r\nexport default class Matrix4 {\r\n  constructor(m) {\r\n    if (m !== undefined) {\r\n      // TODO Check for type and length\r\n      this.m = m;\r\n    } else {\r\n      m = new Float32Array(16);\r\n      m[0] = 1.0;\r\n      m[1] = 0.0;\r\n      m[2] = 0.0;\r\n      m[3] = 0.0;\r\n      m[4] = 0.0;\r\n      m[5] = 1.0;\r\n      m[6] = 0.0;\r\n      m[7] = 0.0;\r\n      m[8] = 0.0;\r\n      m[9] = 0.0;\r\n      m[10] = 1.0;\r\n      m[11] = 0.0;\r\n      m[12] = 0.0;\r\n      m[13] = 0.0;\r\n      m[14] = 0.0;\r\n      m[15] = 1.0;\r\n      this.m = m;\r\n    }\r\n  }\r\n  // Create a perspective matrix transformation.\r\n  static perspective(fov, aspect, zNear, zFar) {\r\n    var m = new Float32Array(Matrix4.IDENTITY.m),\r\n      tan = 1.0 / Math.tan(fov * 0.5);\r\n\r\n    m[0] = tan / aspect;\r\n    m[1] = m[2] = m[3] = 0.0;\r\n    m[5] = tan;\r\n    m[4] = m[6] = m[7] = 0.0;\r\n    m[8] = m[9] = 0.0;\r\n    m[10] = -zFar / (zNear - zFar);\r\n    m[11] = 1.0;\r\n    m[12] = m[13] = m[15] = 0.0;\r\n    m[14] = (zNear * zFar) / (zNear - zFar);\r\n\r\n    return new Matrix4(m);\r\n  }\r\n  static lookAt(eye, target, up) {\r\n    var m, zAxis, xAxis, yAxis, ex, ey, ez;\r\n    m = new Float32Array(16);\r\n    zAxis = target.subtract(eye).normalize();\r\n    xAxis = Vec3.cross(up, zAxis).normalize();\r\n    yAxis = Vec3.cross(zAxis, xAxis).normalize();\r\n\r\n    ex = -Vec3.dot(xAxis, eye);\r\n    ey = -Vec3.dot(yAxis, eye);\r\n    ez = -Vec3.dot(zAxis, eye);\r\n\r\n    m[0] = xAxis.x;\r\n    m[1] = yAxis.x;\r\n    m[2] = zAxis.x;\r\n    m[3] = 0;\r\n    m[4] = xAxis.y;\r\n    m[5] = yAxis.y;\r\n    m[6] = zAxis.y;\r\n    m[7] = 0;\r\n    m[8] = xAxis.z;\r\n    m[9] = yAxis.z;\r\n    m[10] = zAxis.z;\r\n    m[11] = 0;\r\n    m[12] = ex;\r\n    m[13] = ey;\r\n    m[14] = ez;\r\n    m[15] = 1;\r\n\r\n    return new Matrix4(m);\r\n  }\r\n  // Return a new matrix with the inversion of this matrix.\r\n  invert() {\r\n    var l1,\r\n      l2,\r\n      l3,\r\n      l4,\r\n      l5,\r\n      l6,\r\n      l7,\r\n      l8,\r\n      l9,\r\n      l10,\r\n      l11,\r\n      l12,\r\n      l13,\r\n      l14,\r\n      l15,\r\n      l16,\r\n      l17,\r\n      l18,\r\n      l19,\r\n      l20,\r\n      l21,\r\n      l22,\r\n      l23,\r\n      l24,\r\n      l25,\r\n      l26,\r\n      l27,\r\n      l28,\r\n      l29,\r\n      l30,\r\n      l31,\r\n      l32,\r\n      l33,\r\n      l34,\r\n      l35,\r\n      l36,\r\n      l37,\r\n      l38,\r\n      l39,\r\n      m;\r\n    l1 = this.m[0];\r\n    l2 = this.m[1];\r\n    l3 = this.m[2];\r\n    l4 = this.m[3];\r\n    l5 = this.m[4];\r\n    l6 = this.m[5];\r\n    l7 = this.m[6];\r\n    l8 = this.m[7];\r\n    l9 = this.m[8];\r\n    l10 = this.m[9];\r\n    l11 = this.m[10];\r\n    l12 = this.m[11];\r\n    l13 = this.m[12];\r\n    l14 = this.m[13];\r\n    l15 = this.m[14];\r\n    l16 = this.m[15];\r\n    l17 = l11 * l16 - l12 * l15;\r\n    l18 = l10 * l16 - l12 * l14;\r\n    l19 = l10 * l15 - l11 * l14;\r\n    l20 = l9 * l16 - l12 * l13;\r\n    l21 = l9 * l15 - l11 * l13;\r\n    l22 = l9 * l14 - l10 * l13;\r\n    l23 = l6 * l17 - l7 * l18 + l8 * l19;\r\n    l24 = -(l5 * l17 - l7 * l20 + l8 * l21);\r\n    l25 = l5 * l18 - l6 * l20 + l8 * l22;\r\n    l26 = -(l5 * l19 - l6 * l21 + l7 * l22);\r\n    l27 = 1.0 / (l1 * l23 + l2 * l24 + l3 * l25 + l4 * l26);\r\n    l28 = l7 * l16 - l8 * l15;\r\n    l29 = l6 * l16 - l8 * l14;\r\n    l30 = l6 * l15 - l7 * l14;\r\n    l31 = l5 * l16 - l8 * l13;\r\n    l32 = l5 * l15 - l7 * l13;\r\n    l33 = l5 * l14 - l6 * l13;\r\n    l34 = l7 * l12 - l8 * l11;\r\n    l35 = l6 * l12 - l8 * l10;\r\n    l36 = l6 * l11 - l7 * l10;\r\n    l37 = l5 * l12 - l8 * l9;\r\n    l38 = l5 * l11 - l7 * l9;\r\n    l39 = l5 * l10 - l6 * l9;\r\n\r\n    m = new Float32Array(16);\r\n    m[0] = l23 * l27;\r\n    m[4] = l24 * l27;\r\n    m[8] = l25 * l27;\r\n    m[12] = l26 * l27;\r\n    m[1] = -(l2 * l17 - l3 * l18 + l4 * l19) * l27;\r\n    m[5] = (l1 * l17 - l3 * l20 + l4 * l21) * l27;\r\n    m[9] = -(l1 * l18 - l2 * l20 + l4 * l22) * l27;\r\n    m[13] = (l1 * l19 - l2 * l21 + l3 * l22) * l27;\r\n    m[2] = (l2 * l28 - l3 * l29 + l4 * l30) * l27;\r\n    m[6] = -(l1 * l28 - l3 * l31 + l4 * l32) * l27;\r\n    m[10] = (l1 * l29 - l2 * l31 + l4 * l33) * l27;\r\n    m[14] = -(l1 * l30 - l2 * l32 + l3 * l33) * l27;\r\n    m[3] = -(l2 * l34 - l3 * l35 + l4 * l36) * l27;\r\n    m[7] = (l1 * l34 - l3 * l37 + l4 * l38) * l27;\r\n    m[11] = -(l1 * l35 - l2 * l37 + l4 * l39) * l27;\r\n    m[15] = (l1 * l36 - l2 * l38 + l3 * l39) * l27;\r\n    return new Matrix4(m);\r\n  }\r\n  multiply(other) {\r\n    var m = new Float32Array(16);\r\n\r\n    m[0] =\r\n      this.m[0] * other.m[0] +\r\n      this.m[1] * other.m[4] +\r\n      this.m[2] * other.m[8] +\r\n      this.m[3] * other.m[12];\r\n    m[1] =\r\n      this.m[0] * other.m[1] +\r\n      this.m[1] * other.m[5] +\r\n      this.m[2] * other.m[9] +\r\n      this.m[3] * other.m[13];\r\n    m[2] =\r\n      this.m[0] * other.m[2] +\r\n      this.m[1] * other.m[6] +\r\n      this.m[2] * other.m[10] +\r\n      this.m[3] * other.m[14];\r\n    m[3] =\r\n      this.m[0] * other.m[3] +\r\n      this.m[1] * other.m[7] +\r\n      this.m[2] * other.m[11] +\r\n      this.m[3] * other.m[15];\r\n\r\n    m[4] =\r\n      this.m[4] * other.m[0] +\r\n      this.m[5] * other.m[4] +\r\n      this.m[6] * other.m[8] +\r\n      this.m[7] * other.m[12];\r\n    m[5] =\r\n      this.m[4] * other.m[1] +\r\n      this.m[5] * other.m[5] +\r\n      this.m[6] * other.m[9] +\r\n      this.m[7] * other.m[13];\r\n    m[6] =\r\n      this.m[4] * other.m[2] +\r\n      this.m[5] * other.m[6] +\r\n      this.m[6] * other.m[10] +\r\n      this.m[7] * other.m[14];\r\n    m[7] =\r\n      this.m[4] * other.m[3] +\r\n      this.m[5] * other.m[7] +\r\n      this.m[6] * other.m[11] +\r\n      this.m[7] * other.m[15];\r\n\r\n    m[8] =\r\n      this.m[8] * other.m[0] +\r\n      this.m[9] * other.m[4] +\r\n      this.m[10] * other.m[8] +\r\n      this.m[11] * other.m[12];\r\n    m[9] =\r\n      this.m[8] * other.m[1] +\r\n      this.m[9] * other.m[5] +\r\n      this.m[10] * other.m[9] +\r\n      this.m[11] * other.m[13];\r\n    m[10] =\r\n      this.m[8] * other.m[2] +\r\n      this.m[9] * other.m[6] +\r\n      this.m[10] * other.m[10] +\r\n      this.m[11] * other.m[14];\r\n    m[11] =\r\n      this.m[8] * other.m[3] +\r\n      this.m[9] * other.m[7] +\r\n      this.m[10] * other.m[11] +\r\n      this.m[11] * other.m[15];\r\n\r\n    m[12] =\r\n      this.m[12] * other.m[0] +\r\n      this.m[13] * other.m[4] +\r\n      this.m[14] * other.m[8] +\r\n      this.m[15] * other.m[12];\r\n    m[13] =\r\n      this.m[12] * other.m[1] +\r\n      this.m[13] * other.m[5] +\r\n      this.m[14] * other.m[9] +\r\n      this.m[15] * other.m[13];\r\n    m[14] =\r\n      this.m[12] * other.m[2] +\r\n      this.m[13] * other.m[6] +\r\n      this.m[14] * other.m[10] +\r\n      this.m[15] * other.m[14];\r\n    m[15] =\r\n      this.m[12] * other.m[3] +\r\n      this.m[13] * other.m[7] +\r\n      this.m[14] * other.m[11] +\r\n      this.m[15] * other.m[15];\r\n\r\n    return new Matrix4(m);\r\n  }\r\n  translate(tx, ty, tz) {\r\n    var m = new Float32Array(this.m);\r\n    m[12] += tx;\r\n    m[13] += ty;\r\n    m[14] += tz;\r\n    return new Matrix4(m);\r\n  }\r\n}\r\n\r\nMatrix4.IDENTITY = new Matrix4();\r\n", "// Text object\r\n\r\nimport Color from \"./color.mjs\";\r\nimport Rect from \"../objects/rect.mjs\";\r\nimport Transform from \"../objects/transform.mjs\";\r\n\r\nvar _dummyContext = null;\r\n\r\n// Generates a Text object.\r\n// The function can take many possible argument forms, either by listing them in order\r\n// (text, x, y, fontFamily, fontSize, align, fill), or by using an options object.\r\n// The position can be specified as x, y; using a point {x: 10, y: 20} or using an array [10, 20].\r\n// Here are a couple of ways to generate 'Hello' at position 0, 0 in 12pt Helvetica, centered.\r\n//\r\n//     new g.Text('Hello', {x: 0, y: 0}, 'Helvetica', 12, 'center');\r\n//     new g.Text('Hello', [0, 0], {fontFamily: 'Helvetica', fontSize: 12, textAlign: 'center'});\r\n//     new g.Text('Hello', 0, 0, {fontFamily: 'Helvetica', fontSize: 12});  // align: center is the default.\r\n//     new g.Text('Hello', {fontFamily: 'Helvetica', fontSize: 12}); // the position defaults to 0,0.\r\nexport default class Text {\r\n  constructor(text) {\r\n    var args = Array.prototype.slice.call(arguments, 1),\r\n      secondArg = arguments[1],\r\n      thirdArg = arguments[2],\r\n      lastArg = arguments[arguments.length - 1],\r\n      options;\r\n\r\n    // The text is required and always the first argument.\r\n    this.text = String(text);\r\n\r\n    // Second argument is position (as object or array) or x (as number).\r\n    if (typeof secondArg === \"number\") {\r\n      this._x = secondArg;\r\n      this._y = thirdArg;\r\n      args = args.slice(2);\r\n    } else if (Array.isArray(secondArg)) {\r\n      this._x = secondArg[0];\r\n      this._y = secondArg[1];\r\n      args = args.slice(1);\r\n    } else if (typeof secondArg === \"object\") {\r\n      this._x = secondArg.x !== undefined ? secondArg.x : 0;\r\n      this._y = secondArg.y !== undefined ? secondArg.y : 0;\r\n      args = args.slice(1);\r\n    } else {\r\n      this._x = 0;\r\n      this._y = 0;\r\n    }\r\n\r\n    // The options object, if provided, is always the last argument.\r\n    if (typeof lastArg === \"object\") {\r\n      options = lastArg;\r\n      if (secondArg !== lastArg) {\r\n        args = args.slice(0, args.length - 1);\r\n      }\r\n    } else {\r\n      options = {};\r\n    }\r\n\r\n    if (args.length) {\r\n      this.fontFamily = args.shift();\r\n    } else {\r\n      this.fontFamily =\r\n        options.fontFamily || options.fontName || options.font || \"sans-serif\";\r\n    }\r\n\r\n    if (args.length) {\r\n      this.fontSize = args.shift();\r\n    } else {\r\n      this.fontSize = options.fontSize || 24;\r\n    }\r\n\r\n    if (args.length) {\r\n      this.textAlign = args.shift();\r\n    } else {\r\n      this.textAlign = options.align || options.textAlign || \"left\";\r\n    }\r\n\r\n    if (args.length) {\r\n      this.fill = args.shift();\r\n    } else {\r\n      this.fill = options.fill || \"black\";\r\n    }\r\n\r\n    this.transform = new Transform();\r\n  }\r\n  // The `measureWidth` function requires a canvas, so we set up a dummy one\r\n  // that we re-use for the duration of the page.\r\n  static _getDummyContext() {\r\n    if (!_dummyContext) {\r\n      if (typeof document !== \"undefined\") {\r\n        _dummyContext = document.createElement(\"canvas\").getContext(\"2d\");\r\n      } else {\r\n        // For node.js, use a fake context that estimates the width.\r\n        _dummyContext = {\r\n          font: \"10px sans-serif\",\r\n          measureText: function (text) {\r\n            var fontSize = parseFloat(this.font);\r\n            // The 0.6 is the average width / fontSize ratio across all characters and font sizes.\r\n            return { width: text.length * fontSize * 0.6 };\r\n          },\r\n        };\r\n      }\r\n    }\r\n    return _dummyContext;\r\n  }\r\n  clone() {\r\n    var t = new Text();\r\n    t.text = this.text;\r\n    t._x = this._x;\r\n    t._y = this._y;\r\n    t.fontFamily = this.fontFamily;\r\n    t.fontSize = this.fontSize;\r\n    t.textAlign = this.textAlign;\r\n    t.fill = Color.clone(this.fill);\r\n    t.transform = this.transform;\r\n    return t;\r\n  }\r\n  _getFont() {\r\n    return this.fontSize + \"px \" + this.fontFamily;\r\n  }\r\n  colorize(fill) {\r\n    var t = this.clone();\r\n    t.fill = Color.clone(fill);\r\n    return t;\r\n  }\r\n  draw(ctx) {\r\n    ctx.save();\r\n    ctx.font = this._getFont();\r\n    ctx.textAlign = this.textAlign;\r\n    var m = this.transform.m;\r\n    ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\r\n    ctx.fillStyle = Color.toCSS(this.fill);\r\n    ctx.fillText(this.text, this._x, this._y);\r\n    ctx.restore();\r\n  }\r\n  bounds() {\r\n    var ctx = Text._getDummyContext(),\r\n      metrics,\r\n      x = this._x;\r\n    ctx.font = this._getFont();\r\n    // FIXME: measureText returns a TextMetrics object that only contains width.\r\n    metrics = ctx.measureText(this.text);\r\n    if (this.textAlign === \"center\") {\r\n      x = this._x - metrics.width / 2;\r\n    } else if (this.textAlign === \"right\") {\r\n      x = this._x - metrics.width;\r\n    }\r\n    return new Rect(\r\n      x,\r\n      this._y - this.fontSize,\r\n      metrics.width,\r\n      this.fontSize * 1.2\r\n    );\r\n  }\r\n  toSVG() {\r\n    var svg = \"<text\";\r\n    svg += ' x=\"' + this._x + '\"';\r\n    svg += ' y=\"' + this._y + '\"';\r\n    svg += ' font-family=\"' + this.fontFamily + '\"';\r\n    svg += ' font-size=\"' + this.fontSize + '\"';\r\n    var textAnchor;\r\n    if (this.textAlign === \"left\") {\r\n      textAnchor = \"start\";\r\n    } else if (this.textAlign === \"center\") {\r\n      textAnchor = \"middle\";\r\n    } else if (this.textAlign === \"right\") {\r\n      textAnchor = \"end\";\r\n    }\r\n    svg += ' text-anchor=\"' + textAnchor + '\"';\r\n    if (this.fill !== \"black\") {\r\n      var fill = Color.parse(this.fill);\r\n      svg += ' fill=\"' + fill.toHex(true) + '\"';\r\n      if (fill.a < 1) {\r\n        svg += ' opacity=\"' + fill.a + '\"';\r\n      }\r\n    }\r\n    if (!this.transform.isIdentity()) {\r\n      svg += ' transform=\"matrix(' + this.transform.m.join(\",\") + ')\"';\r\n    }\r\n    svg += \">\";\r\n    svg += this.text;\r\n    svg += \"</text>\";\r\n    return svg;\r\n  }\r\n}\r\n", "// Mixin for Path and Group\r\n\r\nimport Point from \"./point.mjs\";\r\nimport Transform from \"./transform.mjs\";\r\n\r\nconst Transformable = {\r\n  translate: function (position) {\r\n    if (!position) {\r\n      position = Point.ZERO;\r\n    }\r\n    const t = new Transform().translate(position.x, position.y);\r\n    return t.transformShape(this);\r\n  },\r\n\r\n  scale: function (scale, origin) {\r\n    if (!origin) {\r\n      origin = Point.ZERO;\r\n    }\r\n    let sx, sy;\r\n    if (typeof scale === \"number\") {\r\n      sx = scale;\r\n      sy = scale;\r\n    } else {\r\n      sx = scale.x;\r\n      sy = scale.y;\r\n    }\r\n    let t = new Transform();\r\n    t = t.translate(origin.x, origin.y);\r\n    t = t.scale(sx, sy);\r\n    t = t.translate(-origin.x, -origin.y);\r\n    return t.transformShape(this);\r\n  },\r\n\r\n  rotate: function (angle, origin) {\r\n    if (!origin) {\r\n      origin = Point.ZERO;\r\n    }\r\n    let t = new Transform();\r\n    t = t.translate(origin.x, origin.y);\r\n    t = t.rotate(angle);\r\n    t = t.translate(-origin.x, -origin.y);\r\n    return t.transformShape(this);\r\n  },\r\n\r\n  skew: function (skew, origin) {\r\n    if (!origin) {\r\n      origin = Point.ZERO;\r\n    }\r\n    let t = new Transform();\r\n    t = t.translate(origin.x, origin.y);\r\n    t = t.skew(skew.x, skew.y);\r\n    t = t.translate(-origin.x, -origin.y);\r\n    return t.transformShape(this);\r\n  },\r\n};\r\n\r\nexport default Transformable;\r\n", "// Draw objects to the canvas\r\n\r\n\"use strict\";\r\n\r\nimport Color from \"../objects/color.mjs\";\r\n\r\n// Return true if an object can be drawn using the `g.draw` function.\r\nexport function isDrawable(o) {\r\n  if (Array.isArray(o)) {\r\n    o = o[0];\r\n  }\r\n  if (!o) {\r\n    return false;\r\n  } else if (typeof o.draw === \"function\") {\r\n    return true;\r\n  } else if (typeof o.x === \"number\" && typeof o.y === \"number\") {\r\n    return true;\r\n  } else if (\r\n    typeof o.r === \"number\" &&\r\n    typeof o.g === \"number\" &&\r\n    typeof o.b === \"number\"\r\n  ) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport function drawPoints(ctx, points) {\r\n  ctx.fillStyle = \"blue\";\r\n  ctx.beginPath();\r\n  var pt;\r\n  for (var i = 0; i < points.length; i += 1) {\r\n    pt = points[i];\r\n    ctx.moveTo(pt.x, pt.y);\r\n    ctx.arc(pt.x, pt.y, 2, 0, Math.PI * 2, false);\r\n  }\r\n  ctx.fill();\r\n}\r\n\r\nexport function drawColoredPoints(ctx, points) {\r\n  var pt;\r\n  for (var i = 0, n = points.length; i < n; i += 1) {\r\n    pt = points[i];\r\n    ctx.fillStyle = Color.toCSS(pt);\r\n    ctx.fillRect(pt.x - 2, pt.y - 2, 4, 4);\r\n  }\r\n}\r\n\r\nexport function drawRectangles(ctx, rectangles) {\r\n  ctx.save();\r\n  var r;\r\n  for (var i = 0; i < rectangles.length; i += 1) {\r\n    r = rectangles[i];\r\n    ctx.strokeStyle = \"black\";\r\n    ctx.strokeWidth = 1;\r\n    ctx.rect(r.x, r.y, r.width, r.height);\r\n    ctx.stroke();\r\n  }\r\n  ctx.restore();\r\n}\r\n\r\nexport function drawColors(ctx, colors) {\r\n  ctx.save();\r\n  var c;\r\n  for (var i = 0; i < colors.length; i += 1) {\r\n    c = colors[i];\r\n    ctx.fillStyle = Color.toCSS(c);\r\n    ctx.fillRect(0, 0, 30, 30);\r\n    ctx.translate(30, 0);\r\n  }\r\n  ctx.restore();\r\n}\r\n\r\nexport function draw(ctx, o) {\r\n  var k = o;\r\n  var isArray = false;\r\n  if (Array.isArray(o)) {\r\n    k = o[0];\r\n    isArray = true;\r\n  }\r\n\r\n  if (k) {\r\n    if (typeof k.draw === \"function\") {\r\n      if (isArray) {\r\n        for (var i = 0, n = o.length; i < n; i += 1) {\r\n          draw(ctx, o[i]);\r\n        }\r\n      } else {\r\n        o.draw(ctx);\r\n      }\r\n    } else if (typeof k.x === \"number\" && typeof k.y === \"number\") {\r\n      if (\r\n        typeof k.r === \"number\" &&\r\n        typeof k.g === \"number\" &&\r\n        typeof k.b === \"number\"\r\n      ) {\r\n        drawColoredPoints(ctx, isArray ? o : [o]);\r\n      } else if (typeof k.width === \"number\" && typeof k.height === \"number\") {\r\n        drawRectangles(ctx, isArray ? o : [o]);\r\n      } else {\r\n        drawPoints(ctx, isArray ? o : [o]);\r\n      }\r\n    } else if (\r\n      typeof k.r === \"number\" &&\r\n      typeof k.g === \"number\" &&\r\n      typeof k.b === \"number\"\r\n    ) {\r\n      drawColors(ctx, isArray ? o : [o]);\r\n    }\r\n  }\r\n}\r\n\r\nexport function toSVG(o, options) {\r\n  options = options || {};\r\n  var includeHeader = options.header === true;\r\n  var x = options.x !== undefined ? options.x : 0;\r\n  var y = options.y !== undefined ? options.y : 0;\r\n  var width = options.width !== undefined ? options.width : 500;\r\n  var height = options.height !== undefined ? options.height : 500;\r\n  var svg = \"\";\r\n  if (o) {\r\n    if (typeof o.toSVG === \"function\") {\r\n      svg = o.toSVG();\r\n    } else if (Array.isArray(o)) {\r\n      svg = \"<g>\\n\";\r\n      for (var i = 0, n = o.length; i < n; i += 1) {\r\n        svg += vg.toSVG(o[i]) + \"\\n\";\r\n      }\r\n      svg += \"</g>\\n\";\r\n    }\r\n  }\r\n  if (includeHeader) {\r\n    svg =\r\n      `<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n` +\r\n      `<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"${x}\" y=\"${y}\" width=\"${width}px\" height=\"${height}px\" viewBox=\"${x} ${y} ${width} ${height}\">\\n` +\r\n      svg +\r\n      \"\\n\" +\r\n      `</svg>\\n`;\r\n  }\r\n  return svg;\r\n}\r\n", "// Object creation / manipulation commands\r\n\r\nimport { flatten } from \"../../util.mjs\";\r\n\r\nimport { MOVETO, LINETO, QUADTO, CURVETO, CLOSE } from \"../util/bezier.mjs\";\r\nimport { pointInPolygon, angle, distance, coordinates } from \"../util/geo.mjs\";\r\nimport { degrees, snap } from \"../util/math.mjs\";\r\nimport randomGenerator from \"../../random.mjs\";\r\n\r\nimport Color from \"../objects/color.mjs\";\r\nimport Group from \"../objects/group.mjs\";\r\nimport Path from \"../objects/path.mjs\";\r\nimport Point from \"../objects/point.mjs\";\r\nimport Rect from \"../objects/rect.mjs\";\r\nimport Transform from \"../objects/transform.mjs\";\r\nimport Transformable from \"../objects/transformable.mjs\";\r\nimport ClipperLib from \"js-clipper\";\r\n// var ClipperLib = require(\"../../../../third_party/clipper\");\r\n\r\nfunction _cloneCommand(cmd) {\r\n  var newCmd = { type: cmd.type };\r\n  if (newCmd.type !== CLOSE) {\r\n    newCmd.x = cmd.x;\r\n    newCmd.y = cmd.y;\r\n  }\r\n  if (newCmd.type === QUADTO) {\r\n    newCmd.x1 = cmd.x1;\r\n    newCmd.y1 = cmd.y1;\r\n  } else if (newCmd.type === CURVETO) {\r\n    newCmd.x1 = cmd.x1;\r\n    newCmd.y1 = cmd.y1;\r\n    newCmd.x2 = cmd.x2;\r\n    newCmd.y2 = cmd.y2;\r\n  }\r\n  return newCmd;\r\n}\r\n\r\nexport const HORIZONTAL = \"horizontal\";\r\nexport const VERTICAL = \"vertical\";\r\n\r\nexport const EAST = \"e\";\r\nexport const WEST = \"w\";\r\nexport const NORTH = \"n\";\r\nexport const SOUTH = \"s\";\r\n\r\nexport function bounds(o) {\r\n  var r, i, n;\r\n  if (!o) {\r\n    return new Rect();\r\n  } else if (typeof o.bounds === \"function\") {\r\n    return o.bounds();\r\n  } else if (o.x !== undefined && o.y !== undefined) {\r\n    if (o.width !== undefined && o.height !== undefined) {\r\n      return new Rect(o.x, o.y, o.width, o.height);\r\n    } else {\r\n      return new Rect(o.x, o.y, 0, 0);\r\n    }\r\n  } else if (o.r !== undefined && o.g !== undefined && o.b !== undefined) {\r\n    return new vg.Rect(0, 0, 30, 30);\r\n  } else if (Array.isArray(o)) {\r\n    r = null;\r\n    n = o.length;\r\n    // A color array is special since the colors have no inherent position.\r\n    if (\r\n      n > 0 &&\r\n      o[0].r !== undefined &&\r\n      o[0].g !== undefined &&\r\n      o[0].b !== undefined\r\n    ) {\r\n      return new Rect(0, 0, o.length * 30, 30);\r\n    }\r\n    for (i = 0; i < n; i += 1) {\r\n      if (!r) {\r\n        r = vg.bounds(o[i]);\r\n      } else {\r\n        r = r.unite(vg.bounds(o[i]));\r\n      }\r\n    }\r\n    return r || new Rect();\r\n  } else {\r\n    return new Rect();\r\n  }\r\n}\r\n\r\nexport function makeCenteredRect(cx, cy, width, height) {\r\n  var x = cx - width / 2,\r\n    y = cy - height / 2;\r\n  return new Rect(x, y, width, height);\r\n}\r\n\r\nexport function makePoint(x, y) {\r\n  return new Point(x, y);\r\n}\r\n\r\nexport function makeRect(x, y, width, height) {\r\n  return new Rect(x, y, width, height);\r\n}\r\n\r\n// Combine all given shape arguments into a new group.\r\n// This function works like makeGroup, except that this can take any number\r\n// of arguments.\r\nexport function merge() {\r\n  var args = flatten(arguments);\r\n  var shapes = [];\r\n  for (var i = 0; i < args.length; i += 1) {\r\n    if (args[i] && args[i].length !== 0) {\r\n      shapes.push(args[i]);\r\n    }\r\n  }\r\n  return new Group(shapes);\r\n}\r\n\r\nexport function combinePaths(shape) {\r\n  return Path.combine(shape);\r\n}\r\n\r\nexport function toPoints(shape) {\r\n  if (!shape) {\r\n    return [];\r\n  }\r\n  var i;\r\n  if (shape.commands) {\r\n    var cmd,\r\n      commands = [];\r\n    for (i = 0; i < shape.commands.length; i += 1) {\r\n      cmd = shape.commands[i];\r\n      if (cmd.x !== undefined) {\r\n        commands.push(new Point(cmd.x, cmd.y));\r\n      }\r\n    }\r\n    return commands;\r\n  }\r\n  var points = [];\r\n  for (i = 0; i < shape.shapes.length; i += 1) {\r\n    points = points.concat(vg.shapePoints(shape.shapes[i]));\r\n  }\r\n  return points;\r\n}\r\nexport const shapePoints = toPoints;\r\n\r\n// FILTERS //////////////////////////////////////////////////////////////\r\n\r\nexport function colorize(shape, fill, stroke, strokeWidth) {\r\n  if (!shape) return null;\r\n  return shape.colorize(fill, stroke, strokeWidth);\r\n}\r\n\r\nexport function translate(shape, position) {\r\n  if (!shape) return null;\r\n  if (shape.translate) {\r\n    return shape.translate(position);\r\n  }\r\n  return Transformable.translate.apply(shape, [position]);\r\n}\r\n\r\nexport function scale(shape, scale, origin) {\r\n  if (!shape) return null;\r\n  if (shape.scale) {\r\n    return shape.scale(scale, origin);\r\n  }\r\n  return Transformable.scale.apply(shape, [scale, origin]);\r\n}\r\n\r\nexport function rotate(shape, angle, origin) {\r\n  if (!shape) return null;\r\n  if (shape.rotate) {\r\n    return shape.rotate(angle, origin);\r\n  }\r\n  return Transformable.rotate.apply(shape, [angle, origin]);\r\n}\r\n\r\nexport function skew(shape, skew, origin) {\r\n  if (!shape) return null;\r\n  if (shape.skew) {\r\n    return shape.skew(skew, origin);\r\n  }\r\n  return Transformable.skew.apply(shape, [skew, origin]);\r\n}\r\n\r\nexport function copy(shape, copies, order, translate, rotate, scale) {\r\n  var i,\r\n    t,\r\n    j,\r\n    op,\r\n    shapes = [],\r\n    tx = 0,\r\n    ty = 0,\r\n    r = 0,\r\n    sx = 1.0,\r\n    sy = 1.0;\r\n  for (i = 0; i < copies; i += 1) {\r\n    t = new Transform();\r\n    for (j = 0; j < order.length; j += 1) {\r\n      op = order[j];\r\n      if (op === \"t\") {\r\n        t = t.translate(tx, ty);\r\n      } else if (op === \"r\") {\r\n        t = t.rotate(r);\r\n      } else if (op === \"s\") {\r\n        t = t.scale(sx, sy);\r\n      }\r\n    }\r\n    if (\r\n      Array.isArray(shape) &&\r\n      shape.length > 0 &&\r\n      shape[0].x !== undefined &&\r\n      shape[0].y !== undefined\r\n    ) {\r\n      shapes = shapes.concat(t.transformShape(shape));\r\n    } else {\r\n      shapes.push(t.transformShape(shape));\r\n    }\r\n\r\n    tx += translate.x;\r\n    ty += translate.y;\r\n    r += rotate;\r\n    sx += scale.x;\r\n    sy += scale.y;\r\n  }\r\n  return shapes;\r\n}\r\n\r\nexport function fit(shape, position, width, height, stretch) {\r\n  if (!shape) return null;\r\n  stretch = stretch !== undefined ? stretch : false;\r\n  var t,\r\n    sx,\r\n    sy,\r\n    bounds = vg.bounds(shape),\r\n    bx = bounds.x,\r\n    by = bounds.y,\r\n    bw = bounds.width,\r\n    bh = bounds.height;\r\n\r\n  // Make sure bw and bh aren't infinitely small numbers.\r\n  // This will lead to incorrect transformations with for examples lines.\r\n  bw = bw > 0.000000000001 ? bw : 0;\r\n  bh = bh > 0.000000000001 ? bh : 0;\r\n\r\n  t = new Transform();\r\n  t = t.translate(position.x, position.y);\r\n\r\n  if (!stretch) {\r\n    // don't scale widths or heights that are equal to zero.\r\n    sx = bw > 0 ? width / bw : Number.MAX_VALUE;\r\n    sy = bh > 0 ? height / bh : Number.MAX_VALUE;\r\n    sx = sy = Math.min(sx, sy);\r\n  } else {\r\n    sx = bw > 0 ? width / bw : 1;\r\n    sy = bh > 0 ? height / bh : 1;\r\n  }\r\n\r\n  t = t.scale(sx, sy);\r\n  t = t.translate(-bw / 2 - bx, -bh / 2 - by);\r\n\r\n  return t.transformShape(shape);\r\n}\r\n\r\n// Fit the given shape to the bounding shape.\r\n// If stretch = true, proportions will be distorted.\r\nexport function fitTo(shape, bounding, stretch) {\r\n  if (!shape) return null;\r\n  if (!bounding) return shape;\r\n\r\n  var bounds = vg.bounds(bounding),\r\n    bx = bounds.x,\r\n    by = bounds.y,\r\n    bw = bounds.width,\r\n    bh = bounds.height;\r\n\r\n  return vg.fit(shape, { x: bx + bw / 2, y: by + bh / 2 }, bw, bh, stretch);\r\n}\r\n\r\nexport function mirror(shape, angle, origin, keepOriginal) {\r\n  if (!shape) return null;\r\n  var t = new Transform();\r\n  t = t.translate(origin.x, origin.y);\r\n  t = t.rotate(angle * 2 - 180);\r\n  t = t.scale(-1, 1);\r\n  t = t.translate(-origin.x, -origin.y);\r\n  var newShape = t.transformShape(shape);\r\n\r\n  if (keepOriginal) {\r\n    if (Array.isArray(shape) && shape.length > 0) {\r\n      return shape.concat(newShape);\r\n    }\r\n    return new Group([shape, newShape]);\r\n  } else {\r\n    return newShape;\r\n  }\r\n}\r\n\r\nexport function pathLength(shape, options) {\r\n  if (!shape) return 0;\r\n  var precision = 20;\r\n  if (options && options.precision) {\r\n    precision = options.precision;\r\n  }\r\n  return shape.length(precision);\r\n}\r\n\r\nexport function resampleByLength(shape, maxLength) {\r\n  if (!shape) return null;\r\n  return shape.resampleByLength(maxLength);\r\n}\r\n\r\nexport function resampleByAmount(shape, amount, perContour) {\r\n  if (!shape) return null;\r\n  return shape.resampleByAmount(amount, perContour);\r\n}\r\n\r\nexport function _wigglePoints(shape, offset, rand) {\r\n  var i, dx, dy;\r\n  if (shape.commands) {\r\n    var p = new Path([], shape.fill, shape.stroke, shape.strokeWidth);\r\n    for (i = 0; i < shape.commands.length; i += 1) {\r\n      dx = (rand(0, 1) - 0.5) * offset.x * 2;\r\n      dy = (rand(0, 1) - 0.5) * offset.y * 2;\r\n      var cmd = shape.commands[i];\r\n      if (cmd.type === MOVETO) {\r\n        p.moveTo(cmd.x + dx, cmd.y + dy);\r\n      } else if (cmd.type === LINETO) {\r\n        p.lineTo(cmd.x + dx, cmd.y + dy);\r\n      } else if (cmd.type === CURVETO) {\r\n        p.curveTo(cmd.x1, cmd.y1, cmd.x2, cmd.y2, cmd.x + dx, cmd.y + dy);\r\n      } else if (cmd.type === CLOSE) {\r\n        p.close();\r\n      }\r\n    }\r\n    return p;\r\n  } else if (shape.shapes) {\r\n    var wShapes = [];\r\n    wShapes.length = shape.shapes.length;\r\n    for (i = 0; i < shape.shapes.length; i += 1) {\r\n      wShapes[i] = vg._wigglePoints(shape.shapes[i], offset, rand);\r\n    }\r\n    return new Group(wShapes);\r\n  } else if (\r\n    Array.isArray(shape) &&\r\n    shape.length > 0 &&\r\n    shape[0].x !== undefined &&\r\n    shape[0].y !== undefined\r\n  ) {\r\n    var wPoints = [];\r\n    wPoints.length = shape.length;\r\n    for (i = 0; i < shape.length; i += 1) {\r\n      dx = (rand(0, 1) - 0.5) * offset.x * 2;\r\n      dy = (rand(0, 1) - 0.5) * offset.y * 2;\r\n      wPoints[i] = new Point(shape[i].x + dx, shape[i].y + dy);\r\n    }\r\n    return wPoints;\r\n  } else {\r\n    var w = [];\r\n    w.length = shape.length;\r\n    for (i = 0; i < shape.length; i += 1) {\r\n      w[i] = vg._wigglePoints(shape[i], offset, rand);\r\n    }\r\n    return w;\r\n  }\r\n}\r\n\r\nexport function wigglePoints(shape, offset, seed) {\r\n  if (!shape) return null;\r\n  seed = seed !== undefined ? seed : Math.random();\r\n  var rand = randomGenerator(seed);\r\n  if (offset === undefined) {\r\n    offset = { x: 10, y: 10 };\r\n  } else if (typeof offset === \"number\") {\r\n    offset = { x: offset, y: offset };\r\n  }\r\n  return vg._wigglePoints(shape, offset, rand);\r\n}\r\n\r\nexport function _wiggleContours(shape, offset, rand) {\r\n  var i;\r\n  if (shape.commands) {\r\n    var dx,\r\n      dy,\r\n      t,\r\n      subPaths = shape.contours(),\r\n      commands = [];\r\n    for (i = 0; i < subPaths.length; i += 1) {\r\n      dx = (rand(0, 1) - 0.5) * offset.x * 2;\r\n      dy = (rand(0, 1) - 0.5) * offset.y * 2;\r\n      t = new Transform().translate(dx, dy);\r\n      commands = commands.concat(\r\n        t.transformShape(new Path(subPaths[i])).commands\r\n      );\r\n    }\r\n    return new Path(commands, shape.fill, shape.stroke, shape.strokeWidth);\r\n  } else if (shape.shapes) {\r\n    var wShapes = [];\r\n    wShapes.length = shape.shapes.length;\r\n    for (i = 0; i < shape.shapes.length; i += 1) {\r\n      wShapes[i] = vg._wiggleContours(shape.shapes[i], offset, rand);\r\n    }\r\n    return new Group(wShapes);\r\n  } else {\r\n    var w = [];\r\n    w.length = shape.length;\r\n    for (i = 0; i < shape.length; i += 1) {\r\n      w[i] = vg._wiggleContours(shape[i], offset, rand);\r\n    }\r\n    return w;\r\n  }\r\n}\r\n\r\nexport function wiggleContours(shape, offset, seed) {\r\n  if (!shape) return null;\r\n  seed = seed !== undefined ? seed : Math.random();\r\n  var rand = randomGenerator(seed);\r\n  if (offset === undefined) {\r\n    offset = { x: 10, y: 10 };\r\n  } else if (typeof offset === \"number\") {\r\n    offset = { x: offset, y: offset };\r\n  }\r\n  return vg._wiggleContours(shape, offset, rand);\r\n}\r\n\r\nexport function _wigglePaths(shape, offset, rand) {\r\n  if (shape.commands) {\r\n    return shape;\r\n  } else if (shape.shapes) {\r\n    return new Group(vg._wigglePaths(shape.shapes, offset, rand));\r\n  } else if (Array.isArray(shape)) {\r\n    var subShape,\r\n      dx,\r\n      dy,\r\n      t,\r\n      newShapes = [];\r\n    for (var i = 0; i < shape.length; i += 1) {\r\n      subShape = shape[i];\r\n      if (subShape.commands) {\r\n        dx = (rand(0, 1) - 0.5) * offset.x * 2;\r\n        dy = (rand(0, 1) - 0.5) * offset.y * 2;\r\n        t = new Transform().translate(dx, dy);\r\n        newShapes.push(t.transformShape(subShape));\r\n      } else if (subShape.shapes) {\r\n        newShapes.push(vg._wigglePaths(subShape, offset, rand));\r\n      }\r\n    }\r\n    return newShapes;\r\n  }\r\n}\r\n\r\nexport function wigglePaths(shape, offset, seed) {\r\n  if (!shape) return null;\r\n  seed = seed !== undefined ? seed : Math.random();\r\n  var rand = randomGenerator(seed);\r\n  if (offset === undefined) {\r\n    offset = { x: 10, y: 10 };\r\n  } else if (typeof offset === \"number\") {\r\n    offset = { x: offset, y: offset };\r\n  }\r\n  return vg._wigglePaths(shape, offset, rand);\r\n}\r\n\r\n// Generate points within the boundaries of a shape.\r\nexport function scatterPoints(shape, amount, seed) {\r\n  if (!shape) return [];\r\n  seed = seed !== undefined ? seed : Math.random();\r\n  var i,\r\n    j,\r\n    contourPath,\r\n    nrKeypoints,\r\n    tries,\r\n    inContourCount,\r\n    x,\r\n    y,\r\n    rand = randomGenerator(seed),\r\n    bounds = shape.bounds(),\r\n    bx = bounds.x,\r\n    by = bounds.y,\r\n    bw = bounds.width,\r\n    bh = bounds.height,\r\n    contours = shape.contours(),\r\n    paths = [],\r\n    points = [],\r\n    POINTS_PER_SEGMENT = 5;\r\n\r\n  for (i = 0; i < contours.length; i++) {\r\n    contourPath = new Path(contours[i]);\r\n    nrKeypoints = contourPath.commands.length;\r\n    paths.push(\r\n      contourPath.points(nrKeypoints * POINTS_PER_SEGMENT, { closed: true })\r\n    );\r\n  }\r\n\r\n  for (i = 0; i < amount; i += 1) {\r\n    tries = 100;\r\n    while (tries > 0) {\r\n      inContourCount = 0;\r\n      x = bx + rand(0, 1) * bw;\r\n      y = by + rand(0, 1) * bh;\r\n      for (j = 0; j < paths.length; j++) {\r\n        if (pointInPolygon(paths[j], x, y)) {\r\n          inContourCount += 1;\r\n        }\r\n      }\r\n      if (inContourCount % 2) {\r\n        points.push(new Point(x, y));\r\n        break;\r\n      }\r\n      tries -= 1;\r\n    }\r\n  }\r\n  return points;\r\n}\r\n\r\nexport function connectPoints(points, closed) {\r\n  if (!points) return null;\r\n  var pt,\r\n    p = new Path();\r\n  for (var i = 0; i < points.length; i += 1) {\r\n    pt = points[i];\r\n    if (i === 0) {\r\n      p.moveTo(pt.x, pt.y);\r\n    } else {\r\n      p.lineTo(pt.x, pt.y);\r\n    }\r\n  }\r\n  if (closed) {\r\n    p.close();\r\n  }\r\n  p.fill = null;\r\n  p.stroke = Color.BLACK;\r\n  return p;\r\n}\r\n\r\nexport function align(shape, position, hAlign, vAlign) {\r\n  if (!shape) return null;\r\n  var dx,\r\n    dy,\r\n    t,\r\n    x = position.x,\r\n    y = position.y,\r\n    bounds = vg.bounds(shape);\r\n  if (hAlign === \"left\") {\r\n    dx = x - bounds.x;\r\n  } else if (hAlign === \"right\") {\r\n    dx = x - bounds.x - bounds.width;\r\n  } else if (hAlign === \"center\") {\r\n    dx = x - bounds.x - bounds.width / 2;\r\n  } else {\r\n    dx = 0;\r\n  }\r\n  if (vAlign === \"top\") {\r\n    dy = y - bounds.y;\r\n  } else if (vAlign === \"bottom\") {\r\n    dy = y - bounds.y - bounds.height;\r\n  } else if (vAlign === \"middle\") {\r\n    dy = y - bounds.y - bounds.height / 2;\r\n  } else {\r\n    dy = 0;\r\n  }\r\n\r\n  t = new Transform().translate(dx, dy);\r\n  return t.transformShape(shape);\r\n}\r\n\r\n// Snap geometry to a grid.\r\nexport function snapShape(shape, distance, strength, center) {\r\n  if (!shape) return null;\r\n  strength = strength !== undefined ? strength : 1;\r\n  center = center || Point.ZERO;\r\n\r\n  var i, x, y;\r\n  if (shape.commands) {\r\n    var p = new Path([], shape.fill, shape.stroke, shape.strokeWidth);\r\n    var cmd, x1, y1, x2, y2;\r\n    for (i = 0; i < shape.commands.length; i += 1) {\r\n      cmd = shape.commands[i];\r\n      if (cmd.type === MOVETO || cmd.type === LINETO || cmd.type === CURVETO) {\r\n        x = snap(cmd.x + center.x, distance, strength) - center.x;\r\n        y = snap(cmd.y + center.y, distance, strength) - center.y;\r\n        if (cmd.type === MOVETO) {\r\n          p.moveTo(x, y);\r\n        } else if (cmd.type === LINETO) {\r\n          p.lineTo(x, y);\r\n        } else if (cmd.type === CURVETO) {\r\n          x1 = snap(cmd.x1 + center.x, distance, strength) - center.x;\r\n          y1 = snap(cmd.y1 + center.y, distance, strength) - center.y;\r\n          x2 = snap(cmd.x2 + center.x, distance, strength) - center.x;\r\n          y2 = snap(cmd.y2 + center.y, distance, strength) - center.y;\r\n          p.curveTo(x1, y1, x2, y2, x, y);\r\n        }\r\n      } else if (cmd.type === CLOSE) {\r\n        p.close();\r\n      } else {\r\n        throw new Error(\"Invalid path command \" + cmd);\r\n      }\r\n    }\r\n    return p;\r\n  } else if (shape.shapes) {\r\n    var sShapes = [];\r\n    sShapes.length = shape.shapes.length;\r\n    for (i = 0; i < shape.shapes.length; i += 1) {\r\n      sShapes[i] = vg.snap(shape.shapes[i], distance, strength, center);\r\n    }\r\n    return new Group(sShapes);\r\n  } else if (\r\n    Array.isArray(shape) &&\r\n    shape.length > 0 &&\r\n    shape[0].x !== undefined &&\r\n    shape[0].y !== undefined\r\n  ) {\r\n    var point,\r\n      sPoints = [];\r\n    sPoints.length = shape.length;\r\n    for (i = 0; i < shape.length; i += 1) {\r\n      point = shape[i];\r\n      x = snap(point.x + center.x, distance, strength) - center.x;\r\n      y = snap(point.y + center.y, distance, strength) - center.y;\r\n      sPoints[i] = new Point(x, y);\r\n    }\r\n    return sPoints;\r\n  } else {\r\n    var s = [];\r\n    s.length = shape.length;\r\n    for (i = 0; i < shape.length; i += 1) {\r\n      s[i] = vg.snap(shape[i], distance, strength, center);\r\n    }\r\n    return s;\r\n  }\r\n}\r\n\r\nexport function deletePoints(shape, bounding, invert) {\r\n  if (!shape) return null;\r\n  if (!bounding) return shape;\r\n  var i,\r\n    cmd,\r\n    commands = [];\r\n  var pt,\r\n    points = [];\r\n  if (shape.commands) {\r\n    var newCurve = true;\r\n    for (i = 0; i < shape.commands.length; i += 1) {\r\n      cmd = _cloneCommand(shape.commands[i]);\r\n      if (\r\n        cmd.x === undefined ||\r\n        (invert && bounding.contains(cmd.x, cmd.y)) ||\r\n        (!invert && !bounding.contains(cmd.x, cmd.y))\r\n      ) {\r\n        if (newCurve && cmd.type !== MOVETO) {\r\n          cmd.type = MOVETO;\r\n        }\r\n        commands.push(cmd);\r\n        if (cmd.type === MOVETO) {\r\n          newCurve = false;\r\n        } else if (cmd.type === CLOSE) {\r\n          newCurve = true;\r\n        }\r\n      }\r\n    }\r\n    return new Path(commands, shape.fill, shape.stroke, shape.strokeWidth);\r\n  } else if (shape.shapes) {\r\n    var dShapes = [];\r\n    dShapes.length = shape.shapes.length;\r\n    for (i = 0; i < shape.shapes.length; i += 1) {\r\n      dShapes[i] = vg.deletePoints(shape.shapes[i], bounding, invert);\r\n    }\r\n    return new Group(dShapes);\r\n  } else if (\r\n    Array.isArray(shape) &&\r\n    shape.length > 0 &&\r\n    shape[0].x !== undefined &&\r\n    shape[0].y !== undefined\r\n  ) {\r\n    for (i = 0; i < shape.length; i += 1) {\r\n      pt = shape[i];\r\n      if (\r\n        (invert && bounding.contains(pt.x, pt.y)) ||\r\n        (!invert && !bounding.contains(pt.x, pt.y))\r\n      ) {\r\n        points.push(_cloneCommand(pt));\r\n      }\r\n    }\r\n    return points;\r\n  } else {\r\n    var d = [];\r\n    d.length = shape.length;\r\n    for (i = 0; i < shape.length; i += 1) {\r\n      d[i] = vg.deletePoints(shape[i], bounding, invert);\r\n    }\r\n    return d;\r\n  }\r\n}\r\n\r\nexport function deletePaths(shape, bounding, invert) {\r\n  if (!shape || shape.commands) {\r\n    return null;\r\n  } else if (shape.shapes) {\r\n    return new Group(vg.deletePaths(shape.shapes, bounding, invert));\r\n  } else if (Array.isArray(shape)) {\r\n    if (!bounding) return shape;\r\n    var j,\r\n      s,\r\n      selected,\r\n      cmd,\r\n      subShapes,\r\n      newShapes = [];\r\n    var shapes = shape;\r\n    for (var i = 0; i < shapes.length; i += 1) {\r\n      s = shapes[i];\r\n      if (s.commands) {\r\n        selected = false;\r\n        for (j = 0; j < s.commands.length; j += 1) {\r\n          cmd = s.commands[j];\r\n          if (cmd.x !== undefined && bounding.contains(cmd.x, cmd.y)) {\r\n            selected = true;\r\n            break;\r\n          }\r\n        }\r\n        if (!((invert && !selected) || (selected && !invert))) {\r\n          newShapes.push(s);\r\n        }\r\n      } else if (s.shapes) {\r\n        subShapes = vg.deletePaths(s, bounding, invert);\r\n        if (subShapes.length !== 0) {\r\n          newShapes.push(subShapes);\r\n        }\r\n      }\r\n    }\r\n    return newShapes;\r\n  }\r\n}\r\n\r\nexport function delete_(shape, bounding, scope, invert) {\r\n  if (shape === null || bounding === null) {\r\n    return null;\r\n  }\r\n  if (scope === \"points\") {\r\n    return vg.deletePoints(shape, bounding, invert);\r\n  }\r\n  if (scope === \"paths\") {\r\n    return vg.deletePaths(shape, bounding, invert);\r\n  }\r\n  throw new Error(\"Invalid scope.\");\r\n}\r\n\r\nexport function pointOnPath(shape, t) {\r\n  if (!shape) return Point.ZERO;\r\n  if (shape.shapes) {\r\n    shape = new Path(vg.combinePaths(shape));\r\n  }\r\n  t = t % 1;\r\n  if (t < 0) {\r\n    t = 1 + t;\r\n  }\r\n  var pt = shape.point(t);\r\n  return new Point(pt.x, pt.y);\r\n}\r\n\r\nexport function shapeOnPath(\r\n  shapes,\r\n  path,\r\n  amount,\r\n  alignment,\r\n  spacing,\r\n  margin,\r\n  baselineOffset\r\n) {\r\n  if (!shapes) {\r\n    return [];\r\n  }\r\n  if (path === null) {\r\n    return [];\r\n  }\r\n\r\n  if (alignment === \"trailing\") {\r\n    shapes = shapes.slice();\r\n    shapes.reverse();\r\n  }\r\n\r\n  var i,\r\n    pos,\r\n    p1,\r\n    p2,\r\n    a,\r\n    t,\r\n    length = path.length() - margin,\r\n    m = margin / path.length(),\r\n    c = 0,\r\n    newShapes = [];\r\n\r\n  function putOnPath(shape) {\r\n    if (alignment === \"distributed\") {\r\n      var p = length / (amount * shapes.length - 1);\r\n      pos = (c * p) / length;\r\n      pos = m + pos * (1 - 2 * m);\r\n    } else {\r\n      pos = ((c * spacing) % length) / length;\r\n      pos = m + pos * (1 - m);\r\n\r\n      if (alignment === \"trailing\") {\r\n        pos = 1 - pos;\r\n      }\r\n    }\r\n\r\n    p1 = path.point(pos);\r\n    p2 = path.point(pos + 0.0000001);\r\n    a = geo.angle(p1.x, p1.y, p2.x, p2.y);\r\n    if (baselineOffset) {\r\n      p1 = geo.coordinates(p1.x, p1.y, a - 90, baselineOffset);\r\n    }\r\n    t = new Transform();\r\n    t = t.translate(p1.x, p1.y);\r\n    t = t.rotate(a);\r\n    newShapes.push(t.transformShape(shape));\r\n    c += 1;\r\n  }\r\n\r\n  for (i = 0; i < amount; i += 1) {\r\n    _.each(shapes, putOnPath);\r\n  }\r\n  return newShapes;\r\n}\r\n\r\nexport function _x(shape) {\r\n  if (shape.x !== undefined) {\r\n    return shape.x;\r\n  } else {\r\n    return shape.bounds().x;\r\n  }\r\n}\r\n\r\nexport function _y(shape) {\r\n  if (shape.y !== undefined) {\r\n    return shape.y;\r\n  } else {\r\n    return shape.bounds().y;\r\n  }\r\n}\r\n\r\nexport function _angleToPoint(point) {\r\n  return function (shape) {\r\n    if (shape.x !== undefined && shape.y !== undefined) {\r\n      return angle(shape.x, shape.y, point.x, point.y);\r\n    } else {\r\n      var centerPoint = shape.bounds().centerPoint();\r\n      return angle(centerPoint.x, centerPoint.y, point.x, point.y);\r\n    }\r\n  };\r\n}\r\n\r\nexport function _distanceToPoint(point) {\r\n  return function (shape) {\r\n    if (shape.x !== undefined && shape.y !== undefined) {\r\n      return distance(shape.x, shape.y, point.x, point.y);\r\n    } else {\r\n      var centerPoint = shape.bounds().centerPoint();\r\n      return distance(centerPoint.x, centerPoint.y, point.x, point.y);\r\n    }\r\n  };\r\n}\r\n\r\nexport function shapeSort(shapes, method, origin) {\r\n  if (!shapes) return null;\r\n  origin = origin || Point.ZERO;\r\n\r\n  var methods = {\r\n    x: vg._x,\r\n    y: vg._y,\r\n    angle: vg._angleToPoint(origin),\r\n    distance: vg._distanceToPoint(origin),\r\n  };\r\n  method = methods[method];\r\n  if (method === undefined) {\r\n    return shapes;\r\n  }\r\n  var newShapes = shapes.slice(0);\r\n  newShapes.sort(function (a, b) {\r\n    var _a = method(a),\r\n      _b = method(b);\r\n    if (_a < _b) {\r\n      return -1;\r\n    }\r\n    if (_a > _b) {\r\n      return 1;\r\n    }\r\n    return 0;\r\n  });\r\n  return newShapes;\r\n}\r\n\r\nexport function group() {\r\n  return new Group(flatten(arguments));\r\n}\r\n\r\nexport function ungroup(shape) {\r\n  if (!shape) {\r\n    return [];\r\n  } else if (shape.shapes) {\r\n    var i,\r\n      s,\r\n      shapes = [];\r\n    for (i = 0; i < shape.shapes.length; i += 1) {\r\n      s = shape.shapes[i];\r\n      if (s.commands) {\r\n        shapes.push(s);\r\n      } else if (s.shapes) {\r\n        shapes = shapes.concat(vg.ungroup(s));\r\n      }\r\n    }\r\n    return shapes;\r\n  } else if (shape.commands) {\r\n    return [shape];\r\n  } else {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function centerPoint(shape) {\r\n  if (!shape) return Point.ZERO;\r\n  var r = vg.bounds(shape);\r\n  return new Point(r.x + r.width / 2, r.y + r.height / 2);\r\n}\r\n\r\nexport function link(shape1, shape2, orientation) {\r\n  if (!shape1 || !shape2) return null;\r\n  var p = new Path();\r\n  var a = shape1.bounds();\r\n  var b = shape2.bounds();\r\n  if (orientation === vg.HORIZONTAL) {\r\n    var hw = (b.x - (a.x + a.width)) / 2;\r\n    p.moveTo(a.x + a.width, a.y);\r\n    p.curveTo(a.x + a.width + hw, a.y, b.x - hw, b.y, b.x, b.y);\r\n    p.lineTo(b.x, b.y + b.height);\r\n    p.curveTo(\r\n      b.x - hw,\r\n      b.y + b.height,\r\n      a.x + a.width + hw,\r\n      a.y + a.height,\r\n      a.x + a.width,\r\n      a.y + a.height\r\n    );\r\n    p.close();\r\n  } else {\r\n    var hh = (b.y - (a.y + a.height)) / 2;\r\n    p.moveTo(a.x, a.y + a.height);\r\n    p.curveTo(a.x, a.y + a.height + hh, b.x, b.y - hh, b.x, b.y);\r\n    p.lineTo(b.x + b.width, b.y);\r\n    p.curveTo(\r\n      b.x + b.width,\r\n      b.y - hh,\r\n      a.x + a.width,\r\n      a.y + a.height + hh,\r\n      a.x + a.width,\r\n      a.y + a.height\r\n    );\r\n    p.close();\r\n  }\r\n  return p;\r\n}\r\n\r\nvar compoundMethods = {\r\n  union: ClipperLib.ClipType.ctUnion,\r\n  difference: ClipperLib.ClipType.ctDifference,\r\n  intersection: ClipperLib.ClipType.ctIntersection,\r\n  xor: ClipperLib.ClipType.ctXor,\r\n};\r\n\r\nexport function _compoundToPoints(shape) {\r\n  var l1 = [];\r\n  var i, l, s, j, pt;\r\n  for (i = 0; i < shape.length; i += 1) {\r\n    l = [];\r\n    s = shape[i];\r\n    for (j = 0; j < s.length; j += 1) {\r\n      pt = s[j];\r\n      if (pt.type !== CLOSE) {\r\n        l.push({ X: pt.x, Y: pt.y });\r\n      }\r\n    }\r\n    l1.push(l);\r\n  }\r\n  return l1;\r\n}\r\n\r\nfunction cmdToPathKit(cmd) {\r\n  if (!window.PathKit) {\r\n    throw new Error(\"PathKit module not found.\");\r\n  }\r\n  var PathKit = window.PathKit;\r\n  if (cmd.type === MOVETO) {\r\n    return [PathKit.MOVE_VERB, cmd.x, cmd.y];\r\n  } else if (cmd.type === LINETO) {\r\n    return [PathKit.LINE_VERB, cmd.x, cmd.y];\r\n  } else if (cmd.type === CURVETO) {\r\n    return [PathKit.CUBIC_VERB, cmd.x1, cmd.y1, cmd.x2, cmd.y2, cmd.x, cmd.y];\r\n  } else if (cmd.type === CLOSE) {\r\n    return [PathKit.CLOSE_VERB];\r\n  }\r\n}\r\n\r\nvar compoundOpsPathKit;\r\n\r\nexport function _compoundPathKit(shape1, shape2, method) {\r\n  if (!window.PathKit) {\r\n    throw new Error(\"PathKit module not found.\");\r\n  }\r\n  var PathKit = window.PathKit;\r\n  if (!compoundOpsPathKit) {\r\n    compoundOpsPathKit = {\r\n      union: PathKit.PathOp.UNION,\r\n      difference: PathKit.PathOp.DIFFERENCE,\r\n      intersection: PathKit.PathOp.INTERSECT,\r\n      xor: PathKit.PathOp.XOR,\r\n    };\r\n  }\r\n\r\n  var cmds1 = shape1.commands.map(cmdToPathKit);\r\n  var cmds2 = shape2.commands.map(cmdToPathKit);\r\n  var p1 = PathKit.FromCmds(cmds1);\r\n  var p2 = PathKit.FromCmds(cmds2);\r\n  p1.op(p2, compoundOpsPathKit[method]);\r\n  var cmds = p1.toCmds();\r\n  var path = new Path();\r\n  cmds.forEach(function (cmd) {\r\n    if (cmd[0] === PathKit.MOVE_VERB) {\r\n      path.moveTo(cmd[1], cmd[2]);\r\n    } else if (cmd[0] === PathKit.LINE_VERB) {\r\n      path.lineTo(cmd[1], cmd[2]);\r\n    } else if (cmd[0] === PathKit.CUBIC_VERB) {\r\n      path.curveTo(cmd[1], cmd[2], cmd[3], cmd[4], cmd[5], cmd[6]);\r\n    } else if (cmd[0] === PathKit.CLOSE_VERB) {\r\n      path.closePath();\r\n    }\r\n  });\r\n  p1.delete();\r\n  p2.delete();\r\n  return path;\r\n}\r\n\r\nexport function compound(shape1, shape2, method) {\r\n  if (!shape1.commands) {\r\n    shape1 = Path.combine(shape1);\r\n  }\r\n  if (!shape2.commands) {\r\n    shape2 = Path.combine(shape2);\r\n  }\r\n\r\n  // With curved input, try returning smooth curves instead of line segmented shapes.\r\n  // For this to work, the Skia PathKit webassembly needs to be included into the page and the page served through http or https.\r\n  // See https://skia.org/user/modules/pathkit\r\n\r\n  if (\r\n    typeof window !== \"undefined\" &&\r\n    window.PathKit &&\r\n    window.PathKit.NewPath\r\n  ) {\r\n    return vg._compoundPathKit(shape1, shape2, method);\r\n  }\r\n  var contours1 = shape1.resampleByLength(1).contours();\r\n  var contours2 = shape2.resampleByLength(1).contours();\r\n\r\n  var subjPaths = vg._compoundToPoints(contours1);\r\n  var clipPaths = vg._compoundToPoints(contours2);\r\n  var scale = 100;\r\n  ClipperLib.JS.ScaleUpPaths(subjPaths, scale);\r\n  ClipperLib.JS.ScaleUpPaths(clipPaths, scale);\r\n\r\n  var cpr = new ClipperLib.Clipper();\r\n  cpr.AddPaths(subjPaths, ClipperLib.PolyType.ptSubject, shape1.isClosed());\r\n  cpr.AddPaths(clipPaths, ClipperLib.PolyType.ptClip, shape2.isClosed());\r\n\r\n  var solutionPaths = new ClipperLib.Paths();\r\n  cpr.Execute(\r\n    compoundMethods[method],\r\n    solutionPaths,\r\n    ClipperLib.PolyFillType.pftNonZero,\r\n    ClipperLib.PolyFillType.pftNonZero\r\n  );\r\n  solutionPaths = ClipperLib.JS.Clean(solutionPaths, 0.1 * scale);\r\n  ClipperLib.JS.ScaleDownPaths(solutionPaths, scale);\r\n  var path = new Path();\r\n  var i, j, s;\r\n  for (i = 0; i < solutionPaths.length; i += 1) {\r\n    s = solutionPaths[i];\r\n    for (j = 0; j < s.length; j += 1) {\r\n      if (j === 0) {\r\n        path.moveTo(s[j].X, s[j].Y);\r\n      } else {\r\n        path.lineTo(s[j].X, s[j].Y);\r\n      }\r\n    }\r\n    if (s[0].X !== s[s.length - 1].X || s[0].Y !== s[s.length - 1].Y) {\r\n      path.closePath();\r\n    }\r\n  }\r\n  return path;\r\n}\r\n\r\nfunction constructPath(points, closed) {\r\n  const segments = [];\r\n  let d = {};\r\n  let i = 0;\r\n  points.forEach((pt) => {\r\n    if (i === 0) {\r\n      d._in = pt;\r\n    } else if (i === 1) {\r\n      d._pt = pt;\r\n    } else if (i === 2) {\r\n      d._out = pt;\r\n    }\r\n    i += 1;\r\n    if (i === 3) {\r\n      segments.push(d);\r\n      i = 0;\r\n      d = {};\r\n    }\r\n  });\r\n  const commands = [];\r\n  let length = segments.length;\r\n  if (closed) {\r\n    length += 1;\r\n  }\r\n  for (i = 0; i < length; i += 1) {\r\n    let seg = segments[i % segments.length];\r\n    if (i === 0) {\r\n      commands.push({ cmd: \"moveto\", pt: seg._pt });\r\n    } else {\r\n      d = {\r\n        cmd: \"curveto\",\r\n        pt: seg._pt,\r\n        ctrl1: segments[i - 1]._out,\r\n        ctrl2: seg._in,\r\n      };\r\n      commands.push(d);\r\n    }\r\n  }\r\n  const path = new Path();\r\n  commands.forEach((el) => {\r\n    if (el.cmd === \"moveto\") {\r\n      path.moveTo(el.pt.x, el.pt.y);\r\n    } else if (el.cmd === \"curveto\") {\r\n      path.curveTo(\r\n        el.ctrl1.x,\r\n        el.ctrl1.y,\r\n        el.ctrl2.x,\r\n        el.ctrl2.y,\r\n        el.pt.x,\r\n        el.pt.y\r\n      );\r\n    }\r\n  });\r\n  return path;\r\n}\r\n\r\nexport function roundedSegments(shape, d) {\r\n  if (!d || d.length === 0) {\r\n    return shape;\r\n  }\r\n  const points = vg.toPoints(shape);\r\n  const newPoints = [];\r\n  for (let i = 0; i < points.length; i += 1) {\r\n    let pt = points[i];\r\n    let prev;\r\n    if (i === 0) {\r\n      prev = points[points.length - 1];\r\n    } else {\r\n      prev = points[i - 1];\r\n    }\r\n    let next = points[(i + 1) % points.length];\r\n    let a = degrees(Math.atan2(next.y - prev.y, next.x - prev.x));\r\n    let c1 = coordinates(pt.x, pt.y, a, -d[i % d.length]);\r\n    let c2 = coordinates(pt.x, pt.y, a, d[i % d.length]);\r\n    newPoints.push(c1);\r\n    newPoints.push(pt);\r\n    newPoints.push(c2);\r\n  }\r\n  let path = constructPath(newPoints, shape.isClosed());\r\n  path.fill = shape.fill;\r\n  path.stroke = shape.stroke;\r\n  path.strokeWidth = shape.strokeWidth;\r\n  return path;\r\n}\r\n", "// Basic shapes\r\n\r\n\"use strict\";\r\n\r\nimport { angle, coordinates } from \"../util/geo.mjs\";\r\n\r\nimport Color from \"../objects/color.mjs\";\r\nimport Path from \"../objects/path.mjs\";\r\nimport Point from \"../objects/point.mjs\";\r\nimport Text from \"../objects/text.mjs\";\r\n\r\nexport function roundedRect(cx, cy, width, height, rx, ry) {\r\n  var p = new Path();\r\n  p.addRoundedRect(cx, cy, width, height, rx, ry);\r\n  return p;\r\n}\r\n\r\nexport function quad(pt1, pt2, pt3, pt4) {\r\n  var args = arguments;\r\n  var p = new Path();\r\n  if (args.length === 8) {\r\n    Path.prototype.addQuad.apply(p, args);\r\n  } else {\r\n    pt1 = Point.read(pt1);\r\n    pt2 = Point.read(pt2);\r\n    pt3 = Point.read(pt3);\r\n    pt4 = Point.read(pt4);\r\n    p.addQuad(pt1.x, pt1.y, pt2.x, pt2.y, pt3.x, pt3.y, pt4.x, pt4.y);\r\n  }\r\n  return p;\r\n}\r\n\r\nexport function rect(position, width, height, roundness) {\r\n  var args = arguments;\r\n  if (args.length === 3) {\r\n    position = Point.read(position);\r\n  } else if (args.length === 4) {\r\n    if (typeof args[0] === \"number\" && typeof args[1] === \"number\") {\r\n      position = Point.read(args[0], args[1]);\r\n      width = args[2];\r\n      height = args[3];\r\n      roundness = null;\r\n    } else {\r\n      position = Point.read(position);\r\n      roundness = Point.read(roundness);\r\n    }\r\n  } else if (args.length === 5 || args.length === 6) {\r\n    position = Point.read(args[0], args[1]);\r\n    width = args[2];\r\n    height = args[3];\r\n    if (args.length === 5 && typeof args[4] === \"number\") {\r\n      roundness = Point.read(args[4], args[4]);\r\n    } else {\r\n      roundness = Point.read(args[4], args[5]);\r\n    }\r\n  }\r\n\r\n  if (!roundness || (roundness.x === 0 && roundness.y === 0)) {\r\n    var p = new Path();\r\n    p.addRect(position.x - width / 2, position.y - height / 2, width, height);\r\n    return p;\r\n  } else {\r\n    return vg.roundedRect(\r\n      position.x - width / 2,\r\n      position.y - height / 2,\r\n      width,\r\n      height,\r\n      roundness.x,\r\n      roundness.y\r\n    );\r\n  }\r\n}\r\n\r\nexport function ellipse(position, width, height) {\r\n  var args = arguments;\r\n  if (args.length === 4) {\r\n    position = Point.read(args[0], args[1]);\r\n    width = args[2];\r\n    height = args[3];\r\n  } else {\r\n    position = Point.read(position);\r\n  }\r\n  var p = new Path();\r\n  p.addEllipse(position.x - width / 2, position.y - height / 2, width, height);\r\n  return p;\r\n}\r\n\r\nexport function line(point1, point2) {\r\n  var args = arguments;\r\n  if (args.length === 4) {\r\n    point1 = Point.read(args[0], args[1]);\r\n    point2 = Point.read(args[2], args[3]);\r\n  } else {\r\n    point1 = Point.read(point1);\r\n    point2 = Point.read(point2);\r\n  }\r\n  var line = new Path();\r\n  line.addLine(point1.x, point1.y, point2.x, point2.y);\r\n  line.fill = null;\r\n  line.stroke = \"black\";\r\n  return line;\r\n}\r\n\r\nexport function lineAngle(point, angle, distance) {\r\n  var args = arguments;\r\n  if (args.length === 4) {\r\n    point = Point.read(args[0], args[1]);\r\n    distance = args[2];\r\n    angle = args[3];\r\n  } else {\r\n    point = Point.read(point);\r\n  }\r\n  var point2 = coordinates(point.x, point.y, angle, distance);\r\n  return vg.line(point, point2);\r\n}\r\n\r\nexport function arc(position, width, height, startAngle, degrees, arcType) {\r\n  var args = arguments;\r\n  if (args.length === 7) {\r\n    position = Point.read(args[0], args[1]);\r\n    width = args[2];\r\n    height = args[3];\r\n    startAngle = args[4];\r\n    degrees = args[5];\r\n    arcType = args[6];\r\n  } else {\r\n    position = Point.read(position);\r\n  }\r\n  var p = new Path();\r\n  p.addArc(position.x, position.y, width, height, startAngle, degrees, arcType);\r\n  return p;\r\n}\r\n\r\nexport function curve(pt1, pt2, t, distance) {\r\n  var args = arguments;\r\n  if (args.length === 6) {\r\n    pt1 = Point.read(args[0], args[1]);\r\n    pt2 = Point.read(args[2], args[3]);\r\n    t = args[4];\r\n    distance = args[5];\r\n  } else {\r\n    pt1 = Point.read(pt1);\r\n    pt2 = Point.read(pt2);\r\n  }\r\n\r\n  var cx = pt1.x + t * (pt2.x - pt1.x),\r\n    cy = pt1.y + t * (pt2.y - pt1.y),\r\n    a = angle(pt1.x, pt1.y, pt2.x, pt2.y) + 90,\r\n    q = coordinates(cx, cy, a, distance),\r\n    qx = q.x,\r\n    qy = q.y,\r\n    c1x = pt1.x + (2 / 3.0) * (qx - pt1.x),\r\n    c1y = pt1.y + (2 / 3.0) * (qy - pt1.y),\r\n    c2x = pt2.x + (2 / 3.0) * (qx - pt2.x),\r\n    c2y = pt2.y + (2 / 3.0) * (qy - pt2.y);\r\n\r\n  var p = new Path();\r\n  p.moveTo(pt1.x, pt1.y);\r\n  p.curveTo(c1x, c1y, c2x, c2y, pt2.x, pt2.y);\r\n  p.fill = null;\r\n  p.stroke = Color.BLACK;\r\n  return p;\r\n}\r\n\r\nexport function polygon(position, radius, sides, align) {\r\n  var args = arguments;\r\n  if (\r\n    args.length === 5 ||\r\n    (args.length === 4 &&\r\n      typeof args[0] === \"number\" &&\r\n      typeof args[1] === \"number\")\r\n  ) {\r\n    position = Point.read(args[0], args[1]);\r\n    radius = args[2];\r\n    sides = args[3];\r\n    align = args.length === 5 ? args[4] : true;\r\n  } else {\r\n    position = Point.read(position);\r\n    if (args.length === 3) {\r\n      align = true;\r\n    }\r\n  }\r\n  sides = Math.max(sides, 3);\r\n  var c0,\r\n    c1,\r\n    i,\r\n    c,\r\n    x = position.x,\r\n    y = position.y,\r\n    r = radius,\r\n    a = 360.0 / sides,\r\n    da = 0;\r\n  if (align === true) {\r\n    c0 = coordinates(x, y, 0, r);\r\n    c1 = coordinates(x, y, a, r);\r\n    da = -angle(c1.x, c1.y, c0.x, c0.y);\r\n  }\r\n  var p = new Path();\r\n  for (i = 0; i < sides; i += 1) {\r\n    c = coordinates(x, y, a * i + da, r);\r\n    if (i === 0) {\r\n      p.moveTo(c.x, c.y);\r\n    } else {\r\n      p.lineTo(c.x, c.y);\r\n    }\r\n  }\r\n  p.close();\r\n  return p;\r\n}\r\n\r\nexport function star(position, points, outer, inner) {\r\n  var args = arguments;\r\n  if (\r\n    args.length === 5 ||\r\n    (args.length === 4 &&\r\n      typeof args[0] === \"number\" &&\r\n      typeof args[1] === \"number\")\r\n  ) {\r\n    position = Point.read(args[0], args[1]);\r\n    points = args[2];\r\n    outer = args[3];\r\n    inner = args[4];\r\n  } else {\r\n    position = Point.read(position);\r\n  }\r\n  if (!inner) {\r\n    inner = outer;\r\n  }\r\n  var i, angle, radius, x, y;\r\n  var p = new Path();\r\n  p.moveTo(position.x, position.y + outer / 2);\r\n  // Calculate the points of the star.\r\n  for (i = 1; i < points * 2; i += 1) {\r\n    angle = (i * Math.PI) / points;\r\n    radius = i % 2 === 1 ? inner / 2 : outer / 2;\r\n    x = position.x + radius * Math.sin(angle);\r\n    y = position.y + radius * Math.cos(angle);\r\n    p.lineTo(x, y);\r\n  }\r\n  p.close();\r\n  return p;\r\n}\r\n\r\nexport function nonEmpty(s) {\r\n  return s !== \"\";\r\n}\r\n\r\nexport function stripCommas(c) {\r\n  return c.replace(/,/g, \" \");\r\n}\r\n\r\nexport function freehand(pathString) {\r\n  var i,\r\n    j,\r\n    x,\r\n    y,\r\n    values,\r\n    contours = [],\r\n    elems = pathString.split(\"M\");\r\n\r\n  for (i = 0; i < elems.length; i += 1) {\r\n    if (nonEmpty(elems[i])) {\r\n      contours.push(stripCommas(elems[i]));\r\n    }\r\n  }\r\n\r\n  var p = new Path();\r\n  for (j = 0; j < contours.length; j += 1) {\r\n    values = [];\r\n    elems = contours[j].split(\" \");\r\n    for (i = 0; i < elems.length; i += 1) {\r\n      if (nonEmpty(elems[i])) {\r\n        values.push(elems[i]);\r\n      }\r\n    }\r\n    for (i = 0; i < values.length; i += 2) {\r\n      if (values[i + 1] !== undefined) {\r\n        x = parseFloat(values[i]);\r\n        y = parseFloat(values[i + 1]);\r\n        if (i === 0) {\r\n          p.moveTo(x, y);\r\n        } else {\r\n          p.lineTo(x, y);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  p.fill = null;\r\n  p.stroke = Color.BLACK;\r\n  return p;\r\n}\r\n\r\n// Create a grid of points.\r\nexport function grid(columns, rows, columnWidth, rowHeight, position) {\r\n  var gridWidth,\r\n    left,\r\n    gridHeight,\r\n    top,\r\n    rowIndex,\r\n    colIndex,\r\n    x,\r\n    y,\r\n    i,\r\n    points = [];\r\n  points.length = columns * rows;\r\n  position = position !== undefined ? position : Point.ZERO;\r\n  if (columns > 1) {\r\n    gridWidth = columnWidth * (columns - 1);\r\n    left = position.x - gridWidth / 2;\r\n  } else {\r\n    left = position.x;\r\n  }\r\n  if (rows > 1) {\r\n    gridHeight = rowHeight * (rows - 1);\r\n    top = position.y - gridHeight / 2;\r\n  } else {\r\n    top = position.y;\r\n  }\r\n\r\n  i = 0;\r\n  for (rowIndex = 0; rowIndex < rows; rowIndex += 1) {\r\n    for (colIndex = 0; colIndex < columns; colIndex += 1) {\r\n      x = left + colIndex * columnWidth;\r\n      y = top + rowIndex * rowHeight;\r\n      points[i] = new Point(x, y);\r\n      i += 1;\r\n    }\r\n  }\r\n  return points;\r\n}\r\n\r\n// Generates a Text object.\r\n// The function can take many possible argument forms, either by listing them in order\r\n// (text, x, y, fontFamily, fontSize, align, fill), or by using an options object.\r\n// The position can be specified as x, y; using a point {x: 10, y: 20} or using an array [10, 20].\r\n// Here are a couple of ways to generate 'Hello' at position 0, 0 in 12pt Helvetica, centered.\r\n//\r\n//     vg.text('Hello', {x: 0, y: 0}, 'Helvetica', 12, 'center');\r\n//     vg.text('Hello', [0, 0], {fontFamily: 'Helvetica', fontSize: 12, align: 'center'});\r\n//     vg.text('Hello', 0, 0, {fontFamily: 'Helvetica', fontSize: 12});  // align: center is the default.\r\n//     vg.text('Hello', {fontFamily: 'Helvetica', fontSize: 12}); // the position defaults to 0,0.\r\nexport function text() {\r\n  var args = Array.prototype.slice.call(arguments);\r\n  args.unshift(null);\r\n  return new (Function.prototype.bind.apply(Text, args))();\r\n}\r\n\r\nexport function demoRect() {\r\n  return new vg.rect({ x: 0, y: 0 }, 100, 100, { x: 0, y: 0 });\r\n}\r\n\r\nexport function demoEllipse() {\r\n  return new vg.ellipse({ x: 0, y: 0 }, 100, 100);\r\n}\r\n", "export function characterAt(s, index) {\r\n  if (!s || s.length === 0) {\r\n    return \"\";\r\n  }\r\n  s = String(s);\r\n  if (index < 0) {\r\n    index = s.length + index;\r\n  }\r\n  return s.charAt(index);\r\n}\r\n\r\nexport function concatenate() {\r\n  var result = \"\";\r\n  for (var i = 0; i < arguments.length; i++) {\r\n    var s = arguments[i];\r\n    s = s !== undefined ? String(s) : \"\";\r\n    result += s;\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function endsWith(s, value) {\r\n  if (!s || !value) {\r\n    return false;\r\n  }\r\n  s = String(s);\r\n  return s.indexOf(value, s.length - value.length) !== -1;\r\n}\r\n\r\nexport function reverse(l) {\r\n  return l.slice().reverse();\r\n}\r\n\r\nexport function startsWith(s, value) {\r\n  if (!s || !value) {\r\n    return false;\r\n  }\r\n  s = String(s);\r\n  return s.indexOf(value) === 0;\r\n}\r\n\r\nexport const string = String;\r\n\r\nexport function stringContains(s, sub) {\r\n  if (!s || !sub) {\r\n    return false;\r\n  }\r\n  s = String(s);\r\n  return s.indexOf(sub) !== -1;\r\n}\r\n\r\nexport function stringEquals(string1, string2, ignoreCase) {\r\n  string1 = String(string1);\r\n  string2 = String(string2);\r\n  if (!string1 || !string2) {\r\n    return false;\r\n  }\r\n  if (ignoreCase) {\r\n    return string1.toLowerCase() === string2.toLowerCase();\r\n  } else {\r\n    return string1 === string2;\r\n  }\r\n}\r\n\r\nexport function stringLength(s) {\r\n  if (!s) {\r\n    return 0;\r\n  }\r\n  s = String(s);\r\n  return s.length;\r\n}\r\n\r\nexport function stringReplace(s, old, new_) {\r\n  s = String(s);\r\n  return s.replace(new RegExp(old, \"g\"), new_);\r\n}\r\n\r\nexport function stringSplit(s, separator) {\r\n  if (!s) {\r\n    return [];\r\n  }\r\n  if (!separator || separator.length === 0) {\r\n    separator = \"\";\r\n  }\r\n  s = String(s);\r\n  return s.split(separator);\r\n}\r\n\r\nexport function stringTrim(s) {\r\n  if (!s) {\r\n    return null;\r\n  }\r\n  s = String(s);\r\n  return s.trim();\r\n}\r\n\r\nexport function substring(s, start, end, endOffset) {\r\n  if (!s) {\r\n    return \"\";\r\n  }\r\n  if (end < start) {\r\n    return \"\";\r\n  }\r\n  s = String(s);\r\n\r\n  if (start < 0 && end < 0) {\r\n    start = s.length + start;\r\n    end = s.length + end;\r\n  }\r\n\r\n  if (end !== undefined) {\r\n    if (endOffset) {\r\n      end += 1;\r\n    }\r\n  }\r\n  return s.substring(start, end);\r\n}\r\n\r\nexport function toCharacterCodes(s) {\r\n  if (!s) return [];\r\n  var codes = [];\r\n  codes.length = s.length;\r\n  for (var i = 0; i < s.length; i += 1) {\r\n    codes[i] = s.charCodeAt(i);\r\n  }\r\n  return codes;\r\n}\r\n\r\nexport function toCharacters(s) {\r\n  if (!s) {\r\n    return [];\r\n  }\r\n  s = String(s);\r\n  return s.split(\"\");\r\n}\r\n\r\nexport function toLowerCase(s) {\r\n  s = String(s);\r\n  return s.toLowerCase();\r\n}\r\n\r\nexport function toTitleCase(s) {\r\n  var c,\r\n    result = \"\";\r\n  s = String(s);\r\n  for (var i = 0; i < s.length; i += 1) {\r\n    c = s[i];\r\n    if (result.length === 0 || result[result.length - 1] === \" \") {\r\n      result += c.toUpperCase();\r\n    } else {\r\n      result += c;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function toUpperCase(s) {\r\n  s = String(s);\r\n  return s.toUpperCase();\r\n}\r\n\r\nexport function wordCount(s) {\r\n  if (!s) {\r\n    return 0;\r\n  }\r\n  s = String(s);\r\n  var split = s.split(new RegExp(\"\\\\w+\"));\r\n  return split.length - 1;\r\n}\r\n\r\nexport function toWords(s) {\r\n  var l = s.split(/\\W+/);\r\n  if (l[l.length - 1] === \"\") {\r\n    l.pop();\r\n  }\r\n  return l;\r\n}\r\n", "\"use strict\";\r\n\r\nimport randomGenerator from \"./random.mjs\";\r\nimport deepEqual from \"./deepequal.mjs\";\r\n\r\nexport function combine() {\r\n  var i,\r\n    l,\r\n    result = [];\r\n  for (i = 0; i < arguments.length; i++) {\r\n    l = arguments[i];\r\n    if (l) {\r\n      result = result.concat(l);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function contains(l, value) {\r\n  if (!l) {\r\n    return false;\r\n  }\r\n  for (var i = 0; i < l.length; i += 1) {\r\n    if (deepEqual.deepEqual(l[i], value)) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function cycle(l, length) {\r\n  if (!l || length <= 0) {\r\n    return [];\r\n  }\r\n  var newList = [];\r\n  var ll = l.length;\r\n  for (var i = 0; i < length; i += 1) {\r\n    newList.push(l[i % ll]);\r\n  }\r\n  return newList;\r\n}\r\n\r\nexport function equals(o1, o2) {\r\n  return deepEqual.deepEqual(o1, o2);\r\n}\r\n\r\nexport function count(l) {\r\n  if (l && l.length) {\r\n    return l.length;\r\n  } else {\r\n    return 0;\r\n  }\r\n}\r\n\r\nexport function cull(l, booleans) {\r\n  if (!l) {\r\n    return [];\r\n  }\r\n  if (!booleans) {\r\n    return l;\r\n  }\r\n  var i,\r\n    keep,\r\n    results = [];\r\n  for (i = 0; i < l.length; i++) {\r\n    // Cycle through the list of boolean values.\r\n    keep = booleans[i % booleans.length];\r\n    if (keep) {\r\n      results.push(l[i]);\r\n    }\r\n  }\r\n  return results;\r\n}\r\n\r\nexport function distinct(l) {\r\n  if (!l) {\r\n    return [];\r\n  }\r\n  var i,\r\n    length,\r\n    value,\r\n    result = [],\r\n    seen = [];\r\n  for (i = 0, length = l.length; i < length; i += 1) {\r\n    value = l[i];\r\n    if (!g.contains(seen, value)) {\r\n      seen.push(value);\r\n      result.push(l[i]);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function first(l) {\r\n  if (!l || l.length === 0) {\r\n    return null;\r\n  }\r\n  return l[0];\r\n}\r\n\r\nexport function get(l, i) {\r\n  if (!l || l.length === 0) {\r\n    return null;\r\n  }\r\n  return l[i];\r\n}\r\n\r\nexport function interleave() {\r\n  const args = Array.from(arguments).filter((l) => !!l);\r\n  if (args.length === 0) return [];\r\n  const results = [];\r\n  let elIndex = 0;\r\n  while (true) {\r\n    for (let i = 0; i < args.length; i++) {\r\n      let arg = args[i];\r\n      if (arg.length > elIndex) {\r\n        results.push(arg[elIndex]);\r\n      } else {\r\n        return results;\r\n      }\r\n    }\r\n    elIndex += 1;\r\n  }\r\n}\r\n\r\nexport function last(l) {\r\n  if (!l || l.length === 0) {\r\n    return null;\r\n  }\r\n  return l[l.length - 1];\r\n}\r\n\r\nexport function pick(l, amount, seed) {\r\n  if (!l || l.length === 0 || amount <= 0) {\r\n    return [];\r\n  }\r\n  if (!seed && seed !== 0) {\r\n    seed = Math.random();\r\n  }\r\n  var rand = randomGenerator(seed || 0);\r\n  var results = [];\r\n  for (var i = 0; i < amount; i += 1) {\r\n    results.push(l[Math.floor(rand(0, l.length))]);\r\n  }\r\n  return results;\r\n}\r\n\r\nexport function randomSample(l, amount, seed) {\r\n  if (!l || l.length === 0 || amount <= 0) {\r\n    return [];\r\n  }\r\n  if (!seed && seed !== 0) {\r\n    seed = Math.random();\r\n  }\r\n  var shuffledlist = g.shuffle(l, seed);\r\n  if (!amount) {\r\n    return shuffledlist;\r\n  }\r\n  return g.slice(shuffledlist, 0, amount);\r\n}\r\n\r\nexport function repeat(l, amount, perItem) {\r\n  if (!l) {\r\n    return [];\r\n  }\r\n  if (!Array.isArray(l)) {\r\n    l = [l];\r\n  }\r\n  if (amount <= 0) {\r\n    return [];\r\n  }\r\n  var i,\r\n    j,\r\n    v,\r\n    newList = [];\r\n  if (!perItem) {\r\n    for (i = 0; i < amount; i += 1) {\r\n      newList.push.apply(newList, l);\r\n    }\r\n  } else {\r\n    for (i = 0; i < l.length; i += 1) {\r\n      v = l[i];\r\n      for (j = 0; j < amount; j += 1) {\r\n        newList.push(v);\r\n      }\r\n    }\r\n  }\r\n  return newList;\r\n}\r\n\r\nexport function rest(l) {\r\n  if (!l) {\r\n    return [];\r\n  }\r\n  return l.slice(1);\r\n}\r\n\r\nexport function reverse(l) {\r\n  if (!l) {\r\n    return [];\r\n  }\r\n  return l.slice().reverse();\r\n}\r\n\r\nexport function second(l) {\r\n  if (!l || l.length < 2) {\r\n    return null;\r\n  }\r\n  return l[1];\r\n}\r\n\r\nexport function shift(l, amount) {\r\n  // If the amount is bigger than the number of items, wrap around.\r\n  if (!l) {\r\n    return [];\r\n  }\r\n  amount = amount % l.length;\r\n  var head = l.slice(0, amount),\r\n    result = l.slice(amount);\r\n  result.push.apply(result, head);\r\n  return result;\r\n}\r\n\r\nexport function shuffle(l, seed) {\r\n  var i, j, tmp, r;\r\n  if (!seed && seed !== 0) {\r\n    seed = Math.random();\r\n  }\r\n  r = randomGenerator(seed || 0);\r\n  l = l.slice();\r\n  for (i = l.length - 1; i > 0; i--) {\r\n    j = Math.floor(r(0, i + 1));\r\n    tmp = l[i];\r\n    l[i] = l[j];\r\n    l[j] = tmp;\r\n  }\r\n  return l;\r\n}\r\n\r\nexport function slice(l, start, size, invert) {\r\n  if (!l) return [];\r\n  var firstList, secondList;\r\n  if (!invert) {\r\n    return l.slice(start, start + size);\r\n  } else {\r\n    firstList = l.slice(0, start);\r\n    secondList = l.slice(start + size);\r\n    firstList.push.apply(firstList, secondList);\r\n    return firstList;\r\n  }\r\n}\r\n\r\nexport function sort(l, key) {\r\n  if (!l) return [];\r\n  if (key) {\r\n    if (typeof key === \"string\") {\r\n      return l.slice().sort(function (a, b) {\r\n        if (a[key] > b[key]) {\r\n          return 1;\r\n        } else if (a[key] === b[key]) {\r\n          return 0;\r\n        } else {\r\n          return -1;\r\n        }\r\n      });\r\n    } else if (typeof key === \"function\") {\r\n      return l.slice().sort(key);\r\n    }\r\n  }\r\n  if (l && l[0] !== undefined && l[0] !== null && typeof l[0] === \"number\") {\r\n    return l.slice().sort(function (a, b) {\r\n      return a - b;\r\n    });\r\n  }\r\n  return l.slice().sort();\r\n}\r\n\r\nexport function switch_(index) {\r\n  var nLists = arguments.length - 1;\r\n  index = index % nLists;\r\n  if (index < 0) {\r\n    index += nLists;\r\n  }\r\n  return arguments[index + 1];\r\n}\r\n\r\nexport function takeEvery(l, n, offset) {\r\n  if (!l) return [];\r\n  var i,\r\n    results = [];\r\n  offset = offset || 0;\r\n  for (i = 0; i < l.length; i += 1) {\r\n    if (i % n === offset) {\r\n      results.push(l[i]);\r\n    }\r\n  }\r\n  return results;\r\n}\r\n\r\nexport function zipMap(keys, vals) {\r\n  var i,\r\n    k,\r\n    v,\r\n    m = {},\r\n    minLength = Math.min(keys.length, vals.length);\r\n  for (i = 0; i < minLength; i += 1) {\r\n    k = keys[i];\r\n    v = vals[i];\r\n    m[k] = v;\r\n  }\r\n  return m;\r\n}\r\n", "// Equality functionality taken from node.js' (http://nodejs.org) assert module:\r\n// https://github.com/joyent/node/blob/master/lib/assert.js\r\n\r\nfunction isBuffer() {\r\n  return false;\r\n}\r\n\r\nfunction isObject(arg) {\r\n  return typeof arg === \"object\" && arg !== null;\r\n}\r\n\r\nfunction objectToString(o) {\r\n  return Object.prototype.toString.call(o);\r\n}\r\n\r\nfunction isRegExp(re) {\r\n  return isObject(re) && objectToString(re) === \"[object RegExp]\";\r\n}\r\n\r\nfunction isDate(d) {\r\n  return isObject(d) && objectToString(d) === \"[object Date]\";\r\n}\r\n\r\nfunction isNullOrUndefined(arg) {\r\n  return arg === null || arg === undefined;\r\n}\r\n\r\nconst util = {\r\n  isObject: isObject,\r\n  isRegExp: isRegExp,\r\n  isDate: isDate,\r\n  isNullOrUndefined: isNullOrUndefined,\r\n  isBuffer: isBuffer,\r\n};\r\n\r\nconst pSlice = Array.prototype.slice;\r\n\r\nlet isArguments, objEquiv;\r\n\r\nexport default function deepEqual(actual, expected) {\r\n  // 7.1. All identical values are equivalent, as determined by ===.\r\n  if (actual === expected) {\r\n    return true;\r\n  } else if (util.isBuffer(actual) && util.isBuffer(expected)) {\r\n    if (actual.length !== expected.length) return false;\r\n\r\n    for (var i = 0; i < actual.length; i++) {\r\n      if (actual[i] !== expected[i]) return false;\r\n    }\r\n\r\n    return true;\r\n\r\n    // 7.2. If the expected value is a Date object, the actual value is\r\n    // equivalent if it is also a Date object that refers to the same time.\r\n  } else if (util.isDate(actual) && util.isDate(expected)) {\r\n    return actual.getTime() === expected.getTime();\r\n\r\n    // 7.3 If the expected value is a RegExp object, the actual value is\r\n    // equivalent if it is also a RegExp object with the same source and\r\n    // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\r\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\r\n    return (\r\n      actual.source === expected.source &&\r\n      actual.global === expected.global &&\r\n      actual.multiline === expected.multiline &&\r\n      actual.lastIndex === expected.lastIndex &&\r\n      actual.ignoreCase === expected.ignoreCase\r\n    );\r\n\r\n    // 7.4. Other pairs that do not both pass typeof value == 'object',\r\n    // equivalence is determined by ==.\r\n  } else if (!util.isObject(actual) && !util.isObject(expected)) {\r\n    return actual == expected;\r\n\r\n    // 7.5 For all other Object pairs, including Array objects, equivalence is\r\n    // determined by having the same number of owned properties (as verified\r\n    // with Object.prototype.hasOwnProperty.call), the same set of keys\r\n    // (although not necessarily the same order), equivalent values for every\r\n    // corresponding key, and an identical 'prototype' property. Note: this\r\n    // accounts for both named and indexed properties on Arrays.\r\n  } else {\r\n    return objEquiv(actual, expected);\r\n  }\r\n}\r\n\r\nisArguments = function (object) {\r\n  return Object.prototype.toString.call(object) === \"[object Arguments]\";\r\n};\r\n\r\nobjEquiv = function (a, b) {\r\n  if (util.isNullOrUndefined(a) || util.isNullOrUndefined(b)) return false;\r\n  // an identical 'prototype' property.\r\n  if (a.prototype !== b.prototype) return false;\r\n  //~~~I've managed to break Object.keys through screwy arguments passing.\r\n  //   Converting to array solves the problem.\r\n  var aIsArgs = isArguments(a),\r\n    bIsArgs = isArguments(b);\r\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs)) return false;\r\n  if (aIsArgs) {\r\n    a = pSlice.call(a);\r\n    b = pSlice.call(b);\r\n    return deepEqual(a, b);\r\n  }\r\n  var ka, kb, key, i;\r\n  try {\r\n    ka = Object.keys(a);\r\n    kb = Object.keys(b);\r\n  } catch (e) {\r\n    //happens when one is a string literal and the other isn't\r\n    return false;\r\n  }\r\n  // having the same number of owned properties (keys incorporates\r\n  // hasOwnProperty)\r\n  if (ka.length !== kb.length) return false;\r\n  //the same set of keys (although not necessarily the same order),\r\n  ka.sort();\r\n  kb.sort();\r\n  //~~~cheap key test\r\n  for (i = ka.length - 1; i >= 0; i--) {\r\n    if (ka[i] != kb[i]) return false;\r\n  }\r\n  //equivalent values for every corresponding key, and\r\n  //~~~possibly expensive deep test\r\n  for (i = ka.length - 1; i >= 0; i--) {\r\n    key = ka[i];\r\n    if (!deepEqual(a[key], b[key])) return false;\r\n  }\r\n  return true;\r\n};\r\n", "import values from \"lodash.values\";\r\nimport _groupBy from \"lodash.groupby\";\r\n\r\nimport { distinct } from \"./list.mjs\";\r\n\r\n// Convert values from one range to another\r\nexport function convert(v, inMin, inMax, outMin, outMax) {\r\n  var argLength = arguments.length;\r\n  if (argLength === 2) {\r\n    var d = arguments[1];\r\n    inMin = d.inMin;\r\n    inMax = d.inMax;\r\n    outMin = d.outMin;\r\n    outMax = d.outMax;\r\n  } else if (argLength === 3) {\r\n    inMin = arguments[1][0];\r\n    inMax = arguments[1][1];\r\n    outMin = arguments[2][0];\r\n    outMax = arguments[2][1];\r\n  }\r\n  try {\r\n    v = (v - inMin) / (inMax - inMin);\r\n  } catch (e) {\r\n    v = inMin;\r\n  }\r\n  // Convert value to target range.\r\n  return outMin + v * (outMax - outMin);\r\n}\r\n\r\nexport function filterData(data, key, op, value) {\r\n  if (!data) return [];\r\n  var i, l, row, obj;\r\n  if (value === null || value === undefined) {\r\n    return data;\r\n  }\r\n  var results = [];\r\n  if (op === \"==\") {\r\n    for (i = 0, l = data.length; i < l; i++) {\r\n      row = data[i];\r\n      obj = row[key];\r\n      if (obj == value) {\r\n        // jshint ignore:line\r\n        results.push(row);\r\n      }\r\n    }\r\n  } else if (op === \"!=\") {\r\n    for (i = 0, l = data.length; i < l; i++) {\r\n      row = data[i];\r\n      obj = row[key];\r\n      if (obj != value) {\r\n        // jshint ignore:line\r\n        results.push(row);\r\n      }\r\n    }\r\n  } else if (op === \">\") {\r\n    for (i = 0, l = data.length; i < l; i++) {\r\n      row = data[i];\r\n      obj = row[key];\r\n      if (obj > value) {\r\n        results.push(row);\r\n      }\r\n    }\r\n  } else if (op === \">=\") {\r\n    for (i = 0, l = data.length; i < l; i++) {\r\n      row = data[i];\r\n      obj = row[key];\r\n      if (obj >= value) {\r\n        results.push(row);\r\n      }\r\n    }\r\n  } else if (op === \"<\") {\r\n    for (i = 0, l = data.length; i < l; i++) {\r\n      row = data[i];\r\n      obj = row[key];\r\n      if (obj < value) {\r\n        results.push(row);\r\n      }\r\n    }\r\n  } else if (op === \"<=\") {\r\n    for (i = 0, l = data.length; i < l; i++) {\r\n      row = data[i];\r\n      obj = row[key];\r\n      if (obj <= value) {\r\n        results.push(row);\r\n      }\r\n    }\r\n  } else {\r\n    throw new Error(\"Invalid op \" + op);\r\n  }\r\n  return results;\r\n}\r\n\r\nexport function groupBy(data, key) {\r\n  return values(_groupBy(data, key));\r\n}\r\n\r\n/* // Draw a legend. ==> rename to axis?\r\nexport function legend  (scale, position, direction, nTicks) {\r\n    var ticks = g.ticks(scale, nTicks),\r\n        group = new vg.Group(),\r\n        p = new vg.Path(),\r\n        textOptions = {fontSize: 9, align: 'center'},\r\n        t,\r\n        i,\r\n        v;\r\n    p.moveTo(scale.outMax, position.y);\r\n    p.lineTo(scale.outMin, position.y);\r\n    p.stroke = 'black';\r\n    group.add(p);\r\n    for (i = 0; i < ticks.length; i += 1) {\r\n        v = g.convert(scale, ticks[i]);\r\n        p.moveTo(v, position.y);\r\n        p.lineTo(v, position.y + 5);\r\n        t = new g.Text('' + ticks[i], v, position.y + 15, textOptions);\r\n        group.add(t);\r\n    }\r\n    return group;\r\n}; */\r\n\r\nexport function keys(data) {\r\n  var allKeys = [];\r\n  for (var i = 0; i < data.length; i++) {\r\n    allKeys = allKeys.concat(Object.keys(data[i]));\r\n  }\r\n  return distinct(allKeys);\r\n}\r\n\r\nexport function lookup(table, key) {\r\n  var obj, v;\r\n  obj = table;\r\n  // First try to lookup the key as-is.\r\n  v = obj[key];\r\n  if (v !== undefined) {\r\n    if (typeof v === \"function\") {\r\n      v = v.call(obj);\r\n    }\r\n    return v;\r\n  }\r\n  var token,\r\n    tokens = key.split(\".\");\r\n  for (var i = 0; i < tokens.length; i += 1) {\r\n    token = tokens[i];\r\n    if (!obj) {\r\n      continue;\r\n    }\r\n    if (typeof obj[token] === \"function\") {\r\n      v = obj[token];\r\n      obj = v.call(obj);\r\n    } else {\r\n      obj = obj[token];\r\n    }\r\n  }\r\n  return obj;\r\n}\r\n\r\n// Create a scale that maps values from the input domain to the output range.\r\nexport function dataScale(domain, outMin, outMax) {\r\n  return { domain: domain, outMin: outMin, outMax: outMax };\r\n}\r\n\r\n// Generate about n values for the given scale.\r\nexport function ticks(min, max, n) {\r\n  n = n !== undefined ? n : 10;\r\n\r\n  var span = max - min,\r\n    step = Math.pow(10, Math.floor(Math.log(span / n) / Math.LN10)),\r\n    err = (n / span) * step,\r\n    ticks = [],\r\n    i;\r\n\r\n  if (err <= 0.15) {\r\n    step *= 10;\r\n  } else if (err <= 0.35) {\r\n    step *= 5;\r\n  } else if (err <= 0.75) {\r\n    step *= 2;\r\n  }\r\n\r\n  min = Math.ceil(min / step) * step;\r\n  max = Math.floor(max / step) * step + step * 0.5;\r\n\r\n  for (i = min; i < max; i += step) {\r\n    ticks.push(i);\r\n  }\r\n\r\n  return ticks;\r\n}\r\n", "import {\r\n  Path,\r\n  Group,\r\n  Text,\r\n  Transform,\r\n  Point,\r\n  Color,\r\n  bounds,\r\n  scale,\r\n  centerPoint,\r\n} from \"./vg/index.mjs\";\r\nimport { coordinates as geoCoordinates } from \"./vg/util/geo.mjs\";\r\nimport { Img } from \"./img/index.mjs\";\r\nimport { degrees } from \"./math.mjs\";\r\n\r\nexport const HORIZONTAL = \"horizontal\";\r\nexport const VERTICAL = \"vertical\";\r\nexport const BOTH = \"both\";\r\n\r\nexport const LEFT = \"left\";\r\nexport const RIGHT = \"right\";\r\nexport const CENTER = \"center\";\r\nexport const TOP = \"top\";\r\nexport const BOTTOM = \"bottom\";\r\nexport const MIDDLE = \"middle\";\r\n\r\nfunction clamp(val, min, max) {\r\n  return Math.min(max, Math.max(min, val));\r\n}\r\n\r\nfunction transformShape(shape, t) {\r\n  return t.transformShape(shape);\r\n}\r\n\r\nfunction transformImage(image, t) {\r\n  return image._transform(t.m);\r\n}\r\n\r\nfunction transform(shape, t) {\r\n  if (\r\n    shape instanceof Path ||\r\n    shape instanceof Group ||\r\n    shape instanceof Text ||\r\n    (shape.x !== undefined && shape.y !== undefined)\r\n  ) {\r\n    return transformShape(shape, t);\r\n  } else if (Array.isArray(shape)) {\r\n    var l = [];\r\n    for (var i = 0; i < shape.length; i += 1) {\r\n      l.push(transform(shape[i], t));\r\n    }\r\n    return l;\r\n  } else if (shape instanceof Img) {\r\n    return transformImage(shape, t);\r\n  }\r\n}\r\n\r\nexport function align(shape, position, hAlign, vAlign) {\r\n  if (!shape) {\r\n    return;\r\n  }\r\n  var dx,\r\n    dy,\r\n    t,\r\n    x = position.x,\r\n    y = position.y,\r\n    bnds = bounds(shape);\r\n  if (hAlign === LEFT) {\r\n    dx = x - bnds.x;\r\n  } else if (hAlign === RIGHT) {\r\n    dx = x - bnds.x - bnds.width;\r\n  } else if (hAlign === CENTER) {\r\n    dx = x - bnds.x - bnds.width / 2;\r\n  } else {\r\n    dx = 0;\r\n  }\r\n  if (vAlign === TOP) {\r\n    dy = y - bnds.y;\r\n  } else if (vAlign === BOTTOM) {\r\n    dy = y - bnds.y - bnds.height;\r\n  } else if (vAlign === MIDDLE) {\r\n    dy = y - bnds.y - bnds.height / 2;\r\n  } else {\r\n    dy = 0;\r\n  }\r\n\r\n  t = new Transform().translate(dx, dy);\r\n  return transform(shape, t);\r\n}\r\n\r\nexport function colorize(shape, options) {\r\n  var args = arguments;\r\n  if (typeof options !== \"object\" || options instanceof Color) {\r\n    options = {};\r\n    if (args[1] !== undefined) {\r\n      options.fill = args[1];\r\n    }\r\n    if (args[2] !== undefined) {\r\n      options.stroke = args[2];\r\n    }\r\n    if (args[3] !== undefined) {\r\n      options.strokeWidth = args[3];\r\n    }\r\n  }\r\n  if (shape instanceof Path || shape instanceof Group) {\r\n    return shape.colorize(options);\r\n  } else if (shape instanceof Img || shape instanceof Text) {\r\n    if (options.fill || options.fill === 0) {\r\n      return shape.colorize(options.fill);\r\n    } else {\r\n      throw new Error(\"No color given\");\r\n    }\r\n  }\r\n}\r\n\r\nexport function copy(shape, copies, order, translate, rotate, scale) {\r\n  if (!shape) return [];\r\n  var i,\r\n    t,\r\n    j,\r\n    op,\r\n    fn,\r\n    shapes = [],\r\n    tx = 0,\r\n    ty = 0,\r\n    r = 0,\r\n    sx = 1.0,\r\n    sy = 1.0,\r\n    isListOfPoints = false;\r\n\r\n  if (\r\n    shape instanceof Path ||\r\n    shape instanceof Group ||\r\n    shape instanceof Text\r\n  ) {\r\n    fn = transformShape;\r\n  } else if (\r\n    Array.isArray(shape) &&\r\n    shape.length > 0 &&\r\n    shape[0].x !== undefined &&\r\n    shape[0].y !== undefined\r\n  ) {\r\n    isListOfPoints = true;\r\n    fn = transformShape;\r\n  } else if (shape instanceof Img) {\r\n    fn = transformImage;\r\n  }\r\n\r\n  for (i = 0; i < copies; i += 1) {\r\n    t = new Transform();\r\n    for (j = 0; j < order.length; j += 1) {\r\n      op = order[j];\r\n      if (op === \"t\") {\r\n        t = t.translate(tx, ty);\r\n      } else if (op === \"r\") {\r\n        t = t.rotate(r);\r\n      } else if (op === \"s\") {\r\n        t = t.scale(sx, sy);\r\n      }\r\n    }\r\n    if (isListOfPoints) {\r\n      shapes = shapes.concat(fn(shape, t));\r\n    } else {\r\n      shapes.push(fn(shape, t));\r\n    }\r\n\r\n    tx += translate.x;\r\n    ty += translate.y;\r\n    r += rotate;\r\n    sx += scale.x;\r\n    sy += scale.y;\r\n  }\r\n  return shapes;\r\n}\r\n\r\nexport function flip(shape, axis) {\r\n  if (axis === \"none\") {\r\n    return shape;\r\n  }\r\n  if (\r\n    shape instanceof Path ||\r\n    shape instanceof Group ||\r\n    shape instanceof Text ||\r\n    (Array.isArray(shape) &&\r\n      shape.length > 0 &&\r\n      shape[0].x !== undefined &&\r\n      shape[0].y !== undefined)\r\n  ) {\r\n    var x = axis === g.HORIZONTAL || axis === g.BOTH ? -1 : 1;\r\n    var y = axis === g.VERTICAL || axis === g.BOTH ? -1 : 1;\r\n    return scale(shape, new Point(x, y), centerPoint(shape));\r\n  } else if (shape instanceof Img) {\r\n    var image = shape;\r\n    var layer = image.toLayer(false);\r\n    if (axis === g.HORIZONTAL || axis === g.BOTH) {\r\n      layer.flipHorizontal();\r\n    }\r\n    if (axis === g.VERTICAL || axis === g.BOTH) {\r\n      layer.flipVertical();\r\n    }\r\n    return image.withCanvas(layer.toCanvas());\r\n  }\r\n}\r\n\r\nexport function fit(shape, position, width, height, stretch) {\r\n  if (!shape) {\r\n    return;\r\n  }\r\n  stretch = stretch !== undefined ? stretch : false;\r\n  var t,\r\n    sx,\r\n    sy,\r\n    bnds = bounds(shape),\r\n    bx = bnds.x,\r\n    by = bnds.y,\r\n    bw = bnds.width,\r\n    bh = bnds.height;\r\n\r\n  // Make sure bw and bh aren't infinitely small numbers.\r\n  // This will lead to incorrect transformations with for examples lines.\r\n  bw = bw > 0.000000000001 ? bw : 0;\r\n  bh = bh > 0.000000000001 ? bh : 0;\r\n\r\n  t = new Transform();\r\n  t = t.translate(position.x, position.y);\r\n\r\n  if (!stretch) {\r\n    // don't scale widths or heights that are equal to zero.\r\n    sx = bw > 0 ? width / bw : Number.MAX_VALUE;\r\n    sy = bh > 0 ? height / bh : Number.MAX_VALUE;\r\n    sx = sy = Math.min(sx, sy);\r\n  } else {\r\n    sx = bw > 0 ? width / bw : 1;\r\n    sy = bh > 0 ? height / bh : 1;\r\n  }\r\n\r\n  t = t.scale(sx, sy);\r\n  t = t.translate(-bw / 2 - bx, -bh / 2 - by);\r\n  return transform(shape, t);\r\n}\r\n\r\nexport function fitTo(shape, bounding, stretch) {\r\n  if (!shape) {\r\n    return;\r\n  }\r\n  if (!bounding) {\r\n    return shape;\r\n  }\r\n\r\n  var bnds = bounds(bounding),\r\n    bx = bnds.x,\r\n    by = bnds.y,\r\n    bw = bnds.width,\r\n    bh = bnds.height;\r\n\r\n  return g.fit(shape, { x: bx + bw / 2, y: by + bh / 2 }, bw, bh, stretch);\r\n}\r\n\r\nexport function hslAdjust(v, hue, saturation, lightness, alpha) {\r\n  if (!alpha) {\r\n    alpha = 0;\r\n  }\r\n\r\n  // First, handle the image case.\r\n  if (v instanceof Img) {\r\n    var image = v;\r\n    var layer = image.toLayer(false);\r\n    layer.addFilter(\"hslAdjust\", {\r\n      h: hue,\r\n      s: saturation,\r\n      l: lightness,\r\n      a: alpha,\r\n    });\r\n    return image.withCanvas(layer.toCanvas());\r\n  }\r\n\r\n  hue = clamp(hue, -1, 1);\r\n  saturation = clamp(saturation, -1, 1);\r\n  lightness = clamp(lightness, -1, 1);\r\n  alpha = clamp(alpha, -1, 1);\r\n  var satMul = 1 + saturation * (saturation < 0 ? 1 : 2);\r\n  var lightMul = lightness < 0 ? 1 + lightness : 1 - lightness;\r\n  var lightAdd = lightness < 0 ? 0 : lightness;\r\n  var r, g, b, vs, ms, vm, h, s, l, m, vmh, sextant;\r\n  hue = (hue * 6) % 6;\r\n\r\n  function hslAdjust(v1) {\r\n    if (v1 instanceof Group) {\r\n      var newShapes = [];\r\n      for (var i = 0; i < v1.shapes.length; i += 1) {\r\n        newShapes.push(hslAdjust(v1.shapes[i]));\r\n      }\r\n      return new Group(newShapes);\r\n    } else if (v1 instanceof Path) {\r\n      var p = v1.clone();\r\n      p.fill = hslAdjust(p.fill);\r\n      p.stroke = hslAdjust(p.stroke);\r\n      return p;\r\n    }\r\n    var c = v1;\r\n    if (!(c instanceof Color)) {\r\n      c = Color.parse(c);\r\n    }\r\n\r\n    r = c.r;\r\n    g = c.g;\r\n    b = c.b;\r\n\r\n    if (hue !== 0 || saturation !== 0) {\r\n      // ok, here comes rgb to hsl + adjust + hsl to rgb, all in one jumbled mess.\r\n      // It's not so pretty, but it's been optimized to get somewhat decent performance.\r\n      // The transforms were originally adapted from the ones found in Graphics Gems, but have been heavily modified.\r\n      vs = r;\r\n      if (g > vs) {\r\n        vs = g;\r\n      }\r\n      if (b > vs) {\r\n        vs = b;\r\n      }\r\n      ms = r;\r\n      if (g < ms) {\r\n        ms = g;\r\n      }\r\n      if (b < ms) {\r\n        ms = b;\r\n      }\r\n      vm = vs - ms;\r\n      l = (ms + vs) / 2;\r\n\r\n      if (l > 0 && vm > 0) {\r\n        if (l <= 0.5) {\r\n          s = (vm / (vs + ms)) * satMul;\r\n          if (s > 1) {\r\n            s = 1;\r\n          }\r\n          v = l * (1 + s);\r\n        } else {\r\n          s = (vm / (2 - vs - ms)) * satMul;\r\n          if (s > 1) {\r\n            s = 1;\r\n          }\r\n          v = l + s - l * s;\r\n        }\r\n        if (r === vs) {\r\n          if (g === ms) {\r\n            h = 5 + (vs - b) / vm + hue;\r\n          } else {\r\n            h = 1 - (vs - g) / vm + hue;\r\n          }\r\n        } else if (g === vs) {\r\n          if (b === ms) {\r\n            h = 1 + (vs - r) / vm + hue;\r\n          } else {\r\n            h = 3 - (vs - b) / vm + hue;\r\n          }\r\n        } else {\r\n          if (r === ms) {\r\n            h = 3 + (vs - g) / vm + hue;\r\n          } else {\r\n            h = 5 - (vs - r) / vm + hue;\r\n          }\r\n        }\r\n        if (h < 0) {\r\n          h += 6;\r\n        }\r\n        if (h >= 6) {\r\n          h -= 6;\r\n        }\r\n        m = l + l - v;\r\n        sextant = h >> 0;\r\n        vmh = (v - m) * (h - sextant);\r\n        if (sextant === 0) {\r\n          r = v;\r\n          g = m + vmh;\r\n          b = m;\r\n        } else if (sextant === 1) {\r\n          r = v - vmh;\r\n          g = v;\r\n          b = m;\r\n        } else if (sextant === 2) {\r\n          r = m;\r\n          g = v;\r\n          b = m + vmh;\r\n        } else if (sextant === 3) {\r\n          r = m;\r\n          g = v - vmh;\r\n          b = v;\r\n        } else if (sextant === 4) {\r\n          r = m + vmh;\r\n          g = m;\r\n          b = v;\r\n        } else if (sextant === 5) {\r\n          r = v;\r\n          g = m;\r\n          b = v - vmh;\r\n        }\r\n      }\r\n    }\r\n\r\n    r = r * lightMul + lightAdd;\r\n    g = g * lightMul + lightAdd;\r\n    b = b * lightMul + lightAdd;\r\n\r\n    if (r < 0) {\r\n      r = 0;\r\n    }\r\n    if (g < 0) {\r\n      g = 0;\r\n    }\r\n    if (b < 0) {\r\n      b = 0;\r\n    }\r\n    if (r > 1) {\r\n      r = 1;\r\n    }\r\n    if (g > 1) {\r\n      g = 1;\r\n    }\r\n    if (b > 1) {\r\n      b = 1;\r\n    }\r\n\r\n    return new Color(r, g, b, c.a + alpha);\r\n  }\r\n  return hslAdjust(v);\r\n}\r\n\r\nexport function rgbAdjust(v, red, green, blue, alpha) {\r\n  if (!alpha) {\r\n    alpha = 0;\r\n  }\r\n  red = clamp(red, -1, 1);\r\n  green = clamp(green, -1, 1);\r\n  blue = clamp(blue, -1, 1);\r\n  alpha = clamp(alpha, -1, 1);\r\n\r\n  function rgbAdjust(v) {\r\n    if (v instanceof Img) {\r\n      var image = v;\r\n      var layer = image.toLayer(false);\r\n      layer.addFilter(\"rgbAdjust\", { r: red, g: green, b: blue, a: alpha });\r\n      return image.withCanvas(layer.toCanvas());\r\n    } else if (v instanceof Group) {\r\n      var newShapes = [];\r\n      for (var i = 0; i < v.shapes.length; i += 1) {\r\n        newShapes.push(rgbAdjust(v.shapes[i]));\r\n      }\r\n      return new Group(newShapes);\r\n    } else if (v instanceof Path) {\r\n      var p = v.clone();\r\n      p.fill = rgbAdjust(p.fill);\r\n      p.stroke = rgbAdjust(p.stroke);\r\n      return p;\r\n    }\r\n    var c = v;\r\n    if (!(c instanceof Color)) {\r\n      c = Color.parse(c);\r\n    }\r\n    return new Color(c.r + red, c.g + green, c.b + blue, c.a + alpha);\r\n  }\r\n  return rgbAdjust(v);\r\n}\r\n\r\nexport function stack(shapes, direction, margin) {\r\n  if (!shapes) {\r\n    return [];\r\n  }\r\n  if (shapes.length <= 1) {\r\n    return shapes;\r\n  }\r\n\r\n  var i,\r\n    shape,\r\n    tx,\r\n    ty,\r\n    t,\r\n    bounds,\r\n    firstBounds = shapes[0].bounds(),\r\n    newShapes = [];\r\n\r\n  if (direction === \"e\") {\r\n    tx = firstBounds.x;\r\n    for (i = 0; i < shapes.length; i += 1) {\r\n      shape = shapes[i];\r\n      bounds = shape.bounds();\r\n      t = new Transform().translate(tx - bounds.x, 0);\r\n      newShapes.push(transform(shape, t));\r\n      tx += bounds.width + margin;\r\n    }\r\n  } else if (direction === \"w\") {\r\n    tx = firstBounds.x + firstBounds.width;\r\n    for (i = 0; i < shapes.length; i += 1) {\r\n      shape = shapes[i];\r\n      bounds = shape.bounds();\r\n      t = new Transform().translate(tx - (bounds.x + bounds.width), 0);\r\n      newShapes.push(transform(shape, t));\r\n      tx -= bounds.width + margin;\r\n    }\r\n  } else if (direction === \"n\") {\r\n    ty = firstBounds.y + firstBounds.height;\r\n    for (i = 0; i < shapes.length; i += 1) {\r\n      shape = shapes[i];\r\n      bounds = shape.bounds();\r\n      t = new Transform().translate(0, ty - (bounds.y + bounds.height));\r\n      newShapes.push(transform(shape, t));\r\n      ty -= bounds.height + margin;\r\n    }\r\n  } else if (direction === \"s\") {\r\n    ty = firstBounds.y;\r\n    for (i = 0; i < shapes.length; i += 1) {\r\n      shape = shapes[i];\r\n      bounds = shape.bounds();\r\n      t = new Transform().translate(0, ty - bounds.y);\r\n      newShapes.push(transform(shape, t));\r\n      ty += bounds.height + margin;\r\n    }\r\n  }\r\n  return newShapes;\r\n}\r\n\r\nexport function angle(point1, point2) {\r\n  var args = arguments;\r\n  if (args.length === 4) {\r\n    point1 = Point.read(args[0], args[1]);\r\n    point2 = Point.read(args[2], args[3]);\r\n  } else {\r\n    point1 = Point.read(point1);\r\n    point2 = Point.read(point2);\r\n  }\r\n  return degrees(Math.atan2(point2.y - point1.y, point2.x - point1.x));\r\n}\r\n\r\nexport function coordinates(point, angle, distance) {\r\n  var args = arguments;\r\n  if (args.length === 4) {\r\n    point = Point.read(args[0], args[1]);\r\n    angle = args[2];\r\n    distance = args[3];\r\n  } else {\r\n    point = Point.read(point);\r\n  }\r\n  return geoCoordinates(point.x, point.y, angle, distance);\r\n}\r\n\r\nexport function distance(point1, point2) {\r\n  var args = arguments;\r\n  if (args.length === 4) {\r\n    point1 = Point.read(args[0], args[1]);\r\n    point2 = Point.read(args[2], args[3]);\r\n  } else {\r\n    point1 = Point.read(point1);\r\n    point2 = Point.read(point2);\r\n  }\r\n  return Math.sqrt(\r\n    Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2)\r\n  );\r\n}\r\n\r\nexport function grayColor(gray, alpha) {\r\n  if (!alpha && alpha !== 0) {\r\n    alpha = 1;\r\n  }\r\n  return Color.gray(gray, alpha, 1.0);\r\n}\r\n\r\nexport function hexColor(s) {\r\n  function isNumeric(n) {\r\n    return !isNaN(parseFloat(n)) && isFinite(n);\r\n  }\r\n  if (isNumeric(s)) {\r\n    s = s.toString(16);\r\n  } else {\r\n    s = String(s);\r\n  }\r\n  if (s[0] !== \"#\") {\r\n    s = \"#\" + s;\r\n  }\r\n  return Color.parse(s);\r\n}\r\n\r\nexport function hslColor(hue, saturation, lightness, alpha) {\r\n  if (!alpha && alpha !== 0) {\r\n    alpha = 1;\r\n  }\r\n  return Color.hsl(hue, saturation, lightness, alpha, 1.0);\r\n}\r\n\r\nexport function rgbColor(red, green, blue, alpha) {\r\n  if (!alpha && alpha !== 0) {\r\n    alpha = 1;\r\n  }\r\n  return Color.rgb(red, green, blue, alpha, 1.0);\r\n}\r\n\r\nexport function desaturate(shape, method) {\r\n  if (!shape) {\r\n    return null;\r\n  }\r\n  return shape.desaturate({ method: method });\r\n}\r\n\r\nexport function invert(shape) {\r\n  if (!shape) {\r\n    return null;\r\n  }\r\n  if (shape instanceof Img) {\r\n    var image = shape;\r\n    var layer = image.toLayer(false);\r\n    layer.addFilter(\"invert\");\r\n    return image.withCanvas(layer.toCanvas());\r\n  }\r\n  return shape.invert();\r\n}\r\n", "export default function (fn) {\n    return function (...args/*, callback*/) {\n        var callback = args.pop();\n        return fn.call(this, args, callback);\n    };\n}\n", "/* istanbul ignore file */\n\nexport var hasQueueMicrotask = typeof queueMicrotask === 'function' && queueMicrotask;\nexport var hasSetImmediate = typeof setImmediate === 'function' && setImmediate;\nexport var hasNextTick = typeof process === 'object' && typeof process.nextTick === 'function';\n\nexport function fallback(fn) {\n    setTimeout(fn, 0);\n}\n\nexport function wrap(defer) {\n    return (fn, ...args) => defer(() => fn(...args));\n}\n\nvar _defer;\n\nif (hasQueueMicrotask) {\n    _defer = queueMicrotask;\n} else if (hasSetImmediate) {\n    _defer = setImmediate;\n} else if (hasNextTick) {\n    _defer = process.nextTick;\n} else {\n    _defer = fallback;\n}\n\nexport default wrap(_defer);\n", "import initialParams from './internal/initialParams.js'\nimport setImmediate from './internal/setImmediate.js'\nimport { isAsync } from './internal/wrapAsync.js'\n\n/**\n * Take a sync function and make it async, passing its return value to a\n * callback. This is useful for plugging sync functions into a waterfall,\n * series, or other async functions. Any arguments passed to the generated\n * function will be passed to the wrapped function (except for the final\n * callback argument). Errors thrown will be passed to the callback.\n *\n * If the function passed to `asyncify` returns a Promise, that promises's\n * resolved/rejected state will be used to call the callback, rather than simply\n * the synchronous return value.\n *\n * This also means you can asyncify ES2017 `async` functions.\n *\n * @name asyncify\n * @static\n * @memberOf module:Utils\n * @method\n * @alias wrapSync\n * @category Util\n * @param {Function} func - The synchronous function, or Promise-returning\n * function to convert to an {@link AsyncFunction}.\n * @returns {AsyncFunction} An asynchronous wrapper of the `func`. To be\n * invoked with `(args..., callback)`.\n * @example\n *\n * // passing a regular synchronous function\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(JSON.parse),\n *     function (data, next) {\n *         // data is the result of parsing the text.\n *         // If there was a parsing error, it would have been caught.\n *     }\n * ], callback);\n *\n * // passing a function returning a promise\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(function (contents) {\n *         return db.model.create(contents);\n *     }),\n *     function (model, next) {\n *         // `model` is the instantiated model object.\n *         // If there was an error, this function would be skipped.\n *     }\n * ], callback);\n *\n * // es2017 example, though `asyncify` is not needed if your JS environment\n * // supports async functions out of the box\n * var q = async.queue(async.asyncify(async function(file) {\n *     var intermediateStep = await processFile(file);\n *     return await somePromise(intermediateStep)\n * }));\n *\n * q.push(files);\n */\nexport default function asyncify(func) {\n    if (isAsync(func)) {\n        return function (...args/*, callback*/) {\n            const callback = args.pop()\n            const promise = func.apply(this, args)\n            return handlePromise(promise, callback)\n        }\n    }\n\n    return initialParams(function (args, callback) {\n        var result;\n        try {\n            result = func.apply(this, args);\n        } catch (e) {\n            return callback(e);\n        }\n        // if result is Promise object\n        if (result && typeof result.then === 'function') {\n            return handlePromise(result, callback)\n        } else {\n            callback(null, result);\n        }\n    });\n}\n\nfunction handlePromise(promise, callback) {\n    return promise.then(value => {\n        invokeCallback(callback, null, value);\n    }, err => {\n        invokeCallback(callback, err && err.message ? err : new Error(err));\n    });\n}\n\nfunction invokeCallback(callback, error, value) {\n    try {\n        callback(error, value);\n    } catch (err) {\n        setImmediate(e => { throw e }, err);\n    }\n}\n", "import asyncify from '../asyncify.js'\n\nfunction isAsync(fn) {\n    return fn[Symbol.toStringTag] === 'AsyncFunction';\n}\n\nfunction isAsyncGenerator(fn) {\n    return fn[Symbol.toStringTag] === 'AsyncGenerator';\n}\n\nfunction isAsyncIterable(obj) {\n    return typeof obj[Symbol.asyncIterator] === 'function';\n}\n\nfunction wrapAsync(asyncFn) {\n    if (typeof asyncFn !== 'function') throw new Error('expected a function')\n    return isAsync(asyncFn) ? asyncify(asyncFn) : asyncFn;\n}\n\nexport default wrapAsync;\n\nexport { isAsync, isAsyncGenerator, isAsyncIterable };\n", "// conditionally promisify a function.\n// only return a promise if a callback is omitted\nexport default function awaitify (asyncFn, arity = asyncFn.length) {\n    if (!arity) throw new Error('arity is undefined')\n    function awaitable (...args) {\n        if (typeof args[arity - 1] === 'function') {\n            return asyncFn.apply(this, args)\n        }\n\n        return new Promise((resolve, reject) => {\n            args[arity - 1] = (err, ...cbArgs) => {\n                if (err) return reject(err)\n                resolve(cbArgs.length > 1 ? cbArgs : cbArgs[0])\n            }\n            asyncFn.apply(this, args)\n        })\n    }\n\n    return awaitable\n}\n", "import wrapAsync from './wrapAsync.js'\n\nexport default function _asyncMap(eachfn, arr, iteratee, callback) {\n    arr = arr || [];\n    var results = [];\n    var counter = 0;\n    var _iteratee = wrapAsync(iteratee);\n\n    return eachfn(arr, (value, _, iterCb) => {\n        var index = counter++;\n        _iteratee(value, (err, v) => {\n            results[index] = v;\n            iterCb(err);\n        });\n    }, err => {\n        callback(err, results);\n    });\n}\n", "export default function isArrayLike(value) {\n    return value &&\n        typeof value.length === 'number' &&\n        value.length >= 0 &&\n        value.length % 1 === 0;\n}\n", "// A temporary value used to identify if the loop should be broken.\n// See #1064, #1293\nconst breakLoop = {};\nexport default breakLoop;\n", "export default function once(fn) {\n    function wrapper (...args) {\n        if (fn === null) return;\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, args);\n    }\n    Object.assign(wrapper, fn)\n    return wrapper\n}\n", "export default function (coll) {\n    return coll[Symbol.iterator] && coll[Symbol.iterator]();\n}\n", "import isArrayLike from './isArrayLike.js'\nimport getIterator from './getIterator.js'\n\nfunction createArrayIterator(coll) {\n    var i = -1;\n    var len = coll.length;\n    return function next() {\n        return ++i < len ? {value: coll[i], key: i} : null;\n    }\n}\n\nfunction createES2015Iterator(iterator) {\n    var i = -1;\n    return function next() {\n        var item = iterator.next();\n        if (item.done)\n            return null;\n        i++;\n        return {value: item.value, key: i};\n    }\n}\n\nfunction createObjectIterator(obj) {\n    var okeys = obj ? Object.keys(obj) : [];\n    var i = -1;\n    var len = okeys.length;\n    return function next() {\n        var key = okeys[++i];\n        if (key === '__proto__') {\n            return next();\n        }\n        return i < len ? {value: obj[key], key} : null;\n    };\n}\n\nexport default function createIterator(coll) {\n    if (isArrayLike(coll)) {\n        return createArrayIterator(coll);\n    }\n\n    var iterator = getIterator(coll);\n    return iterator ? createES2015Iterator(iterator) : createObjectIterator(coll);\n}\n", "export default function onlyOnce(fn) {\n    return function (...args) {\n        if (fn === null) throw new Error(\"Callback was already called.\");\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, args);\n    };\n}\n", "import breakLoop from './breakLoop.js'\n\n// for async generators\nexport default function asyncEachOfLimit(generator, limit, iteratee, callback) {\n    let done = false\n    let canceled = false\n    let awaiting = false\n    let running = 0\n    let idx = 0\n\n    function replenish() {\n        //console.log('replenish')\n        if (running >= limit || awaiting || done) return\n        //console.log('replenish awaiting')\n        awaiting = true\n        generator.next().then(({value, done: iterDone}) => {\n            //console.log('got value', value)\n            if (canceled || done) return\n            awaiting = false\n            if (iterDone) {\n                done = true;\n                if (running <= 0) {\n                    //console.log('done nextCb')\n                    callback(null)\n                }\n                return;\n            }\n            running++\n            iteratee(value, idx, iterateeCallback)\n            idx++\n            replenish()\n        }).catch(handleError)\n    }\n\n    function iterateeCallback(err, result) {\n        //console.log('iterateeCallback')\n        running -= 1;\n        if (canceled) return\n        if (err) return handleError(err)\n\n        if (err === false) {\n            done = true;\n            canceled = true;\n            return\n        }\n\n        if (result === breakLoop || (done && running <= 0)) {\n            done = true;\n            //console.log('done iterCb')\n            return callback(null);\n        }\n        replenish()\n    }\n\n    function handleError(err) {\n        if (canceled) return\n        awaiting = false\n        done = true\n        callback(err)\n    }\n\n    replenish()\n}\n", "import once from './once.js'\nimport iterator from './iterator.js'\nimport onlyOnce from './onlyOnce.js'\nimport {isAsyncGenerator, isAsyncIterable} from './wrapAsync.js'\nimport asyncEachOfLimit from './asyncEachOfLimit.js'\nimport breakLoop from './breakLoop.js'\n\nexport default (limit) => {\n    return (obj, iteratee, callback) => {\n        callback = once(callback);\n        if (limit <= 0) {\n            throw new RangeError('concurrency limit cannot be less than 1')\n        }\n        if (!obj) {\n            return callback(null);\n        }\n        if (isAsyncGenerator(obj)) {\n            return asyncEachOfLimit(obj, limit, iteratee, callback)\n        }\n        if (isAsyncIterable(obj)) {\n            return asyncEachOfLimit(obj[Symbol.asyncIterator](), limit, iteratee, callback)\n        }\n        var nextElem = iterator(obj);\n        var done = false;\n        var canceled = false;\n        var running = 0;\n        var looping = false;\n\n        function iterateeCallback(err, value) {\n            if (canceled) return\n            running -= 1;\n            if (err) {\n                done = true;\n                callback(err);\n            }\n            else if (err === false) {\n                done = true;\n                canceled = true;\n            }\n            else if (value === breakLoop || (done && running <= 0)) {\n                done = true;\n                return callback(null);\n            }\n            else if (!looping) {\n                replenish();\n            }\n        }\n\n        function replenish () {\n            looping = true;\n            while (running < limit && !done) {\n                var elem = nextElem();\n                if (elem === null) {\n                    done = true;\n                    if (running <= 0) {\n                        callback(null);\n                    }\n                    return;\n                }\n                running += 1;\n                iteratee(elem.value, elem.key, onlyOnce(iterateeCallback));\n            }\n            looping = false;\n        }\n\n        replenish();\n    };\n}\n", "import _eachOfLimit from './internal/eachOfLimit.js'\nimport wrapAsync from './internal/wrapAsync.js'\nimport awaitify from './internal/awaitify.js'\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name eachOfLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`. The `key` is the item's key, or index in the case of an\n * array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachOfLimit(coll, limit, iteratee, callback) {\n    return _eachOfLimit(limit)(coll, wrapAsync(iteratee), callback);\n}\n\nexport default awaitify(eachOfLimit, 4)\n", "import isArrayLike from './internal/isArrayLike.js'\nimport breakLoop from './internal/breakLoop.js'\nimport eachOfLimit from './eachOfLimit.js'\nimport once from './internal/once.js'\nimport onlyOnce from './internal/onlyOnce.js'\nimport wrapAsync from './internal/wrapAsync.js'\nimport awaitify from './internal/awaitify.js'\n\n// eachOf implementation optimized for array-likes\nfunction eachOfArrayLike(coll, iteratee, callback) {\n    callback = once(callback);\n    var index = 0,\n        completed = 0,\n        {length} = coll,\n        canceled = false;\n    if (length === 0) {\n        callback(null);\n    }\n\n    function iteratorCallback(err, value) {\n        if (err === false) {\n            canceled = true\n        }\n        if (canceled === true) return\n        if (err) {\n            callback(err);\n        } else if ((++completed === length) || value === breakLoop) {\n            callback(null);\n        }\n    }\n\n    for (; index < length; index++) {\n        iteratee(coll[index], index, onlyOnce(iteratorCallback));\n    }\n}\n\n// a generic version of eachOf which can handle array, object, and iterator cases.\nfunction eachOfGeneric (coll, iteratee, callback) {\n    return eachOfLimit(coll, Infinity, iteratee, callback);\n}\n\n/**\n * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n * to the iteratee.\n *\n * @name eachOf\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEachOf\n * @category Collection\n * @see [async.each]{@link module:Collections.each}\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each\n * item in `coll`.\n * The `key` is the item's key, or index in the case of an array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * // dev.json is a file containing a valid json object config for dev environment\n * // dev.json is a file containing a valid json object config for test environment\n * // prod.json is a file containing a valid json object config for prod environment\n * // invalid.json is a file with a malformed json object\n *\n * let configs = {}; //global variable\n * let validConfigFileMap = {dev: 'dev.json', test: 'test.json', prod: 'prod.json'};\n * let invalidConfigFileMap = {dev: 'dev.json', test: 'test.json', invalid: 'invalid.json'};\n *\n * // asynchronous function that reads a json file and parses the contents as json object\n * function parseFile(file, key, callback) {\n *     fs.readFile(file, \"utf8\", function(err, data) {\n *         if (err) return calback(err);\n *         try {\n *             configs[key] = JSON.parse(data);\n *         } catch (e) {\n *             return callback(e);\n *         }\n *         callback();\n *     });\n * }\n *\n * // Using callbacks\n * async.forEachOf(validConfigFileMap, parseFile, function (err) {\n *     if (err) {\n *         console.error(err);\n *     } else {\n *         console.log(configs);\n *         // configs is now a map of JSON data, e.g.\n *         // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n *     }\n * });\n *\n * //Error handing\n * async.forEachOf(invalidConfigFileMap, parseFile, function (err) {\n *     if (err) {\n *         console.error(err);\n *         // JSON parse error exception\n *     } else {\n *         console.log(configs);\n *     }\n * });\n *\n * // Using Promises\n * async.forEachOf(validConfigFileMap, parseFile)\n * .then( () => {\n *     console.log(configs);\n *     // configs is now a map of JSON data, e.g.\n *     // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n * }).catch( err => {\n *     console.error(err);\n * });\n *\n * //Error handing\n * async.forEachOf(invalidConfigFileMap, parseFile)\n * .then( () => {\n *     console.log(configs);\n * }).catch( err => {\n *     console.error(err);\n *     // JSON parse error exception\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.forEachOf(validConfigFileMap, parseFile);\n *         console.log(configs);\n *         // configs is now a map of JSON data, e.g.\n *         // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * //Error handing\n * async () => {\n *     try {\n *         let result = await async.forEachOf(invalidConfigFileMap, parseFile);\n *         console.log(configs);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // JSON parse error exception\n *     }\n * }\n *\n */\nfunction eachOf(coll, iteratee, callback) {\n    var eachOfImplementation = isArrayLike(coll) ? eachOfArrayLike : eachOfGeneric;\n    return eachOfImplementation(coll, wrapAsync(iteratee), callback);\n}\n\nexport default awaitify(eachOf, 3)\n", "import _map from './internal/map.js'\nimport eachOf from './eachOf.js'\nimport awaitify from './internal/awaitify.js'\n\n/**\n * Produces a new collection of values by mapping each value in `coll` through\n * the `iteratee` function. The `iteratee` is called with an item from `coll`\n * and a callback for when it has finished processing. Each of these callbacks\n * takes 2 arguments: an `error`, and the transformed item from `coll`. If\n * `iteratee` passes an error to its callback, the main `callback` (for the\n * `map` function) is immediately called with the error.\n *\n * Note, that since this function applies the `iteratee` to each item in\n * parallel, there is no guarantee that the `iteratee` functions will complete\n * in order. However, the results array will be in the same order as the\n * original `coll`.\n *\n * If `map` is passed an Object, the results will be an Array.  The results\n * will roughly be in the order of the original Objects' keys (but this can\n * vary across JavaScript engines).\n *\n * @name map\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an Array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * // file1.txt is a file that is 1000 bytes in size\n * // file2.txt is a file that is 2000 bytes in size\n * // file3.txt is a file that is 3000 bytes in size\n * // file4.txt does not exist\n *\n * const fileList = ['file1.txt','file2.txt','file3.txt'];\n * const withMissingFileList = ['file1.txt','file2.txt','file4.txt'];\n *\n * // asynchronous function that returns the file size in bytes\n * function getFileSizeInBytes(file, callback) {\n *     fs.stat(file, function(err, stat) {\n *         if (err) {\n *             return callback(err);\n *         }\n *         callback(null, stat.size);\n *     });\n * }\n *\n * // Using callbacks\n * async.map(fileList, getFileSizeInBytes, function(err, results) {\n *     if (err) {\n *         console.log(err);\n *     } else {\n *         console.log(results);\n *         // results is now an array of the file size in bytes for each file, e.g.\n *         // [ 1000, 2000, 3000]\n *     }\n * });\n *\n * // Error Handling\n * async.map(withMissingFileList, getFileSizeInBytes, function(err, results) {\n *     if (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *     } else {\n *         console.log(results);\n *     }\n * });\n *\n * // Using Promises\n * async.map(fileList, getFileSizeInBytes)\n * .then( results => {\n *     console.log(results);\n *     // results is now an array of the file size in bytes for each file, e.g.\n *     // [ 1000, 2000, 3000]\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * // Error Handling\n * async.map(withMissingFileList, getFileSizeInBytes)\n * .then( results => {\n *     console.log(results);\n * }).catch( err => {\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let results = await async.map(fileList, getFileSizeInBytes);\n *         console.log(results);\n *         // results is now an array of the file size in bytes for each file, e.g.\n *         // [ 1000, 2000, 3000]\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // Error Handling\n * async () => {\n *     try {\n *         let results = await async.map(withMissingFileList, getFileSizeInBytes);\n *         console.log(results);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *     }\n * }\n *\n */\nfunction map (coll, iteratee, callback) {\n    return _map(eachOf, coll, iteratee, callback)\n}\nexport default awaitify(map, 3);\n", "import eachOfLimit from './eachOfLimit.js'\nimport awaitify from './internal/awaitify.js'\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs only a single async operation at a time.\n *\n * @name eachOfSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachOfSeries(coll, iteratee, callback) {\n    return eachOfLimit(coll, 1, iteratee, callback)\n}\nexport default awaitify(eachOfSeries, 3);\n", "const PROMISE_SYMBOL = Symbol('promiseCallback')\n\nfunction promiseCallback () {\n    let resolve, reject\n    function callback (err, ...args) {\n        if (err) return reject(err)\n        resolve(args.length > 1 ? args : args[0])\n    }\n\n    callback[PROMISE_SYMBOL] = new Promise((res, rej) => {\n        resolve = res,\n        reject = rej\n    })\n\n    return callback\n}\n\n\nexport { promiseCallback, PROMISE_SYMBOL }\n", "import eachOfSeries from './eachOfSeries.js'\nimport once from './internal/once.js'\nimport wrapAsync from './internal/wrapAsync.js'\nimport awaitify from './internal/awaitify.js'\n\n/**\n * Reduces `coll` into a single value using an async `iteratee` to return each\n * successive step. `memo` is the initial state of the reduction. This function\n * only operates in series.\n *\n * For performance reasons, it may make sense to split a call to this function\n * into a parallel map, and then use the normal `Array.prototype.reduce` on the\n * results. This function is for situations where each step in the reduction\n * needs to be async; if you can get the data before reducing it, then it's\n * probably a good idea to do so.\n *\n * @name reduce\n * @static\n * @memberOf module:Collections\n * @method\n * @alias inject\n * @alias foldl\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {*} memo - The initial state of the reduction.\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * array to produce the next step in the reduction.\n * The `iteratee` should complete with the next state of the reduction.\n * If the iteratee completes with an error, the reduction is stopped and the\n * main `callback` is immediately called with the error.\n * Invoked with (memo, item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the reduced value. Invoked with\n * (err, result).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * // file1.txt is a file that is 1000 bytes in size\n * // file2.txt is a file that is 2000 bytes in size\n * // file3.txt is a file that is 3000 bytes in size\n * // file4.txt does not exist\n *\n * const fileList = ['file1.txt','file2.txt','file3.txt'];\n * const withMissingFileList = ['file1.txt','file2.txt','file3.txt', 'file4.txt'];\n *\n * // asynchronous function that computes the file size in bytes\n * // file size is added to the memoized value, then returned\n * function getFileSizeInBytes(memo, file, callback) {\n *     fs.stat(file, function(err, stat) {\n *         if (err) {\n *             return callback(err);\n *         }\n *         callback(null, memo + stat.size);\n *     });\n * }\n *\n * // Using callbacks\n * async.reduce(fileList, 0, getFileSizeInBytes, function(err, result) {\n *     if (err) {\n *         console.log(err);\n *     } else {\n *         console.log(result);\n *         // 6000\n *         // which is the sum of the file sizes of the three files\n *     }\n * });\n *\n * // Error Handling\n * async.reduce(withMissingFileList, 0, getFileSizeInBytes, function(err, result) {\n *     if (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *     } else {\n *         console.log(result);\n *     }\n * });\n *\n * // Using Promises\n * async.reduce(fileList, 0, getFileSizeInBytes)\n * .then( result => {\n *     console.log(result);\n *     // 6000\n *     // which is the sum of the file sizes of the three files\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * // Error Handling\n * async.reduce(withMissingFileList, 0, getFileSizeInBytes)\n * .then( result => {\n *     console.log(result);\n * }).catch( err => {\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.reduce(fileList, 0, getFileSizeInBytes);\n *         console.log(result);\n *         // 6000\n *         // which is the sum of the file sizes of the three files\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // Error Handling\n * async () => {\n *     try {\n *         let result = await async.reduce(withMissingFileList, 0, getFileSizeInBytes);\n *         console.log(result);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *     }\n * }\n *\n */\nfunction reduce(coll, memo, iteratee, callback) {\n    callback = once(callback);\n    var _iteratee = wrapAsync(iteratee);\n    return eachOfSeries(coll, (x, i, iterCb) => {\n        _iteratee(memo, x, (err, v) => {\n            memo = v;\n            iterCb(err);\n        });\n    }, err => callback(err, memo));\n}\nexport default awaitify(reduce, 4)\n", "import reduce from './reduce.js'\nimport wrapAsync from './internal/wrapAsync.js'\nimport { promiseCallback, PROMISE_SYMBOL } from './internal/promiseCallback.js'\n\n/**\n * Version of the compose function that is more natural to read. Each function\n * consumes the return value of the previous function. It is the equivalent of\n * [compose]{@link module:ControlFlow.compose} with the arguments reversed.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name seq\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.compose]{@link module:ControlFlow.compose}\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} a function that composes the `functions` in order\n * @example\n *\n * // Requires lodash (or underscore), express3 and dresende's orm2.\n * // Part of an app, that fetches cats of the logged user.\n * // This example uses `seq` function to avoid overnesting and error\n * // handling clutter.\n * app.get('/cats', function(request, response) {\n *     var User = request.models.User;\n *     async.seq(\n *         User.get.bind(User),  // 'User.get' has signature (id, callback(err, data))\n *         function(user, fn) {\n *             user.getCats(fn);      // 'getCats' has signature (callback(err, data))\n *         }\n *     )(req.session.user_id, function (err, cats) {\n *         if (err) {\n *             console.error(err);\n *             response.json({ status: 'error', message: err.message });\n *         } else {\n *             response.json({ status: 'ok', message: 'Cats found', data: cats });\n *         }\n *     });\n * });\n */\nexport default function seq(...functions) {\n    var _functions = functions.map(wrapAsync);\n    return function (...args) {\n        var that = this;\n\n        var cb = args[args.length - 1];\n        if (typeof cb == 'function') {\n            args.pop();\n        } else {\n            cb = promiseCallback();\n        }\n\n        reduce(_functions, args, (newargs, fn, iterCb) => {\n            fn.apply(that, newargs.concat((err, ...nextargs) => {\n                iterCb(err, nextargs);\n            }));\n        },\n        (err, results) => cb(err, ...results));\n\n        return cb[PROMISE_SYMBOL]\n    };\n}\n", "import seq from './seq.js'\n\n/**\n * Creates a function which is a composition of the passed asynchronous\n * functions. Each function consumes the return value of the function that\n * follows. Composing functions `f()`, `g()`, and `h()` would produce the result\n * of `f(g(h()))`, only this version uses callbacks to obtain the return values.\n *\n * If the last argument to the composed function is not a function, a promise\n * is returned when you call it.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name compose\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} an asynchronous function that is the composed\n * asynchronous `functions`\n * @example\n *\n * function add1(n, callback) {\n *     setTimeout(function () {\n *         callback(null, n + 1);\n *     }, 10);\n * }\n *\n * function mul3(n, callback) {\n *     setTimeout(function () {\n *         callback(null, n * 3);\n *     }, 10);\n * }\n *\n * var add1mul3 = async.compose(mul3, add1);\n * add1mul3(4, function (err, result) {\n *     // result now equals 15\n * });\n */\nexport default function compose(...args) {\n    return seq(...args.reverse());\n}\n", "// UTILITIES.\r\n\r\nexport function degrees(radians) {\r\n  return (radians * 180) / Math.PI;\r\n}\r\n\r\nexport function radians(degrees) {\r\n  return (degrees / 180) * Math.PI;\r\n}\r\n\r\nexport function distance(x0, y0, x1, y1) {\r\n  return Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\r\n}\r\n\r\nexport function clamp(val, min, max) {\r\n  return Math.min(max, Math.max(min, val));\r\n}\r\n\r\n// Basic affine transform functionality.\r\nexport function transform(m) {\r\n  // Identity matrix.\r\n  if (m === undefined) {\r\n    m = [1, 0, 0, 0, 1, 0, 0, 0, 1];\r\n  } else {\r\n    m = m.slice();\r\n  }\r\n\r\n  // Performs the 3x3 matrix multiplication of the current matrix with the input matrix a.\r\n  function _mmult(a, m) {\r\n    m = m.slice();\r\n\r\n    var m0 = m[0];\r\n    var m1 = m[1];\r\n    var m2 = m[2];\r\n    var m3 = m[3];\r\n    var m4 = m[4];\r\n    var m5 = m[5];\r\n    var m6 = m[6];\r\n    var m7 = m[7];\r\n    var m8 = m[8];\r\n\r\n    m[0] = a[0] * m0 + a[1] * m3;\r\n    m[1] = a[0] * m1 + a[1] * m4;\r\n    m[3] = a[3] * m0 + a[4] * m3;\r\n    m[4] = a[3] * m1 + a[4] * m4;\r\n    m[6] = a[6] * m0 + a[7] * m3 + m6;\r\n    m[7] = a[6] * m1 + a[7] * m4 + m7;\r\n\r\n    return transform(m);\r\n  }\r\n\r\n  return {\r\n    matrix: function () {\r\n      return m.slice();\r\n    },\r\n\r\n    clone: function () {\r\n      return transform(m);\r\n    },\r\n\r\n    prepend: function (t) {\r\n      if (t.matrix) {\r\n        t = t.matrix();\r\n      }\r\n      return _mmult(m, t);\r\n    },\r\n\r\n    append: function (t) {\r\n      if (t.matrix) {\r\n        t = t.matrix();\r\n      }\r\n      return _mmult(t, m);\r\n    },\r\n\r\n    translate: function (x, y) {\r\n      return _mmult([1, 0, 0, 0, 1, 0, x, y, 1], m);\r\n    },\r\n\r\n    scale: function (x, y) {\r\n      if (y === undefined) {\r\n        y = x;\r\n      }\r\n      return _mmult([x, 0, 0, 0, y, 0, 0, 0, 1], m);\r\n    },\r\n\r\n    skew: function (x, y) {\r\n      if (y === undefined) {\r\n        y = x;\r\n      }\r\n      var kx = (Math.PI * x) / 180.0;\r\n      var ky = (Math.PI * y) / 180.0;\r\n      return _mmult([1, Math.tan(ky), 0, -Math.tan(kx), 1, 0, 0, 0, 1], m);\r\n    },\r\n\r\n    rotate: function (angle) {\r\n      var c = Math.cos(radians(angle));\r\n      var s = Math.sin(radians(angle));\r\n      return _mmult([c, s, 0, -s, c, 0, 0, 0, 1], m);\r\n    },\r\n\r\n    transformPoint: function (point) {\r\n      var x = point.x;\r\n      var y = point.y;\r\n      return { x: x * m[0] + y * m[3] + m[6], y: x * m[1] + y * m[4] + m[7] };\r\n    },\r\n  };\r\n}\r\n", "const aliases = {\r\n  normal: \"source-over\",\r\n  \"linear-dodge\": \"add\",\r\n};\r\n\r\nfunction addAliases(d) {\r\n  var i, mode, alias;\r\n  var modes = Object.keys(aliases);\r\n  for (i = 0; i < modes.length; i += 1) {\r\n    mode = modes[i];\r\n    alias = aliases[mode];\r\n    d[mode] = d[alias];\r\n  }\r\n}\r\n\r\nfunction realBlendMode(mode) {\r\n  if (aliases[mode] !== undefined) {\r\n    return aliases[mode];\r\n  }\r\n  return mode;\r\n}\r\n\r\n// Tests which blending modes are supported on the current system and returns a dictionary with the results.\r\n// For example d['source-over'] always results in true.\r\nfunction getNativeModes() {\r\n  if (typeof document === \"undefined\") {\r\n    return {};\r\n  }\r\n  var i, mode, darken, ok;\r\n  var nativeModes = {};\r\n  var dCanvas = document.createElement(\"canvas\");\r\n  var ctx = dCanvas.getContext(\"2d\");\r\n\r\n  if (!ctx) {\r\n    return {};\r\n  }\r\n\r\n  var native = [\r\n    \"source-over\",\r\n    \"source-in\",\r\n    \"source-out\",\r\n    \"source-atop\",\r\n    \"destination-over\",\r\n    \"destination-in\",\r\n    \"destination-out\",\r\n    \"destination-atop\",\r\n    \"lighter\",\r\n    \"darker\",\r\n    \"copy\",\r\n    \"xor\",\r\n  ];\r\n\r\n  var maybeNative = [\r\n    \"multiply\",\r\n    \"screen\",\r\n    \"overlay\",\r\n    \"soft-light\",\r\n    \"hard-light\",\r\n    \"color-dodge\",\r\n    \"color-burn\",\r\n    \"darken\",\r\n    \"lighten\",\r\n    \"difference\",\r\n    \"exclusion\",\r\n    \"hue\",\r\n    \"saturation\",\r\n    \"luminosity\",\r\n    \"color\",\r\n    \"add\",\r\n    \"subtract\",\r\n    \"average\",\r\n    \"negation\",\r\n  ];\r\n\r\n  var nonNative = [\r\n    \"divide\",\r\n    \"darker-color\",\r\n    \"lighter-color\",\r\n    \"linear-burn\",\r\n    \"linear-light\",\r\n    \"vivid-light\",\r\n    \"pin-light\",\r\n    \"hard-mix\",\r\n  ];\r\n\r\n  for (i = 0; i < native.length; i += 1) {\r\n    nativeModes[native[i]] = true;\r\n  }\r\n  for (i = 0; i < nonNative.length; i += 1) {\r\n    nativeModes[nonNative[i]] = false;\r\n  }\r\n  dCanvas.width = 1;\r\n  dCanvas.height = 1;\r\n  for (i = 0; i < maybeNative.length; i += 1) {\r\n    mode = maybeNative[i];\r\n    darken = mode === \"darken\";\r\n    ok = false;\r\n    ctx.save();\r\n    try {\r\n      ctx.fillStyle = darken ? \"#300\" : \"#a00\";\r\n      ctx.fillRect(0, 0, 1, 1);\r\n      ctx.globalCompositeOperation = mode;\r\n      if (ctx.globalCompositeOperation === mode) {\r\n        ctx.fillStyle = darken ? \"#a00\" : \"#300\";\r\n        ctx.fillRect(0, 0, 1, 1);\r\n        ok = ctx.getImageData(0, 0, 1, 1).data[0] !== (darken ? 170 : 51);\r\n      }\r\n    } catch (e) {}\r\n    ctx.restore();\r\n    nativeModes[mode] = ok;\r\n  }\r\n\r\n  addAliases(nativeModes);\r\n\r\n  return nativeModes;\r\n}\r\n\r\nconst process = function (inData, outData, width, height, options) {\r\n  var blend_fn, sr, sg, sb, sa, dr, dg, db, da, or, og, ob, oa;\r\n  var max = Math.max;\r\n  var min = Math.min;\r\n  var div_2_255 = 2 / 255;\r\n\r\n  /*R = 0.299;\r\n     G = 0.587;\r\n     B = 0.114;*/\r\n\r\n  var R = 0.2126;\r\n  var G = 0.7152;\r\n  var B = 0.0722;\r\n\r\n  /** This is the formula used by Photoshop to convert a color from\r\n   * RGB (Red, Green, Blue) to HSY (Hue, Saturation, Luminosity).\r\n   * The hue is calculated using the exacone approximation of the saturation\r\n   * cone.\r\n   * @param rgb The input color RGB normalized components.\r\n   * @param hsy The output color HSY normalized components.\r\n   */\r\n  function rgbToHsy(r, g, b) {\r\n    r /= 255;\r\n    g /= 255;\r\n    b /= 255;\r\n    var h, s, y;\r\n\r\n    // For saturation equals to 0 any value of hue are valid.\r\n    // In this case we choose 0 as a default value.\r\n\r\n    if (r === g && g === b) {\r\n      // Limit case.\r\n      s = 0;\r\n      h = 0;\r\n    } else if (r >= g && g >= b) {\r\n      // Sector 0: 0\u00B0 - 60\u00B0\r\n      s = r - b;\r\n      h = (60 * (g - b)) / s;\r\n    } else if (g > r && r >= b) {\r\n      // Sector 1: 60\u00B0 - 120\u00B0\r\n      s = g - b;\r\n      h = (60 * (g - r)) / s + 60;\r\n    } else if (g >= b && b > r) {\r\n      // Sector 2: 120\u00B0 - 180\u00B0\r\n      s = g - r;\r\n      h = (60 * (b - r)) / s + 120;\r\n    } else if (b > g && g > r) {\r\n      // Sector 3: 180\u00B0 - 240\u00B0\r\n      s = b - r;\r\n      h = (60 * (b - g)) / s + 180;\r\n    } else if (b > r && r >= g) {\r\n      // Sector 4: 240\u00B0 - 300\u00B0\r\n      s = b - g;\r\n      h = (60 * (r - g)) / s + 240;\r\n    } else {\r\n      // Sector 5: 300\u00B0 - 360\u00B0\r\n      s = r - g;\r\n      h = (60 * (r - b)) / s + 300;\r\n    }\r\n\r\n    y = R * r + G * g + B * b;\r\n\r\n    // Approximations erros can cause values to exceed bounds.\r\n\r\n    return [h % 360, min(max(s, 0), 1), min(max(y, 0), 1)];\r\n  }\r\n\r\n  /**\r\n   * This is the formula used by Photoshop to convert a color from\r\n   * HSY (Hue, Saturation, Luminosity) to RGB (Red, Green, Blue).\r\n   * The hue is calculated using the exacone approximation of the saturation\r\n   * cone.\r\n   * @param hsy The input color HSY normalized components.\r\n   * @param rgb The output color RGB normalized components.\r\n   */\r\n  function hsyToRgb(h, s, y) {\r\n    h = h % 360;\r\n    var r, g, b, k; // Intermediate variable.\r\n\r\n    if (h >= 0 && h < 60) {\r\n      // Sector 0: 0\u00B0 - 60\u00B0\r\n      k = (s * h) / 60;\r\n      b = y - R * s - G * k;\r\n      r = b + s;\r\n      g = b + k;\r\n    } else if (h >= 60 && h < 120) {\r\n      // Sector 1: 60\u00B0 - 120\u00B0\r\n      k = (s * (h - 60)) / 60;\r\n      g = y + B * s + R * k;\r\n      b = g - s;\r\n      r = g - k;\r\n    } else if (h >= 120 && h < 180) {\r\n      // Sector 2: 120\u00B0 - 180\u00B0\r\n      k = (s * (h - 120)) / 60;\r\n      r = y - G * s - B * k;\r\n      g = r + s;\r\n      b = r + k;\r\n    } else if (h >= 180 && h < 240) {\r\n      // Sector 3: 180\u00B0 - 240\u00B0\r\n      k = (s * (h - 180)) / 60;\r\n      b = y + R * s + G * k;\r\n      r = b - s;\r\n      g = b - k;\r\n    } else if (h >= 240 && h < 300) {\r\n      // Sector 4: 240\u00B0 - 300\u00B0\r\n      k = (s * (h - 240)) / 60;\r\n      g = y - B * s - R * k;\r\n      b = g + s;\r\n      r = g + k;\r\n    } else {\r\n      // Sector 5: 300\u00B0 - 360\u00B0\r\n      k = (s * (h - 300)) / 60;\r\n      r = y + G * s + B * k;\r\n      g = r - s;\r\n      b = r - k;\r\n    }\r\n\r\n    // Approximations erros can cause values to exceed bounds.\r\n\r\n    r = min(max(r, 0), 1) * 255;\r\n    g = min(max(g, 0), 1) * 255;\r\n    b = min(max(b, 0), 1) * 255;\r\n    return [r, g, b];\r\n  }\r\n\r\n  function _sourceover() {\r\n    or = sr;\r\n    og = sg;\r\n    ob = sb;\r\n  }\r\n\r\n  function _svg_sourceover() {\r\n    or = sr + dr - dr * sa;\r\n    og = sg + dg - dg * sa;\r\n    ob = sb + db - db * sa;\r\n  }\r\n\r\n  function _multiply() {\r\n    or = (dr * sr) / 255;\r\n    og = (dg * sg) / 255;\r\n    ob = (db * sb) / 255;\r\n  }\r\n\r\n  function _svg_multiply() {\r\n    or = sr * dr + sr * (1 - da) + dr * (1 - sa);\r\n    og = sg * dg + sg * (1 - da) + dg * (1 - sa);\r\n    ob = sb * db + sb * (1 - da) + db * (1 - sa);\r\n  }\r\n\r\n  function _subtract() {\r\n    or = max(dr - sr, 0);\r\n    og = max(dg - sg, 0);\r\n    ob = max(db - sb, 0);\r\n  }\r\n\r\n  function _svg_subtract() {\r\n    or = max(dr * sa - sr * da, 0) + sr * (1 - da) + dr * (1 - sa);\r\n    og = max(dg * sa - sg * da, 0) + sg * (1 - da) + dg * (1 - sa);\r\n    ob = max(db * sa - sb * da, 0) + sb * (1 - da) + db * (1 - sa);\r\n  }\r\n\r\n  function _divide() {\r\n    or = sr === 0 ? 0 : (dr / sr) * 255;\r\n    og = sg === 0 ? 0 : (dg / sg) * 255;\r\n    ob = sb === 0 ? 0 : (db / sb) * 255;\r\n  }\r\n\r\n  function _screen() {\r\n    or = 255 - (((255 - dr) * (255 - sr)) >> 8);\r\n    og = 255 - (((255 - dg) * (255 - sg)) >> 8);\r\n    ob = 255 - (((255 - db) * (255 - sb)) >> 8);\r\n  }\r\n\r\n  function _svg_screen() {\r\n    or = sr + dr - sr * dr;\r\n    og = sg + dg - sg * dg;\r\n    ob = sb + db - sb * db;\r\n  }\r\n\r\n  function _lighten() {\r\n    or = dr > sr ? dr : sr;\r\n    og = dg > sg ? dg : sg;\r\n    ob = db > sb ? db : sb;\r\n  }\r\n\r\n  function _svg_lighten() {\r\n    or = max(sr * da, dr * sa) + sr * (1 - da) + dr * (1 - sa);\r\n    og = max(sg * da, dg * sa) + sg * (1 - da) + dg * (1 - sa);\r\n    ob = max(sb * da, db * sa) + sb * (1 - da) + db * (1 - sa);\r\n  }\r\n\r\n  function _darken() {\r\n    or = dr < sr ? dr : sr;\r\n    og = dg < sg ? dg : sg;\r\n    ob = db < sb ? db : sb;\r\n  }\r\n\r\n  function _svg_darken() {\r\n    or = min(sr * da, dr * sa) + sr * (1 - da) + dr * (1 - sa);\r\n    og = min(sg * da, dg * sa) + sg * (1 - da) + dg * (1 - sa);\r\n    ob = min(sb * da, db * sa) + sb * (1 - da) + db * (1 - sa);\r\n  }\r\n\r\n  function _darkercolor() {\r\n    if (dr * 0.3 + dg * 0.59 + db * 0.11 <= sr * 0.3 + sg * 0.59 + sb * 0.11) {\r\n      or = dr;\r\n      og = dg;\r\n      ob = db;\r\n    } else {\r\n      or = sr;\r\n      og = sg;\r\n      ob = sb;\r\n    }\r\n  }\r\n\r\n  function _svg_darkercolor() {\r\n    if (\r\n      dr * sa * 0.3 + dg * sa * 0.59 + db * sa * 0.11 <=\r\n      sr * da * 0.3 + sg * da * 0.59 + sb * da * 0.11\r\n    ) {\r\n      or = dr * sa;\r\n      og = dg * sa;\r\n      ob = db * sa;\r\n    } else {\r\n      or = sr * da;\r\n      og = sg * da;\r\n      ob = sb * da;\r\n    }\r\n    or += sr * (1 - da) + dr * (1 - sa);\r\n    og += sg * (1 - da) + dg * (1 - sa);\r\n    ob += sb * (1 - da) + db * (1 - sa);\r\n  }\r\n\r\n  function _lightercolor() {\r\n    if (dr * 0.3 + dg * 0.59 + db * 0.11 > sr * 0.3 + sg * 0.59 + sb * 0.11) {\r\n      or = dr;\r\n      og = dg;\r\n      ob = db;\r\n    } else {\r\n      or = sr;\r\n      og = sg;\r\n      ob = sb;\r\n    }\r\n  }\r\n\r\n  function _svg_lightercolor() {\r\n    if (\r\n      dr * sa * 0.3 + dg * sa * 0.59 + db * sa * 0.11 >\r\n      sr * da * 0.3 + sg * da * 0.59 + sb * da * 0.11\r\n    ) {\r\n      or = dr * sa;\r\n      og = dg * sa;\r\n      ob = db * sa;\r\n    } else {\r\n      or = sr * da;\r\n      og = sg * da;\r\n      ob = sb * da;\r\n    }\r\n    or += sr * (1 - da) + dr * (1 - sa);\r\n    og += sg * (1 - da) + dg * (1 - sa);\r\n    ob += sb * (1 - da) + db * (1 - sa);\r\n  }\r\n\r\n  function _add() {\r\n    // also known as linear dodge\r\n    or = min(dr + sr, 255);\r\n    og = min(dg + sg, 255);\r\n    ob = min(db + sb, 255);\r\n  }\r\n\r\n  function _linearburn() {\r\n    or = dr + sr;\r\n    og = dg + sg;\r\n    ob = db + sb;\r\n\r\n    or = or < 255 ? 0 : or - 255;\r\n    og = og < 255 ? 0 : og - 255;\r\n    ob = ob < 255 ? 0 : ob - 255;\r\n  }\r\n\r\n  function _difference() {\r\n    or = dr - sr;\r\n    og = dg - sg;\r\n    ob = db - sb;\r\n\r\n    or = or < 0 ? -or : or;\r\n    og = og < 0 ? -og : og;\r\n    ob = ob < 0 ? -ob : ob;\r\n  }\r\n\r\n  function _svg_difference() {\r\n    or = sr + dr - 2 * min(sr * da, dr * sa);\r\n    og = sg + dg - 2 * min(sg * da, dg * sa);\r\n    ob = sb + db - 2 * min(sb * da, db * sa);\r\n  }\r\n\r\n  function _exclusion() {\r\n    or = dr - (dr * div_2_255 - 1) * sr;\r\n    og = dg - (dg * div_2_255 - 1) * sg;\r\n    ob = db - (db * div_2_255 - 1) * sb;\r\n  }\r\n\r\n  function _svg_exclusion() {\r\n    or = sr * da + dr * sa - 2 * sr * dr + sr * (1 - da) + dr * (1 - sa);\r\n    og = sg * da + dg * sa - 2 * sg * dg + sg * (1 - da) + dg * (1 - sa);\r\n    ob = sb * da + db * sa - 2 * sb * db + sb * (1 - da) + db * (1 - sa);\r\n  }\r\n\r\n  function _overlay() {\r\n    if (dr < 128) {\r\n      or = sr * dr * div_2_255;\r\n    } else {\r\n      or = 255 - (255 - sr) * (255 - dr) * div_2_255;\r\n    }\r\n\r\n    if (dg < 128) {\r\n      og = sg * dg * div_2_255;\r\n    } else {\r\n      og = 255 - (255 - sg) * (255 - dg) * div_2_255;\r\n    }\r\n\r\n    if (db < 128) {\r\n      ob = sb * db * div_2_255;\r\n    } else {\r\n      ob = 255 - (255 - sb) * (255 - db) * div_2_255;\r\n    }\r\n  }\r\n\r\n  function _svg_overlay() {\r\n    if (2 * dr <= da) {\r\n      or = 2 * sr * dr + sr * (1 - da) + dr * (1 - sa);\r\n    } else {\r\n      or = sr * (1 + da) + dr * (1 + sa) - 2 * dr * sr - da * sa;\r\n    }\r\n    if (2 * dg <= da) {\r\n      og = 2 * sg * dg + sg * (1 - da) + dg * (1 - sa);\r\n    } else {\r\n      og = sg * (1 + da) + dg * (1 + sa) - 2 * dg * sg - da * sa;\r\n    }\r\n    if (2 * db <= da) {\r\n      ob = 2 * sb * db + sb * (1 - da) + db * (1 - sa);\r\n    } else {\r\n      ob = sb * (1 + da) + db * (1 + sa) - 2 * db * sb - da * sa;\r\n    }\r\n  }\r\n\r\n  function _softlight() {\r\n    if (dr < 128) {\r\n      or = ((sr >> 1) + 64) * dr * div_2_255;\r\n    } else {\r\n      or = 255 - (191 - (sr >> 1)) * (255 - dr) * div_2_255;\r\n    }\r\n\r\n    if (dg < 128) {\r\n      og = ((sg >> 1) + 64) * dg * div_2_255;\r\n    } else {\r\n      og = 255 - (191 - (sg >> 1)) * (255 - dg) * div_2_255;\r\n    }\r\n\r\n    if (db < 128) {\r\n      ob = ((sb >> 1) + 64) * db * div_2_255;\r\n    } else {\r\n      ob = 255 - (191 - (sb >> 1)) * (255 - db) * div_2_255;\r\n    }\r\n  }\r\n\r\n  function _svg_softlight() {\r\n    var m;\r\n    var pow = Math.pow;\r\n\r\n    if (0.0 === da) {\r\n      or = sr;\r\n      og = sg;\r\n      ob = sb;\r\n      return;\r\n    }\r\n\r\n    m = dr / da;\r\n    if (2 * sr <= sa) {\r\n      or = dr * (sa + (2 * sr - sa) * (1 - m)) + sr * (1 - da) + dr * (1 - sa);\r\n    } else if (2 * sr > sa && 4 * dr <= da) {\r\n      or =\r\n        da * (2 * sr - sa) * (16 * pow(m, 3) - 12 * pow(m, 2) - 3 * m) +\r\n        sr -\r\n        sr * da +\r\n        dr;\r\n    } else if (2 * sr > sa && 4 * dr > da) {\r\n      or = da * (2 * sr - sa) * (pow(m, 0.5) - m) + sr - sr * da + dr;\r\n    }\r\n\r\n    m = dg / da;\r\n    if (2 * sg <= sa) {\r\n      og = dg * (sa + (2 * sg - sa) * (1 - m)) + sg * (1 - da) + dg * (1 - sa);\r\n    } else if (2 * sg > sa && 4 * dg <= da) {\r\n      og =\r\n        da * (2 * sg - sa) * (16 * pow(m, 3) - 12 * pow(m, 2) - 3 * m) +\r\n        sg -\r\n        sg * da +\r\n        dg;\r\n    } else if (2 * sg > sa && 4 * dg > da) {\r\n      og = da * (2 * sg - sa) * (pow(m, 0.5) - m) + sg - sg * da + dg;\r\n    }\r\n\r\n    m = db / da;\r\n    if (2 * sb <= sa) {\r\n      ob = db * (sa + (2 * sb - sa) * (1 - m)) + sb * (1 - da) + db * (1 - sa);\r\n    } else if (2 * sb > sa && 4 * db <= da) {\r\n      ob =\r\n        da * (2 * sb - sa) * (16 * pow(m, 3) - 12 * pow(m, 2) - 3 * m) +\r\n        sb -\r\n        sb * da +\r\n        db;\r\n    } else if (2 * sb > sa && 4 * db > da) {\r\n      ob = da * (2 * sb - sa) * (pow(m, 0.5) - m) + sb - sb * da + db;\r\n    }\r\n  }\r\n\r\n  function _hardlight() {\r\n    if (sr < 128) {\r\n      or = dr * sr * div_2_255;\r\n    } else {\r\n      or = 255 - (255 - dr) * (255 - sr) * div_2_255;\r\n    }\r\n\r\n    if (sg < 128) {\r\n      og = dg * sg * div_2_255;\r\n    } else {\r\n      og = 255 - (255 - dg) * (255 - sg) * div_2_255;\r\n    }\r\n\r\n    if (sb < 128) {\r\n      ob = db * sb * div_2_255;\r\n    } else {\r\n      ob = 255 - (255 - db) * (255 - sb) * div_2_255;\r\n    }\r\n  }\r\n\r\n  function _svg_hardlight() {\r\n    if (2 * sr <= sa) {\r\n      or = 2 * sr * dr + sr * (1 - da) + dr * (1 - sa);\r\n    } else {\r\n      or = sr * (1 + da) + dr * (1 + sa) - sa * da - 2 * sr * dr;\r\n    }\r\n\r\n    if (2 * sg <= sa) {\r\n      og = 2 * sg * dg + sg * (1 - da) + dg * (1 - sa);\r\n    } else {\r\n      og = sg * (1 + da) + dg * (1 + sa) - sa * da - 2 * sg * dg;\r\n    }\r\n\r\n    if (2 * sb <= sa) {\r\n      ob = 2 * sb * db + sb * (1 - da) + db * (1 - sa);\r\n    } else {\r\n      ob = sb * (1 + da) + db * (1 + sa) - sa * da - 2 * sb * db;\r\n    }\r\n  }\r\n\r\n  function _colordodge() {\r\n    var dr1 = (dr << 8) / (255 - sr);\r\n    var dg1 = (dg << 8) / (255 - sg);\r\n    var db1 = (db << 8) / (255 - sb);\r\n\r\n    or = dr1 > 255 || sr === 255 ? 255 : dr1;\r\n    og = dg1 > 255 || sg === 255 ? 255 : dg1;\r\n    ob = db1 > 255 || sb === 255 ? 255 : db1;\r\n  }\r\n\r\n  function _svg_colordodge() {\r\n    if (da === 0) {\r\n      or = sr;\r\n      og = sg;\r\n      ob = sb;\r\n      return;\r\n    }\r\n\r\n    if (sr === sa && dr === 0) {\r\n      or = sr * (1 - da);\r\n    } else if (sr === sa) {\r\n      or = sa * da + sr * (1 - da) + dr * (1 - sa);\r\n    } else if (sr < sa) {\r\n      or =\r\n        sa * da * min(1, ((dr / da) * sa) / (sa - sr)) +\r\n        sr * (1 - da) +\r\n        dr * (1 - sa);\r\n    }\r\n\r\n    if (sg === sa && dg === 0) {\r\n      og = sg * (1 - da);\r\n    } else if (sr === sa) {\r\n      og = sa * da + sg * (1 - da) + dg * (1 - sa);\r\n    } else if (sr < sa) {\r\n      og =\r\n        sa * da * min(1, ((dg / da) * sa) / (sa - sg)) +\r\n        sg * (1 - da) +\r\n        dg * (1 - sa);\r\n    }\r\n\r\n    if (sb === sa && db === 0) {\r\n      ob = sb * (1 - da);\r\n    } else if (sr === sa) {\r\n      ob = sa * da + sb * (1 - da) + db * (1 - sa);\r\n    } else if (sr < sa) {\r\n      ob =\r\n        sa * da * min(1, ((db / da) * sa) / (sa - sb)) +\r\n        sb * (1 - da) +\r\n        db * (1 - sa);\r\n    }\r\n  }\r\n\r\n  function _colorburn() {\r\n    var dr1 = 255 - ((255 - dr) << 8) / sr;\r\n    var dg1 = 255 - ((255 - dg) << 8) / sg;\r\n    var db1 = 255 - ((255 - db) << 8) / sb;\r\n\r\n    or = dr1 < 0 || sr === 0 ? 0 : dr1;\r\n    og = dg1 < 0 || sg === 0 ? 0 : dg1;\r\n    ob = db1 < 0 || sb === 0 ? 0 : db1;\r\n  }\r\n\r\n  function _svg_colorburn() {\r\n    if (da === 0) {\r\n      or = sr;\r\n      og = sg;\r\n      ob = sb;\r\n      return;\r\n    }\r\n\r\n    if (sr === 0 && dr === da) {\r\n      or = sa * da + dr * (1 - sa);\r\n    } else if (sr === 0) {\r\n      or = dr * (1 - sa);\r\n    } else if (sr > 0) {\r\n      or =\r\n        sa * da * (1 - min(1, ((1 - dr / da) * sa) / sr)) +\r\n        sr * (1 - da) +\r\n        dr * (1 - sa);\r\n    }\r\n\r\n    if (sg === 0 && dg === da) {\r\n      og = sa * da + dg * (1 - sa);\r\n    } else if (sg === 0) {\r\n      og = dg * (1 - sa);\r\n    } else if (sg > 0) {\r\n      og =\r\n        sa * da * (1 - min(1, ((1 - dg / da) * sa) / sg)) +\r\n        sg * (1 - da) +\r\n        dg * (1 - sa);\r\n    }\r\n\r\n    if (sb === 0 && db === da) {\r\n      ob = sa * da + db * (1 - sa);\r\n    } else if (sb === 0) {\r\n      ob = db * (1 - sa);\r\n    } else if (sb > 0) {\r\n      ob =\r\n        sa * da * (1 - min(1, ((1 - db / da) * sa) / sb)) +\r\n        sb * (1 - da) +\r\n        db * (1 - sa);\r\n    }\r\n  }\r\n\r\n  function _linearlight() {\r\n    var dr1 = 2 * sr + dr - 256;\r\n    var dg1 = 2 * sg + dg - 256;\r\n    var db1 = 2 * sb + db - 256;\r\n\r\n    or = dr1 < 0 || (sr < 128 && dr1 < 0) ? 0 : dr1 > 255 ? 255 : dr1;\r\n    og = dg1 < 0 || (sg < 128 && dg1 < 0) ? 0 : dg1 > 255 ? 255 : dg1;\r\n    ob = db1 < 0 || (sb < 128 && db1 < 0) ? 0 : db1 > 255 ? 255 : db1;\r\n  }\r\n\r\n  function _vividlight() {\r\n    var a;\r\n\r\n    if (sr < 128) {\r\n      if (sr) {\r\n        a = 255 - ((255 - dr) << 8) / (2 * sr);\r\n        or = a < 0 ? 0 : a;\r\n      } else {\r\n        or = 0;\r\n      }\r\n    } else {\r\n      a = 2 * sr - 256;\r\n      if (a < 255) {\r\n        a = (dr << 8) / (255 - a);\r\n        or = a > 255 ? 255 : a;\r\n      } else {\r\n        or = a < 0 ? 0 : a;\r\n      }\r\n    }\r\n\r\n    if (sg < 128) {\r\n      if (sg) {\r\n        a = 255 - ((255 - dg) << 8) / (2 * sg);\r\n        og = a < 0 ? 0 : a;\r\n      } else {\r\n        og = 0;\r\n      }\r\n    } else {\r\n      a = 2 * sg - 256;\r\n      if (a < 255) {\r\n        a = (dg << 8) / (255 - a);\r\n        og = a > 255 ? 255 : a;\r\n      } else {\r\n        og = a < 0 ? 0 : a;\r\n      }\r\n    }\r\n\r\n    if (sb < 128) {\r\n      if (sb) {\r\n        a = 255 - ((255 - db) << 8) / (2 * sb);\r\n        ob = a < 0 ? 0 : a;\r\n      } else {\r\n        ob = 0;\r\n      }\r\n    } else {\r\n      a = 2 * sb - 256;\r\n      if (a < 255) {\r\n        a = (db << 8) / (255 - a);\r\n        ob = a > 255 ? 255 : a;\r\n      } else {\r\n        ob = a < 0 ? 0 : a;\r\n      }\r\n    }\r\n  }\r\n\r\n  function _pinlight() {\r\n    var a;\r\n\r\n    if (sr < 128) {\r\n      a = 2 * sr;\r\n      or = dr < a ? dr : a;\r\n    } else {\r\n      a = 2 * sr - 256;\r\n      or = dr > a ? dr : a;\r\n    }\r\n\r\n    if (sg < 128) {\r\n      a = 2 * sg;\r\n      og = dg < a ? dg : a;\r\n    } else {\r\n      a = 2 * sg - 256;\r\n      og = dg > a ? dg : a;\r\n    }\r\n\r\n    if (sb < 128) {\r\n      a = 2 * sb;\r\n      ob = db < a ? db : a;\r\n    } else {\r\n      a = 2 * sb - 256;\r\n      ob = db > a ? db : a;\r\n    }\r\n  }\r\n\r\n  function _hardmix() {\r\n    var a;\r\n\r\n    if (sr < 128) {\r\n      or = 255 - ((255 - dr) << 8) / (2 * sr) < 128 || sr === 0 ? 0 : 255;\r\n    } else {\r\n      a = 2 * sr - 256;\r\n      or = a < 255 && (dr << 8) / (255 - a) < 128 ? 0 : 255;\r\n    }\r\n\r\n    if (sg < 128) {\r\n      og = 255 - ((255 - dg) << 8) / (2 * sg) < 128 || sg === 0 ? 0 : 255;\r\n    } else {\r\n      a = 2 * sg - 256;\r\n      og = a < 255 && (dg << 8) / (255 - a) < 128 ? 0 : 255;\r\n    }\r\n\r\n    if (sb < 128) {\r\n      ob = 255 - ((255 - db) << 8) / (2 * sb) < 128 || sb === 0 ? 0 : 255;\r\n    } else {\r\n      a = 2 * sb - 256;\r\n      ob = a < 255 && (db << 8) / (255 - a) < 128 ? 0 : 255;\r\n    }\r\n  }\r\n\r\n  function _hue() {\r\n    var hcl1 = rgbToHsy(dr, dg, db);\r\n    var hcl2 = rgbToHsy(sr, sg, sb);\r\n    var rgb = hsyToRgb(hcl2[0], hcl1[1], hcl1[2]);\r\n    or = rgb[0];\r\n    og = rgb[1];\r\n    ob = rgb[2];\r\n  }\r\n\r\n  function _saturation() {\r\n    var hcl1 = rgbToHsy(dr, dg, db);\r\n    var hcl2 = rgbToHsy(sr, sg, sb);\r\n    var rgb = hsyToRgb(hcl1[0], hcl2[1], hcl1[2]);\r\n    or = rgb[0];\r\n    og = rgb[1];\r\n    ob = rgb[2];\r\n  }\r\n\r\n  function _luminosity() {\r\n    var hcl1 = rgbToHsy(dr, dg, db);\r\n    var hcl2 = rgbToHsy(sr, sg, sb);\r\n    var rgb = hsyToRgb(hcl1[0], hcl1[1], hcl2[2]);\r\n    or = rgb[0];\r\n    og = rgb[1];\r\n    ob = rgb[2];\r\n  }\r\n\r\n  function _color() {\r\n    var hcl1 = rgbToHsy(dr, dg, db);\r\n    var hcl2 = rgbToHsy(sr, sg, sb);\r\n    var rgb = hsyToRgb(hcl2[0], hcl2[1], hcl1[2]);\r\n    or = rgb[0];\r\n    og = rgb[1];\r\n    ob = rgb[2];\r\n  }\r\n\r\n  blend_fn = {\r\n    \"source-over\": _svg_sourceover,\r\n    multiply: _svg_multiply,\r\n    subtract: _svg_subtract,\r\n    divide: _divide,\r\n    screen: _svg_screen,\r\n    lighten: _svg_lighten,\r\n    darken: _svg_darken,\r\n    \"darker-color\": _svg_darkercolor,\r\n    \"lighter-color\": _svg_lightercolor,\r\n    add: _add,\r\n    \"linear-burn\": _linearburn,\r\n    difference: _svg_difference,\r\n    exclusion: _svg_exclusion,\r\n    overlay: _svg_overlay,\r\n    \"soft-light\": _svg_softlight,\r\n    \"hard-light\": _svg_hardlight,\r\n    \"color-dodge\": _svg_colordodge,\r\n    \"color-burn\": _svg_colorburn,\r\n    \"linear-light\": _linearlight,\r\n    \"vivid-light\": _vividlight,\r\n    \"pin-light\": _pinlight,\r\n    \"hard-mix\": _hardmix,\r\n    hue: _hue,\r\n    saturation: _saturation,\r\n    luminosity: _luminosity,\r\n    color: _color,\r\n  };\r\n\r\n  function rectIntersect(r1, r2) {\r\n    var right1 = r1.x + r1.width;\r\n    var bottom1 = r1.y + r1.height;\r\n    var right2 = r2.x + r2.width;\r\n    var bottom2 = r2.y + r2.height;\r\n\r\n    var x = max(r1.x, r2.x);\r\n    var y = max(r1.y, r2.y);\r\n    var w = max(min(right1, right2) - x, 0);\r\n    var h = max(min(bottom1, bottom2) - y, 0);\r\n    return [x, y, w, h];\r\n  }\r\n\r\n  (function () {\r\n    var pix, pixIn, x, y, a, a2, da2, demultiply, fBlend;\r\n    var data2 = options.data;\r\n    var opacity = options.opacity === 0 ? 0 : options.opacity || 1;\r\n    var fn = blend_fn[options.type || \"_svg_normal\"];\r\n    var dx = options.dx || 0;\r\n    var dy = options.dy || 0;\r\n    var ri = rectIntersect(\r\n      { x: 0, y: 0, width: width, height: height },\r\n      { x: dx, y: dy, width: options.width, height: options.height }\r\n    );\r\n    var xi = ri[0];\r\n    var yi = ri[1];\r\n    var wi = ri[2];\r\n    var hi = ri[3];\r\n\r\n    function pBlend() {\r\n      sa = (data2[pixIn + 3] / 255) * opacity;\r\n      da = inData[pix + 3] / 255;\r\n      da2 = sa + da - sa * da;\r\n      demultiply = 255 / da2;\r\n\r\n      sr = (data2[pixIn] / 255) * sa;\r\n      sg = (data2[pixIn + 1] / 255) * sa;\r\n      sb = (data2[pixIn + 2] / 255) * sa;\r\n\r\n      dr = (inData[pix] / 255) * da;\r\n      dg = (inData[pix + 1] / 255) * da;\r\n      db = (inData[pix + 2] / 255) * da;\r\n\r\n      fn();\r\n\r\n      outData[pix] = or * demultiply;\r\n      outData[pix + 1] = og * demultiply;\r\n      outData[pix + 2] = ob * demultiply;\r\n      outData[pix + 3] = da2 * 255;\r\n    }\r\n\r\n    function sBlend() {\r\n      dr = inData[pix];\r\n      dg = inData[pix + 1];\r\n      db = inData[pix + 2];\r\n\r\n      sr = data2[pixIn];\r\n      sg = data2[pixIn + 1];\r\n      sb = data2[pixIn + 2];\r\n\r\n      fn();\r\n\r\n      outData[pix] = or;\r\n      outData[pix + 1] = og;\r\n      outData[pix + 2] = ob;\r\n      outData[pix + 3] = inData[pix + 3];\r\n\r\n      a = (opacity * data2[pixIn + 3]) / 255;\r\n      if (a < 1) {\r\n        a2 = 1 - a;\r\n        outData[pix] = inData[pix] * a2 + outData[pix] * a;\r\n        outData[pix + 1] = inData[pix + 1] * a2 + outData[pix + 1] * a;\r\n        outData[pix + 2] = inData[pix + 2] * a2 + outData[pix + 2] * a;\r\n      }\r\n    }\r\n\r\n    fBlend = fn.name.indexOf(\"_svg_\") === 0 ? pBlend : sBlend;\r\n\r\n    for (y = 0; y < height; y += 1) {\r\n      for (x = 0; x < width; x += 1) {\r\n        pix = (y * width + x) * 4;\r\n        if (y >= yi && x >= xi && x < xi + wi && y < yi + hi) {\r\n          pixIn = ((y - dy) * options.width + x - dx) * 4;\r\n          fBlend();\r\n        } else {\r\n          outData[pix] = inData[pix];\r\n          outData[pix + 1] = inData[pix + 1];\r\n          outData[pix + 2] = inData[pix + 2];\r\n          outData[pix + 3] = inData[pix + 3];\r\n        }\r\n      }\r\n    }\r\n  })();\r\n};\r\n\r\nfunction _blend(inData, outData, width, height, options) {\r\n  process(inData, outData, width, height, options);\r\n}\r\n\r\nfunction _wrap(type) {\r\n  return function (inData, outData, width, height, options) {\r\n    options.type = type;\r\n    _blend(inData, outData, width, height, options);\r\n  };\r\n}\r\n\r\nconst blend = (function () {\r\n  var mode;\r\n  var d = { blend: _blend };\r\n  var modes = [\r\n    \"source-over\",\r\n    \"add\",\r\n    \"multiply\",\r\n    \"subtract\",\r\n    \"divide\",\r\n    \"screen\",\r\n    \"lighten\",\r\n    \"darken\",\r\n    \"darker-color\",\r\n    \"lighter-color\",\r\n    \"linear-burn\",\r\n    \"difference\",\r\n    \"exclusion\",\r\n    \"overlay\",\r\n    \"soft-light\",\r\n    \"hard-light\",\r\n    \"color-dodge\",\r\n    \"color-burn\",\r\n    \"linear-light\",\r\n    \"vivid-light\",\r\n    \"pin-light\",\r\n    \"hard-mix\",\r\n    \"hue\",\r\n    \"saturation\",\r\n    \"luminosity\",\r\n    \"color\",\r\n  ];\r\n  for (var i = 0; i < modes.length; i += 1) {\r\n    mode = modes[i];\r\n    d[mode] = _wrap(mode);\r\n  }\r\n  modes = Object.keys(modes);\r\n  for (i = 0; i < modes.length; i += 1) {}\r\n  // Aliases for the blending modes\r\n  addAliases(d);\r\n\r\n  d.getNativeModes = getNativeModes;\r\n  d.realBlendMode = realBlendMode;\r\n\r\n  return d;\r\n})();\r\n\r\n// MODULE SUPPORT ///////////////////////////////////////////////////////\r\nexport default blend;\r\n", "/*!\r\n * Image processing based on Pixastic library:\r\n *\r\n * Pixastic - JavaScript Image Processing\r\n * http://pixastic.com/\r\n * Copyright 2012, Jacob Seidelin\r\n *\r\n * Dual licensed under the MPL 1.1 or GPLv3 licenses.\r\n * http://pixastic.com/license-mpl.txt\r\n * http://pixastic.com/license-gpl-3.0.txt\r\n *\r\n */\r\n\r\nimport stackblur from \"stackblur\";\r\nimport { radians, distance, transform, clamp } from \"./util.mjs\";\r\n\r\nvar LUMINOSITY_ITU_R_BT601 = \"ITU-R BT.601\";\r\nvar LUMINOSITY_ITU_R_BT709 = \"ITU-R BT.709\";\r\n\r\nfunction defaultOptions(options, defaults) {\r\n  if (!options) {\r\n    return defaults;\r\n  }\r\n  var opt,\r\n    o = {};\r\n  for (opt in defaults) {\r\n    if (defaults.hasOwnProperty(opt)) {\r\n      if (typeof options[opt] === \"undefined\") {\r\n        o[opt] = defaults[opt];\r\n      } else {\r\n        o[opt] = options[opt];\r\n      }\r\n    }\r\n  }\r\n  return o;\r\n}\r\n\r\nfunction smoothstep(a, b, x) {\r\n  /* Returns a smooth transition between 0.0 and 1.0 using Hermite interpolation (cubic spline),\r\n   * where x is a number between a and b. The return value will ease (slow down) as x nears a or b.\r\n   * For x smaller than a, returns 0.0. For x bigger than b, returns 1.0.\r\n   */\r\n  if (x < a) {\r\n    return 0.0;\r\n  }\r\n  if (x >= b) {\r\n    return 1.0;\r\n  }\r\n  x = (x - a) / (b - a);\r\n  return x * x * (3 - 2 * x);\r\n}\r\n\r\nfunction noise() {\r\n  return Math.random() * 0.5 + 0.5;\r\n}\r\n\r\nfunction colorDistance(scale, dest, src) {\r\n  return clamp(scale * dest + (1 - scale) * src, 0, 255);\r\n}\r\n\r\nfunction convolve3x3(\r\n  inData,\r\n  outData,\r\n  width,\r\n  height,\r\n  kernel,\r\n  alpha,\r\n  invert,\r\n  mono\r\n) {\r\n  var x,\r\n    y,\r\n    n = width * height * 4,\r\n    idx,\r\n    r,\r\n    g,\r\n    b,\r\n    a,\r\n    pyc,\r\n    pyp,\r\n    pyn,\r\n    pxc,\r\n    pxp,\r\n    pxn,\r\n    k00 = kernel[0][0],\r\n    k01 = kernel[0][1],\r\n    k02 = kernel[0][2],\r\n    k10 = kernel[1][0],\r\n    k11 = kernel[1][1],\r\n    k12 = kernel[1][2],\r\n    k20 = kernel[2][0],\r\n    k21 = kernel[2][1],\r\n    k22 = kernel[2][2],\r\n    p00,\r\n    p01,\r\n    p02,\r\n    p10,\r\n    p11,\r\n    p12,\r\n    p20,\r\n    p21,\r\n    p22;\r\n\r\n  for (y = 0; y < height; y += 1) {\r\n    pyc = y * width * 4;\r\n    pyp = pyc - width * 4;\r\n    pyn = pyc + width * 4;\r\n\r\n    if (y < 1) {\r\n      pyp = pyc;\r\n    }\r\n    if (y >= width - 1) {\r\n      pyn = pyc;\r\n    }\r\n\r\n    for (x = 0; x < width; x += 1) {\r\n      idx = (y * width + x) * 4;\r\n\r\n      pxc = x * 4;\r\n      pxp = pxc - 4;\r\n      pxn = pxc + 4;\r\n\r\n      if (x < 1) {\r\n        pxp = pxc;\r\n      }\r\n      if (x >= width - 1) {\r\n        pxn = pxc;\r\n      }\r\n\r\n      p00 = pyp + pxp;\r\n      p01 = pyp + pxc;\r\n      p02 = pyp + pxn;\r\n      p10 = pyc + pxp;\r\n      p11 = pyc + pxc;\r\n      p12 = pyc + pxn;\r\n      p20 = pyn + pxp;\r\n      p21 = pyn + pxc;\r\n      p22 = pyn + pxn;\r\n\r\n      r =\r\n        inData[p00] * k00 +\r\n        inData[p01] * k01 +\r\n        inData[p02] * k02 +\r\n        inData[p10] * k10 +\r\n        inData[p11] * k11 +\r\n        inData[p12] * k12 +\r\n        inData[p20] * k20 +\r\n        inData[p21] * k21 +\r\n        inData[p22] * k22;\r\n\r\n      g =\r\n        inData[p00 + 1] * k00 +\r\n        inData[p01 + 1] * k01 +\r\n        inData[p02 + 1] * k02 +\r\n        inData[p10 + 1] * k10 +\r\n        inData[p11 + 1] * k11 +\r\n        inData[p12 + 1] * k12 +\r\n        inData[p20 + 1] * k20 +\r\n        inData[p21 + 1] * k21 +\r\n        inData[p22 + 1] * k22;\r\n\r\n      b =\r\n        inData[p00 + 2] * k00 +\r\n        inData[p01 + 2] * k01 +\r\n        inData[p02 + 2] * k02 +\r\n        inData[p10 + 2] * k10 +\r\n        inData[p11 + 2] * k11 +\r\n        inData[p12 + 2] * k12 +\r\n        inData[p20 + 2] * k20 +\r\n        inData[p21 + 2] * k21 +\r\n        inData[p22 + 2] * k22;\r\n\r\n      if (alpha) {\r\n        a =\r\n          inData[p00 + 3] * k00 +\r\n          inData[p01 + 3] * k01 +\r\n          inData[p02 + 3] * k02 +\r\n          inData[p10 + 3] * k10 +\r\n          inData[p11 + 3] * k11 +\r\n          inData[p12 + 3] * k12 +\r\n          inData[p20 + 3] * k20 +\r\n          inData[p21 + 3] * k21 +\r\n          inData[p22 + 3] * k22;\r\n      } else {\r\n        a = inData[idx + 3];\r\n      }\r\n\r\n      if (mono) {\r\n        r = g = b = (r + g + b) / 3;\r\n      }\r\n      if (invert) {\r\n        r = 255 - r;\r\n        g = 255 - g;\r\n        b = 255 - b;\r\n      }\r\n\r\n      outData[idx] = r;\r\n      outData[idx + 1] = g;\r\n      outData[idx + 2] = b;\r\n      outData[idx + 3] = a;\r\n    }\r\n  }\r\n}\r\n\r\nfunction convolve5x5(\r\n  inData,\r\n  outData,\r\n  width,\r\n  height,\r\n  kernel,\r\n  alpha,\r\n  invert,\r\n  mono\r\n) {\r\n  var x,\r\n    y,\r\n    n = width * height * 4,\r\n    idx,\r\n    r,\r\n    g,\r\n    b,\r\n    a,\r\n    pyc,\r\n    pyp,\r\n    pyn,\r\n    pypp,\r\n    pynn,\r\n    pxc,\r\n    pxp,\r\n    pxn,\r\n    pxpp,\r\n    pxnn,\r\n    k00 = kernel[0][0],\r\n    k01 = kernel[0][1],\r\n    k02 = kernel[0][2],\r\n    k03 = kernel[0][3],\r\n    k04 = kernel[0][4],\r\n    k10 = kernel[1][0],\r\n    k11 = kernel[1][1],\r\n    k12 = kernel[1][2],\r\n    k13 = kernel[1][3],\r\n    k14 = kernel[1][4],\r\n    k20 = kernel[2][0],\r\n    k21 = kernel[2][1],\r\n    k22 = kernel[2][2],\r\n    k23 = kernel[2][3],\r\n    k24 = kernel[2][4],\r\n    k30 = kernel[3][0],\r\n    k31 = kernel[3][1],\r\n    k32 = kernel[3][2],\r\n    k33 = kernel[3][3],\r\n    k34 = kernel[3][4],\r\n    k40 = kernel[4][0],\r\n    k41 = kernel[4][1],\r\n    k42 = kernel[4][2],\r\n    k43 = kernel[4][3],\r\n    k44 = kernel[4][4],\r\n    p00,\r\n    p01,\r\n    p02,\r\n    p03,\r\n    p04,\r\n    p10,\r\n    p11,\r\n    p12,\r\n    p13,\r\n    p14,\r\n    p20,\r\n    p21,\r\n    p22,\r\n    p23,\r\n    p24,\r\n    p30,\r\n    p31,\r\n    p32,\r\n    p33,\r\n    p34,\r\n    p40,\r\n    p41,\r\n    p42,\r\n    p43,\r\n    p44;\r\n\r\n  for (y = 0; y < height; y += 1) {\r\n    pyc = y * width * 4;\r\n    pyp = pyc - width * 4;\r\n    pypp = pyc - width * 4 * 2;\r\n    pyn = pyc + width * 4;\r\n    pynn = pyc + width * 4 * 2;\r\n\r\n    if (y < 1) {\r\n      pyp = pyc;\r\n    }\r\n    if (y >= width - 1) {\r\n      pyn = pyc;\r\n    }\r\n    if (y < 2) {\r\n      pypp = pyp;\r\n    }\r\n    if (y >= width - 2) {\r\n      pynn = pyn;\r\n    }\r\n\r\n    for (x = 0; x < width; x += 1) {\r\n      idx = (y * width + x) * 4;\r\n\r\n      pxc = x * 4;\r\n      pxp = pxc - 4;\r\n      pxn = pxc + 4;\r\n      pxpp = pxc - 8;\r\n      pxnn = pxc + 8;\r\n\r\n      if (x < 1) {\r\n        pxp = pxc;\r\n      }\r\n      if (x >= width - 1) {\r\n        pxn = pxc;\r\n      }\r\n      if (x < 2) {\r\n        pxpp = pxp;\r\n      }\r\n      if (x >= width - 2) {\r\n        pxnn = pxn;\r\n      }\r\n\r\n      p00 = pypp + pxpp;\r\n      p01 = pypp + pxp;\r\n      p02 = pypp + pxc;\r\n      p03 = pypp + pxn;\r\n      p04 = pypp + pxnn;\r\n      p10 = pyp + pxpp;\r\n      p11 = pyp + pxp;\r\n      p12 = pyp + pxc;\r\n      p13 = pyp + pxn;\r\n      p14 = pyp + pxnn;\r\n      p20 = pyc + pxpp;\r\n      p21 = pyc + pxp;\r\n      p22 = pyc + pxc;\r\n      p23 = pyc + pxn;\r\n      p24 = pyc + pxnn;\r\n      p30 = pyn + pxpp;\r\n      p31 = pyn + pxp;\r\n      p32 = pyn + pxc;\r\n      p33 = pyn + pxn;\r\n      p34 = pyn + pxnn;\r\n      p40 = pynn + pxpp;\r\n      p41 = pynn + pxp;\r\n      p42 = pynn + pxc;\r\n      p43 = pynn + pxn;\r\n      p44 = pynn + pxnn;\r\n\r\n      r =\r\n        inData[p00] * k00 +\r\n        inData[p01] * k01 +\r\n        inData[p02] * k02 +\r\n        inData[p03] * k04 +\r\n        inData[p02] * k04 +\r\n        inData[p10] * k10 +\r\n        inData[p11] * k11 +\r\n        inData[p12] * k12 +\r\n        inData[p13] * k14 +\r\n        inData[p12] * k14 +\r\n        inData[p20] * k20 +\r\n        inData[p21] * k21 +\r\n        inData[p22] * k22 +\r\n        inData[p23] * k24 +\r\n        inData[p22] * k24 +\r\n        inData[p30] * k30 +\r\n        inData[p31] * k31 +\r\n        inData[p32] * k32 +\r\n        inData[p33] * k34 +\r\n        inData[p32] * k34 +\r\n        inData[p40] * k40 +\r\n        inData[p41] * k41 +\r\n        inData[p42] * k42 +\r\n        inData[p43] * k44 +\r\n        inData[p42] * k44;\r\n\r\n      g =\r\n        inData[p00 + 1] * k00 +\r\n        inData[p01 + 1] * k01 +\r\n        inData[p02 + 1] * k02 +\r\n        inData[p03 + 1] * k04 +\r\n        inData[p02 + 1] * k04 +\r\n        inData[p10 + 1] * k10 +\r\n        inData[p11 + 1] * k11 +\r\n        inData[p12 + 1] * k12 +\r\n        inData[p13 + 1] * k14 +\r\n        inData[p12 + 1] * k14 +\r\n        inData[p20 + 1] * k20 +\r\n        inData[p21 + 1] * k21 +\r\n        inData[p22 + 1] * k22 +\r\n        inData[p23 + 1] * k24 +\r\n        inData[p22 + 1] * k24 +\r\n        inData[p30 + 1] * k30 +\r\n        inData[p31 + 1] * k31 +\r\n        inData[p32 + 1] * k32 +\r\n        inData[p33 + 1] * k34 +\r\n        inData[p32 + 1] * k34 +\r\n        inData[p40 + 1] * k40 +\r\n        inData[p41 + 1] * k41 +\r\n        inData[p42 + 1] * k42 +\r\n        inData[p43 + 1] * k44 +\r\n        inData[p42 + 1] * k44;\r\n\r\n      b =\r\n        inData[p00 + 2] * k00 +\r\n        inData[p01 + 2] * k01 +\r\n        inData[p02 + 2] * k02 +\r\n        inData[p03 + 2] * k04 +\r\n        inData[p02 + 2] * k04 +\r\n        inData[p10 + 2] * k10 +\r\n        inData[p11 + 2] * k11 +\r\n        inData[p12 + 2] * k12 +\r\n        inData[p13 + 2] * k14 +\r\n        inData[p12 + 2] * k14 +\r\n        inData[p20 + 2] * k20 +\r\n        inData[p21 + 2] * k21 +\r\n        inData[p22 + 2] * k22 +\r\n        inData[p23 + 2] * k24 +\r\n        inData[p22 + 2] * k24 +\r\n        inData[p30 + 2] * k30 +\r\n        inData[p31 + 2] * k31 +\r\n        inData[p32 + 2] * k32 +\r\n        inData[p33 + 2] * k34 +\r\n        inData[p32 + 2] * k34 +\r\n        inData[p40 + 2] * k40 +\r\n        inData[p41 + 2] * k41 +\r\n        inData[p42 + 2] * k42 +\r\n        inData[p43 + 2] * k44 +\r\n        inData[p42 + 2] * k44;\r\n\r\n      if (alpha) {\r\n        a =\r\n          inData[p00 + 3] * k00 +\r\n          inData[p01 + 3] * k01 +\r\n          inData[p02 + 3] * k02 +\r\n          inData[p03 + 3] * k04 +\r\n          inData[p02 + 3] * k04 +\r\n          inData[p10 + 3] * k10 +\r\n          inData[p11 + 3] * k11 +\r\n          inData[p12 + 3] * k12 +\r\n          inData[p13 + 3] * k14 +\r\n          inData[p12 + 3] * k14 +\r\n          inData[p20 + 3] * k20 +\r\n          inData[p21 + 3] * k21 +\r\n          inData[p22 + 3] * k22 +\r\n          inData[p23 + 3] * k24 +\r\n          inData[p22 + 3] * k24 +\r\n          inData[p30 + 3] * k30 +\r\n          inData[p31 + 3] * k31 +\r\n          inData[p32 + 3] * k32 +\r\n          inData[p33 + 3] * k34 +\r\n          inData[p32 + 3] * k34 +\r\n          inData[p40 + 3] * k40 +\r\n          inData[p41 + 3] * k41 +\r\n          inData[p42 + 3] * k42 +\r\n          inData[p43 + 3] * k44 +\r\n          inData[p42 + 3] * k44;\r\n      } else {\r\n        a = inData[idx + 3];\r\n      }\r\n\r\n      if (mono) {\r\n        r = g = b = (r + g + b) / 3;\r\n      }\r\n\r\n      if (invert) {\r\n        r = 255 - r;\r\n        g = 255 - g;\r\n        b = 255 - b;\r\n      }\r\n\r\n      outData[idx] = r;\r\n      outData[idx + 1] = g;\r\n      outData[idx + 2] = b;\r\n      outData[idx + 3] = a;\r\n    }\r\n  }\r\n}\r\n\r\nfunction gaussian(inData, outData, width, height, kernelSize) {\r\n  var x,\r\n    y,\r\n    i,\r\n    j,\r\n    n = width * height * 4,\r\n    r,\r\n    g,\r\n    b,\r\n    a,\r\n    idx,\r\n    inx,\r\n    iny,\r\n    w,\r\n    tmpData = [],\r\n    maxKernelSize = 13,\r\n    k1,\r\n    k2,\r\n    weights,\r\n    kernels = [[1]];\r\n\r\n  kernelSize = clamp(kernelSize, 3, maxKernelSize);\r\n  k1 = -kernelSize / 2 + (kernelSize % 2 ? 0.5 : 0);\r\n  k2 = kernelSize + k1;\r\n\r\n  for (i = 1; i < maxKernelSize; i += 1) {\r\n    kernels[0][i] = 0;\r\n  }\r\n\r\n  for (i = 1; i < maxKernelSize; i += 1) {\r\n    kernels[i] = [1];\r\n    for (j = 1; j < maxKernelSize; j += 1) {\r\n      kernels[i][j] = kernels[i - 1][j] + kernels[i - 1][j - 1];\r\n    }\r\n  }\r\n\r\n  weights = kernels[kernelSize - 1];\r\n\r\n  for (i = 0, w = 0; i < kernelSize; i += 1) {\r\n    w += weights[i];\r\n  }\r\n  for (i = 0; i < kernelSize; i += 1) {\r\n    weights[i] /= w;\r\n  }\r\n\r\n  // pass 1\r\n  for (y = 0; y < height; y += 1) {\r\n    for (x = 0; x < width; x += 1) {\r\n      r = g = b = a = 0;\r\n\r\n      for (i = k1; i < k2; i += 1) {\r\n        inx = x + i;\r\n        iny = y;\r\n        w = weights[i - k1];\r\n\r\n        if (inx < 0) {\r\n          inx = 0;\r\n        }\r\n        if (inx >= width) {\r\n          inx = width - 1;\r\n        }\r\n\r\n        idx = (iny * width + inx) * 4;\r\n\r\n        r += inData[idx] * w;\r\n        g += inData[idx + 1] * w;\r\n        b += inData[idx + 2] * w;\r\n        a += inData[idx + 3] * w;\r\n      }\r\n\r\n      idx = (y * width + x) * 4;\r\n\r\n      tmpData[idx] = r;\r\n      tmpData[idx + 1] = g;\r\n      tmpData[idx + 2] = b;\r\n      tmpData[idx + 3] = a;\r\n    }\r\n  }\r\n\r\n  // pass 2\r\n  for (y = 0; y < height; y += 1) {\r\n    for (x = 0; x < width; x += 1) {\r\n      r = g = b = a = 0;\r\n\r\n      for (i = k1; i < k2; i += 1) {\r\n        inx = x;\r\n        iny = y + i;\r\n        w = weights[i - k1];\r\n\r\n        if (iny < 0) {\r\n          iny = 0;\r\n        }\r\n        if (iny >= height) {\r\n          iny = height - 1;\r\n        }\r\n\r\n        idx = (iny * width + inx) * 4;\r\n\r\n        r += tmpData[idx] * w;\r\n        g += tmpData[idx + 1] * w;\r\n        b += tmpData[idx + 2] * w;\r\n        a += tmpData[idx + 3] * w;\r\n      }\r\n\r\n      idx = (y * width + x) * 4;\r\n\r\n      outData[idx] = r;\r\n      outData[idx + 1] = g;\r\n      outData[idx + 2] = b;\r\n      outData[idx + 3] = a;\r\n    }\r\n  }\r\n}\r\n\r\nfunction getPixel(v, i) {\r\n  i *= 4;\r\n  return [v[i + 0], v[i + 1], v[i + 2], v[i + 3]];\r\n}\r\n\r\nfunction setPixel(v, i, rgba) {\r\n  i *= 4;\r\n  v[i + 0] = rgba[0];\r\n  v[i + 1] = rgba[1];\r\n  v[i + 2] = rgba[2];\r\n  v[i + 3] = rgba[3];\r\n}\r\n\r\n// Polar filters (distortion filters) are from canvas.js: https://github.com/clips/pattern/blob/master/pattern/canvas.js (BSD)\r\n// De Smedt T. & Daelemans W. (2012). Pattern for Python. Journal of Machine Learning Research.\r\n// Based on: L. Spagnolini, 2007\r\n\r\nfunction polar(inData, outData, x0, y0, width, height, callback) {\r\n  /* Sets image data based on a polar coordinates filter.\r\n   * The given callback is a function(distance, angle) that returns new [distance, angle].\r\n   */\r\n  x0 = width / 2 + (x0 || 0);\r\n  y0 = height / 2 + (y0 || 0);\r\n  var y1, x1, x, y, d, a, v;\r\n  for (y1 = 0; y1 < height; y1 += 1) {\r\n    for (x1 = 0; x1 < width; x1 += 1) {\r\n      x = x1 - x0;\r\n      y = y1 - y0;\r\n      d = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\r\n      a = Math.atan2(y, x);\r\n      v = callback(d, a);\r\n      d = v[0];\r\n      a = v[1];\r\n      setPixel(\r\n        outData,\r\n        x1 + y1 * width,\r\n        getPixel(\r\n          inData,\r\n          Math.round(x0 + Math.cos(a) * d) +\r\n            Math.round(y0 + Math.sin(a) * d) * width\r\n        )\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst process = {\r\n  invert: function (inData, outData, width, height) {\r\n    var i,\r\n      n = width * height * 4;\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      outData[i] = 255 - inData[i];\r\n      outData[i + 1] = 255 - inData[i + 1];\r\n      outData[i + 2] = 255 - inData[i + 2];\r\n      outData[i + 3] = inData[i + 3];\r\n    }\r\n  },\r\n\r\n  sepia: function (inData, outData, width, height) {\r\n    var i,\r\n      n = width * height * 4,\r\n      r,\r\n      g,\r\n      b;\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      r = inData[i];\r\n      g = inData[i + 1];\r\n      b = inData[i + 2];\r\n      outData[i] = r * 0.393 + g * 0.769 + b * 0.189;\r\n      outData[i + 1] = r * 0.349 + g * 0.686 + b * 0.168;\r\n      outData[i + 2] = r * 0.272 + g * 0.534 + b * 0.131;\r\n      outData[i + 3] = inData[i + 3];\r\n    }\r\n  },\r\n\r\n  solarize: function (inData, outData, width, height) {\r\n    var i,\r\n      n = width * height * 4,\r\n      r,\r\n      g,\r\n      b;\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      r = inData[i];\r\n      g = inData[i + 1];\r\n      b = inData[i + 2];\r\n\r\n      outData[i] = r > 127 ? 255 - r : r;\r\n      outData[i + 1] = g > 127 ? 255 - g : g;\r\n      outData[i + 2] = b > 127 ? 255 - b : b;\r\n      outData[i + 3] = inData[i + 3];\r\n    }\r\n  },\r\n\r\n  brightness: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, {\r\n      brightness: 1,\r\n      contrast: 0,\r\n    });\r\n\r\n    var i,\r\n      n = width * height * 4,\r\n      r,\r\n      g,\r\n      b,\r\n      contrast = clamp(options.contrast, -1, 1) / 2,\r\n      brightness = 1 + clamp(options.brightness, -1, 1),\r\n      brightMul = brightness < 0 ? -brightness : brightness,\r\n      brightAdd = brightness < 0 ? 0 : brightness,\r\n      contrastAdd;\r\n\r\n    contrast = 0.5 * Math.tan(((contrast + 1) * Math.PI) / 4);\r\n    contrastAdd = -(contrast - 0.5) * 255;\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      r = inData[i];\r\n      g = inData[i + 1];\r\n      b = inData[i + 2];\r\n\r\n      r = (r + r * brightMul + brightAdd) * contrast + contrastAdd;\r\n      g = (g + g * brightMul + brightAdd) * contrast + contrastAdd;\r\n      b = (b + b * brightMul + brightAdd) * contrast + contrastAdd;\r\n\r\n      outData[i] = r;\r\n      outData[i + 1] = g;\r\n      outData[i + 2] = b;\r\n      outData[i + 3] = inData[i + 3];\r\n    }\r\n  },\r\n\r\n  desaturate: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, { method: LUMINOSITY_ITU_R_BT601 });\r\n    var i,\r\n      n = width * height * 4,\r\n      level,\r\n      rCoeff,\r\n      gCoeff,\r\n      bCoeff;\r\n\r\n    if (options.method === LUMINOSITY_ITU_R_BT601) {\r\n      rCoeff = 0.3;\r\n      gCoeff = 0.59;\r\n      bCoeff = 0.11;\r\n    } else if (options.method === LUMINOSITY_ITU_R_BT709) {\r\n      rCoeff = 0.2125;\r\n      gCoeff = 0.7154;\r\n      bCoeff = 0.0721;\r\n    }\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      level =\r\n        inData[i] * rCoeff + inData[i + 1] * gCoeff + inData[i + 2] * bCoeff;\r\n      outData[i] = level;\r\n      outData[i + 1] = level;\r\n      outData[i + 2] = level;\r\n      outData[i + 3] = inData[i + 3];\r\n    }\r\n  },\r\n\r\n  lighten: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, { amount: 0.25 });\r\n    var i,\r\n      n = width * height * 4,\r\n      mul = 1 + clamp(options.amount, 0, 1);\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      outData[i] = inData[i] * mul;\r\n      outData[i + 1] = inData[i + 1] * mul;\r\n      outData[i + 2] = inData[i + 2] * mul;\r\n      outData[i + 3] = inData[i + 3];\r\n    }\r\n  },\r\n\r\n  noise: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, {\r\n      amount: 0.5,\r\n      strength: 0.5,\r\n      mono: false,\r\n    });\r\n    var i,\r\n      n = width * height * 4,\r\n      rnd,\r\n      r,\r\n      g,\r\n      b,\r\n      amount = clamp(options.amount, 0, 1),\r\n      strength = clamp(options.strength, 0, 1),\r\n      mono = !!options.mono,\r\n      random = Math.random;\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      r = inData[i];\r\n      g = inData[i + 1];\r\n      b = inData[i + 2];\r\n\r\n      rnd = random();\r\n\r\n      if (rnd < amount) {\r\n        if (mono) {\r\n          rnd = strength * ((rnd / amount) * 2 - 1) * 255;\r\n          r += rnd;\r\n          g += rnd;\r\n          b += rnd;\r\n        } else {\r\n          r += strength * random() * 255;\r\n          g += strength * random() * 255;\r\n          b += strength * random() * 255;\r\n        }\r\n      }\r\n\r\n      outData[i] = r;\r\n      outData[i + 1] = g;\r\n      outData[i + 2] = b;\r\n      outData[i + 3] = inData[i + 3];\r\n    }\r\n  },\r\n\r\n  flipv: function (inData, outData, width, height) {\r\n    var x,\r\n      y,\r\n      n = width * height * 4,\r\n      inPix,\r\n      outPix;\r\n\r\n    for (y = 0; y < height; y += 1) {\r\n      for (x = 0; x < width; x += 1) {\r\n        inPix = (y * width + x) * 4;\r\n        outPix = (y * width + (width - x - 1)) * 4;\r\n\r\n        outData[outPix] = inData[inPix];\r\n        outData[outPix + 1] = inData[inPix + 1];\r\n        outData[outPix + 2] = inData[inPix + 2];\r\n        outData[outPix + 3] = inData[inPix + 3];\r\n      }\r\n    }\r\n  },\r\n\r\n  fliph: function (inData, outData, width, height) {\r\n    var x,\r\n      y,\r\n      n = width * height * 4,\r\n      inPix,\r\n      outPix;\r\n\r\n    for (y = 0; y < height; y += 1) {\r\n      for (x = 0; x < width; x += 1) {\r\n        inPix = (y * width + x) * 4;\r\n        outPix = ((height - y - 1) * width + x) * 4;\r\n\r\n        outData[outPix] = inData[inPix];\r\n        outData[outPix + 1] = inData[inPix + 1];\r\n        outData[outPix + 2] = inData[inPix + 2];\r\n        outData[outPix + 3] = inData[inPix + 3];\r\n      }\r\n    }\r\n  },\r\n\r\n  // Uses fast stackblur algorithm from http://www.quasimondo.com/StackBlurForCanvas\r\n  blur: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, { radius: 10 });\r\n    for (var i = 0; i < inData.length; i += 1) {\r\n      outData[i] = inData[i];\r\n    }\r\n    stackblur(outData, width, height, options.radius);\r\n  },\r\n\r\n  glow: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, { amount: 0.75, kernelSize: 5 });\r\n    var i,\r\n      n = width * height * 4,\r\n      r,\r\n      g,\r\n      b,\r\n      amount = options.amount,\r\n      tmpData = [];\r\n\r\n    gaussian(inData, tmpData, width, height, options.kernelSize);\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      r = inData[i] + tmpData[i] * amount;\r\n      g = inData[i + 1] + tmpData[i + 1] * amount;\r\n      b = inData[i + 2] + tmpData[i + 2] * amount;\r\n      if (r > 255) {\r\n        r = 255;\r\n      }\r\n      if (g > 255) {\r\n        g = 255;\r\n      }\r\n      if (b > 255) {\r\n        b = 255;\r\n      }\r\n      outData[i] = r;\r\n      outData[i + 1] = g;\r\n      outData[i + 2] = b;\r\n      outData[i + 3] = inData[i + 3];\r\n    }\r\n  },\r\n\r\n  convolve3x3: function (inData, outData, width, height, options) {\r\n    convolve3x3(inData, outData, width, height, options.kernel);\r\n  },\r\n\r\n  convolve5x5: function (inData, outData, width, height, options) {\r\n    convolve5x5(inData, outData, width, height, options.kernel);\r\n  },\r\n\r\n  // A 3x3 high-pass filter\r\n  sharpen3x3: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, { strength: 1 });\r\n    var a = -clamp(options.strength, 0, 1);\r\n    convolve3x3(inData, outData, width, height, [\r\n      [a, a, a],\r\n      [a, 1 - a * 8, a],\r\n      [a, a, a],\r\n    ]);\r\n  },\r\n\r\n  // A 5x5 high-pass filter\r\n  sharpen5x5: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, { strength: 1 });\r\n    var a = -clamp(options.strength, 0, 1);\r\n    convolve5x5(inData, outData, width, height, [\r\n      [a, a, a, a, a],\r\n      [a, a, a, a, a],\r\n      [a, a, 1 - a * 24, a, a],\r\n      [a, a, a, a, a],\r\n      [a, a, a, a, a],\r\n    ]);\r\n  },\r\n\r\n  // A 3x3 low-pass mean filter\r\n  soften3x3: function (inData, outData, width, height) {\r\n    var c = 1 / 9;\r\n    convolve3x3(inData, outData, width, height, [\r\n      [c, c, c],\r\n      [c, c, c],\r\n      [c, c, c],\r\n    ]);\r\n  },\r\n\r\n  // A 5x5 low-pass mean filter\r\n  soften5x5: function (inData, outData, width, height) {\r\n    var c = 1 / 25;\r\n    convolve5x5(inData, outData, width, height, [\r\n      [c, c, c, c, c],\r\n      [c, c, c, c, c],\r\n      [c, c, c, c, c],\r\n      [c, c, c, c, c],\r\n      [c, c, c, c, c],\r\n    ]);\r\n  },\r\n\r\n  // A 3x3 Cross edge-detect\r\n  crossedges: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, { strength: 1 });\r\n    var a = clamp(options.strength, 0, 1) * 5;\r\n    convolve3x3(\r\n      inData,\r\n      outData,\r\n      width,\r\n      height,\r\n      [\r\n        [0, -a, 0],\r\n        [-a, 0, a],\r\n        [0, a, 0],\r\n      ],\r\n      false,\r\n      true\r\n    );\r\n  },\r\n\r\n  // 3x3 directional emboss\r\n  emboss: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, { amount: 1, angle: 0 });\r\n    var i,\r\n      n = width * height * 4,\r\n      amount = options.amount,\r\n      angle = options.angle,\r\n      x = Math.cos(-angle) * amount,\r\n      y = Math.sin(-angle) * amount,\r\n      a00 = -x - y,\r\n      a10 = -x,\r\n      a20 = y - x,\r\n      a01 = -y,\r\n      a21 = y,\r\n      a02 = -y + x,\r\n      a12 = x,\r\n      a22 = y + x,\r\n      tmpData = [];\r\n\r\n    convolve3x3(inData, tmpData, width, height, [\r\n      [a00, a01, a02],\r\n      [a10, 0, a12],\r\n      [a20, a21, a22],\r\n    ]);\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      outData[i] = 128 + tmpData[i];\r\n      outData[i + 1] = 128 + tmpData[i + 1];\r\n      outData[i + 2] = 128 + tmpData[i + 2];\r\n      outData[i + 3] = inData[i + 3];\r\n    }\r\n  },\r\n\r\n  // A 3x3 Sobel edge detect (similar to Photoshop's)\r\n  findedges: function (inData, outData, width, height) {\r\n    var i,\r\n      n = width * height * 4,\r\n      gr1,\r\n      gr2,\r\n      gg1,\r\n      gg2,\r\n      gb1,\r\n      gb2,\r\n      data1 = [],\r\n      data2 = [];\r\n\r\n    convolve3x3(inData, data1, width, height, [\r\n      [-1, 0, 1],\r\n      [-2, 0, 2],\r\n      [-1, 0, 1],\r\n    ]);\r\n\r\n    convolve3x3(inData, data2, width, height, [\r\n      [-1, -2, -1],\r\n      [0, 0, 0],\r\n      [1, 2, 1],\r\n    ]);\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      gr1 = data1[i];\r\n      gr2 = data2[i];\r\n      gg1 = data1[i + 1];\r\n      gg2 = data2[i + 1];\r\n      gb1 = data1[i + 2];\r\n      gb2 = data2[i + 2];\r\n\r\n      if (gr1 < 0) {\r\n        gr1 = -gr1;\r\n      }\r\n      if (gr2 < 0) {\r\n        gr2 = -gr2;\r\n      }\r\n      if (gg1 < 0) {\r\n        gg1 = -gg1;\r\n      }\r\n      if (gg2 < 0) {\r\n        gg2 = -gg2;\r\n      }\r\n      if (gb1 < 0) {\r\n        gb1 = -gb1;\r\n      }\r\n      if (gb2 < 0) {\r\n        gb2 = -gb2;\r\n      }\r\n\r\n      outData[i] = 255 - (gr1 + gr2) * 0.8;\r\n      outData[i + 1] = 255 - (gg1 + gg2) * 0.8;\r\n      outData[i + 2] = 255 - (gb1 + gb2) * 0.8;\r\n      outData[i + 3] = inData[i + 3];\r\n    }\r\n  },\r\n\r\n  // A 3x3 edge enhance\r\n  edgeenhance3x3: function (inData, outData, width, height) {\r\n    var c = -1 / 9;\r\n    convolve3x3(inData, outData, width, height, [\r\n      [c, c, c],\r\n      [c, 17 / 9, c],\r\n      [c, c, c],\r\n    ]);\r\n  },\r\n\r\n  // A 5x5 edge enhance\r\n  edgeenhance5x5: function (inData, outData, width, height) {\r\n    var c = -1 / 25;\r\n    convolve5x5(inData, outData, width, height, [\r\n      [c, c, c, c, c],\r\n      [c, c, c, c, c],\r\n      [c, c, 49 / 25, c, c],\r\n      [c, c, c, c, c],\r\n      [c, c, c, c, c],\r\n    ]);\r\n  },\r\n\r\n  // A 3x3 Laplacian edge-detect\r\n  laplace3x3: function (inData, outData, width, height) {\r\n    convolve3x3(\r\n      inData,\r\n      outData,\r\n      width,\r\n      height,\r\n      [\r\n        [-1, -1, -1],\r\n        [-1, 8, -1],\r\n        [-1, -1, -1],\r\n      ],\r\n      false,\r\n      true,\r\n      true\r\n    );\r\n  },\r\n\r\n  // A 5x5 Laplacian edge-detect\r\n  laplace5x5: function (inData, outData, width, height) {\r\n    convolve5x5(\r\n      inData,\r\n      outData,\r\n      width,\r\n      height,\r\n      [\r\n        [-1, -1, -1, -1, -1],\r\n        [-1, -1, -1, -1, -1],\r\n        [-1, -1, 24, -1, -1],\r\n        [-1, -1, -1, -1, -1],\r\n        [-1, -1, -1, -1, -1],\r\n      ],\r\n      false,\r\n      true,\r\n      true\r\n    );\r\n  },\r\n\r\n  rgbAdjust: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, { r: 0, g: 0, b: 0, a: 0 });\r\n    var i,\r\n      n = width * height * 4,\r\n      r,\r\n      g,\r\n      b,\r\n      a,\r\n      ar = clamp(options.r, -1, 1) * 255,\r\n      ag = clamp(options.g, -1, 1) * 255,\r\n      ab = clamp(options.b, -1, 1) * 255,\r\n      aa = clamp(options.a, -1, 1) * 255;\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      r = inData[i] + ar;\r\n      g = inData[i + 1] + ag;\r\n      b = inData[i + 2] + ab;\r\n      a = inData[i + 3] + aa;\r\n      if (r < 0) {\r\n        r = 0;\r\n      }\r\n      if (g < 0) {\r\n        g = 0;\r\n      }\r\n      if (b < 0) {\r\n        b = 0;\r\n      }\r\n      if (a < 0) {\r\n        a = 0;\r\n      }\r\n      if (r > 255) {\r\n        r = 255;\r\n      }\r\n      if (g > 255) {\r\n        g = 255;\r\n      }\r\n      if (b > 255) {\r\n        b = 255;\r\n      }\r\n      if (a > 255) {\r\n        a = 255;\r\n      }\r\n      outData[i] = r;\r\n      outData[i + 1] = g;\r\n      outData[i + 2] = b;\r\n      outData[i + 3] = a;\r\n    }\r\n  },\r\n\r\n  colorfilter: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, {\r\n      luminosity: false,\r\n      r: 1,\r\n      g: 0.5,\r\n      b: 0,\r\n    });\r\n    var i,\r\n      n = width * height * 4,\r\n      r,\r\n      g,\r\n      b,\r\n      luminosity = !!options.luminosity,\r\n      min,\r\n      max,\r\n      h,\r\n      l,\r\n      h1,\r\n      chroma,\r\n      tmp,\r\n      m,\r\n      ar = clamp(options.r, 0, 1),\r\n      ag = clamp(options.g, 0, 1),\r\n      ab = clamp(options.b, 0, 1);\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      r = inData[i] / 255;\r\n      g = inData[i + 1] / 255;\r\n      b = inData[i + 2] / 255;\r\n\r\n      l = r * 0.3 + g * 0.59 + b * 0.11;\r\n\r\n      r = (r + r * ar) / 2;\r\n      g = (g + g * ag) / 2;\r\n      b = (b + b * ab) / 2;\r\n\r\n      if (luminosity) {\r\n        min = max = r;\r\n        if (g > max) {\r\n          max = g;\r\n        }\r\n        if (b > max) {\r\n          max = b;\r\n        }\r\n        if (g < min) {\r\n          min = g;\r\n        }\r\n        if (b < min) {\r\n          min = b;\r\n        }\r\n        chroma = max - min;\r\n\r\n        if (r === max) {\r\n          h = ((g - b) / chroma) % 6;\r\n        } else if (g === max) {\r\n          h = (b - r) / chroma + 2;\r\n        } else {\r\n          h = (r - g) / chroma + 4;\r\n        }\r\n\r\n        h1 = h >> 0;\r\n        tmp = chroma * (h - h1);\r\n        r = g = b = l - (r * 0.3 + g * 0.59 + b * 0.11);\r\n\r\n        if (h1 === 0) {\r\n          r += chroma;\r\n          g += tmp;\r\n        } else if (h1 === 1) {\r\n          r += chroma - tmp;\r\n          g += chroma;\r\n        } else if (h1 === 2) {\r\n          g += chroma;\r\n          b += tmp;\r\n        } else if (h1 === 3) {\r\n          g += chroma - tmp;\r\n          b += chroma;\r\n        } else if (h1 === 4) {\r\n          r += tmp;\r\n          b += chroma;\r\n        } else if (h1 === 5) {\r\n          r += chroma;\r\n          b += chroma - tmp;\r\n        }\r\n      }\r\n\r\n      outData[i] = r * 255;\r\n      outData[i + 1] = g * 255;\r\n      outData[i + 2] = b * 255;\r\n      outData[i + 3] = inData[i + 3];\r\n    }\r\n  },\r\n\r\n  hslAdjust: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, { h: 0.5, s: 0.3, l: 0.1, a: 0 });\r\n    var i,\r\n      n = width * height * 4,\r\n      r,\r\n      g,\r\n      b,\r\n      a,\r\n      hue = clamp(options.h, -1, 1),\r\n      saturation = clamp(options.s, -1, 1),\r\n      lightness = clamp(options.l, -1, 1),\r\n      aa = clamp(options.a, -1, 1) * 255,\r\n      satMul = 1 + saturation * (saturation < 0 ? 1 : 2),\r\n      lightMul = lightness < 0 ? 1 + lightness : 1 - lightness,\r\n      lightAdd = lightness < 0 ? 0 : lightness * 255,\r\n      vs,\r\n      ms,\r\n      vm,\r\n      h,\r\n      s,\r\n      l,\r\n      v,\r\n      m,\r\n      vmh,\r\n      sextant;\r\n\r\n    hue = (hue * 6) % 6;\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      r = inData[i];\r\n      g = inData[i + 1];\r\n      b = inData[i + 2];\r\n      a = inData[i + 3] + aa;\r\n\r\n      if (hue !== 0 || saturation !== 0) {\r\n        // ok, here comes rgb to hsl + adjust + hsl to rgb, all in one jumbled mess.\r\n        // It's not so pretty, but it's been optimized to get somewhat decent performance.\r\n        // The transforms were originally adapted from the ones found in Graphics Gems, but have been heavily modified.\r\n        vs = r;\r\n        if (g > vs) {\r\n          vs = g;\r\n        }\r\n        if (b > vs) {\r\n          vs = b;\r\n        }\r\n        ms = r;\r\n        if (g < ms) {\r\n          ms = g;\r\n        }\r\n        if (b < ms) {\r\n          ms = b;\r\n        }\r\n        vm = vs - ms;\r\n        l = (ms + vs) / 510;\r\n\r\n        if (l > 0 && vm > 0) {\r\n          if (l <= 0.5) {\r\n            s = (vm / (vs + ms)) * satMul;\r\n            if (s > 1) {\r\n              s = 1;\r\n            }\r\n            v = l * (1 + s);\r\n          } else {\r\n            s = (vm / (510 - vs - ms)) * satMul;\r\n            if (s > 1) {\r\n              s = 1;\r\n            }\r\n            v = l + s - l * s;\r\n          }\r\n          if (r === vs) {\r\n            if (g === ms) {\r\n              h = 5 + (vs - b) / vm + hue;\r\n            } else {\r\n              h = 1 - (vs - g) / vm + hue;\r\n            }\r\n          } else if (g === vs) {\r\n            if (b === ms) {\r\n              h = 1 + (vs - r) / vm + hue;\r\n            } else {\r\n              h = 3 - (vs - b) / vm + hue;\r\n            }\r\n          } else {\r\n            if (r === ms) {\r\n              h = 3 + (vs - g) / vm + hue;\r\n            } else {\r\n              h = 5 - (vs - r) / vm + hue;\r\n            }\r\n          }\r\n          if (h < 0) {\r\n            h += 6;\r\n          }\r\n          if (h >= 6) {\r\n            h -= 6;\r\n          }\r\n          m = l + l - v;\r\n          sextant = h >> 0;\r\n          vmh = (v - m) * (h - sextant);\r\n          if (sextant === 0) {\r\n            r = v;\r\n            g = m + vmh;\r\n            b = m;\r\n          } else if (sextant === 1) {\r\n            r = v - vmh;\r\n            g = v;\r\n            b = m;\r\n          } else if (sextant === 2) {\r\n            r = m;\r\n            g = v;\r\n            b = m + vmh;\r\n          } else if (sextant === 3) {\r\n            r = m;\r\n            g = v - vmh;\r\n            b = v;\r\n          } else if (sextant === 4) {\r\n            r = m + vmh;\r\n            g = m;\r\n            b = v;\r\n          } else if (sextant === 5) {\r\n            r = v;\r\n            g = m;\r\n            b = v - vmh;\r\n          }\r\n\r\n          r *= 255;\r\n          g *= 255;\r\n          b *= 255;\r\n        }\r\n      }\r\n\r\n      r = r * lightMul + lightAdd;\r\n      g = g * lightMul + lightAdd;\r\n      b = b * lightMul + lightAdd;\r\n\r\n      if (r < 0) {\r\n        r = 0;\r\n      }\r\n      if (g < 0) {\r\n        g = 0;\r\n      }\r\n      if (b < 0) {\r\n        b = 0;\r\n      }\r\n      if (a < 0) {\r\n        a = 0;\r\n      }\r\n      if (r > 255) {\r\n        r = 255;\r\n      }\r\n      if (g > 255) {\r\n        g = 255;\r\n      }\r\n      if (b > 255) {\r\n        b = 255;\r\n      }\r\n      if (a > 255) {\r\n        a = 255;\r\n      }\r\n\r\n      outData[i] = r;\r\n      outData[i + 1] = g;\r\n      outData[i + 2] = b;\r\n      outData[i + 3] = a;\r\n    }\r\n  },\r\n\r\n  posterize: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, { levels: 5 });\r\n    var i,\r\n      n = width * height * 4,\r\n      r,\r\n      g,\r\n      b,\r\n      numLevels = clamp(options.levels, 2, 256),\r\n      numAreas = 256 / numLevels,\r\n      numValues = 256 / (numLevels - 1);\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      outData[i] = numValues * ((inData[i] / numAreas) >> 0);\r\n      outData[i + 1] = numValues * ((inData[i + 1] / numAreas) >> 0);\r\n      outData[i + 2] = numValues * ((inData[i + 2] / numAreas) >> 0);\r\n      outData[i + 3] = inData[i + 3];\r\n    }\r\n  },\r\n\r\n  removenoise: function (inData, outData, width, height) {\r\n    var x,\r\n      y,\r\n      n = width * height * 4,\r\n      r,\r\n      g,\r\n      b,\r\n      c,\r\n      idx,\r\n      pyc,\r\n      pyp,\r\n      pyn,\r\n      pxc,\r\n      pxp,\r\n      pxn,\r\n      minR,\r\n      minG,\r\n      minB,\r\n      maxR,\r\n      maxG,\r\n      maxB;\r\n\r\n    for (y = 0; y < height; y += 1) {\r\n      pyc = y * width * 4;\r\n      pyp = pyc - width * 4;\r\n      pyn = pyc + width * 4;\r\n\r\n      if (y < 1) {\r\n        pyp = pyc;\r\n      }\r\n      if (y >= width - 1) {\r\n        pyn = pyc;\r\n      }\r\n\r\n      for (x = 0; x < width; x += 1) {\r\n        idx = (y * width + x) * 4;\r\n\r\n        pxc = x * 4;\r\n        pxp = pxc - 4;\r\n        pxn = pxc + 4;\r\n\r\n        if (x < 1) {\r\n          pxp = pxc;\r\n        }\r\n        if (x >= width - 1) {\r\n          pxn = pxc;\r\n        }\r\n\r\n        minR = maxR = inData[pyc + pxp];\r\n        c = inData[pyc + pxn];\r\n        if (c < minR) {\r\n          minR = c;\r\n        }\r\n        if (c > maxR) {\r\n          maxR = c;\r\n        }\r\n        c = inData[pyp + pxc];\r\n        if (c < minR) {\r\n          minR = c;\r\n        }\r\n        if (c > maxR) {\r\n          maxR = c;\r\n        }\r\n        c = inData[pyn + pxc];\r\n        if (c < minR) {\r\n          minR = c;\r\n        }\r\n        if (c > maxR) {\r\n          maxR = c;\r\n        }\r\n\r\n        minG = inData[pyc + pxp + 1];\r\n        c = inData[pyc + pxn + 1];\r\n        if (c < minG) {\r\n          minG = c;\r\n        }\r\n        c = inData[pyp + pxc + 1];\r\n        if (c < minG) {\r\n          minG = c;\r\n        }\r\n        c = inData[pyn + pxc + 1];\r\n        if (c < minG) {\r\n          minG = c;\r\n        }\r\n\r\n        minB = inData[pyc + pxp + 2];\r\n        c = inData[pyc + pxn + 2];\r\n        if (c < minB) {\r\n          minB = c;\r\n        }\r\n        c = inData[pyp + pxc + 2];\r\n        if (c < minB) {\r\n          minB = c;\r\n        }\r\n        c = inData[pyn + pxc + 2];\r\n        if (c < minB) {\r\n          minB = c;\r\n        }\r\n\r\n        r = inData[idx];\r\n        g = inData[idx + 1];\r\n        b = inData[idx + 2];\r\n\r\n        if (r < minR) {\r\n          r = minR;\r\n        }\r\n        if (r > maxR) {\r\n          r = maxR;\r\n        }\r\n        if (g < minG) {\r\n          g = minG;\r\n        }\r\n        if (g > maxG) {\r\n          g = maxG;\r\n        }\r\n        if (b < minB) {\r\n          b = minB;\r\n        }\r\n        if (b > maxB) {\r\n          b = maxB;\r\n        }\r\n\r\n        outData[idx] = r;\r\n        outData[idx + 1] = g;\r\n        outData[idx + 2] = b;\r\n        outData[idx + 3] = inData[idx + 3];\r\n      }\r\n    }\r\n  },\r\n\r\n  mosaic: function (inData, outData, width, height, options) {\r\n    options = defaultOptions(options, { blockSize: 8 });\r\n    var blockSize = clamp(options.blockSize, 1, Math.max(width, height)),\r\n      yBlocks = Math.ceil(height / blockSize),\r\n      xBlocks = Math.ceil(width / blockSize),\r\n      y0,\r\n      y1,\r\n      x0,\r\n      x1,\r\n      idx,\r\n      pidx,\r\n      i,\r\n      j,\r\n      bidx,\r\n      r,\r\n      g,\r\n      b,\r\n      bi,\r\n      bj,\r\n      n = yBlocks * xBlocks,\r\n      prog,\r\n      lastProg = 0;\r\n\r\n    y0 = 0;\r\n    bidx = 0;\r\n    for (i = 0; i < yBlocks; i += 1) {\r\n      y1 = clamp(y0 + blockSize, 0, height);\r\n      x0 = 0;\r\n      for (j = 0; j < xBlocks; j += 1) {\r\n        x1 = clamp(x0 + blockSize, 0, width);\r\n\r\n        idx = (y0 * width + x0) << 2;\r\n        r = inData[idx];\r\n        g = inData[idx + 1];\r\n        b = inData[idx + 2];\r\n\r\n        for (bi = y0; bi < y1; bi += 1) {\r\n          for (bj = x0; bj < x1; bj += 1) {\r\n            pidx = (bi * width + bj) << 2;\r\n            outData[pidx] = r;\r\n            outData[pidx + 1] = g;\r\n            outData[pidx + 2] = b;\r\n            outData[pidx + 3] = inData[pidx + 3];\r\n          }\r\n        }\r\n        x0 = x1;\r\n        bidx += 1;\r\n      }\r\n      y0 = y1;\r\n    }\r\n  },\r\n\r\n  equalize: function (inData, outData, width, height, options) {\r\n    var n = width * height,\r\n      p,\r\n      i,\r\n      level,\r\n      ratio,\r\n      prog,\r\n      lastProg;\r\n    var round = Math.round;\r\n    // build histogram\r\n    var pdf = new Array(256);\r\n    for (i = 0; i < 256; i += 1) {\r\n      pdf[i] = 0;\r\n    }\r\n\r\n    for (i = 0; i < n; i += 1) {\r\n      p = i * 4;\r\n      level = clamp(\r\n        round(inData[p] * 0.3 + inData[p + 1] * 0.59 + inData[p + 2] * 0.11),\r\n        0,\r\n        255\r\n      );\r\n      outData[p + 3] = level;\r\n      pdf[level] += 1;\r\n    }\r\n\r\n    // build cdf\r\n    var cdf = new Array(256);\r\n    cdf[0] = pdf[0];\r\n    for (i = 1; i < 256; i += 1) {\r\n      cdf[i] = cdf[i - 1] + pdf[i];\r\n    }\r\n\r\n    // normalize cdf\r\n    for (i = 0; i < 256; i += 1) {\r\n      cdf[i] = (cdf[i] / n) * 255.0;\r\n    }\r\n\r\n    // map the pixel values\r\n    for (i = 0; i < n; i += 1) {\r\n      p = i * 4;\r\n      level = outData[p + 3];\r\n      ratio = cdf[level] / (level || 1);\r\n      outData[p] = clamp(round(inData[p] * ratio), 0, 255);\r\n      outData[p + 1] = clamp(round(inData[p + 1] * ratio), 0, 255);\r\n      outData[p + 2] = clamp(round(inData[p + 2] * ratio), 0, 255);\r\n      outData[p + 3] = inData[p + 3];\r\n    }\r\n  },\r\n\r\n  mask: function (inData, outData, width, height, options) {\r\n    var i,\r\n      n = width * height * 4,\r\n      data = options.data;\r\n\r\n    // todo: consider the masking image's dimensions and position.\r\n\r\n    for (i = 0; i < n; i += 4) {\r\n      outData[i] = inData[i];\r\n      outData[i + 1] = inData[i + 1];\r\n      outData[i + 2] = inData[i + 2];\r\n      outData[i + 3] = (((inData[i + 3] * data[i]) / 255) * data[i + 3]) / 255;\r\n    }\r\n  },\r\n\r\n  // Distortion filters\r\n\r\n  bump: function (inData, outData, width, height, options) {\r\n    /* options:\r\n     *  - dx: horizontal offset (in pixels) of the effect.\r\n     *  - dy: vertical offset (in pixels) of the effect.\r\n     *  - radius: the radius of the effect in pixels.\r\n     *  - zoom: the amount of bulge (0.0-1.0).\r\n     */\r\n    options = defaultOptions(options, { dx: 0, dy: 0, radius: 0, zoom: 0 });\r\n    var m1 = options.radius;\r\n    var m2 = clamp(options.zoom, 0, 1);\r\n    return polar(\r\n      inData,\r\n      outData,\r\n      options.dx,\r\n      options.dy,\r\n      width,\r\n      height,\r\n      function (d, a) {\r\n        return [d * smoothstep(0, m2, d / m1), a];\r\n      }\r\n    );\r\n  },\r\n\r\n  dent: function (inData, outData, width, height, options) {\r\n    /* options:\r\n     *  - dx: horizontal offset (in pixels) of the effect.\r\n     *  - dy: vertical offset (in pixels) of the effect.\r\n     *  - radius: the radius of the effect in pixels.\r\n     *  - zoom: the amount of pinch (0.0-1.0).\r\n     */\r\n    options = defaultOptions(options, { dx: 0, dy: 0, radius: 0, zoom: 0 });\r\n    var m1 = options.radius;\r\n    var m2 = clamp(options.zoom, 0, 1);\r\n    return polar(\r\n      inData,\r\n      outData,\r\n      options.dx,\r\n      options.dy,\r\n      width,\r\n      height,\r\n      function (d, a) {\r\n        return [2 * d - d * smoothstep(0, m2, d / m1), a];\r\n      }\r\n    );\r\n  },\r\n\r\n  pinch: function (inData, outData, width, height, options) {\r\n    /* options:\r\n     *  - dx: horizontal offset (in pixels) of the effect.\r\n     *  - dy: vertical offset (in pixels) of the effect.\r\n     *  - zoom: the amount of bulge or pinch (-1.0-1.0):\r\n     */\r\n    options = defaultOptions(options, { dx: 0, dy: 0, zoom: 0 });\r\n    var m1 = distance(0, 0, width, height);\r\n    var m2 = clamp(options.zoom * 0.75, -0.75, 0.75);\r\n    return polar(\r\n      inData,\r\n      outData,\r\n      options.dx,\r\n      options.dy,\r\n      width,\r\n      height,\r\n      function (d, a) {\r\n        return [d * Math.pow(m1 / d, m2) * (1 - m2), a];\r\n      }\r\n    );\r\n  },\r\n\r\n  splash: function (inData, outData, width, height, options) {\r\n    /* options:\r\n     *  - dx: horizontal offset (in pixels) of the effect.\r\n     *  - dy: vertical offset (in pixels) of the effect.\r\n     *  - radius: the radius of the unaffected area in pixels.\r\n     */\r\n    options = defaultOptions(options, { dx: 0, dy: 0, radius: 0 });\r\n    var m = options.radius;\r\n    return polar(\r\n      inData,\r\n      outData,\r\n      options.dx,\r\n      options.dy,\r\n      width,\r\n      height,\r\n      function (d, a) {\r\n        return [d > m ? m : d, a];\r\n      }\r\n    );\r\n  },\r\n\r\n  twirl: function (inData, outData, width, height, options) {\r\n    /* options:\r\n     *  - dx: horizontal offset (in pixels) of the effect.\r\n     *  - dy: vertical offset (in pixels) of the effect.\r\n     *  - radius: the radius of the effect in pixels.\r\n     *  - angle: the amount of rotation in degrees.\r\n     */\r\n    options = defaultOptions(options, { dx: 0, dy: 0, radius: 0, angle: 0 });\r\n    var m1 = radians(options.angle);\r\n    var m2 = options.radius;\r\n    return polar(\r\n      inData,\r\n      outData,\r\n      options.dx,\r\n      options.dy,\r\n      width,\r\n      height,\r\n      function (d, a) {\r\n        return [d, a + (1 - smoothstep(-m2, m2, d)) * m1];\r\n      }\r\n    );\r\n  },\r\n};\r\n\r\n// MODULE SUPPORT ///////////////////////////////////////////////////////\r\n\r\nexport default process;\r\n", "\"use strict\";\r\n\r\nimport blend from \"./blend.mjs\";\r\nimport process from \"./process.mjs\";\r\nimport { transform } from \"./util.mjs\";\r\n\r\n// Dictionary of blend modes that the client browser does or does not support.\r\nvar nativeBlendModes = blend.getNativeModes();\r\n\r\nfunction createImageData(ctx, width, height) {\r\n  if (ctx.createImageData) {\r\n    return ctx.createImageData(width, height);\r\n  } else {\r\n    return ctx.getImageData(0, 0, width, height);\r\n  }\r\n}\r\n\r\n// RENDERING.\r\n\r\n// The Layer and ImageCanvas objects don't do any actual pixel operations themselves,\r\n// they only contain information about the operations. The actual rendering is done\r\n// by a Renderer object. Currently there is only one kind available, the CanvasRenderer,\r\n// which uses the HTML Canvas object (containing the pixel data) and a 2D context that\r\n// acts on this canvas object. In the future, a webgl renderer might be added as well.\r\n\r\nconst CanvasRenderer = {};\r\n\r\n// Renders a html canvas as an html Image. Currently unused.\r\nCanvasRenderer.toImage = function (canvas) {\r\n  var img = new Image();\r\n  img.width = canvas.width;\r\n  img.height = canvas.height;\r\n  img.src = canvas.toDataURL();\r\n  return img;\r\n};\r\n\r\n// 'LOADING' OF LAYERS.\r\n\r\n// Returns a html canvas dependent on the type of the layer provided.\r\nCanvasRenderer.load = function (iCanvas, layer) {\r\n  if (layer.isFill()) {\r\n    return CanvasRenderer.generateColor(iCanvas, layer);\r\n  } else if (layer.isGradient()) {\r\n    return CanvasRenderer.generateGradient(iCanvas, layer);\r\n  } else if (layer.isHtmlCanvas()) {\r\n    return CanvasRenderer.loadHtmlCanvas(layer.data);\r\n  } else if (layer.isImage()) {\r\n    return CanvasRenderer.loadImage(layer.data);\r\n  } else if (layer.isImageCanvas()) {\r\n    return CanvasRenderer.loadImageCanvas(layer.data);\r\n  }\r\n};\r\n\r\n// Passes a html canvas.\r\nCanvasRenderer.loadHtmlCanvas = function (canvas) {\r\n  return canvas;\r\n};\r\n\r\n// Returns a html canvas from rendering an ImageCanvas.\r\nCanvasRenderer.loadImageCanvas = function (iCanvas) {\r\n  return iCanvas.render();\r\n};\r\n\r\n// Returns a html canvas from rendering a stored Image file.\r\nCanvasRenderer.loadImage = function (img) {\r\n  var canvas = document.createElement(\"canvas\");\r\n  var ctx = canvas.getContext(\"2d\");\r\n  canvas.width = img.width;\r\n  canvas.height = img.height;\r\n  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n  return canvas;\r\n};\r\n\r\n// Returns a html canvas with a solid fill color.\r\nCanvasRenderer.generateColor = function (iCanvas, layer) {\r\n  var width = layer.width !== undefined ? layer.width : iCanvas.width;\r\n  var height = layer.height !== undefined ? layer.height : iCanvas.height;\r\n  var canvas = document.createElement(\"canvas\");\r\n  var ctx = canvas.getContext(\"2d\");\r\n\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  ctx.fillStyle = layer.data;\r\n  ctx.fillRect(0, 0, width, height);\r\n  return canvas;\r\n};\r\n\r\n// Returns a html canvas with a gradient.\r\nCanvasRenderer.generateGradient = function (iCanvas, layer) {\r\n  var grd, x1, y1, x2, y2;\r\n  var width = layer.width !== undefined ? layer.width : iCanvas.width;\r\n  var height = layer.height !== undefined ? layer.height : iCanvas.height;\r\n  var cx = width / 2;\r\n  var cy = height / 2;\r\n  var canvas = document.createElement(\"canvas\");\r\n  var ctx = canvas.getContext(\"2d\");\r\n  var data = layer.data;\r\n  var type = data.type || \"linear\";\r\n  var rotateDegrees = data.rotation || 0;\r\n\r\n  if (type === \"radial\") {\r\n    grd = ctx.createRadialGradient(\r\n      cx,\r\n      cy,\r\n      0,\r\n      cx,\r\n      cy,\r\n      Math.min(width, height) / 2\r\n    );\r\n  } else {\r\n    // Rotation code taken from html5-canvas-gradient-creator:\r\n    // Website: http://victorblog.com/html5-canvas-gradient-creator/\r\n    // Code: https://github.com/evictor/html5-canvas-gradient-creator/blob/master/js/src/directive/previewCanvas.coffee\r\n    if (rotateDegrees < 0) {\r\n      rotateDegrees += 360;\r\n    }\r\n    if (0 <= rotateDegrees && rotateDegrees < 45) {\r\n      x1 = 0;\r\n      y1 = ((height / 2) * (45 - rotateDegrees)) / 45;\r\n      x2 = width;\r\n      y2 = height - y1;\r\n    } else if (45 <= rotateDegrees && rotateDegrees < 135) {\r\n      x1 = (width * (rotateDegrees - 45)) / (135 - 45);\r\n      y1 = 0;\r\n      x2 = width - x1;\r\n      y2 = height;\r\n    } else if (135 <= rotateDegrees && rotateDegrees < 225) {\r\n      x1 = width;\r\n      y1 = (height * (rotateDegrees - 135)) / (225 - 135);\r\n      x2 = 0;\r\n      y2 = height - y1;\r\n    } else if (225 <= rotateDegrees && rotateDegrees < 315) {\r\n      x1 = width * (1 - (rotateDegrees - 225) / (315 - 225));\r\n      y1 = height;\r\n      x2 = width - x1;\r\n      y2 = 0;\r\n    } else if (315 <= rotateDegrees) {\r\n      x1 = 0;\r\n      y1 = height - ((height / 2) * (rotateDegrees - 315)) / (360 - 315);\r\n      x2 = width;\r\n      y2 = height - y1;\r\n    }\r\n    grd = ctx.createLinearGradient(x1, y1, x2, y2);\r\n  }\r\n  grd.addColorStop(data.spread || 0, data.startColor);\r\n  grd.addColorStop(1, data.endColor);\r\n\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  ctx.fillStyle = grd;\r\n  ctx.fillRect(0, 0, width, height);\r\n  return canvas;\r\n};\r\n\r\n// PROCESSING OF LAYERS.\r\n\r\n// Performs a number of filtering operations on an html image.\r\nCanvasRenderer.processImage = function (canvas, filters) {\r\n  if (filters.length === 0) {\r\n    return canvas;\r\n  }\r\n  var filter, tmpData;\r\n  var ctx = canvas.getContext(\"2d\");\r\n  var width = canvas.width;\r\n  var height = canvas.height;\r\n  var inData = ctx.getImageData(0, 0, width, height);\r\n  var outData = createImageData(ctx, width, height);\r\n\r\n  for (var i = 0; i < filters.length; i += 1) {\r\n    if (i > 0) {\r\n      tmpData = inData;\r\n      inData = outData;\r\n      outData = tmpData;\r\n    }\r\n    filter = filters[i];\r\n    process[filter.name](\r\n      inData.data,\r\n      outData.data,\r\n      width,\r\n      height,\r\n      filter.options\r\n    );\r\n  }\r\n\r\n  ctx.putImageData(outData, 0, 0);\r\n  return canvas;\r\n};\r\n\r\n// Renders the layer mask and applies it to the layer that it is supposed to mask.\r\nCanvasRenderer.processMask = function (canvas, mask) {\r\n  if (mask.layers.length === 0) {\r\n    return canvas;\r\n  }\r\n  mask.width = canvas.width;\r\n  mask.height = canvas.height;\r\n  // First, make a black and white version of the masking canvas and pass\r\n  // the result to the masking operation.\r\n  var c = CanvasRenderer.renderBW(mask);\r\n  var data = c.getContext(\"2d\").getImageData(0, 0, c.width, c.height).data;\r\n  var maskFilter = {\r\n    name: \"mask\",\r\n    options: { data: data, x: 0, y: 0, width: c.width, height: c.height },\r\n  };\r\n  return CanvasRenderer.processImage(canvas, [maskFilter]);\r\n};\r\n\r\n// Processes a single layer. First the layer image is loaded, then a mask (if applicable) is applied to it,\r\n// and finally the filters (if any) are applied to it.\r\nCanvasRenderer.processLayer = function (iCanvas, layer) {\r\n  var layerImage = CanvasRenderer.load(iCanvas, layer);\r\n  var maskedImage = CanvasRenderer.processMask(layerImage, layer.mask);\r\n  return CanvasRenderer.processImage(maskedImage, layer.filters);\r\n};\r\n\r\n// LAYER TRANFORMATIONS.\r\n\r\n// Transforms the 2d context that acts upon this layer's image. Utility function. -> Rename this?\r\nfunction transformLayer(ctx, iCanvas, layer) {\r\n  var m = layer.transform.matrix();\r\n\r\n  ctx.translate(iCanvas.width / 2, iCanvas.height / 2);\r\n  ctx.transform(m[0], m[1], m[3], m[4], m[6], m[7]);\r\n  if (layer.flip_h || layer.flip_v) {\r\n    ctx.scale(layer.flip_h ? -1 : 1, layer.flip_v ? -1 : 1);\r\n  }\r\n  ctx.translate(-layer.img.width / 2, -layer.img.height / 2);\r\n}\r\n\r\n// Transforms the bounds of a layer (the bounding rectangle) and returns the bounding rectangle\r\n// that encloses this transformed rectangle.\r\nfunction transformRect(iCanvas, layer) {\r\n  var pt, minx, miny, maxx, maxy;\r\n  var width = layer.img.width;\r\n  var height = layer.img.height;\r\n  var p1 = { x: 0, y: 0 };\r\n  var p2 = { x: width, y: 0 };\r\n  var p3 = { x: 0, y: height };\r\n  var p4 = { x: width, y: height };\r\n  var points = [p1, p2, p3, p4];\r\n\r\n  var t = transform();\r\n  t = t.translate(iCanvas.width / 2, iCanvas.height / 2);\r\n  t = t.append(layer.transform);\r\n  t = t.translate(-layer.img.width / 2, -layer.img.height / 2);\r\n\r\n  for (var i = 0; i < 4; i += 1) {\r\n    pt = t.transformPoint(points[i]);\r\n    if (i === 0) {\r\n      minx = maxx = pt.x;\r\n      miny = maxy = pt.y;\r\n    } else {\r\n      if (pt.x < minx) {\r\n        minx = pt.x;\r\n      }\r\n      if (pt.x > maxx) {\r\n        maxx = pt.x;\r\n      }\r\n      if (pt.y < miny) {\r\n        miny = pt.y;\r\n      }\r\n      if (pt.y > maxy) {\r\n        maxy = pt.y;\r\n      }\r\n    }\r\n  }\r\n  return { x: minx, y: miny, width: maxx - minx, height: maxy - miny };\r\n}\r\n\r\n// Calculates the intersecting rectangle of two input rectangles.\r\nfunction rectIntersect(r1, r2) {\r\n  var right1 = r1.x + r1.width;\r\n  var bottom1 = r1.y + r1.height;\r\n  var right2 = r2.x + r2.width;\r\n  var bottom2 = r2.y + r2.height;\r\n\r\n  var x = Math.max(r1.x, r2.x);\r\n  var y = Math.max(r1.y, r2.y);\r\n  var w = Math.max(Math.min(right1, right2) - x, 0);\r\n  var h = Math.max(Math.min(bottom1, bottom2) - y, 0);\r\n  return { x: x, y: y, width: w, height: h };\r\n}\r\n\r\n// Calculates the mimimal area that a transformed layer needs so that it\r\n// can still be drawn on the canvas. Returns a rectangle.\r\nfunction calcLayerRect(iCanvas, layer) {\r\n  var rect = transformRect(iCanvas, layer);\r\n  rect = rectIntersect(rect, {\r\n    x: 0,\r\n    y: 0,\r\n    width: iCanvas.width,\r\n    height: iCanvas.height,\r\n  });\r\n  return {\r\n    x: Math.round(rect.x),\r\n    y: Math.round(rect.y),\r\n    width: Math.ceil(rect.width),\r\n    height: Math.ceil(rect.height),\r\n  };\r\n}\r\n\r\n// Transforms a layer and returns the resulting pixel data.\r\nfunction getTransformedLayerData(iCanvas, layer, rect) {\r\n  var canvas = document.createElement(\"canvas\");\r\n  var ctx = canvas.getContext(\"2d\");\r\n  canvas.width = rect.width;\r\n  canvas.height = rect.height;\r\n  ctx.translate(-rect.x, -rect.y);\r\n  transformLayer(ctx, iCanvas, layer);\r\n  ctx.drawImage(layer.img, 0, 0);\r\n  return ctx.getImageData(0, 0, rect.width, rect.height);\r\n}\r\n\r\n// LAYER BLENDING.\r\n\r\n// Blends the subsequent layer images with the base layer and returns a single image.\r\n// This method is used when web workers aren't available for use on this system.\r\nCanvasRenderer.mergeManualBlend = function (iCanvas, layerData) {\r\n  return function (canvas) {\r\n    var layer, blendMode, blendData, tmpData, layerOptions, rect;\r\n    var ctx = canvas.getContext(\"2d\");\r\n    var width = iCanvas.width;\r\n    var height = iCanvas.height;\r\n    var baseData = ctx.getImageData(0, 0, width, height);\r\n    var outData = createImageData(ctx, width, height);\r\n    for (var i = 0; i < layerData.length; i += 1) {\r\n      layer = layerData[i];\r\n      rect = calcLayerRect(iCanvas, layer);\r\n      if (rect.width > 0 && rect.height > 0) {\r\n        if (i > 0) {\r\n          tmpData = baseData;\r\n          baseData = outData;\r\n          outData = tmpData;\r\n        }\r\n        blendData = getTransformedLayerData(iCanvas, layer, rect);\r\n        layerOptions = {\r\n          data: blendData.data,\r\n          width: rect.width,\r\n          height: rect.height,\r\n          opacity: layer.opacity,\r\n          dx: rect.x,\r\n          dy: rect.y,\r\n        };\r\n        if (blend[layer.blendmode] === undefined) {\r\n          throw new Error(\"No blend mode named '\" + layer.blendmode + \"'\");\r\n        }\r\n        blendMode = blend.realBlendMode(layer.blendmode);\r\n        blend[blendMode](\r\n          baseData.data,\r\n          outData.data,\r\n          width,\r\n          height,\r\n          layerOptions\r\n        );\r\n      }\r\n    }\r\n    ctx.putImageData(outData, 0, 0);\r\n    return canvas;\r\n  };\r\n};\r\n\r\n// Renders a single layer. This is useful when there's only one layer available (and no blending is needed)\r\n// or to render the base layer on which subsequent layers are blended.\r\nCanvasRenderer.singleLayerWithOpacity = function (iCanvas, layer) {\r\n  var canvas = document.createElement(\"canvas\");\r\n  var ctx = canvas.getContext(\"2d\");\r\n\r\n  canvas.width = iCanvas.width;\r\n  canvas.height = iCanvas.height;\r\n\r\n  ctx.save();\r\n  transformLayer(ctx, iCanvas, layer);\r\n  if (layer.opacity !== 1) {\r\n    ctx.globalAlpha = layer.opacity;\r\n  }\r\n  ctx.drawImage(layer.img, 0, 0);\r\n  ctx.restore();\r\n  return canvas;\r\n};\r\n\r\n// Blends the subsequent layer images with the base layer and returns the resulting image.\r\n// This method is used when the system supports the requested blending mode(s).\r\nCanvasRenderer.mergeNativeBlend = function (iCanvas, layerData) {\r\n  return function (canvas) {\r\n    var ctx = canvas.getContext(\"2d\");\r\n    var layer;\r\n    for (var i = 0; i < layerData.length; i += 1) {\r\n      layer = layerData[i];\r\n      ctx.save();\r\n      transformLayer(ctx, iCanvas, layer);\r\n      if (layer.opacity !== 1) {\r\n        ctx.globalAlpha = layer.opacity;\r\n      }\r\n      if (layer.blendmode !== \"source-over\") {\r\n        ctx.globalCompositeOperation = blend.realBlendMode(layer.blendmode);\r\n      }\r\n      ctx.drawImage(layer.img, 0, 0);\r\n      ctx.restore();\r\n    }\r\n    return canvas;\r\n  };\r\n};\r\n\r\nCanvasRenderer.createRenderPipe = function (Renderer, iCanvas, layerData) {\r\n  var mode, useNative, currentList, layer;\r\n  var renderPipe = [];\r\n\r\n  function pushList() {\r\n    if (useNative !== undefined) {\r\n      var fn = useNative\r\n        ? Renderer.mergeNativeBlend\r\n        : Renderer.mergeManualBlend;\r\n      renderPipe.push(fn(iCanvas, currentList));\r\n    }\r\n  }\r\n\r\n  for (var i = 1; i < layerData.length; i += 1) {\r\n    layer = layerData[i];\r\n    mode = layer.blendmode;\r\n    // todo: handle blendmode aliases.\r\n    if (useNative === undefined || useNative !== nativeBlendModes[mode]) {\r\n      pushList();\r\n      currentList = [];\r\n    }\r\n    currentList.push(layer);\r\n    useNative = nativeBlendModes[mode];\r\n    if (i === layerData.length - 1) {\r\n      pushList();\r\n    }\r\n  }\r\n  return renderPipe;\r\n};\r\n\r\n// Merges the different canvas layers together in a single image and returns this as a html canvas.\r\nCanvasRenderer.merge = function (iCanvas, layerData) {\r\n  var renderPipe = CanvasRenderer.createRenderPipe(\r\n    CanvasRenderer,\r\n    iCanvas,\r\n    layerData\r\n  );\r\n  var canvas = CanvasRenderer.singleLayerWithOpacity(iCanvas, layerData[0]);\r\n  for (var i = 0; i < renderPipe.length; i += 1) {\r\n    canvas = renderPipe[i](canvas);\r\n  }\r\n  return canvas;\r\n};\r\n\r\nCanvasRenderer.composite = function (iCanvas, layerData) {\r\n  if (!layerData || layerData.length === 0) {\r\n    return null;\r\n  }\r\n  if (layerData.length === 1) {\r\n    return CanvasRenderer.singleLayerWithOpacity(iCanvas, layerData[0]);\r\n  }\r\n\r\n  return CanvasRenderer.merge(iCanvas, layerData);\r\n};\r\n\r\n// Returns an object with additional layer information as well as the input images\r\n// to be passed to the different processing functions.\r\nCanvasRenderer.getLayerData = function (iCanvas, layerImages) {\r\n  var d, layer, layerImg;\r\n  var layerData = [];\r\n  for (var i = 0; i < layerImages.length; i += 1) {\r\n    layer = iCanvas.layers[i];\r\n    layerImg = layerImages[i];\r\n    d = {\r\n      img: layerImg,\r\n      opacity: layer.opacity,\r\n      blendmode: layer.blendmode,\r\n      transform: layer.transform,\r\n      flip_h: layer.flip_h,\r\n      flip_v: layer.flip_v,\r\n    };\r\n    layerData.push(d);\r\n  }\r\n  return layerData;\r\n};\r\n\r\n// Renders the image canvas. Top level.\r\nCanvasRenderer.render = function (iCanvas) {\r\n  var layerImages = [];\r\n  for (var i = 0; i < iCanvas.layers.length; i += 1) {\r\n    layerImages.push(CanvasRenderer.processLayer(iCanvas, iCanvas.layers[i]));\r\n  }\r\n  return CanvasRenderer.composite(\r\n    iCanvas,\r\n    CanvasRenderer.getLayerData(iCanvas, layerImages)\r\n  );\r\n};\r\n\r\n// Renders the image canvas and turns it into a black and white image. Useful for rendering a layer mask.\r\nCanvasRenderer.renderBW = function (iCanvas) {\r\n  var canvas = CanvasRenderer.render(iCanvas);\r\n  var data = canvas\r\n    .getContext(\"2d\")\r\n    .getImageData(0, 0, canvas.width, canvas.height).data;\r\n  var bwFilter = { name: \"desaturate\", options: { method: \"ITU-R BT.709\" } };\r\n  return CanvasRenderer.processImage(canvas, [bwFilter]);\r\n};\r\n\r\nexport default CanvasRenderer;\r\n", "\"use strict\";\r\n\r\nimport * as async from \"async-es\";\r\nimport CanvasRenderer from \"./canvasrenderer.mjs\";\r\n\r\n// Utility function that passes its input (normally a html canvas) to the next function.\r\nfunction passThrough(canvas, callback) {\r\n  callback(null, canvas);\r\n}\r\n\r\n// RENDERING.\r\n\r\n// The Layer and ImageCanvas objects don't do any actual pixel operations themselves,\r\n// they only contain information about the operations. The actual rendering is done\r\n// by a Renderer object. Currently there is only one kind available, the CanvasRenderer,\r\n// which uses the HTML Canvas object (containing the pixel data) and a 2D context that\r\n// acts on this canvas object. In the future, a webgl renderer might be added as well.\r\n\r\nconst AsyncRenderer = {};\r\n\r\n// Renders a html canvas as an html Image. Currently unused.\r\nAsyncRenderer.toImage = function () {\r\n  return function (canvas, callback) {\r\n    callback(null, CanvasRenderer.toImage(canvas));\r\n  };\r\n};\r\n\r\n// 'LOADING' OF LAYERS.\r\n\r\n// Returns a html canvas dependent on the type of the layer provided.\r\nAsyncRenderer.load = function (iCanvas, layer) {\r\n  if (layer.isPath()) {\r\n    return AsyncRenderer.loadFile(layer.data);\r\n  } else if (layer.isFill()) {\r\n    return AsyncRenderer.generateColor(iCanvas, layer);\r\n  } else if (layer.isGradient()) {\r\n    return AsyncRenderer.generateGradient(iCanvas, layer);\r\n  } else if (layer.isHtmlCanvas()) {\r\n    return AsyncRenderer.loadHtmlCanvas(layer.data);\r\n  } else if (layer.isImage()) {\r\n    return AsyncRenderer.loadImage(layer.data);\r\n  } else if (layer.isImageCanvas()) {\r\n    return AsyncRenderer.loadImageCanvas(layer.data);\r\n  }\r\n};\r\n\r\n// Returns a html canvas from an image file location.\r\nAsyncRenderer.loadFile = function (src) {\r\n  return function (_, callback) {\r\n    var canvas = document.createElement(\"canvas\");\r\n    var ctx = canvas.getContext(\"2d\");\r\n\r\n    var source = new Image();\r\n    source.onload = function () {\r\n      canvas.width = source.width;\r\n      canvas.height = source.height;\r\n      ctx.drawImage(source, 0, 0, canvas.width, canvas.height);\r\n      callback(null, canvas);\r\n    };\r\n    source.src = src;\r\n  };\r\n};\r\n\r\n// Passes a html canvas.\r\nAsyncRenderer.loadHtmlCanvas = function (canvas) {\r\n  return function (_, callback) {\r\n    callback(null, canvas);\r\n  };\r\n};\r\n\r\n// Returns a html canvas from rendering an ImageCanvas.\r\nAsyncRenderer.loadImageCanvas = function (iCanvas) {\r\n  return function (_, callback) {\r\n    iCanvas.render(function (canvas) {\r\n      callback(null, canvas);\r\n    });\r\n  };\r\n};\r\n\r\n// Returns a html canvas from rendering a stored Image file.\r\nAsyncRenderer.loadImage = function (img) {\r\n  return function (_, callback) {\r\n    var canvas = CanvasRenderer.loadImage(img);\r\n    callback(null, canvas);\r\n  };\r\n};\r\n\r\n// Returns a html canvas with a solid fill color.\r\nAsyncRenderer.generateColor = function (iCanvas, layer) {\r\n  return function (_, callback) {\r\n    var canvas = CanvasRenderer.generateColor(iCanvas, layer);\r\n    callback(null, canvas);\r\n  };\r\n};\r\n\r\n// Returns a html canvas with a gradient.\r\nAsyncRenderer.generateGradient = function (iCanvas, layer) {\r\n  return function (_, callback) {\r\n    var canvas = CanvasRenderer.generateGradient(iCanvas, layer);\r\n    callback(null, canvas);\r\n  };\r\n};\r\n\r\n// PROCESSING OF LAYERS.\r\n\r\n// Performs a number of filtering operations on an html image.\r\n// This method executes on the main thread if web workers aren't available on the current system.\r\nAsyncRenderer.processImage = function (filters) {\r\n  if (filters.length === 0) {\r\n    return passThrough;\r\n  }\r\n\r\n  return function (canvas, callback) {\r\n    CanvasRenderer.processImage(canvas, filters);\r\n    callback(null, canvas);\r\n  };\r\n};\r\n\r\n// Renders the layer mask and applies it to the layer that it is supposed to mask.\r\nAsyncRenderer.processMask = function (mask) {\r\n  if (mask.layers.length === 0) {\r\n    return passThrough;\r\n  }\r\n  return function (canvas, callback) {\r\n    mask.width = canvas.width;\r\n    mask.height = canvas.height;\r\n\r\n    // First, make a black and white version of the masking canvas and pass\r\n    // the result to the masking operation.\r\n    AsyncRenderer.renderBW(mask, function (c) {\r\n      var data = c.getContext(\"2d\").getImageData(0, 0, c.width, c.height).data;\r\n      var maskFilter = {\r\n        name: \"mask\",\r\n        options: { data: data, x: 0, y: 0, width: c.width, height: c.height },\r\n      };\r\n      var fn = AsyncRenderer.processImage([maskFilter]);\r\n      fn(canvas, callback);\r\n    });\r\n  };\r\n};\r\n\r\n// Processes a single layer. First the layer image is loaded, then a mask (if applicable) is applied to it,\r\n// and finally the filters (if any) are applied to it.\r\nfunction processLayers(iCanvas) {\r\n  return function (layer, callback) {\r\n    async.compose(\r\n      AsyncRenderer.processImage(layer.filters),\r\n      AsyncRenderer.processMask(layer.mask),\r\n      AsyncRenderer.load(iCanvas, layer)\r\n    )(null, callback);\r\n  };\r\n}\r\n\r\n// LAYER BLENDING.\r\n\r\n// Blends the subsequent layer images with the base layer and returns a single image.\r\n// This method is used when web workers aren't available for use on this system.\r\nAsyncRenderer.mergeManualBlend = function (iCanvas, layerData) {\r\n  return function (canvas, callback) {\r\n    CanvasRenderer.mergeManualBlend(iCanvas, layerData)(canvas);\r\n    callback(null, canvas);\r\n  };\r\n};\r\n\r\n// Blends the subsequent layer images with the base layer and returns the resulting image.\r\n// This method is used when the system supports the requested blending mode(s).\r\nAsyncRenderer.mergeNativeBlend = function (iCanvas, layerData) {\r\n  return function (canvas, callback) {\r\n    CanvasRenderer.mergeNativeBlend(iCanvas, layerData)(canvas);\r\n    callback(null, canvas);\r\n  };\r\n};\r\n\r\n// Merges the different canvas layers together in a single image and returns this as a html canvas.\r\nAsyncRenderer.merge = function (iCanvas, layerData, callback) {\r\n  var renderPipe = CanvasRenderer.createRenderPipe(\r\n    AsyncRenderer,\r\n    iCanvas,\r\n    layerData\r\n  );\r\n  renderPipe.reverse();\r\n\r\n  var canvas = CanvasRenderer.singleLayerWithOpacity(iCanvas, layerData[0]);\r\n  renderPipe.push(function (_, cb) {\r\n    cb(null, canvas);\r\n  });\r\n\r\n  async.compose.apply(null, renderPipe)(null, function () {\r\n    callback(canvas);\r\n  });\r\n};\r\n\r\nAsyncRenderer.composite = function (iCanvas, layerData, callback) {\r\n  if (!layerData || layerData.length === 0) {\r\n    callback(null);\r\n    return;\r\n  }\r\n  if (layerData.length === 1) {\r\n    callback(CanvasRenderer.singleLayerWithOpacity(iCanvas, layerData[0]));\r\n    return;\r\n  }\r\n\r\n  AsyncRenderer.merge(iCanvas, layerData, callback);\r\n};\r\n\r\n// Renders the image canvas. Top level.\r\nAsyncRenderer.render = function (iCanvas, callback) {\r\n  async.map(\r\n    iCanvas.layers,\r\n    processLayers(iCanvas),\r\n    function (err, layerImages) {\r\n      if (callback) {\r\n        AsyncRenderer.composite(\r\n          iCanvas,\r\n          CanvasRenderer.getLayerData(iCanvas, layerImages),\r\n          callback\r\n        );\r\n      }\r\n    }\r\n  );\r\n};\r\n\r\n// Renders the image canvas and turns it into a black and white image. Useful for rendering a layer mask.\r\nAsyncRenderer.renderBW = function (iCanvas, callback) {\r\n  AsyncRenderer.render(iCanvas, function (canvas) {\r\n    var data = canvas\r\n      .getContext(\"2d\")\r\n      .getImageData(0, 0, canvas.width, canvas.height).data;\r\n    var bwFilter = { name: \"desaturate\", options: { method: \"ITU-R BT.709\" } };\r\n    var fn = AsyncRenderer.processImage([bwFilter]);\r\n    fn(canvas, function (err, c) {\r\n      callback(c);\r\n    });\r\n  });\r\n};\r\n\r\nexport default AsyncRenderer;\r\n", "\"use strict\";\r\n\r\nimport * as async from \"async-es\";\r\n\r\nimport { clamp, transform } from \"./util.mjs\";\r\nimport CanvasRenderer from \"./canvasrenderer.mjs\";\r\nimport AsyncRenderer from \"./asyncrenderer.mjs\";\r\n\r\nvar DEFAULT_WIDTH = 800;\r\nvar DEFAULT_HEIGHT = 800;\r\n\r\n// Different layer types.\r\nvar TYPE_PATH = \"path\";\r\nvar TYPE_IMAGE = \"image\";\r\nvar TYPE_HTML_CANVAS = \"htmlCanvas\";\r\nvar TYPE_IMAGE_CANVAS = \"iCanvas\";\r\nvar TYPE_FILL = \"fill\";\r\nvar TYPE_GRADIENT = \"gradient\";\r\n\r\nvar IDENTITY_TRANSFORM = transform();\r\nvar Transform = IDENTITY_TRANSFORM;\r\n\r\n// Named colors supported by all browsers.\r\n// See: http://www.w3schools.com/html/html_colornames.asp\r\n// prettier-ignore\r\nvar colors = [\r\n  \"aliceblue\", \"antiquewhite\", \"aqua\", \"aquamarine\", \"azure\", \"beige\", \"bisque\", \"black\", \"blanchedalmond\",\r\n  \"blue\", \"blueviolet\", \"brown\", \"burlywood\", \"cadetblue\", \"chartreuse\", \"chocolate\", \"coral\", \"cornflowerblue\", \r\n  \"cornsilk\", \"crimson\", \"cyan\", \"darkblue\", \"darkcyan\", \"darkgoldenrod\", \"darkgray\", \"darkgreen\", \"darkkhaki\", \r\n  \"darkmagenta\", \"darkolivegreen\", \"darkorange\", \"darkorchid\", \"darkred\", \"darksalmon\", \"darkseagreen\", \r\n  \"darkslateblue\", \"darkslategray\", \"darkturquoise\", \"darkviolet\", \"deeppink\", \"deepskyblue\", \"dimgray\", \r\n  \"dimgrey\", \"dodgerblue\", \"firebrick\", \"floralwhite\", \"forestgreen\", \"fuchsia\", \"gainsboro\", \"ghostwhite\", \r\n  \"gold\", \"goldenrod\", \"gray\", \"green\", \"greenyellow\", \"grey\", \"honeydew\", \"hotpink\", \"indianred\", \"indigo\", \r\n  \"ivory\", \"khaki\", \"lavender\", \"lavenderblush\", \"lawngreen\", \"lemonchiffon\", \"lightblue\", \"lightcoral\", \r\n  \"lightcyan\", \"lightgoldenrodyellow\", \"lightgreen\", \"lightgrey\", \"lightpink\", \"lightsalmon\", \"lightseagreen\", \r\n  \"lightskyblue\", \"lightslategray\", \"lightsteelblue\", \"lightyellow\", \"lime\", \"limegreen\", \"linen\", \"maroon\", \r\n  \"mediumaquamarine\", \"mediumblue\", \"mediumorchid\", \"mediumpurple\", \"mediumseagreen\", \"mediumslateblue\", \r\n  \"mediumspringgreen\", \"mediumturquoise\", \"mediumvioletred\", \"midnightblue\", \"mintcream\", \"mistyrose\", \"moccasin\", \r\n  \"navajowhite\", \"navy\", \"oldlace\", \"olive\", \"olivedrab\", \"orange\", \"orangered\", \"orchid\", \"palegoldenrod\", \r\n  \"palegreen\", \"paleturquoise\", \"palevioletred\", \"papayawhip\", \"peachpuff\", \"peru\", \"pink\", \"plum\", \"powderblue\", \r\n  \"purple\", \"red\", \"rosybrown\", \"royalblue\", \"saddlebrown\", \"salmon\", \"sandybrown\", \"seagreen\", \"seashell\", \"sienna\", \r\n  \"silver\", \"skyblue\", \"slateblue\", \"slategray\", \"snow\", \"springgreen\", \"steelblue\", \"tan\", \"teal\", \"thistle\", \"tomato\", \r\n  \"transparent\", \"turquoise\", \"violet\", \"wheat\", \"white\", \"whitesmoke\", \"yellow\", \"yellowgreen\"\r\n];\r\n\r\n// Converts a number of arguments to a type of color argument that the html canvas context can understand:\r\n// a named color, a hex color or a string in the form of rgba(r, g, b, a)\r\nfunction toColor(v1, v2, v3, v4, v5) {\r\n  var _r, _g, _b, _a, R, G, B, rgb, options;\r\n  if (v1 === undefined) {\r\n    _r = _g = _b = 0;\r\n    _a = 1;\r\n  } else if (Array.isArray(v1)) {\r\n    options = v2 || {};\r\n    _r = v1[0] !== undefined ? v1[0] : 0;\r\n    _g = v1[1] !== undefined ? v1[1] : 0;\r\n    _b = v1[2] !== undefined ? v1[2] : 0;\r\n    _a = v1[3] !== undefined ? v1[3] : options.base || 1;\r\n  } else if (v1.r !== undefined) {\r\n    options = v2 || {};\r\n    _r = v1.r;\r\n    _g = v1.g;\r\n    _b = v1.b;\r\n    _a = v1.a !== undefined ? v1.a : options.base || 1;\r\n  } else if (typeof v1 === \"string\") {\r\n    if (v1.indexOf(\"#\") === 0) {\r\n      return v1;\r\n    }\r\n    if (v1.indexOf(\"rgb\") === 0) {\r\n      return v1;\r\n    }\r\n    if (colors.indexOf(v1) !== -1) {\r\n      return v1;\r\n    }\r\n  } else if (typeof v1 === \"number\") {\r\n    if (arguments.length === 1) {\r\n      // Grayscale value\r\n      _r = _g = _b = v1;\r\n      _a = 1;\r\n    } else if (arguments.length === 2) {\r\n      // Gray and alpha or options\r\n      _r = _g = _b = v1;\r\n      if (typeof v2 === \"number\") {\r\n        _a = v2;\r\n      } else {\r\n        options = v2;\r\n        _a = options.base || 1;\r\n      }\r\n    } else if (arguments.length === 3) {\r\n      // RGB or gray, alpha and options\r\n      if (typeof v3 === \"number\") {\r\n        _r = v1;\r\n        _g = v2;\r\n        _b = v3;\r\n        _a = 1;\r\n      } else {\r\n        _r = _g = _b = v1;\r\n        _a = v2;\r\n        options = v3;\r\n      }\r\n    } else if (arguments.length === 4) {\r\n      // RGB and alpha or options\r\n      _r = v1;\r\n      _g = v2;\r\n      _b = v3;\r\n      if (typeof v4 === \"number\") {\r\n        _a = v4;\r\n      } else {\r\n        options = v4 || {};\r\n        _a = options.base || 1;\r\n      }\r\n    } else {\r\n      // RGBA + options\r\n      _r = v1;\r\n      _g = v2;\r\n      _b = v3;\r\n      _a = v4;\r\n      options = v5;\r\n    }\r\n  }\r\n\r\n  if (\r\n    !(\r\n      typeof _r === \"number\" &&\r\n      typeof _g === \"number\" &&\r\n      typeof _b === \"number\" &&\r\n      typeof _a === \"number\"\r\n    )\r\n  ) {\r\n    throw new Error(\"Invalid color arguments\");\r\n  }\r\n\r\n  options = options || {};\r\n\r\n  // The base option allows you to specify values in a different range.\r\n  if (options.base !== undefined) {\r\n    _r /= options.base;\r\n    _g /= options.base;\r\n    _b /= options.base;\r\n    _a /= options.base;\r\n  }\r\n  R = Math.round(_r * 255);\r\n  G = Math.round(_g * 255);\r\n  B = Math.round(_b * 255);\r\n  return \"rgba(\" + R + \", \" + G + \", \" + B + \", \" + _a + \")\";\r\n}\r\n\r\n// Converts a number of arguments into a dictionary of gradient information that is understood by the renderer.\r\nfunction toGradientData(v1, v2, v3, v4, v5) {\r\n  var startColor, endColor, type, rotation, spread, d;\r\n  var data = {};\r\n\r\n  if (arguments.length === 1) {\r\n    // The argument is a dictionary or undefined.\r\n    d = v1 || {};\r\n    startColor = d.startColor;\r\n    endColor = d.endColor;\r\n    type = d.type;\r\n    rotation = d.rotation;\r\n    spread = d.spread;\r\n  } else if (arguments.length >= 2) {\r\n    // The first two arguments are a start color and an end color.\r\n    startColor = v1;\r\n    endColor = v2;\r\n    type = \"linear\";\r\n    rotation = 0;\r\n    spread = 0;\r\n    if (arguments.length === 3) {\r\n      if (typeof v3 === \"string\") {\r\n        // The type can be either linear or radial.\r\n        type = v3;\r\n      } else if (typeof v3 === \"number\") {\r\n        // The type is implicitly linear and the third argument is the rotation angle.\r\n        rotation = v3;\r\n      }\r\n    } else if (arguments.length === 4) {\r\n      if (typeof v3 === \"number\") {\r\n        // The type is implicitly linear and the third/forth arguments are the rotation angle and gradient spread.\r\n        rotation = v3;\r\n        spread = v4;\r\n      } else if (v3 === \"linear\") {\r\n        // The type is explicitly linear and the forth argument is the rotation angle.\r\n        rotation = v4;\r\n      } else if (v3 === \"radial\") {\r\n        // The type is explicitly radial and the forth argument is the gradient spread.\r\n        type = v3;\r\n        spread = v4;\r\n      } else {\r\n        throw new Error(\"Wrong argument provided: \" + v3);\r\n      }\r\n    } else if (arguments.length === 5) {\r\n      // Type, rotation (unused in case of radial type gradient), and gradient spread.\r\n      type = v3;\r\n      rotation = v4;\r\n      spread = v5;\r\n    }\r\n  }\r\n\r\n  if (!startColor && startColor !== 0) {\r\n    throw new Error(\"No startColor was given.\");\r\n  }\r\n  if (!endColor && endColor !== 0) {\r\n    throw new Error(\"No endColor was given.\");\r\n  }\r\n\r\n  try {\r\n    data.startColor = toColor(startColor);\r\n  } catch (e1) {\r\n    throw new Error(\"startColor is not a valid color: \" + startColor);\r\n  }\r\n\r\n  try {\r\n    data.endColor = toColor(endColor);\r\n  } catch (e2) {\r\n    throw new Error(\"endColor is not a valid color: \" + endColor);\r\n  }\r\n\r\n  if (type === undefined) {\r\n    type = \"linear\";\r\n  }\r\n  if (type !== \"linear\" && type !== \"radial\") {\r\n    throw new Error(\"Unknown gradient type: \" + type);\r\n  }\r\n\r\n  data.type = type;\r\n\r\n  if (spread === undefined) {\r\n    spread = 0;\r\n  }\r\n  if (typeof spread !== \"number\") {\r\n    throw new Error(\"Spread value is not a number: \" + spread);\r\n  }\r\n\r\n  if (type === \"linear\") {\r\n    if (rotation === undefined) {\r\n      rotation = 0;\r\n    }\r\n    if (typeof rotation !== \"number\") {\r\n      throw new Error(\"Rotation value is not a number: \" + rotation);\r\n    }\r\n    data.rotation = rotation;\r\n  }\r\n\r\n  data.spread = clamp(spread, 0, 0.99);\r\n\r\n  return data;\r\n}\r\n\r\nfunction findType(data) {\r\n  if (typeof data === \"string\") {\r\n    return TYPE_PATH;\r\n  } else if (data instanceof Image) {\r\n    return TYPE_IMAGE;\r\n  } else if (data instanceof HTMLCanvasElement) {\r\n    return TYPE_HTML_CANVAS;\r\n  } else if (data instanceof ImageCanvas) {\r\n    return TYPE_IMAGE_CANVAS;\r\n  } else if (\r\n    data.r !== undefined &&\r\n    data.g !== undefined &&\r\n    data.b !== undefined &&\r\n    data.a !== undefined\r\n  ) {\r\n    return TYPE_FILL;\r\n  } else if (data.startColor !== undefined && data.endColor !== undefined) {\r\n    return TYPE_GRADIENT;\r\n  }\r\n  throw new Error(\"Cannot establish type for data \", data);\r\n}\r\n\r\n// IMAGE LAYER.\r\n\r\nexport class Layer {\r\n  constructor(data, type) {\r\n    if (!type) {\r\n      type = findType(data);\r\n    }\r\n    this.data = data;\r\n    this.type = type;\r\n\r\n    if (\r\n      type === TYPE_HTML_CANVAS ||\r\n      type === TYPE_IMAGE_CANVAS ||\r\n      type === TYPE_IMAGE\r\n    ) {\r\n      this.width = data.width;\r\n      this.height = data.height;\r\n    }\r\n\r\n    // Compositing.\r\n    this.opacity = 1.0;\r\n    this.blendmode = \"source-over\";\r\n\r\n    // Transformations.\r\n    this.transform = IDENTITY_TRANSFORM;\r\n    this.flip_h = false;\r\n    this.flip_v = false;\r\n\r\n    // An alpha mask hides parts of the masked layer where the mask is darker.\r\n    this.mask = new ImageCanvas();\r\n\r\n    this.filters = [];\r\n  }\r\n\r\n  // Copies the layer object.\r\n  clone() {\r\n    function cloneFilter(filter) {\r\n      var key, value;\r\n      var f = {};\r\n      f.name = filter.name;\r\n      if (filter.options !== undefined) {\r\n        f.options = {};\r\n        var optionsKeys = Object.keys(filter.options);\r\n        for (var i = 0; i < optionsKeys.length; i += 1) {\r\n          key = optionsKeys[i];\r\n          value = filter.options[key];\r\n          if (Array.isArray(value)) {\r\n            f.options[key] = value.slice(0);\r\n          } else {\r\n            f.options[key] = value;\r\n          }\r\n        }\r\n      }\r\n      return f;\r\n    }\r\n\r\n    var d = Object.create(Layer.prototype);\r\n    d.data = this.data;\r\n    d.type = this.type;\r\n    d.width = this.width;\r\n    d.height = this.height;\r\n    d.opacity = this.opacity;\r\n    d.blendmode = this.blendmode;\r\n    d.transform = this.transform;\r\n    d.flip_h = this.flip_h;\r\n    d.flip_v = this.flip_v;\r\n    d.mask = this.mask.clone();\r\n    d.filters = [];\r\n\r\n    if (this.type === TYPE_IMAGE_CANVAS) {\r\n      d.data = this.data.clone();\r\n    } else if (this.type === TYPE_GRADIENT) {\r\n      d.data = {\r\n        startColor: this.data.startColor,\r\n        endColor: this.data.endColor,\r\n        type: this.data.type,\r\n        rotation: this.data.rotation,\r\n        spread: this.data.spread,\r\n      };\r\n    }\r\n\r\n    for (var i = 0; i < this.filters.length; i += 1) {\r\n      d.filters.push(cloneFilter(this.filters[i]));\r\n    }\r\n\r\n    return d;\r\n  }\r\n\r\n  // Sets the opacity of the layer (requires a number in the range 0.0-1.0).\r\n  setOpacity(opacity) {\r\n    this.opacity = clamp(opacity, 0, 1);\r\n  }\r\n\r\n  // Within an image canvas, a layer is by default positioned in the center.\r\n  // Translating moves the layer away from this center.\r\n  // Each successive call to the translate function performs an additional translation on top of the current transformation matrix.\r\n  translate(tx, ty) {\r\n    ty = ty === undefined ? 0 : ty;\r\n    var t = Transform.translate(tx, ty);\r\n    this.transform = this.transform.prepend(t);\r\n  }\r\n\r\n  // Scaling happens relatively in a 0.0-1.0 based range where 1.0 stands for 100%.\r\n  // Each successive call to the scale function performs an additional scaling operation on top of the current transformation matrix.\r\n  // If only one parameter is supplied, the layer is scaled proportionally.\r\n  scale(sx, sy) {\r\n    sy = sy === undefined ? sx : sy;\r\n    var t = Transform.scale(sx, sy);\r\n    this.transform = this.transform.prepend(t);\r\n  }\r\n\r\n  // The supplied parameter should be in degrees (not radians).\r\n  // Each successive call to the rotation function performs an additional rotation on top of the current transformation matrix.\r\n  rotate(rot) {\r\n    var t = Transform.rotate(rot);\r\n    this.transform = this.transform.prepend(t);\r\n  }\r\n\r\n  // Each successive call to the skew function performs an additional skewing operation on top of the current transformation matrix.\r\n  skew(kx, ky) {\r\n    ky = ky === undefined ? kx : ky;\r\n    var t = Transform.skew(kx, ky);\r\n    this.transform = this.transform.prepend(t);\r\n  }\r\n\r\n  // Flips the layer horizontally.\r\n  flipHorizontal(arg) {\r\n    if (arg !== undefined) {\r\n      this.flip_h = arg;\r\n    } else {\r\n      this.flip_h = !this.flip_h;\r\n    }\r\n  }\r\n\r\n  // Flips the layer vertically.\r\n  flipVertical(arg) {\r\n    if (arg !== undefined) {\r\n      this.flip_v = arg;\r\n    } else {\r\n      this.flip_v = !this.flip_v;\r\n    }\r\n  }\r\n\r\n  addFilter(filter, options) {\r\n    this.filters.push({\r\n      name: filter,\r\n      options: options,\r\n    });\r\n  }\r\n\r\n  // Renders the layer to a new canvas.\r\n  draw(ctx) {\r\n    var width = this.width === undefined ? DEFAULT_WIDTH : this.width;\r\n    var height = this.height === undefined ? DEFAULT_HEIGHT : this.height;\r\n    var canvas = new ImageCanvas(width, height);\r\n    canvas.addLayer(this);\r\n    canvas.draw(ctx);\r\n  }\r\n\r\n  toCanvas() {\r\n    var canvas = document.createElement(\"canvas\");\r\n    canvas.width = this.width;\r\n    canvas.height = this.height;\r\n    var ctx = canvas.getContext(\"2d\");\r\n    this.draw(ctx);\r\n    return canvas;\r\n  }\r\n\r\n  static fromFile(filename) {\r\n    return new Layer(filename, TYPE_PATH);\r\n  }\r\n\r\n  static fromImage(image) {\r\n    return new Layer(image, TYPE_IMAGE);\r\n  }\r\n\r\n  static fromCanvas(canvas) {\r\n    if (canvas instanceof HTMLCanvasElement) {\r\n      return Layer.fromHtmlCanvas(canvas);\r\n    }\r\n    return Layer.fromImageCanvas(canvas);\r\n  }\r\n\r\n  static fromHtmlCanvas(canvas) {\r\n    return new Layer(canvas, TYPE_HTML_CANVAS);\r\n  }\r\n\r\n  static fromImageCanvas(iCanvas) {\r\n    return new Layer(iCanvas, TYPE_IMAGE_CANVAS);\r\n  }\r\n\r\n  static fromColor(color) {\r\n    return new Layer(toColor(color), TYPE_FILL);\r\n  }\r\n\r\n  static fromGradient() {\r\n    return new Layer(toGradientData.apply(null, arguments), TYPE_GRADIENT);\r\n  }\r\n\r\n  isPath() {\r\n    return this.type === TYPE_PATH;\r\n  }\r\n\r\n  isFill() {\r\n    return this.type === TYPE_FILL;\r\n  }\r\n\r\n  isGradient() {\r\n    return this.type === TYPE_GRADIENT;\r\n  }\r\n\r\n  isHtmlCanvas() {\r\n    return this.type === TYPE_HTML_CANVAS;\r\n  }\r\n\r\n  isImage() {\r\n    return this.type === TYPE_IMAGE;\r\n  }\r\n\r\n  isImageCanvas() {\r\n    return this.type === TYPE_IMAGE_CANVAS;\r\n  }\r\n}\r\n\r\nLayer.Transform = Layer.IDENTITY_TRANSFORM = IDENTITY_TRANSFORM;\r\n\r\n// IMAGE PIXELS.\r\n\r\nexport class Pixels {\r\n  constructor(canvas) {\r\n    this.width = canvas.width;\r\n    this.height = canvas.height;\r\n    var ctx = canvas.getContext(\"2d\");\r\n    this._data = ctx.getImageData(0, 0, this.width, this.height);\r\n    this.array = this._data.data;\r\n  }\r\n\r\n  get(i) {\r\n    i *= 4;\r\n    var v = this.array;\r\n    return [v[i + 0], v[i + 1], v[i + 2], v[i + 3]];\r\n  }\r\n\r\n  set(i, rgba) {\r\n    i *= 4;\r\n    var v = this.array;\r\n    v[i + 0] = rgba[0];\r\n    v[i + 1] = rgba[1];\r\n    v[i + 2] = rgba[2];\r\n    v[i + 3] = rgba[3];\r\n  }\r\n\r\n  toCanvas() {\r\n    var canvas = document.createElement(\"canvas\");\r\n    canvas.width = this.width;\r\n    canvas.height = this.height;\r\n    var ctx = canvas.getContext(\"2d\");\r\n    ctx.putImageData(this._data, 0, 0);\r\n    return canvas;\r\n  }\r\n}\r\n\r\n// IMAGE CANVAS.\r\n\r\nexport class ImageCanvas {\r\n  constructor(width, height) {\r\n    if (!width) {\r\n      width = DEFAULT_WIDTH;\r\n    }\r\n    if (!height) {\r\n      height = DEFAULT_HEIGHT;\r\n    }\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n    this.layers = [];\r\n  }\r\n\r\n  // Copies the ImageCanvas.\r\n  clone() {\r\n    var c = new ImageCanvas(this.width, this.height);\r\n    for (var i = 0; i < this.layers.length; i += 1) {\r\n      c.layers.push(this.layers[i].clone());\r\n    }\r\n    return c;\r\n  }\r\n\r\n  // Creates a new layer from figuring out the given argument(s) and adds it to the canvas.\r\n  addLayer(arg0) {\r\n    var layer;\r\n\r\n    try {\r\n      return this.addGradientLayer.apply(this, arguments);\r\n    } catch (e1) {}\r\n\r\n    try {\r\n      return this.addColorLayer.apply(this, arguments);\r\n    } catch (e2) {}\r\n\r\n    if (arguments.length === 1) {\r\n      if (typeof arg0 === \"string\") {\r\n        layer = new Layer(arg0, TYPE_PATH);\r\n      } else if (arg0 instanceof Layer) {\r\n        layer = arg0;\r\n      } else if (arg0 instanceof HTMLCanvasElement) {\r\n        layer = new Layer(arg0, TYPE_HTML_CANVAS);\r\n      } else if (arg0 instanceof Image) {\r\n        layer = new Layer(arg0, TYPE_IMAGE);\r\n      } else if (arg0 instanceof ImageCanvas) {\r\n        layer = new Layer(arg0, TYPE_IMAGE_CANVAS);\r\n      }\r\n    }\r\n\r\n    if (!layer) {\r\n      throw new Error(\"Error creating layer.\");\r\n    }\r\n\r\n    this.layers.push(layer);\r\n    return layer;\r\n  }\r\n\r\n  // Adds a new color layer to the canvas.\r\n  addColorLayer() {\r\n    var c = toColor.apply(null, arguments);\r\n    var layer = new Layer(c, TYPE_FILL);\r\n    this.layers.push(layer);\r\n    return layer;\r\n  }\r\n\r\n  // Adds a new gradient layer to the canvas.\r\n  addGradientLayer() {\r\n    var c = toGradientData.apply(null, arguments);\r\n    var layer = new Layer(c, TYPE_GRADIENT);\r\n    this.layers.push(layer);\r\n    return layer;\r\n  }\r\n\r\n  // Renders the canvas and passes the result (a html canvas) to the given callback function.\r\n  render(callback) {\r\n    var renderer = callback ? AsyncRenderer : CanvasRenderer;\r\n    return renderer.render(this, callback);\r\n  }\r\n\r\n  // Renders the canvas on another canvas.\r\n  draw(ctx, callback) {\r\n    if (callback) {\r\n      this.render(function (canvas) {\r\n        ctx.drawImage(canvas, 0, 0, canvas.width, canvas.height);\r\n      });\r\n    } else {\r\n      var canvas = this.render();\r\n      ctx.drawImage(canvas, 0, 0, canvas.width, canvas.height);\r\n    }\r\n  }\r\n}\r\n\r\n// Img\r\n\r\nfunction isPoint(arg) {\r\n  if (!arg) {\r\n    return false;\r\n  }\r\n  return arg.x !== undefined && arg.y !== undefined;\r\n}\r\n\r\nfunction pointFromArray(arg) {\r\n  var x = arg[0];\r\n  var y = arg.length > 1 ? arg[1] : x;\r\n  return { x: x, y: y };\r\n}\r\n\r\nfunction pointFromNumber(arg) {\r\n  return { x: arg, y: arg };\r\n}\r\n\r\nfunction isValidArg(arg) {\r\n  return arg !== undefined && arg !== null;\r\n}\r\n\r\nfunction convertArg(arg) {\r\n  if (Array.isArray(arg)) {\r\n    return pointFromArray(arg);\r\n  } else if (typeof arg === \"number\") {\r\n    return pointFromNumber(arg);\r\n  } else if (isPoint(arg)) {\r\n    return arg;\r\n  }\r\n}\r\n\r\nexport class Img {\r\n  constructor(canvas, x, y) {\r\n    this.canvas = canvas;\r\n    this.originalWidth = canvas ? canvas.width : 0;\r\n    this.originalHeight = canvas ? canvas.height : 0;\r\n    this.transform =\r\n      x || y ? Transform.translate(x, y) : Layer.IDENTITY_TRANSFORM;\r\n  }\r\n\r\n  clone() {\r\n    var n = new Img();\r\n    n.canvas = this.canvas;\r\n    n.originalWidth = this.originalWidth;\r\n    n.originalHeight = this.originalHeight;\r\n    n.transform = this.transform;\r\n    return n;\r\n  }\r\n\r\n  withCanvas(canvas) {\r\n    var n = this.clone();\r\n    n.canvas = canvas;\r\n    return n;\r\n  }\r\n\r\n  _transform(t) {\r\n    var n = this.clone();\r\n    n.transform = n.transform.prepend(t);\r\n    return n;\r\n  }\r\n\r\n  translate(position) {\r\n    var t = pointFromNumber(0);\r\n    var args = arguments;\r\n    if (args.length === 1 && isValidArg(position)) {\r\n      t = convertArg(position);\r\n    } else if (args.length === 2) {\r\n      t = { x: args[0], y: args[1] };\r\n    }\r\n    if (t.x === 0 && t.y === 0) {\r\n      return this;\r\n    }\r\n    return this._transform(Transform.translate(t.x, t.y));\r\n  }\r\n\r\n  rotate(angle) {\r\n    if (!angle) {\r\n      return this;\r\n    }\r\n    var o = pointFromNumber(0);\r\n    var args = arguments;\r\n    if (args.length === 2) {\r\n      o = convertArg(args[1]);\r\n    } else if (args.length === 3) {\r\n      o = { x: args[1], y: args[2] };\r\n    }\r\n    return this._transform(\r\n      Transform.translate(o.x, o.y).rotate(angle).translate(-o.x, -o.y)\r\n    );\r\n  }\r\n\r\n  scale(scale) {\r\n    var s = pointFromNumber(1);\r\n    var o = pointFromNumber(0);\r\n    var args = arguments;\r\n    if (args.length === 1 && isValidArg(scale)) {\r\n      s = convertArg(scale);\r\n    } else if (args.length === 2) {\r\n      if (typeof scale === \"number\" && typeof args[1] === \"number\") {\r\n        s = { x: args[0], y: args[1] };\r\n      } else {\r\n        s = convertArg(scale);\r\n        o = convertArg(args[1]);\r\n      }\r\n    } else if (args.length === 4) {\r\n      s = { x: args[0], y: args[1] };\r\n      o = { x: args[2], y: args[3] };\r\n    }\r\n    if (s.x === 1 && s.y === 1) {\r\n      return this;\r\n    }\r\n    return this._transform(\r\n      Transform.translate(o.x, o.y).scale(s.x, s.y).translate(-o.x, -o.y)\r\n    );\r\n  }\r\n\r\n  skew(skew) {\r\n    var k = pointFromNumber(0);\r\n    var o = pointFromNumber(0);\r\n    var args = arguments;\r\n    if (args.length === 1 && isValidArg(skew)) {\r\n      k = convertArg(skew);\r\n    } else if (args.length === 2) {\r\n      if (typeof skew === \"number\" && typeof args[1] === \"number\") {\r\n        k = { x: args[0], y: args[1] };\r\n      } else {\r\n        k = convertArg(skew);\r\n        o = convertArg(args[1]);\r\n      }\r\n    } else if (args.length === 4) {\r\n      k = { x: args[0], y: args[1] };\r\n      o = { x: args[2], y: args[3] };\r\n    }\r\n    if (k.x === 0 && k.y === 0) {\r\n      return this;\r\n    }\r\n    return this._transform(\r\n      Transform.translate(o.x, o.y).skew(k.x, k.y).translate(-o.x, -o.y)\r\n    );\r\n  }\r\n\r\n  transformed() {\r\n    return img.merge([this]);\r\n  }\r\n\r\n  bounds() {\r\n    var t = this.transform;\r\n    var x = this.originalWidth / 2;\r\n    var y = this.originalHeight / 2;\r\n\r\n    var p1 = { x: -x, y: -y };\r\n    var p2 = { x: x, y: -y };\r\n    var p3 = { x: -x, y: y };\r\n    var p4 = { x: x, y: y };\r\n    var points = [p1, p2, p3, p4];\r\n    var pt, minx, miny, maxx, maxy;\r\n\r\n    for (var i = 0; i < 4; i += 1) {\r\n      pt = t.transformPoint(points[i]);\r\n      if (i === 0) {\r\n        minx = maxx = pt.x;\r\n        miny = maxy = pt.y;\r\n      } else {\r\n        if (pt.x < minx) {\r\n          minx = pt.x;\r\n        }\r\n        if (pt.x > maxx) {\r\n          maxx = pt.x;\r\n        }\r\n        if (pt.y < miny) {\r\n          miny = pt.y;\r\n        }\r\n        if (pt.y > maxy) {\r\n          maxy = pt.y;\r\n        }\r\n      }\r\n    }\r\n    return { x: minx, y: miny, width: maxx - minx, height: maxy - miny };\r\n  }\r\n\r\n  colorize(color) {\r\n    var colorLayer = Layer.fromColor(color);\r\n    colorLayer.width = this.originalWidth;\r\n    colorLayer.height = this.originalHeight;\r\n    var i = new Img(colorLayer.toCanvas());\r\n    i = i._transform(this.transform.matrix());\r\n    return img.merge([this, i]);\r\n  }\r\n\r\n  desaturate(options) {\r\n    var layer = this.toLayer(false);\r\n    layer.addFilter(\"desaturate\", options);\r\n    return this.withCanvas(layer.toCanvas());\r\n  }\r\n\r\n  crop(bounding) {\r\n    // Calculates the intersecting rectangle of two input rectangles.\r\n    function rectIntersect(r1, r2) {\r\n      var right1 = r1.x + r1.width,\r\n        bottom1 = r1.y + r1.height,\r\n        right2 = r2.x + r2.width,\r\n        bottom2 = r2.y + r2.height,\r\n        x = Math.max(r1.x, r2.x),\r\n        y = Math.max(r1.y, r2.y),\r\n        w = Math.max(Math.min(right1, right2) - x, 0),\r\n        h = Math.max(Math.min(bottom1, bottom2) - y, 0);\r\n      return { x: x, y: y, width: w, height: h };\r\n    }\r\n\r\n    var iBounds = this.bounds();\r\n    var bounds = bounding.bounds();\r\n    var ri = rectIntersect(iBounds, bounds);\r\n    var width = Math.ceil(ri.width);\r\n    var height = Math.ceil(ri.height);\r\n\r\n    if (ri.width === 0 || ri.height === 0) {\r\n      throw new Error(\"Resulting image has no dimensions\");\r\n    }\r\n\r\n    var canvas = new img.ImageCanvas(width, height);\r\n    var l1 = canvas.addLayer(this.toLayer());\r\n    l1.translate(\r\n      width / 2 - bounds.width - bounds.x,\r\n      height / 2 - bounds.height - bounds.y\r\n    );\r\n    if (width < bounds.width && ri.x > iBounds.x) {\r\n      l1.translate(bounds.width - width, 0);\r\n    }\r\n    if (height < bounds.height && ri.y > iBounds.y) {\r\n      l1.translate(0, bounds.height - height);\r\n    }\r\n\r\n    return new Img(canvas.render(), ri.x + width / 2, ri.y + height / 2);\r\n  }\r\n\r\n  draw(ctx) {\r\n    ctx.save();\r\n    var m = this.transform.matrix();\r\n    ctx.transform(m[0], m[1], m[3], m[4], m[6], m[7]);\r\n    ctx.translate(-this.originalWidth / 2, -this.originalHeight / 2);\r\n    ctx.drawImage(this.canvas, 0, 0);\r\n    ctx.restore();\r\n  }\r\n\r\n  toLayer(copyTransformations) {\r\n    var canvas = document.createElement(\"canvas\");\r\n    canvas.width = this.canvas.width;\r\n    canvas.height = this.canvas.height;\r\n    var ctx = canvas.getContext(\"2d\");\r\n    ctx.drawImage(this.canvas, 0, 0);\r\n    var layer = img.Layer.fromHtmlCanvas(canvas);\r\n    if (copyTransformations === undefined) {\r\n      copyTransformations = true;\r\n    }\r\n    if (copyTransformations) {\r\n      layer.transform = this.transform;\r\n    }\r\n    return layer;\r\n  }\r\n\r\n  getPixels() {\r\n    return new Pixels(this.canvas);\r\n  }\r\n\r\n  toImage() {\r\n    var b = this.bounds();\r\n    var cropped = this.crop({\r\n      bounds: function () {\r\n        return b;\r\n      },\r\n    });\r\n    var i = new Image();\r\n    i.width = cropped.canvas.width;\r\n    i.height = cropped.canvas.height;\r\n    i.src = cropped.canvas.toDataURL();\r\n    return i;\r\n  }\r\n}\r\n\r\n// MODULE SUPPORT ///////////////////////////////////////////////////////\r\n\r\nexport function loadImage(image, callback) {\r\n  var img = new Image();\r\n  img.onload = function () {\r\n    callback(null, [image, this]);\r\n  };\r\n  img.src = image;\r\n}\r\n\r\nexport function loadImages(images, callback) {\r\n  async.map(images, loadImage, function (err, loadedImages) {\r\n    if (callback) {\r\n      var name, image;\r\n      var d = {};\r\n      for (var i = 0; i < loadedImages.length; i += 1) {\r\n        name = loadedImages[i][0];\r\n        image = loadedImages[i][1];\r\n        d[name] = image;\r\n      }\r\n      callback(d);\r\n    }\r\n  });\r\n}\r\n\r\nfunction rectUnite(r1, r2) {\r\n  var x = Math.min(r1.x, r2.x),\r\n    y = Math.min(r1.y, r2.y),\r\n    width = Math.max(r1.x + r1.width, r2.x + r2.width) - x,\r\n    height = Math.max(r1.y + r1.height, r2.y + r2.height) - y;\r\n  return { x: x, y: y, width: width, height: height };\r\n}\r\n\r\nexport function merge(images) {\r\n  var i, image, b, l;\r\n  for (i = 0; i < images.length; i += 1) {\r\n    image = images[i];\r\n    if (i === 0) {\r\n      b = image.bounds();\r\n    } else {\r\n      b = rectUnite(b, image.bounds());\r\n    }\r\n  }\r\n  var dx = b.width / 2 + b.x;\r\n  var dy = b.height / 2 + b.y;\r\n\r\n  var canvas = new ImageCanvas(b.width, b.height);\r\n  for (i = 0; i < images.length; i += 1) {\r\n    l = canvas.addLayer(images[i].toLayer());\r\n    l.translate(-dx, -dy);\r\n  }\r\n  return new Img(canvas.render(), dx, dy);\r\n}\r\n", "// Easing functions in javascript ported from jQuery Easing Plugin:\r\n// https://github.com/gdsmith/jquery.easing\r\n// t: current time, b: beginning value, c: change in value, d: duration\r\n\r\nexport function easeInQuad(t, b, c, d) {\r\n  return c * (t /= d) * t + b;\r\n}\r\n\r\nexport function easeOutQuad(t, b, c, d) {\r\n  return -c * (t /= d) * (t - 2) + b;\r\n}\r\n\r\nexport function easeInOutQuad(t, b, c, d) {\r\n  if ((t /= d / 2) < 1) {\r\n    return (c / 2) * t * t + b;\r\n  }\r\n  return (-c / 2) * (--t * (t - 2) - 1) + b;\r\n}\r\n\r\nexport function easeInCubic(t, b, c, d) {\r\n  return c * (t /= d) * t * t + b;\r\n}\r\n\r\nexport function easeOutCubic(t, b, c, d) {\r\n  return c * ((t = t / d - 1) * t * t + 1) + b;\r\n}\r\n\r\nexport function easeInOutCubic(t, b, c, d) {\r\n  if ((t /= d / 2) < 1) {\r\n    return (c / 2) * t * t * t + b;\r\n  }\r\n  return (c / 2) * ((t -= 2) * t * t + 2) + b;\r\n}\r\n\r\nexport function easeInQuart(t, b, c, d) {\r\n  return c * (t /= d) * t * t * t + b;\r\n}\r\n\r\nexport function easeOutQuart(t, b, c, d) {\r\n  return -c * ((t = t / d - 1) * t * t * t - 1) + b;\r\n}\r\n\r\nexport function easeInOutQuart(t, b, c, d) {\r\n  if ((t /= d / 2) < 1) {\r\n    return (c / 2) * t * t * t * t + b;\r\n  }\r\n  return (-c / 2) * ((t -= 2) * t * t * t - 2) + b;\r\n}\r\n\r\nexport function easeInQuint(t, b, c, d) {\r\n  return c * (t /= d) * t * t * t * t + b;\r\n}\r\n\r\nexport function easeOutQuint(t, b, c, d) {\r\n  return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\r\n}\r\n\r\nexport function easeInOutQuint(t, b, c, d) {\r\n  if ((t /= d / 2) < 1) {\r\n    return (c / 2) * t * t * t * t * t + b;\r\n  }\r\n  return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;\r\n}\r\n\r\nexport function easeInSine(t, b, c, d) {\r\n  return -c * Math.cos((t / d) * (Math.PI / 2)) + c + b;\r\n}\r\n\r\nexport function easeOutSine(t, b, c, d) {\r\n  return c * Math.sin((t / d) * (Math.PI / 2)) + b;\r\n}\r\n\r\nexport function easeInOutSine(t, b, c, d) {\r\n  return (-c / 2) * (Math.cos((Math.PI * t) / d) - 1) + b;\r\n}\r\n\r\nexport function easeInExpo(t, b, c, d) {\r\n  return t === 0 ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\r\n}\r\n\r\nexport function easeOutExpo(t, b, c, d) {\r\n  return t === d ? b + c : c * (-Math.pow(2, (-10 * t) / d) + 1) + b;\r\n}\r\n\r\nexport function easeInOutExpo(t, b, c, d) {\r\n  if (t === 0) {\r\n    return b;\r\n  }\r\n  if (t === d) {\r\n    return b + c;\r\n  }\r\n  if ((t /= d / 2) < 1) {\r\n    return (c / 2) * Math.pow(2, 10 * (t - 1)) + b;\r\n  }\r\n  return (c / 2) * (-Math.pow(2, -10 * --t) + 2) + b;\r\n}\r\n\r\nexport function easeInCirc(t, b, c, d) {\r\n  return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\r\n}\r\n\r\nexport function easeOutCirc(t, b, c, d) {\r\n  return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\r\n}\r\n\r\nexport function easeInOutCirc(t, b, c, d) {\r\n  if ((t /= d / 2) < 1) {\r\n    return (-c / 2) * (Math.sqrt(1 - t * t) - 1) + b;\r\n  }\r\n  return (c / 2) * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\r\n}\r\n\r\nexport function easeInElastic(t, b, c, d) {\r\n  var s = 1.70158;\r\n  var p = 0;\r\n  var a = c;\r\n  if (t === 0) {\r\n    return b;\r\n  }\r\n  if ((t /= d) === 1) {\r\n    return b + c;\r\n  }\r\n  if (!p) p = d * 0.3;\r\n  if (a < Math.abs(c)) {\r\n    a = c;\r\n    s = p / 4;\r\n  } else {\r\n    s = (p / (2 * Math.PI)) * Math.asin(c / a);\r\n  }\r\n  return (\r\n    -(\r\n      a *\r\n      Math.pow(2, 10 * (t -= 1)) *\r\n      Math.sin(((t * d - s) * (2 * Math.PI)) / p)\r\n    ) + b\r\n  );\r\n}\r\n\r\nexport function easeOutElastic(t, b, c, d) {\r\n  var s = 1.70158;\r\n  var p = 0;\r\n  var a = c;\r\n  if (t === 0) {\r\n    return b;\r\n  }\r\n  if ((t /= d) === 1) {\r\n    return b + c;\r\n  }\r\n  if (!p) p = d * 0.3;\r\n  if (a < Math.abs(c)) {\r\n    a = c;\r\n    s = p / 4;\r\n  } else {\r\n    s = (p / (2 * Math.PI)) * Math.asin(c / a);\r\n  }\r\n  return (\r\n    a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) +\r\n    c +\r\n    b\r\n  );\r\n}\r\n\r\nexport function easeInOutElastic(t, b, c, d) {\r\n  var s = 1.70158;\r\n  var p = 0;\r\n  var a = c;\r\n  if (t === 0) {\r\n    return b;\r\n  }\r\n  if ((t /= d / 2) === 2) {\r\n    return b + c;\r\n  }\r\n  if (!p) p = d * (0.3 * 1.5);\r\n  if (a < Math.abs(c)) {\r\n    a = c;\r\n    s = p / 4;\r\n  } else {\r\n    s = (p / (2 * Math.PI)) * Math.asin(c / a);\r\n  }\r\n  if (t < 1) {\r\n    return (\r\n      -0.5 *\r\n        (a *\r\n          Math.pow(2, 10 * (t -= 1)) *\r\n          Math.sin(((t * d - s) * (2 * Math.PI)) / p)) +\r\n      b\r\n    );\r\n  }\r\n  return (\r\n    a *\r\n      Math.pow(2, -10 * (t -= 1)) *\r\n      Math.sin(((t * d - s) * (2 * Math.PI)) / p) *\r\n      0.5 +\r\n    c +\r\n    b\r\n  );\r\n}\r\n\r\nexport function easeInBack(t, b, c, d, s) {\r\n  if (s === undefined) {\r\n    s = 1.70158;\r\n  }\r\n  return c * (t /= d) * t * ((s + 1) * t - s) + b;\r\n}\r\n\r\nexport function easeOutBack(t, b, c, d, s) {\r\n  if (s === undefined) {\r\n    s = 1.70158;\r\n  }\r\n  return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\r\n}\r\n\r\nexport function easeInOutBack(t, b, c, d, s) {\r\n  if (s === undefined) {\r\n    s = 1.70158;\r\n  }\r\n  if ((t /= d / 2) < 1) {\r\n    return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\r\n  }\r\n  return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\r\n}\r\n\r\nexport function easeInBounce(t, b, c, d) {\r\n  return c - easeOutBounce(d - t, 0, c, d) + b;\r\n}\r\n\r\nexport function easeOutBounce(t, b, c, d) {\r\n  if ((t /= d) < 1 / 2.75) {\r\n    return c * (7.5625 * t * t) + b;\r\n  } else if (t < 2 / 2.75) {\r\n    return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\r\n  } else if (t < 2.5 / 2.75) {\r\n    return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\r\n  } else {\r\n    return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\r\n  }\r\n}\r\n\r\nexport function easeInOutBounce(t, b, c, d) {\r\n  if (t < d / 2) {\r\n    return easeInBounce(t * 2, 0, c, d) * 0.5 + b;\r\n  }\r\n  return easeOutBounce(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\r\n}\r\n\r\nexport function easing(f) {\r\n  var fn = g[f];\r\n  var args = Array.prototype.slice.call(arguments, 1);\r\n  return fn.apply(null, args);\r\n}\r\n", "import * as vg from \"./libraries/vg/index.mjs\";\r\n// import * as img from \"./libraries/img\";\r\nimport * as util from \"./libraries/util.mjs\";\r\n\r\nimport * as mathCommands from \"./libraries/math.mjs\";\r\nimport * as stringCommands from \"./libraries/string.mjs\";\r\nimport * as listCommands from \"./libraries/list.mjs\";\r\nimport * as dataCommands from \"./libraries/data.mjs\";\r\n// import * as imageCommands from \"./libraries/image\";\r\nimport * as graphicsCommands from \"./libraries/graphics.mjs\";\r\nimport * as easingCommands from \"./libraries/easing.mjs\";\r\n\r\nfunction importSVG(svgString) {\r\n  return g.svg.parseString(svgString);\r\n}\r\n\r\nfunction importImage(image) {\r\n  var layer = g.Layer.fromImage(image);\r\n  return new g.Img(layer.toCanvas());\r\n}\r\n\r\nfunction importText(string) {\r\n  return string ? String(string) : \"\";\r\n}\r\n\r\n// Split the row, taking quotes into account.\r\nfunction splitRow(s, delimiter) {\r\n  var row = [],\r\n    c,\r\n    col = \"\",\r\n    i,\r\n    inString = false;\r\n  s = s.trim();\r\n  for (i = 0; i < s.length; i += 1) {\r\n    c = s[i];\r\n    if (c === '\"') {\r\n      if (s[i + 1] === '\"') {\r\n        col += '\"';\r\n        i += 1;\r\n      } else {\r\n        inString = !inString;\r\n      }\r\n    } else if (c === delimiter) {\r\n      if (!inString) {\r\n        row.push(col);\r\n        col = \"\";\r\n      } else {\r\n        col += c;\r\n      }\r\n    } else {\r\n      col += c;\r\n    }\r\n  }\r\n  row.push(col);\r\n  return row;\r\n}\r\n\r\nfunction importCSV(csvString, delimiter) {\r\n  var csvRows, header;\r\n  delimiter = delimiter || \",\";\r\n\r\n  if (!csvString) return null;\r\n  csvRows = csvString.split(/\\r\\n|\\r|\\n/g);\r\n  header = splitRow(csvRows[0], delimiter);\r\n  csvRows = csvRows.slice(1);\r\n\r\n  var row,\r\n    rows = [];\r\n  var m, sr, col, index;\r\n  for (var i = 0; i < csvRows.length; i += 1) {\r\n    row = csvRows[i];\r\n    if (!!row) {\r\n      m = {};\r\n      sr = splitRow(row, delimiter);\r\n      for (index = 0; index < sr.length; index += 1) {\r\n        col = sr[index];\r\n        m[header[index]] = isNaN(col) ? col : parseFloat(col);\r\n      }\r\n      rows.push(m);\r\n    }\r\n  }\r\n  return rows;\r\n}\r\n\r\nfunction merge() {\r\n  var args = util.flatten(arguments);\r\n  if (Array.isArray(args)) {\r\n    var objects = [];\r\n    for (var i = 0; i < args.length; i += 1) {\r\n      if (!!args[i]) {\r\n        objects.push(args[i]);\r\n      }\r\n    }\r\n    if (objects.length > 0) {\r\n      var o = objects[0];\r\n      if (o && (o.commands || o.shapes || o.fontFamily)) {\r\n        return vg.merge(objects);\r\n      } else if (o instanceof img.Img) {\r\n        return img.merge(objects);\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction mix(a, b, t) {\r\n  t = t !== undefined ? t : 0.5;\r\n  if (typeof a === \"number\") {\r\n    return a * (1 - t) + b * t;\r\n  } else if (a instanceof g.Color && b instanceof g.Color) {\r\n    return new g.Color(\r\n      g.mix(a.r, b.r, t),\r\n      g.mix(a.g, b.g, t),\r\n      g.mix(a.b, b.b, t),\r\n      g.mix(a.a, b.a, t)\r\n    );\r\n  } else if (typeof a === \"object\") {\r\n    var result = {};\r\n    var keys = Object.keys(a);\r\n    for (var i = 0, n = keys.length; i < n; i += 1) {\r\n      var k = keys[i];\r\n      var va = a[k];\r\n      var vb = b[k];\r\n      if (va !== undefined && vb !== undefined) {\r\n        result[k] = g.mix(va, vb, t);\r\n      }\r\n    }\r\n    return result;\r\n  } else {\r\n    return 0;\r\n  }\r\n}\r\n\r\nconst g = {\r\n  ...vg,\r\n  ...img,\r\n  ...util,\r\n  ...mathCommands,\r\n  ...stringCommands,\r\n  ...listCommands,\r\n  ...dataCommands,\r\n  ...imageCommands,\r\n  ...graphicsCommands,\r\n  ...easingCommands,\r\n  importSvg,\r\n  importImage,\r\n  importText,\r\n  importCSV,\r\n  merge,\r\n  mix,\r\n};\r\nexport default g;\r\n"],
  "mappings": "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",
  "names": ["require_conventions", "__commonJSMin", "exports", "find", "list", "predicate", "ac", "i", "item", "freeze", "object", "oc", "assign", "target", "source", "key", "MIME_TYPE", "value", "NAMESPACE", "uri", "require_dom", "__commonJSMin", "exports", "conventions", "find", "NAMESPACE", "notEmptyString", "input", "splitOnASCIIWhitespace", "orderedSetReducer", "current", "element", "toOrderedSet", "list", "arrayIncludes", "copy", "src", "dest", "p", "_extends", "Class", "Super", "pt", "t", "NodeType", "ELEMENT_NODE", "ATTRIBUTE_NODE", "TEXT_NODE", "CDATA_SECTION_NODE", "ENTITY_REFERENCE_NODE", "ENTITY_NODE", "PROCESSING_INSTRUCTION_NODE", "COMMENT_NODE", "DOCUMENT_NODE", "DOCUMENT_TYPE_NODE", "DOCUMENT_FRAGMENT_NODE", "NOTATION_NODE", "ExceptionCode", "ExceptionMessage", "INDEX_SIZE_ERR", "DOMSTRING_SIZE_ERR", "HIERARCHY_REQUEST_ERR", "WRONG_DOCUMENT_ERR", "INVALID_CHARACTER_ERR", "NO_DATA_ALLOWED_ERR", "NO_MODIFICATION_ALLOWED_ERR", "NOT_FOUND_ERR", "NOT_SUPPORTED_ERR", "INUSE_ATTRIBUTE_ERR", "INVALID_STATE_ERR", "SYNTAX_ERR", "INVALID_MODIFICATION_ERR", "NAMESPACE_ERR", "INVALID_ACCESS_ERR", "DOMException", "code", "message", "error", "NodeList", "index", "isHTML", "nodeFilter", "buf", "i", "serializeToString", "predicate", "item", "LiveNodeList", "node", "refresh", "_updateLiveList", "inc", "ls", "__set__", "NamedNodeMap", "_findNodeIndex", "_addNamedNode", "el", "newAttr", "oldAttr", "doc", "_onRemoveAttribute", "_onAddAttribute", "_removeNamedNode", "attr", "lastIndex", "key", "namespaceURI", "localName", "DOMImplementation", "feature", "version", "qualifiedName", "doctype", "Document", "root", "publicId", "systemId", "DocumentType", "Node", "newChild", "refChild", "_insertBefore", "oldChild", "assertPreReplacementValidityInDocument", "_removeChild", "deep", "cloneNode", "child", "next", "map", "prefix", "_xmlEncoder", "c", "_visitNode", "callback", "ns", "remove", "_onUpdateChild", "cs", "parentNode", "previous", "hasValidParentNodeType", "hasInsertableNodeType", "isElementNode", "isTextNode", "isDocTypeNode", "isElementInsertionPossible", "parentChildNodes", "docTypeNode", "isElementReplacementPossible", "hasElementChildThatIsNotChild", "assertPreInsertionValidity1to5", "parent", "assertPreInsertionValidityInDocument", "nodeChildNodes", "nodeChildElements", "parentElementChild", "hasDoctypeChildThatIsNotChild", "_inDocumentAssertion", "cp", "newFirst", "newLast", "pre", "_appendSingleChild", "importedNode", "importNode", "id", "rtv", "classNames", "classNamesSet", "base", "nodeClassNames", "matches", "nodeClassNamesSet", "tagName", "Element", "attrs", "DocumentFragment", "data", "Text", "Comment", "CDATASection", "target", "ProcessingInstruction", "name", "Attr", "EntityReference", "pl", "value", "old", "CharacterData", "offset", "count", "text", "start", "end", "newText", "newNode", "Notation", "Entity", "XMLSerializer", "isHtml", "nodeSerializeToString", "refNode", "uri", "visibleNamespaces", "needNamespaceDefine", "addSerializedAttribute", "len", "nodeName", "prefixedNodeName", "defaultNS", "ai", "nsi", "namespace", "pubid", "sysid", "sub", "node2", "n", "v", "attrs2", "object", "getTextContent", "require_entities", "__commonJSMin", "exports", "freeze", "require_sax", "__commonJSMin", "exports", "NAMESPACE", "nameStartChar", "nameChar", "tagNamePattern", "S_TAG", "S_ATTR", "S_ATTR_SPACE", "S_EQ", "S_ATTR_NOQUOT_VALUE", "S_ATTR_END", "S_TAG_SPACE", "S_TAG_CLOSE", "ParseError", "message", "locator", "XMLReader", "source", "defaultNSMap", "entityMap", "domBuilder", "_copy", "parse", "defaultNSMapCopy", "errorHandler", "fixedFromCharCode", "code", "surrogate1", "surrogate2", "entityReplacer", "a", "k", "appendText", "end", "start", "xt", "position", "p", "m", "lineEnd", "linePattern", "lineStart", "parseStack", "closeMap", "tagStart", "doc", "text", "tagName", "config", "localNSMap", "endMatch", "endIgnoreCaseMach", "prefix", "parseInstruction", "parseDCC", "el", "ElementAttributes", "currentNSMap", "parseElementStartPart", "len", "fixSelfClosed", "locator2", "copyLocator", "i", "appendElement", "parseHtmlSpecialContent", "e", "f", "t", "addAttribute", "qname", "value", "startIndex", "attrName", "s", "qName", "nsp", "localName", "nsPrefix", "ns", "elStartEnd", "elEndStart", "pos", "target", "n", "next", "matchs", "split", "name", "pubid", "sysid", "lastMatch", "match", "offset", "buf", "reg", "require_dom_parser", "__commonJSMin", "exports", "conventions", "dom", "entities", "sax", "DOMImplementation", "NAMESPACE", "ParseError", "XMLReader", "normalizeLineEndings", "input", "DOMParser", "options", "source", "mimeType", "domBuilder", "DOMHandler", "errorHandler", "locator", "defaultNSMap", "isHTML", "entityMap", "buildErrorHandler", "normalize", "errorImpl", "isCallback", "build", "key", "fn", "msg", "_locator", "position", "node", "namespaceURI", "localName", "qName", "attrs", "doc", "el", "len", "appendElement", "i", "value", "attr", "current", "tagName", "prefix", "uri", "target", "data", "ins", "ch", "start", "length", "chars", "_toString", "charNode", "name", "comm", "publicId", "systemId", "impl", "dt", "error", "l", "hander", "require_lib", "__commonJSMin", "exports", "dom", "require_clipper", "__commonJSMin", "exports", "module", "use_int32", "use_xyz", "use_lines", "use_deprecated", "ClipperLib", "isNode", "navigator_appName", "nav", "browser", "dbits", "canary", "j_lm", "BigInteger", "a", "b", "c", "nbi", "am1", "i", "x", "w", "j", "n", "v", "am2", "xl", "xh", "l", "h", "m", "am3", "BI_FP", "BI_RM", "BI_RC", "rr", "vv", "int2char", "intAt", "s", "bnpCopyTo", "r", "bnpFromInt", "nbv", "bnpFromString", "k", "mi", "sh", "bnpClamp", "bnToString", "km", "d", "p", "bnNegate", "bnAbs", "bnCompareTo", "nbits", "t", "bnBitLength", "bnpDLShiftTo", "bnpDRShiftTo", "bnpLShiftTo", "bs", "cbs", "bm", "ds", "bnpRShiftTo", "bnpSubTo", "bnpMultiplyTo", "y", "bnpSquareTo", "bnpDivRemTo", "q", "pm", "pt", "ts", "ms", "nsh", "ys", "y0", "yt", "d1", "d2", "e", "qd", "bnMod", "Classic", "cConvert", "cRevert", "cReduce", "cMulTo", "cSqrTo", "bnpInvDigit", "Montgomery", "montConvert", "montRevert", "montReduce", "u0", "montSqrTo", "montMulTo", "bnpIsEven", "bnpExp", "z", "r2", "g", "bnModPowInt", "bnClone", "bnIntValue", "bnByteValue", "bnShortValue", "bnpChunkSize", "bnSigNum", "bnpToRadix", "cs", "bnpFromRadix", "bnpFromNumber", "op_or", "bnToByteArray", "bnEquals", "bnMin", "bnMax", "bnpBitwiseTo", "op", "f", "op_and", "bnAnd", "bnOr", "op_xor", "bnXor", "op_andnot", "bnAndNot", "bnNot", "bnShiftLeft", "bnShiftRight", "lbit", "bnGetLowestSetBit", "cbit", "bnBitCount", "bnTestBit", "bnpChangeBit", "bnSetBit", "bnClearBit", "bnFlipBit", "bnpAddTo", "bnAdd", "bnSubtract", "bnMultiply", "bnSquare", "bnDivide", "bnRemainder", "bnDivideAndRemainder", "bnpDMultiply", "bnpDAddOffset", "NullExp", "nNop", "nMulTo", "nSqrTo", "bnPow", "bnpMultiplyLowerTo", "bnpMultiplyUpperTo", "Barrett", "barrettConvert", "barrettRevert", "barrettReduce", "barrettSqrTo", "barrettMulTo", "bnModPow", "k1", "g2", "is1", "bnGCD", "bnpModInt", "bnModInverse", "ac", "u", "lowprimes", "lplim", "bnIsProbablePrime", "bnpMillerRabin", "n1", "Int128", "val1", "val2", "lhs", "rhs", "Inherit", "ce", "ce2", "props", "dp", "result", "node", "Child", "cnt", "ilen", "alen", "ir", "node1", "node2", "val", "pp", "pp2", "linePt1", "linePt2", "UseFullRange", "e1", "e2", "pt1", "pt2", "pt3", "pt4", "jlen", "tmpLm", "Pt", "useFullRange", "eNext", "ePrev", "polyType", "E", "E2", "IsClockwise", "EStart", "Result", "Horz", "StartX", "locMin", "pg", "Closed", "highI", "edges", "IsFlat", "$1", "eStart", "eLoopStop", "eHighest", "clockwise", "EMin", "ppg", "closed", "newLm", "tmp", "lm", "InitOptions", "sb2", "Y", "newSb", "ispolytree", "clipType", "solution", "subjFillType", "clipFillType", "succeeded", "polytree", "outRec", "orfl", "botY", "topY", "index", "tmpPp", "Op1", "Op2", "OffPt", "Op", "lb", "rb", "edge", "startEdge", "pft", "pft2", "Inside", "edge1", "edge2", "next", "prev", "prevE", "outPt", "ToFront", "newOp", "Pt1a", "Pt1b", "Pt2a", "Pt2b", "p1", "p2", "isHole", "btmPt1", "btmPt2", "dx1p", "dx1n", "dx2p", "dx2n", "dups", "outRec1", "outRec2", "bPt1", "bPt2", "idx", "outrec", "holeStateRec", "p1_lft", "p1_rt", "p2_lft", "p2_rt", "side", "OKIdx", "ObsoleteIdx", "pp1", "outIdx", "protect", "e1stops", "e2stops", "e1Contributing", "e2Contributing", "oldE1WindCnt", "e1FillType", "e2FillType", "e1FillType2", "e2FillType2", "e1Wc", "e2Wc", "e1Wc2", "e2Wc2", "AelPrev", "AelNext", "SelPrev", "SelNext", "isTopOfScanbeam", "horzEdge", "HorzEdge", "$var", "dir", "horzLeft", "horzRight", "eLastHorz", "eMaxPair", "IsLastHorz", "op1", "op2", "Direction", "isModified", "newNode", "inode", "iNode", "R1", "R2", "R3", "R4", "currentY", "ip", "b1", "b2", "IsMaximaEdge", "polys", "len", "poly", "pts", "polyg", "pn", "lastOK", "InsertAfter", "a1", "a2", "$val", "op1b", "op2b", "DiscardLeft", "Dir1", "Dir2", "isHorizontal", "reverse1", "reverse2", "Left", "Right", "DiscardLeftSide", "Reverse1", "Reverse2", "paths", "ops", "opStart", "path", "ipNext", "startOp", "poly0x", "poly0y", "poly1x", "poly1y", "outPt1", "outPt2", "res", "OldOutRec", "NewOutRec", "$i2", "$t2", "$l2", "FirstLeft", "join", "oRec", "op3", "op4", "outrec2", "delta", "jointype", "endtype", "MiterLimit", "co", "fillType", "dx", "dy", "ln1", "ln2", "A", "B", "C", "distSqrd", "distance", "outPts", "pattern", "IsSum", "IsClosed", "polyCnt", "pathCnt", "quads", "quad", "pathIsClosed", "pathFillType", "polynode", "nt", "match", "$i3", "$t3", "$l3", "miterLimit", "arcTolerance", "joinType", "endType", "steps", "X", "X2", "clpr", "outer", "outerNode", "message", "err", "scale", "area", "bounds", "polygon", "isPolygons", "k_length", "results", "plen", "tolerance", "poly2", "P", "rem", "addlast", "bxax", "byay", "ax", "ay", "toleranceSq", "sqrt", "perimeter", "p1x", "p1y", "p2x", "p2y", "round", "expolygons", "ep", "childs", "childs2", "require_lodash", "__commonJSMin", "exports", "module", "MAX_SAFE_INTEGER", "argsTag", "funcTag", "genTag", "reIsUint", "arrayMap", "array", "iteratee", "index", "length", "result", "baseTimes", "n", "baseValues", "object", "props", "key", "overArg", "func", "transform", "arg", "objectProto", "hasOwnProperty", "objectToString", "propertyIsEnumerable", "nativeKeys", "arrayLikeKeys", "value", "inherited", "isArray", "isArguments", "skipIndexes", "isIndex", "baseKeys", "isPrototype", "Ctor", "proto", "isArrayLikeObject", "isArrayLike", "isLength", "isFunction", "isObjectLike", "tag", "isObject", "type", "keys", "values", "require_lodash", "__commonJSMin", "exports", "module", "LARGE_ARRAY_SIZE", "FUNC_ERROR_TEXT", "HASH_UNDEFINED", "UNORDERED_COMPARE_FLAG", "PARTIAL_COMPARE_FLAG", "INFINITY", "MAX_SAFE_INTEGER", "argsTag", "arrayTag", "boolTag", "dateTag", "errorTag", "funcTag", "genTag", "mapTag", "numberTag", "objectTag", "promiseTag", "regexpTag", "setTag", "stringTag", "symbolTag", "weakMapTag", "arrayBufferTag", "dataViewTag", "float32Tag", "float64Tag", "int8Tag", "int16Tag", "int32Tag", "uint8Tag", "uint8ClampedTag", "uint16Tag", "uint32Tag", "reIsDeepProp", "reIsPlainProp", "reLeadingDot", "rePropName", "reRegExpChar", "reEscapeChar", "reIsHostCtor", "reIsUint", "typedArrayTags", "freeGlobal", "freeSelf", "root", "freeExports", "freeModule", "moduleExports", "freeProcess", "nodeUtil", "nodeIsTypedArray", "arrayAggregator", "array", "setter", "iteratee", "accumulator", "index", "length", "value", "arraySome", "predicate", "baseProperty", "key", "object", "baseTimes", "n", "result", "baseUnary", "func", "getValue", "isHostObject", "mapToArray", "map", "overArg", "transform", "arg", "setToArray", "set", "arrayProto", "funcProto", "objectProto", "coreJsData", "maskSrcKey", "uid", "funcToString", "hasOwnProperty", "objectToString", "reIsNative", "Symbol", "Uint8Array", "propertyIsEnumerable", "splice", "nativeKeys", "DataView", "getNative", "Map", "Promise", "Set", "WeakMap", "nativeCreate", "dataViewCtorString", "toSource", "mapCtorString", "promiseCtorString", "setCtorString", "weakMapCtorString", "symbolProto", "symbolValueOf", "symbolToString", "Hash", "entries", "entry", "hashClear", "hashDelete", "hashGet", "data", "hashHas", "hashSet", "ListCache", "listCacheClear", "listCacheDelete", "assocIndexOf", "lastIndex", "listCacheGet", "listCacheHas", "listCacheSet", "MapCache", "mapCacheClear", "mapCacheDelete", "getMapData", "mapCacheGet", "mapCacheHas", "mapCacheSet", "SetCache", "values", "setCacheAdd", "setCacheHas", "Stack", "stackClear", "stackDelete", "stackGet", "stackHas", "stackSet", "cache", "pairs", "arrayLikeKeys", "inherited", "isArray", "isArguments", "skipIndexes", "isIndex", "eq", "baseAggregator", "collection", "baseEach", "createBaseEach", "baseForOwn", "baseFor", "createBaseFor", "keys", "baseGet", "path", "isKey", "castPath", "toKey", "baseGetTag", "baseHasIn", "baseIsEqual", "other", "customizer", "bitmask", "stack", "isObject", "isObjectLike", "baseIsEqualDeep", "equalFunc", "objIsArr", "othIsArr", "objTag", "othTag", "getTag", "objIsObj", "othIsObj", "isSameTag", "isTypedArray", "equalArrays", "equalByTag", "objIsWrapped", "othIsWrapped", "objUnwrapped", "othUnwrapped", "equalObjects", "baseIsMatch", "source", "matchData", "noCustomizer", "objValue", "srcValue", "baseIsNative", "isMasked", "pattern", "isFunction", "baseIsTypedArray", "isLength", "baseIteratee", "identity", "baseMatchesProperty", "baseMatches", "property", "baseKeys", "isPrototype", "getMatchData", "matchesStrictComparable", "isStrictComparable", "get", "hasIn", "basePropertyDeep", "baseToString", "isSymbol", "stringToPath", "createAggregator", "initializer", "eachFunc", "fromRight", "isArrayLike", "iterable", "keysFunc", "props", "isPartial", "arrLength", "othLength", "stacked", "seen", "arrValue", "othValue", "compared", "othIndex", "tag", "convert", "objProps", "objLength", "othProps", "skipCtor", "objCtor", "othCtor", "isKeyable", "Ctor", "ctorString", "hasPath", "hasFunc", "type", "proto", "memoize", "string", "toString", "match", "number", "quote", "groupBy", "resolver", "memoized", "args", "isArrayLikeObject", "defaultValue", "require_stackblur", "__commonJSMin", "exports", "module", "mul_table", "shg_table", "blur", "pixels", "width", "height", "radius", "x", "y", "i", "p", "yp", "yi", "yw", "r_sum", "g_sum", "b_sum", "a_sum", "r_out_sum", "g_out_sum", "b_out_sum", "a_out_sum", "r_in_sum", "g_in_sum", "b_in_sum", "a_in_sum", "pr", "pg", "pb", "pa", "rbs", "div", "w4", "widthMinus1", "heightMinus1", "radiusPlus1", "sumFactor", "stackStart", "BlurStack", "stack", "stackEnd", "stackIn", "stackOut", "mul_sum", "shg_sum", "vg_exports", "__export", "CLOSE", "CURVETO", "Color", "EAST", "Group", "HORIZONTAL", "LINETO", "MOVETO", "Matrix4", "NORTH", "Path", "Point", "QUADTO", "Rect", "SOUTH", "Text", "Transform", "VERTICAL", "Vec3", "WEST", "_angleToPoint", "_compoundPathKit", "_compoundToPoints", "_distanceToPoint", "_locate", "_wiggleContours", "_wigglePaths", "_wigglePoints", "_x", "_y", "align", "angle", "arc", "bounds", "centerPoint", "clamp", "colorize", "combinePaths", "compound", "connectPoints", "coordinates", "copy", "curve", "curveLength", "curvePoint", "degrees", "deletePaths", "deletePoints", "delete_", "demoEllipse", "demoRect", "distance", "dot", "draw", "drawColoredPoints", "drawColors", "drawPoints", "drawRectangles", "ellipse", "extrema", "fit", "fitTo", "freehand", "grid", "group", "hex2rgb", "hsb2rgb", "hsl2rgb", "interpret", "isDrawable", "length", "lerp", "line", "lineAngle", "lineLength", "linePoint", "link", "makeCenteredRect", "makePoint", "makeRect", "merge", "mirror", "mix", "namedColors", "noise", "nonEmpty", "parseString", "pathLength", "point", "pointInPolygon", "pointOnPath", "polygon", "quad", "radians", "rect", "resampleByAmount", "resampleByLength", "rgb2hex", "rgb2hsb", "rgb2hsl", "rgba2hex", "rotate", "round", "roundedRect", "roundedSegments", "scale", "scatterPoints", "segmentLengths", "shapeOnPath", "shapePoints", "shapeSort", "sign", "skew", "snap", "snapShape", "star", "stripCommas", "sum", "text", "toPoints", "toSVG", "translate", "ungroup", "wiggleContours", "wigglePaths", "wigglePoints", "sum", "values", "i", "n", "total", "round", "x", "decimals", "sign", "degrees", "radians", "clamp", "v", "min", "max", "snap", "distance", "strength", "dot", "a", "b", "m", "lerp", "from", "to", "t", "mix", "_fade", "_grad", "hash", "y", "z", "h", "u", "_scale", "_permutation", "permutation", "p", "noise", "X", "Y", "Z", "w", "A", "AA", "AB", "B", "BA", "BB", "Point", "x", "y", "arg", "v", "n", "dx", "dy", "m", "speed", "tx", "ty", "sx", "sy", "Rect", "x", "y", "width", "height", "r", "dx", "dy", "_x", "_y", "Point", "MOVETO", "LINETO", "QUADTO", "CURVETO", "CLOSE", "linePoint", "x0", "y0", "x1", "y1", "x", "y", "lineLength", "a", "b", "curvePoint", "x2", "y2", "x3", "y3", "dt", "x01", "y01", "x12", "y12", "x23", "y23", "h1x", "h1y", "h2x", "h2y", "curveLength", "n", "i", "t", "cmd", "length", "xi", "yi", "segmentLengths", "commands", "relative", "type", "closeX", "closeY", "s", "lengths", "ll", "sum", "path", "_locate", "closeTo", "Point", "point", "loc", "fuzzyCompare", "p1", "p2", "coefficients", "mT", "c", "d", "pointAt", "x4", "y4", "coeff", "extrema", "minX", "maxX", "minY", "maxY", "ax", "bx", "cx", "ay", "by", "cy", "temp", "rcp", "tx", "ty", "bezierCheck", "p", "Rect", "namedColors", "toHex", "i", "s", "rgb2hex", "r", "g", "b", "rgba2hex", "a", "hex2rgb", "hex", "rgb2hsb", "h", "v", "d", "hsb2rgb", "f", "x", "y", "z", "rgb2hsl", "min", "max", "delta", "l", "hsl2rgb", "t1", "t2", "t3", "rgb", "val", "angle", "x0", "y0", "x1", "y1", "degrees", "distance", "coordinates", "x", "radians", "y", "Point", "pointInPolygon", "points", "i", "j", "odd", "n", "import_xmldom", "math_exports", "__export", "abs", "accumulate", "add", "and", "average", "boolean", "ceil", "clamp", "compare", "cos", "degrees", "divide", "e", "even", "floor", "integer", "log", "makeNumbers", "max", "min", "mod", "multiply", "negate", "not", "number", "odd", "or", "perlinNoise", "pi", "pow", "radians", "randomNumbers", "range", "round", "sample", "sawtoothWave", "sign", "sin", "sineWave", "sqrt", "squareWave", "subtract", "tan", "total", "triangleWave", "xor", "generator", "seed", "gen", "i", "min", "max", "v", "TWO_PI", "abs", "_checkIfFirstArgIsArray", "args", "accumulate", "result", "sum", "i", "add", "a", "b", "and", "argLength", "average", "boolean", "v", "ceil", "clamp", "min", "max", "compare", "v1", "v2", "comparator", "cos", "degrees", "radians", "divide", "checkIfZero", "arg", "e", "even", "floor", "integer", "log", "makeNumbers", "s", "separator", "num", "numbers", "strings", "mod", "multiply", "negate", "not", "bool", "number", "odd", "or", "perlinNoise", "x", "y", "z", "noise", "pi", "pow", "randomNumbers", "amount", "seed", "tmp", "delta", "rand", "generator", "range", "step", "includeMax", "values", "round", "sample", "circular", "d", "sineWave", "period", "offset", "amplitude", "squareWave", "halfPeriod", "triangleWave", "frequency", "phase", "time", "sawtoothWave", "sign", "sin", "sqrt", "subtract", "total", "tan", "xor", "bool1", "bool2", "defineAlias", "cls", "origProperty", "newProperty", "v", "defineGetter", "property", "getterFn", "HSB", "HSL", "HEX", "Color", "v1", "v2", "v3", "v4", "v5", "_r", "_g", "_b", "_a", "rgb", "options", "hex2rgb", "clamp", "hsb2rgb", "hsl2rgb", "c", "r255", "g255", "b255", "ignoreAlpha", "s", "startsWith", "value", "m", "namedColors", "gray", "alpha", "range", "red", "green", "blue", "hue", "saturation", "brightness", "lightness", "rCoeff", "gCoeff", "bCoeff", "defineAlias", "defineGetter", "rgb2hsl", "rgb2hsb", "rgb2hex", "rgba2hex", "util_exports", "__export", "flatten", "arg", "arr", "args", "i", "o", "j", "CLOSE_COMMAND", "CLOSE", "KAPPA", "_roundCoord", "n", "fractionDigits", "_cloneCommand", "cmd", "newCmd", "QUADTO", "CURVETO", "Path", "commands", "fill", "stroke", "strokeWidth", "shapes", "flatten", "shape", "p", "i", "Color", "commandsOrPath", "x", "y", "MOVETO", "LINETO", "x1", "y1", "x2", "y2", "prevX", "prevY", "cp1x", "cp1y", "cp2x", "cp2y", "width", "height", "cx", "cy", "rx", "ry", "ONE_MINUS_QUARTER", "dx", "dy", "left", "right", "top", "bottom", "x0", "y0", "x3", "y3", "x4", "y4", "startAngle", "degrees", "arcType", "w", "h", "angStRad", "ext", "arcSegs", "increment", "cv", "lineSegs", "index", "angle", "relX", "relY", "coords", "radians", "options", "args", "contours", "currentContour", "Rect", "px", "py", "prev", "minX", "minY", "maxX", "maxY", "r", "extrema", "t", "segmentLengths", "point", "amount", "start", "end", "d", "pts", "precision", "length", "points", "pointInPolygon", "perContour", "subPaths", "j", "subPath", "segmentLength", "force", "contourLength", "clamp", "svg", "style", "fillOpacity", "strokeOpacity", "ctx", "nCommands", "Group", "shapes", "shape", "newShapes", "n", "i", "options", "args", "Color", "Rect", "x", "y", "precision", "sum", "points", "perContour", "path", "Path", "length", "l", "ctx", "nShapes", "Transform", "m", "a", "b", "matrix", "d", "x", "y", "angle", "c", "radians", "s", "kx", "ky", "point", "Point", "points", "transformedPoints", "i", "path", "commands", "l", "cmd", "MOVETO", "LINETO", "QUADTO", "CURVETO", "CLOSE", "Path", "text", "t", "group", "transformedShapes", "Group", "shape", "fn", "trim", "s", "compressSpaces", "toNumberArray", "i", "a", "readSvgAttributes", "node", "parentAttributes", "fill", "fillOpacity", "stroke", "strokeOpacity", "strokeWidth", "opacity", "color", "transforms", "types", "transform", "attributes", "tx", "ty", "Transform", "sx", "sy", "t", "r", "m", "data", "type", "d", "elems", "el", "j", "applySvgAttributes", "shape", "Color", "commands", "f", "sw", "Path", "arcToSegments", "x", "y", "rx", "ry", "large", "sweep", "rotateX", "ox", "oy", "th", "sinTh", "cosTh", "px", "py", "pl", "a00", "a01", "a10", "a11", "x0", "y0", "x1", "y1", "sFactorSq", "sFactor", "xc", "yc", "th0", "th1", "thArc", "segments", "result", "th2", "th3", "segmentToBezier", "cx", "cy", "thHalf", "x3", "y3", "x2", "y2", "read", "shapes", "n", "tag", "tagName", "o", "Group", "points", "p", "match", "p1", "p2", "width", "height", "PathParser", "pp", "pt", "newP", "curr", "cntrl", "cp", "cp1x", "cp1y", "cp2x", "cp2y", "rot", "ex", "ey", "segs", "bez", "Point", "interpret", "svgNode", "parseString", "doc", "key", "msg", "Vec3", "x", "y", "z", "a", "b", "array", "len", "c", "o", "matrix4", "w", "matrix", "Matrix4", "m", "fov", "aspect", "zNear", "zFar", "tan", "eye", "target", "up", "zAxis", "xAxis", "yAxis", "ex", "ey", "ez", "Vec3", "l1", "l2", "l3", "l4", "l5", "l6", "l7", "l8", "l9", "l10", "l11", "l12", "l13", "l14", "l15", "l16", "l17", "l18", "l19", "l20", "l21", "l22", "l23", "l24", "l25", "l26", "l27", "l28", "l29", "l30", "l31", "l32", "l33", "l34", "l35", "l36", "l37", "l38", "l39", "other", "tx", "ty", "tz", "_dummyContext", "Text", "text", "args", "secondArg", "thirdArg", "lastArg", "options", "Transform", "fontSize", "t", "Color", "fill", "ctx", "m", "metrics", "x", "Rect", "svg", "textAnchor", "Transformable", "position", "Point", "Transform", "scale", "origin", "sx", "sy", "t", "angle", "skew", "transformable_default", "isDrawable", "o", "drawPoints", "ctx", "points", "pt", "i", "drawColoredPoints", "n", "Color", "drawRectangles", "rectangles", "drawColors", "colors", "c", "draw", "k", "isArray", "toSVG", "options", "includeHeader", "x", "y", "width", "height", "svg", "import_js_clipper", "_cloneCommand", "cmd", "newCmd", "CLOSE", "QUADTO", "CURVETO", "HORIZONTAL", "VERTICAL", "EAST", "WEST", "NORTH", "SOUTH", "bounds", "o", "r", "i", "Rect", "makeCenteredRect", "cx", "cy", "width", "height", "x", "y", "makePoint", "Point", "makeRect", "merge", "args", "flatten", "shapes", "Group", "combinePaths", "shape", "Path", "toPoints", "commands", "points", "shapePoints", "colorize", "fill", "stroke", "strokeWidth", "translate", "position", "transformable_default", "scale", "origin", "rotate", "angle", "skew", "copy", "copies", "order", "t", "j", "op", "tx", "ty", "sx", "sy", "Transform", "fit", "stretch", "bx", "by", "bw", "bh", "fitTo", "bounding", "mirror", "keepOriginal", "newShape", "pathLength", "options", "precision", "resampleByLength", "maxLength", "resampleByAmount", "amount", "perContour", "_wigglePoints", "offset", "rand", "dx", "dy", "p", "MOVETO", "LINETO", "wShapes", "wPoints", "w", "wigglePoints", "seed", "generator", "_wiggleContours", "subPaths", "wiggleContours", "_wigglePaths", "subShape", "newShapes", "wigglePaths", "scatterPoints", "contourPath", "nrKeypoints", "tries", "inContourCount", "contours", "paths", "POINTS_PER_SEGMENT", "pointInPolygon", "connectPoints", "closed", "pt", "Color", "align", "hAlign", "vAlign", "snapShape", "distance", "strength", "center", "x1", "y1", "x2", "y2", "snap", "sShapes", "point", "sPoints", "s", "deletePoints", "invert", "newCurve", "dShapes", "d", "deletePaths", "selected", "subShapes", "delete_", "scope", "pointOnPath", "shapeOnPath", "path", "alignment", "spacing", "margin", "baselineOffset", "pos", "p1", "p2", "a", "length", "m", "c", "putOnPath", "_x", "_y", "_angleToPoint", "centerPoint", "_distanceToPoint", "shapeSort", "method", "methods", "b", "_a", "_b", "group", "ungroup", "link", "shape1", "shape2", "orientation", "hw", "hh", "compoundMethods", "ClipperLib", "_compoundToPoints", "l1", "l", "cmdToPathKit", "PathKit", "compoundOpsPathKit", "_compoundPathKit", "cmds1", "cmds2", "cmds", "compound", "contours1", "contours2", "subjPaths", "clipPaths", "cpr", "solutionPaths", "constructPath", "segments", "seg", "el", "roundedSegments", "newPoints", "prev", "next", "degrees", "c1", "coordinates", "c2", "roundedRect", "cx", "cy", "width", "height", "rx", "ry", "p", "Path", "quad", "pt1", "pt2", "pt3", "pt4", "args", "Point", "rect", "position", "roundness", "ellipse", "line", "point1", "point2", "lineAngle", "point", "angle", "distance", "coordinates", "arc", "startAngle", "degrees", "arcType", "curve", "t", "a", "q", "qx", "qy", "c1x", "c1y", "c2x", "c2y", "Color", "polygon", "radius", "sides", "align", "c0", "c1", "i", "c", "x", "y", "r", "da", "star", "points", "outer", "inner", "nonEmpty", "s", "stripCommas", "freehand", "pathString", "j", "values", "contours", "elems", "grid", "columns", "rows", "columnWidth", "rowHeight", "gridWidth", "left", "gridHeight", "top", "rowIndex", "colIndex", "text", "Text", "demoRect", "demoEllipse", "Point", "transformable_default", "Path", "Group", "Text", "string_exports", "__export", "characterAt", "concatenate", "endsWith", "reverse", "startsWith", "string", "stringContains", "stringEquals", "stringLength", "stringReplace", "stringSplit", "stringTrim", "substring", "toCharacterCodes", "toCharacters", "toLowerCase", "toTitleCase", "toUpperCase", "toWords", "wordCount", "s", "index", "result", "i", "value", "l", "sub", "string1", "string2", "ignoreCase", "old", "new_", "separator", "start", "end", "endOffset", "codes", "c", "split", "list_exports", "__export", "combine", "contains", "count", "cull", "cycle", "distinct", "equals", "first", "get", "interleave", "last", "pick", "randomSample", "repeat", "rest", "reverse", "second", "shift", "shuffle", "slice", "sort", "switch_", "takeEvery", "zipMap", "isBuffer", "isObject", "arg", "objectToString", "o", "isRegExp", "re", "isDate", "d", "isNullOrUndefined", "util", "pSlice", "isArguments", "objEquiv", "deepEqual", "actual", "expected", "i", "object", "a", "b", "aIsArgs", "bIsArgs", "ka", "kb", "key", "combine", "i", "l", "result", "contains", "value", "deepEqual", "cycle", "length", "newList", "ll", "equals", "o1", "o2", "count", "cull", "booleans", "keep", "results", "distinct", "seen", "first", "get", "interleave", "args", "elIndex", "arg", "last", "pick", "amount", "seed", "rand", "generator", "randomSample", "shuffledlist", "repeat", "perItem", "j", "v", "rest", "reverse", "second", "shift", "head", "shuffle", "tmp", "r", "slice", "start", "size", "invert", "firstList", "secondList", "sort", "key", "a", "b", "switch_", "index", "nLists", "takeEvery", "n", "offset", "zipMap", "keys", "vals", "k", "m", "minLength", "data_exports", "__export", "convert", "dataScale", "filterData", "groupBy", "keys", "lookup", "ticks", "import_lodash", "convert", "v", "inMin", "inMax", "outMin", "outMax", "argLength", "d", "filterData", "data", "key", "op", "value", "l", "row", "obj", "results", "groupBy", "values", "_groupBy", "keys", "allKeys", "i", "distinct", "lookup", "table", "token", "tokens", "dataScale", "domain", "ticks", "min", "max", "n", "span", "step", "err", "graphics_exports", "__export", "BOTH", "BOTTOM", "CENTER", "HORIZONTAL", "LEFT", "MIDDLE", "RIGHT", "TOP", "VERTICAL", "align", "angle", "colorize", "coordinates", "copy", "desaturate", "distance", "fit", "fitTo", "flip", "grayColor", "hexColor", "hslAdjust", "hslColor", "invert", "rgbAdjust", "rgbColor", "stack", "initialParams_default", "fn", "args", "callback", "hasQueueMicrotask", "hasSetImmediate", "hasNextTick", "fallback", "fn", "wrap", "defer", "args", "_defer", "setImmediate_default", "asyncify", "func", "isAsync", "args", "callback", "promise", "handlePromise", "initialParams_default", "result", "e", "value", "invokeCallback", "err", "error", "setImmediate_default", "isAsync", "fn", "isAsyncGenerator", "isAsyncIterable", "obj", "wrapAsync", "asyncFn", "asyncify", "wrapAsync_default", "awaitify", "asyncFn", "arity", "awaitable", "args", "resolve", "reject", "err", "cbArgs", "_asyncMap", "eachfn", "arr", "iteratee", "callback", "results", "counter", "_iteratee", "wrapAsync_default", "value", "_", "iterCb", "index", "err", "v", "isArrayLike", "value", "breakLoop", "breakLoop_default", "once", "fn", "wrapper", "args", "callFn", "getIterator_default", "coll", "createArrayIterator", "coll", "i", "len", "createES2015Iterator", "iterator", "item", "createObjectIterator", "obj", "okeys", "next", "key", "createIterator", "isArrayLike", "getIterator_default", "onlyOnce", "fn", "args", "callFn", "asyncEachOfLimit", "generator", "limit", "iteratee", "callback", "done", "canceled", "awaiting", "running", "idx", "replenish", "value", "iterDone", "iterateeCallback", "handleError", "err", "result", "breakLoop_default", "eachOfLimit_default", "limit", "obj", "iteratee", "callback", "once", "isAsyncGenerator", "asyncEachOfLimit", "isAsyncIterable", "nextElem", "createIterator", "done", "canceled", "running", "looping", "iterateeCallback", "err", "value", "breakLoop_default", "replenish", "elem", "onlyOnce", "eachOfLimit", "coll", "limit", "iteratee", "callback", "eachOfLimit_default", "wrapAsync_default", "awaitify", "eachOfArrayLike", "coll", "iteratee", "callback", "once", "index", "completed", "length", "canceled", "iteratorCallback", "err", "value", "breakLoop_default", "onlyOnce", "eachOfGeneric", "eachOfLimit_default", "eachOf", "eachOfImplementation", "isArrayLike", "wrapAsync_default", "eachOf_default", "awaitify", "map", "coll", "iteratee", "callback", "_asyncMap", "eachOf_default", "map_default", "awaitify", "eachOfSeries", "coll", "iteratee", "callback", "eachOfLimit_default", "eachOfSeries_default", "awaitify", "PROMISE_SYMBOL", "promiseCallback", "resolve", "reject", "callback", "err", "args", "res", "rej", "reduce", "coll", "memo", "iteratee", "callback", "once", "_iteratee", "wrapAsync_default", "eachOfSeries_default", "x", "i", "iterCb", "err", "v", "reduce_default", "awaitify", "seq", "functions", "_functions", "wrapAsync_default", "args", "that", "cb", "promiseCallback", "reduce_default", "newargs", "fn", "iterCb", "err", "nextargs", "results", "PROMISE_SYMBOL", "compose", "args", "seq", "radians", "degrees", "distance", "x0", "y0", "x1", "y1", "clamp", "val", "min", "max", "transform", "m", "_mmult", "a", "m0", "m1", "m2", "m3", "m4", "m5", "m6", "m7", "m8", "t", "x", "y", "kx", "ky", "angle", "c", "s", "point", "aliases", "addAliases", "d", "i", "mode", "alias", "modes", "realBlendMode", "getNativeModes", "darken", "ok", "nativeModes", "dCanvas", "ctx", "native", "maybeNative", "nonNative", "process", "inData", "outData", "width", "height", "options", "blend_fn", "sr", "sg", "sb", "sa", "dr", "dg", "db", "da", "or", "og", "ob", "oa", "max", "min", "div_2_255", "R", "G", "B", "rgbToHsy", "r", "g", "b", "h", "s", "y", "hsyToRgb", "k", "_sourceover", "_svg_sourceover", "_multiply", "_svg_multiply", "_subtract", "_svg_subtract", "_divide", "_screen", "_svg_screen", "_lighten", "_svg_lighten", "_darken", "_svg_darken", "_darkercolor", "_svg_darkercolor", "_lightercolor", "_svg_lightercolor", "_add", "_linearburn", "_difference", "_svg_difference", "_exclusion", "_svg_exclusion", "_overlay", "_svg_overlay", "_softlight", "_svg_softlight", "m", "pow", "_hardlight", "_svg_hardlight", "_colordodge", "dr1", "dg1", "db1", "_svg_colordodge", "_colorburn", "_svg_colorburn", "_linearlight", "_vividlight", "a", "_pinlight", "_hardmix", "_hue", "hcl1", "hcl2", "rgb", "_saturation", "_luminosity", "_color", "rectIntersect", "r1", "r2", "right1", "bottom1", "right2", "bottom2", "x", "w", "pix", "pixIn", "a2", "da2", "demultiply", "fBlend", "data2", "opacity", "fn", "dx", "dy", "ri", "xi", "yi", "wi", "hi", "pBlend", "sBlend", "_blend", "_wrap", "type", "blend", "blend_default", "import_stackblur", "LUMINOSITY_ITU_R_BT601", "LUMINOSITY_ITU_R_BT709", "defaultOptions", "options", "defaults", "opt", "o", "smoothstep", "a", "b", "x", "convolve3x3", "inData", "outData", "width", "height", "kernel", "alpha", "invert", "mono", "x", "y", "n", "idx", "r", "g", "b", "a", "pyc", "pyp", "pyn", "pxc", "pxp", "pxn", "k00", "k01", "k02", "k10", "k11", "k12", "k20", "k21", "k22", "p00", "p01", "p02", "p10", "p11", "p12", "p20", "p21", "p22", "convolve5x5", "pypp", "pynn", "pxpp", "pxnn", "k03", "k04", "k13", "k14", "k23", "k24", "k30", "k31", "k32", "k33", "k34", "k40", "k41", "k42", "k43", "k44", "p03", "p04", "p13", "p14", "p23", "p24", "p30", "p31", "p32", "p33", "p34", "p40", "p41", "p42", "p43", "p44", "gaussian", "kernelSize", "i", "j", "inx", "iny", "w", "tmpData", "maxKernelSize", "k1", "k2", "weights", "kernels", "clamp", "getPixel", "v", "setPixel", "rgba", "polar", "x0", "y0", "callback", "y1", "x1", "d", "process", "options", "defaultOptions", "contrast", "brightness", "brightMul", "brightAdd", "contrastAdd", "LUMINOSITY_ITU_R_BT601", "level", "rCoeff", "gCoeff", "bCoeff", "LUMINOSITY_ITU_R_BT709", "mul", "rnd", "amount", "strength", "random", "inPix", "outPix", "stackblur", "c", "angle", "a00", "a10", "a20", "a01", "a21", "a02", "a12", "a22", "gr1", "gr2", "gg1", "gg2", "gb1", "gb2", "data1", "data2", "ar", "ag", "ab", "aa", "luminosity", "min", "max", "h", "l", "h1", "chroma", "tmp", "m", "hue", "saturation", "lightness", "satMul", "lightMul", "lightAdd", "vs", "ms", "vm", "s", "vmh", "sextant", "numLevels", "numAreas", "numValues", "minR", "minG", "minB", "maxR", "maxG", "maxB", "blockSize", "yBlocks", "xBlocks", "pidx", "bidx", "bi", "bj", "prog", "lastProg", "p", "ratio", "round", "pdf", "cdf", "data", "m1", "m2", "smoothstep", "distance", "radians", "process_default", "nativeBlendModes", "blend_default", "createImageData", "ctx", "width", "height", "CanvasRenderer", "canvas", "img", "iCanvas", "layer", "grd", "x1", "y1", "x2", "y2", "cx", "cy", "data", "type", "rotateDegrees", "filters", "filter", "tmpData", "inData", "outData", "i", "process_default", "mask", "c", "maskFilter", "layerImage", "maskedImage", "transformLayer", "m", "transformRect", "pt", "minx", "miny", "maxx", "maxy", "p1", "p2", "p3", "p4", "points", "t", "transform", "rectIntersect", "r1", "r2", "right1", "bottom1", "right2", "bottom2", "x", "y", "w", "h", "calcLayerRect", "rect", "getTransformedLayerData", "layerData", "blendMode", "blendData", "layerOptions", "baseData", "Renderer", "mode", "useNative", "currentList", "renderPipe", "pushList", "fn", "layerImages", "d", "layerImg", "bwFilter", "canvasrenderer_default", "passThrough", "canvas", "callback", "AsyncRenderer", "canvasrenderer_default", "iCanvas", "layer", "src", "_", "ctx", "source", "img", "filters", "mask", "c", "data", "maskFilter", "fn", "processLayers", "compose", "layerData", "renderPipe", "cb", "map_default", "err", "layerImages", "bwFilter", "asyncrenderer_default", "DEFAULT_WIDTH", "DEFAULT_HEIGHT", "TYPE_PATH", "TYPE_IMAGE", "TYPE_HTML_CANVAS", "TYPE_IMAGE_CANVAS", "TYPE_FILL", "TYPE_GRADIENT", "IDENTITY_TRANSFORM", "transform", "Transform", "colors", "toColor", "v1", "v2", "v3", "v4", "v5", "_r", "_g", "_b", "_a", "R", "G", "B", "rgb", "options", "toGradientData", "startColor", "endColor", "type", "rotation", "spread", "d", "data", "clamp", "findType", "ImageCanvas", "Layer", "cloneFilter", "filter", "key", "value", "f", "optionsKeys", "i", "opacity", "tx", "ty", "t", "sx", "sy", "rot", "kx", "ky", "arg", "ctx", "width", "height", "canvas", "filename", "image", "iCanvas", "color", "Pixels", "v", "rgba", "c", "arg0", "layer", "callback", "renderer", "asyncrenderer_default", "canvasrenderer_default", "isPoint", "pointFromArray", "x", "y", "pointFromNumber", "isValidArg", "convertArg", "Img", "n", "position", "args", "angle", "o", "scale", "s", "skew", "k", "p1", "p2", "p3", "p4", "points", "pt", "minx", "miny", "maxx", "maxy", "colorLayer", "bounding", "rectIntersect", "r1", "r2", "right1", "bottom1", "right2", "bottom2", "w", "h", "iBounds", "bounds", "ri", "l1", "m", "copyTransformations", "b", "cropped", "HORIZONTAL", "VERTICAL", "BOTH", "LEFT", "RIGHT", "CENTER", "TOP", "BOTTOM", "MIDDLE", "clamp", "val", "min", "max", "transformShape", "shape", "t", "transformImage", "image", "transform", "Path", "Group", "Text", "l", "i", "Img", "align", "position", "hAlign", "vAlign", "dx", "dy", "x", "y", "bnds", "bounds", "Transform", "colorize", "options", "args", "Color", "copy", "copies", "order", "translate", "rotate", "scale", "j", "op", "fn", "shapes", "tx", "ty", "r", "sx", "sy", "isListOfPoints", "flip", "axis", "Point", "centerPoint", "layer", "fit", "width", "height", "stretch", "bx", "by", "bw", "bh", "fitTo", "bounding", "hslAdjust", "v", "hue", "saturation", "lightness", "alpha", "satMul", "lightMul", "lightAdd", "g", "b", "vs", "ms", "vm", "h", "s", "m", "vmh", "sextant", "v1", "newShapes", "p", "c", "rgbAdjust", "red", "green", "blue", "stack", "direction", "margin", "firstBounds", "angle", "point1", "point2", "degrees", "coordinates", "point", "distance", "grayColor", "gray", "hexColor", "isNumeric", "n", "hslColor", "rgbColor", "desaturate", "method", "invert", "easing_exports", "__export", "easeInBack", "easeInBounce", "easeInCirc", "easeInCubic", "easeInElastic", "easeInExpo", "easeInOutBack", "easeInOutBounce", "easeInOutCirc", "easeInOutCubic", "easeInOutElastic", "easeInOutExpo", "easeInOutQuad", "easeInOutQuart", "easeInOutQuint", "easeInOutSine", "easeInQuad", "easeInQuart", "easeInQuint", "easeInSine", "easeOutBack", "easeOutBounce", "easeOutCirc", "easeOutCubic", "easeOutElastic", "easeOutExpo", "easeOutQuad", "easeOutQuart", "easeOutQuint", "easeOutSine", "easing", "b", "c", "d", "s", "p", "a", "f", "fn", "args", "importImage", "image", "layer", "g", "importText", "string", "splitRow", "s", "delimiter", "row", "c", "col", "i", "inString", "importCSV", "csvString", "csvRows", "header", "rows", "m", "sr", "index", "merge", "args", "flatten", "objects", "o", "mix", "a", "b", "t", "result", "keys", "n", "k", "va", "vb", "vg_exports", "util_exports", "math_exports", "string_exports", "list_exports", "data_exports", "graphics_exports", "easing_exports", "g_default"]
}
